---
title: "deploy"
order: 0
nestedTo: /cli/commands
---

# Overview and basic usage

### deploy

Deploys your stack to AWS.

If the stack doesn't exist, it creates a new one. If it already exists, it updates it. This command requires a valid
Stacktape configuration file (`stacktape.yml`) in the current directory, or you can specify a path using the
`--configPath` option.

<br />

{/* WRITE ONLY BELOW THIS LINE */}

{/* WRITE ONLY ABOVE THIS LINE */}

```bash
stacktape deploy --stage <<stage>> --region <<region>>
```

# API reference

<CliCommandsApiReference
  command="deploy"
  sortedArgs={[
    {
      description:
        "#### AWS Region\n\n---\n\nThe AWS region for the operation. For a list of available regions, see the [AWS documentation](https://docs.aws.amazon.com/general/latest/gr/rande.html).",
      allowedTypes: ["string"],
      allowedValues: [
        "af-south-1",
        "ap-east-1",
        "ap-northeast-1",
        "ap-northeast-2",
        "ap-northeast-3",
        "ap-south-1",
        "ap-southeast-1",
        "ap-southeast-2",
        "ca-central-1",
        "eu-central-1",
        "eu-north-1",
        "eu-south-1",
        "eu-west-1",
        "eu-west-2",
        "eu-west-3",
        "me-south-1",
        "sa-east-1",
        "us-east-1",
        "us-east-2",
        "us-west-1",
        "us-west-2"
      ],
      alias: "r",
      required: true,
      name: "region",
      shortDescription: "<p> AWS Region</p>\n",
      longDescription:
        '<p>The AWS region for the operation. For a list of available regions, see the <a href="https://docs.aws.amazon.com/general/latest/gr/rande.html" style="font-weight: bold;" target="_blank" rel="noreferrer" onclick="event.stopPropagation();">AWS documentation</a>.</p>\n'
    },
    {
      description:
        "#### Stage\n\n---\n\nThe stage for the operation (e.g., `production`, `staging`, `dev-john`). You can set a default stage using the `defaults:configure` command. The maximum length is 12 characters.",
      allowedTypes: ["string"],
      alias: "s",
      required: true,
      name: "stage",
      shortDescription: "<p> Stage</p>\n",
      longDescription:
        "<p>The stage for the operation (e.g., <code>production</code>, <code>staging</code>, <code>dev-john</code>). You can set a default stage using the <code>defaults:configure</code> command. The maximum length is 12 characters.</p>\n"
    },
    {
      description:
        "#### Auto-Confirm Operation\n\n---\n\nIf `true`, automatically confirms prompts during `deploy` or `delete` operations, skipping the manual confirmation step.",
      allowedTypes: ["boolean"],
      alias: "aco",
      required: false,
      name: "autoConfirmOperation",
      shortDescription: "<p> Auto-Confirm Operation</p>\n",
      longDescription:
        "<p>If <code>true</code>, automatically confirms prompts during <code>deploy</code> or <code>delete</code> operations, skipping the manual confirmation step.</p>\n"
    },
    {
      description:
        "#### AWS Account\n\n---\n\nThe name of the AWS account to use for the operation. The account must first be connected in the [Stacktape console](https://console.stacktape.com/aws-accounts).",
      allowedTypes: ["string"],
      alias: "aa",
      required: false,
      name: "awsAccount",
      shortDescription: "<p> AWS Account</p>\n",
      longDescription:
        '<p>The name of the AWS account to use for the operation. The account must first be connected in the <a href="https://console.stacktape.com/aws-accounts" style="font-weight: bold;" target="_blank" rel="noreferrer" onclick="event.stopPropagation();">Stacktape console</a>.</p>\n'
    },
    {
      description:
        "#### Config File Path\n\n---\n\nThe path to your Stacktape configuration file, relative to the current working directory.",
      allowedTypes: ["string"],
      alias: "cp",
      required: false,
      name: "configPath",
      shortDescription: "<p> Config File Path</p>\n",
      longDescription:
        "<p>The path to your Stacktape configuration file, relative to the current working directory.</p>\n"
    },
    {
      description:
        "#### Current Working Directory\n\n---\n\nThe working directory for the operation. All file paths in your configuration will be resolved relative to this directory. By default, this is the directory containing the configuration file.",
      allowedTypes: ["string"],
      alias: "cwd",
      required: false,
      name: "currentWorkingDirectory",
      shortDescription: "<p> Current Working Directory</p>\n",
      longDescription:
        "<p>The working directory for the operation. All file paths in your configuration will be resolved relative to this directory. By default, this is the directory containing the configuration file.</p>\n"
    },
    {
      description:
        "#### Disable Auto-Rollback\n\n---\n\nIf `true`, disables automatic rollback on deployment failure.\n\n- **With auto-rollback (default):** If a deployment fails, the stack is automatically rolled back to the last known good state.\n- **Without auto-rollback:** If a deployment fails, the stack remains in the `UPDATE_FAILED` state. You can then either fix the issues and redeploy or manually roll back using the `stacktape rollback` command.",
      allowedTypes: ["boolean"],
      alias: "dar",
      required: false,
      name: "disableAutoRollback",
      shortDescription: "<p> Disable Auto-Rollback</p>\n",
      longDescription:
        "<p>If <code>true</code>, disables automatic rollback on deployment failure.</p>\n<ul>\n<li><strong>With auto-rollback (default):</strong> If a deployment fails, the stack is automatically rolled back to the last known good state.</li>\n<li><strong>Without auto-rollback:</strong> If a deployment fails, the stack remains in the <code>UPDATE_FAILED</code> state. You can then either fix the issues and redeploy or manually roll back using the <code>stacktape rollback</code> command.</li>\n</ul>\n"
    },
    {
      description:
        "#### Disable Drift Detection\n\n---\n\nDisables detection of manual changes (drift) made to the stack outside of CloudFormation (e.g., via the AWS console or CLI). By default, Stacktape blocks updates to a stack that has drifted.",
      allowedTypes: ["boolean"],
      alias: "ddd",
      required: false,
      name: "disableDriftDetection",
      shortDescription: "<p> Disable Drift Detection</p>\n",
      longDescription:
        "<p>Disables detection of manual changes (drift) made to the stack outside of CloudFormation (e.g., via the AWS console or CLI). By default, Stacktape blocks updates to a stack that has drifted.</p>\n"
    },
    {
      description:
        "#### Docker Arguments\n\n---\n\nAdditional arguments to pass to the `docker run` or `docker build` commands.",
      allowedTypes: ["array"],
      alias: "da",
      required: false,
      name: "dockerArgs",
      shortDescription: "<p> Docker Arguments</p>\n",
      longDescription:
        "<p>Additional arguments to pass to the <code>docker run</code> or <code>docker build</code> commands.</p>\n"
    },
    {
      description:
        "#### Show Help\n\n---\n\nIf provided, the command will not execute and will instead print help information.",
      allowedTypes: ["string"],
      alias: "h",
      required: false,
      name: "help",
      shortDescription: "<p> Show Help</p>\n",
      longDescription: "<p>If provided, the command will not execute and will instead print help information.</p>\n"
    },
    {
      description:
        "#### Hotswap\n\n---\n\nIf `true`, attempts a faster deployment for code-only changes by updating `functions` and `multi-container-workloads` directly, without using CloudFormation. This is recommended only for development stacks. Hotswap will only be used if all stack changes are hot-swappable.",
      allowedTypes: ["boolean"],
      alias: "hs",
      required: false,
      name: "hotSwap",
      shortDescription: "<p> Hotswap</p>\n",
      longDescription:
        "<p>If <code>true</code>, attempts a faster deployment for code-only changes by updating <code>functions</code> and <code>multi-container-workloads</code> directly, without using CloudFormation. This is recommended only for development stacks. Hotswap will only be used if all stack changes are hot-swappable.</p>\n"
    },
    {
      description:
        "#### Log Format\n\n---\n\nThe format of logs printed to the console.\n\n- `fancy`: Colorized and dynamically re-rendered logs.\n- `normal`: Colorized but not dynamically re-rendered logs.\n- `basic`: Simple text only.\n- `json`: Logs printed as JSON objects.",
      allowedTypes: ["string"],
      allowedValues: ["basic", "fancy", "json", "normal"],
      alias: "lf",
      required: false,
      name: "logFormat",
      shortDescription: "<p> Log Format</p>\n",
      longDescription:
        "<p>The format of logs printed to the console.</p>\n<ul>\n<li><code>fancy</code>: Colorized and dynamically re-rendered logs.</li>\n<li><code>normal</code>: Colorized but not dynamically re-rendered logs.</li>\n<li><code>basic</code>: Simple text only.</li>\n<li><code>json</code>: Logs printed as JSON objects.</li>\n</ul>\n"
    },
    {
      description:
        "#### Log Level\n\n---\n\nThe level of logs to print to the console.\n\n- `info`: Basic information about the operation.\n- `error`: Only errors.\n- `debug`: Detailed information for debugging.",
      allowedTypes: ["string"],
      allowedValues: ["debug", "error", "info"],
      alias: "ll",
      required: false,
      name: "logLevel",
      shortDescription: "<p> Log Level</p>\n",
      longDescription:
        "<p>The level of logs to print to the console.</p>\n<ul>\n<li><code>info</code>: Basic information about the operation.</li>\n<li><code>error</code>: Only errors.</li>\n<li><code>debug</code>: Detailed information for debugging.</li>\n</ul>\n"
    },
    {
      description:
        "#### No Cache\n\n---\n\nIf `true`, disables the use of cached artifacts and forces a fresh build of compute resources.",
      allowedTypes: ["boolean"],
      alias: "nc",
      required: false,
      name: "noCache",
      shortDescription: "<p> No Cache</p>\n",
      longDescription:
        "<p>If <code>true</code>, disables the use of cached artifacts and forces a fresh build of compute resources.</p>\n"
    },
    {
      description:
        "#### Preserve Temporary Files\n\n---\n\nIf `true`, preserves the temporary files generated by the operation, such as the CloudFormation template and packaged resources. These files are saved to `.stacktape/[invocation-id]`.",
      allowedTypes: ["boolean"],
      alias: "ptf",
      required: false,
      name: "preserveTempFiles",
      shortDescription: "<p> Preserve Temporary Files</p>\n",
      longDescription:
        "<p>If <code>true</code>, preserves the temporary files generated by the operation, such as the CloudFormation template and packaged resources. These files are saved to <code>.stacktape/[invocation-id]</code>.</p>\n"
    },
    {
      description:
        "#### AWS Profile\n\n---\n\nThe AWS profile to use for the command. You can manage profiles using the `aws-profile:*` commands and set a default profile with `defaults:configure`.",
      allowedTypes: ["string"],
      alias: "p",
      required: false,
      name: "profile",
      shortDescription: "<p> AWS Profile</p>\n",
      longDescription:
        "<p>The AWS profile to use for the command. You can manage profiles using the <code>aws-profile:*</code> commands and set a default profile with <code>defaults:configure</code>.</p>\n"
    },
    {
      description: "#### Project Name\n\n---\n\nThe name of the Stacktape project for this operation.",
      allowedTypes: ["string"],
      alias: "prj",
      required: false,
      name: "projectName",
      shortDescription: "<p> Project Name</p>\n",
      longDescription: "<p>The name of the Stacktape project for this operation.</p>\n"
    },
    {
      description:
        "#### Show Sensitive Values\n\n---\n\nIf `true`, includes sensitive values in the output of the `stack:info` and `deploy` commands. Be cautious when using this flag, as mishandling sensitive data can create security risks.",
      allowedTypes: ["boolean"],
      alias: "ssv",
      required: false,
      name: "showSensitiveValues",
      shortDescription: "<p> Show Sensitive Values</p>\n",
      longDescription:
        "<p>If <code>true</code>, includes sensitive values in the output of the <code>stack:info</code> and <code>deploy</code> commands. Be cautious when using this flag, as mishandling sensitive data can create security risks.</p>\n"
    },
    {
      description:
        "#### Template ID\n\n---\n\nThe ID of the template to download. You can find a list of available templates on the [Config Builder page](https://console.stacktape.com/templates).",
      allowedTypes: ["string"],
      alias: "ti",
      required: false,
      name: "templateId",
      shortDescription: "<p> Template ID</p>\n",
      longDescription:
        '<p>The ID of the template to download. You can find a list of available templates on the <a href="https://console.stacktape.com/templates" style="font-weight: bold;" target="_blank" rel="noreferrer" onclick="event.stopPropagation();">Config Builder page</a>.</p>\n'
    }
  ]}
/>
