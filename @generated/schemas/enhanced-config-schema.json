{"type":"object","properties":{"serviceName":{"description":"#### The name of this service.\n\n---\n\n> **Deprecated:** Use the `--projectName` option in the CLI instead.\n\nThe CloudFormation stack name will be in the format: `{serviceName}-{stage}`.\n\nMust be alphanumeric and can contain dashes. Must match the regex `[a-zA-Z][-a-zA-Z0-9]*`.","type":"string","_MdxDesc":{"sd":"<p> The name of this service.</p>\n","ld":"<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Deprecated:</strong> Use the <code>--projectName</code> option in the CLI instead.</p>\n</div>\n</div><p>The CloudFormation stack name will be in the format: <code>{serviceName}-{stage}</code>.</p>\n<p>Must be alphanumeric and can contain dashes. Must match the regex <code>[a-zA-Z][-a-zA-Z0-9]*</code>.</p>\n"}},"providerConfig":{"description":"#### Configuration for 3rd-party service providers.","type":"object","properties":{"mongoDbAtlas":{"$ref":"#/definitions/MongoDbAtlasProvider"},"upstash":{"$ref":"#/definitions/UpstashProvider"}},"additionalProperties":false,"_MdxDesc":{"sd":"<p> Configuration for 3rd-party service providers.</p>\n"}},"variables":{"description":"#### Defines variables that can be used throughout the configuration.\n\n---\n\nVariables can be accessed using the `$Var().{variable-name}` directive.\nThey are useful when you want to reuse the same value for multiple properties.\n\nExample: `dbAddress: $ResourceParam('myDatabase', 'host')`","type":"object","additionalProperties":{},"_MdxDesc":{"sd":"<p> Defines variables that can be used throughout the configuration.</p>\n","ld":"<p>Variables can be accessed using the <code>$Var().{variable-name}</code> directive.\nThey are useful when you want to reuse the same value for multiple properties.</p>\n<p>Example: <code>dbAddress: $ResourceParam('myDatabase', 'host')</code></p>\n"}},"budgetControl":{"$ref":"#/definitions/BudgetControl","description":"#### Configures a monthly budget and notifications for the stack.\n\n---\n\nBudget control allows you to monitor your spending and configure email notifications when cost thresholds are met.\nThe budget is reset at the beginning of each calendar month.","_MdxDesc":{"sd":"<p> Configures a monthly budget and notifications for the stack.</p>\n","ld":"<p>Budget control allows you to monitor your spending and configure email notifications when cost thresholds are met.\nThe budget is reset at the beginning of each calendar month.</p>\n"}},"hooks":{"$ref":"#/definitions/Hooks","description":"#### Configures hooks to be executed before or after specified commands.\n\n---\n\nHooks are used to automatically execute scripts from the `scripts` section.","_MdxDesc":{"sd":"<p> Configures hooks to be executed before or after specified commands.</p>\n","ld":"<p>Hooks are used to automatically execute scripts from the <code>scripts</code> section.</p>\n"}},"scripts":{"description":"#### A list of script definitions.\n\n---\n\nScripts allow you to specify and execute custom logic. Defining scripts in your Stacktape configuration offers several benefits:\n- They are easily reusable by all members of your team.\n- They can be executed automatically as part of lifecycle [hooks](https://docs.stacktape.com/configuration/hooks/) (e.g., before/after `deploy`/`delete`) or manually using the [`script:run` command](https://docs.stacktape.com/cli/commands/script-run/).\n- You can use the `connectTo` property to easily inject environment variables for connecting to your stack's resources.\n- You can leverage bastion scripts and tunneling to access resources that are only available within a VPC.\n\nThere are three types of scripts:\n1.  **`local-script`**: Executed locally on the same machine where the Stacktape command is run.\n2.  **`local-script-with-bastion-tunneling`**: Same as `local-script`, but connections to resources in the `connectTo` list are tunneled through a bastion host, allowing you to access VPC-only resources.\n3.  **`bastion-script`**: Executed on the bastion host itself.\n\nScripts can be either shell commands or files written in JavaScript, TypeScript, or Python.","type":"object","additionalProperties":{"anyOf":[{"$ref":"#/definitions/LocalScript"},{"$ref":"#/definitions/BastionScript"},{"$ref":"#/definitions/LocalScriptWithBastionTunneling"}]},"_MdxDesc":{"sd":"<p> A list of script definitions.</p>\n","ld":"<p>Scripts allow you to specify and execute custom logic. Defining scripts in your Stacktape configuration offers several benefits:</p>\n<ul>\n<li>They are easily reusable by all members of your team.</li>\n<li>They can be executed automatically as part of lifecycle <a href=\"/configuration/hooks/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">hooks</a> (e.g., before/after <code>deploy</code>/<code>delete</code>) or manually using the <a href=\"/cli/commands/script-run/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">`script:run` command</a>.</li>\n<li>You can use the <code>connectTo</code> property to easily inject environment variables for connecting to your stack&#39;s resources.</li>\n<li>You can leverage bastion scripts and tunneling to access resources that are only available within a VPC.</li>\n</ul>\n<p>There are three types of scripts:</p>\n<ol>\n<li><strong><code>local-script</code></strong>: Executed locally on the same machine where the Stacktape command is run.</li>\n<li><strong><code>local-script-with-bastion-tunneling</code></strong>: Same as <code>local-script</code>, but connections to resources in the <code>connectTo</code> list are tunneled through a bastion host, allowing you to access VPC-only resources.</li>\n<li><strong><code>bastion-script</code></strong>: Executed on the bastion host itself.</li>\n</ol>\n<p>Scripts can be either shell commands or files written in JavaScript, TypeScript, or Python.</p>\n"}},"directives":{"description":"#### Configures custom, user-defined directives for use in this configuration.\n\n---\n\nDirectives can be used to dynamically configure certain aspects of your stack.","type":"array","items":{"$ref":"#/definitions/DirectiveDefinition"},"_MdxDesc":{"sd":"<p> Configures custom, user-defined directives for use in this configuration.</p>\n","ld":"<p>Directives can be used to dynamically configure certain aspects of your stack.</p>\n"}},"deploymentConfig":{"$ref":"#/definitions/DeploymentConfig","description":"#### Configures deployment-related aspects for this stack.","_MdxDesc":{"sd":"<p> Configures deployment-related aspects for this stack.</p>\n"}},"stackConfig":{"$ref":"#/definitions/StackConfig","description":"#### Configures other, uncategorized aspects of this stack.","_MdxDesc":{"sd":"<p> Configures other, uncategorized aspects of this stack.</p>\n"}},"resources":{"description":"#### The infrastructure resources that make up your stack.\n\n---\n\nEach resource consists of multiple underlying AWS resources.\nTo see all resources in this stack, including their underlying CloudFormation resources, use the `stacktape stack-info --detailed` command.\nEach resource specified here counts towards your resource limit.","type":"object","additionalProperties":{"$ref":"#/definitions/StacktapeResourceDefinition"},"_MdxDesc":{"sd":"<p> The infrastructure resources that make up your stack.</p>\n","ld":"<p>Each resource consists of multiple underlying AWS resources.\nTo see all resources in this stack, including their underlying CloudFormation resources, use the <code>stacktape stack-info --detailed</code> command.\nEach resource specified here counts towards your resource limit.</p>\n"}},"cloudformationResources":{"description":"#### Raw CloudFormation resources that will be deployed in this stack.\n\n---\n\nThese resources will be merged with the resources managed by Stacktape.\nEach CloudFormation resource consists of a logical name and its definition.\n\nTo avoid logical name conflicts, you can see all logical names for resources deployed by Stacktape using the `stacktape stack-info --detailed` command.\nResources specified here do not count towards your resource limit.\n\nFor a list of all supported AWS CloudFormation resources, see the [AWS documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"$ref":"#/definitions/default"},"_MdxDesc":{"sd":"<p> Raw CloudFormation resources that will be deployed in this stack.</p>\n","ld":"<p>These resources will be merged with the resources managed by Stacktape.\nEach CloudFormation resource consists of a logical name and its definition.</p>\n<p>To avoid logical name conflicts, you can see all logical names for resources deployed by Stacktape using the <code>stacktape stack-info --detailed</code> command.\nResources specified here do not count towards your resource limit.</p>\n<p>For a list of all supported AWS CloudFormation resources, see the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["resources"],"definitions":{"MongoDbAtlasProvider":{"type":"object","properties":{"publicKey":{"description":"#### Your MongoDB Atlas public API key.\n\n---\n\nYou can get API keys for your organization by following the [guide in the docs](https://docs.stacktape.com/user-guides/mongo-db-atlas-credentials/).","type":"string","_MdxDesc":{"sd":"<p> Your MongoDB Atlas public API key.</p>\n","ld":"<p>You can get API keys for your organization by following the <a href=\"/user-guides/mongo-db-atlas-credentials/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">guide in the docs</a>.</p>\n"}},"privateKey":{"description":"#### Your MongoDB Atlas private API key.\n\n---\n\nYou can get API keys for your organization by following the [guide in the docs](https://docs.stacktape.com/user-guides/mongo-db-atlas-credentials/).\n\nFor security reasons, you should store your credentials as secrets. For more details, see the [secrets guide](https://docs.stacktape.com/resources/secrets/).","type":"string","_MdxDesc":{"sd":"<p> Your MongoDB Atlas private API key.</p>\n","ld":"<p>You can get API keys for your organization by following the <a href=\"/user-guides/mongo-db-atlas-credentials/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">guide in the docs</a>.</p>\n<p>For security reasons, you should store your credentials as secrets. For more details, see the <a href=\"/resources/secrets/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">secrets guide</a>.</p>\n"}},"organizationId":{"description":"#### Your MongoDB Atlas Organization ID.\n\n---\n\nYou can get the organization ID for your organization by following the [guide in the docs](https://docs.stacktape.com/user-guides/mongo-db-atlas-credentials/).","type":"string","_MdxDesc":{"sd":"<p> Your MongoDB Atlas Organization ID.</p>\n","ld":"<p>You can get the organization ID for your organization by following the <a href=\"/user-guides/mongo-db-atlas-credentials/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">guide in the docs</a>.</p>\n"}},"accessibility":{"$ref":"#/definitions/MongoDbAtlasAccessibility","description":"#### Configures the connectivity settings of the MongoDB Atlas project.\n\n---\n\nIf your stack contains a MongoDB Atlas cluster, Stacktape will automatically create a MongoDB Atlas Project for it.\nAll MongoDB Atlas clusters in your stack will be deployed within this project.\n\nNetwork connectivity to clusters is configured at the project level, so the accessibility settings defined here will apply to all MongoDB Atlas clusters in your stack.","_MdxDesc":{"sd":"<p> Configures the connectivity settings of the MongoDB Atlas project.</p>\n","ld":"<p>If your stack contains a MongoDB Atlas cluster, Stacktape will automatically create a MongoDB Atlas Project for it.\nAll MongoDB Atlas clusters in your stack will be deployed within this project.</p>\n<p>Network connectivity to clusters is configured at the project level, so the accessibility settings defined here will apply to all MongoDB Atlas clusters in your stack.</p>\n"}}},"additionalProperties":false},"MongoDbAtlasAccessibility":{"type":"object","properties":{"accessibilityMode":{"description":"#### Configures the accessibility mode for this database.\n\n---\n\nThe following modes are supported:\n\n- **`internet`**: The least restrictive mode. The database can be accessed from anywhere on the internet.\n- **`vpc`**: The database can only be accessed from resources within your VPC. This includes any [function](https://docs.stacktape.com/compute-resources/lambda-functions) (with `joinDefaultVpc: true`), [batch job](https://docs.stacktape.com/compute-resources/batch-jobs), or [container workload](https://docs.stacktape.com/compute-resources/multi-container-workloads) in your stack, provided they have the required credentials. IP addresses configured in `whitelistedIps` can also access the database.\n- **`scoping-workloads-in-vpc`**: Similar to `vpc` mode, but more restrictive. In addition to being in the same VPC, resources must have the necessary security group permissions to access the cluster. For functions, batch jobs, and container services, these permissions can be granted using the `connectTo` property in their respective configurations. IP addresses configured in `whitelistedIps` can also access the cluster.\n- **`whitelisted-ips-only`**: The cluster can only be accessed from the IP addresses and CIDR blocks listed in `whitelistedIps`.\n\nTo learn more about VPCs, see the [VPC documentation](https://docs.stacktape.com/user-guides/vpcs/).","default":"internet","enum":["internet","scoping-workloads-in-vpc","vpc","whitelisted-ips-only"],"type":"string","_MdxDesc":{"sd":"<p> Configures the accessibility mode for this database.</p>\n","ld":"<p>The following modes are supported:</p>\n<ul>\n<li><strong><code>internet</code></strong>: The least restrictive mode. The database can be accessed from anywhere on the internet.</li>\n<li><strong><code>vpc</code></strong>: The database can only be accessed from resources within your VPC. This includes any <a href=\"/compute-resources/lambda-functions/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">function</a> (with <code>joinDefaultVpc: true</code>), <a href=\"/compute-resources/batch-jobs/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">batch job</a>, or <a href=\"/compute-resources/multi-container-workloads/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">container workload</a> in your stack, provided they have the required credentials. IP addresses configured in <code>whitelistedIps</code> can also access the database.</li>\n<li><strong><code>scoping-workloads-in-vpc</code></strong>: Similar to <code>vpc</code> mode, but more restrictive. In addition to being in the same VPC, resources must have the necessary security group permissions to access the cluster. For functions, batch jobs, and container services, these permissions can be granted using the <code>connectTo</code> property in their respective configurations. IP addresses configured in <code>whitelistedIps</code> can also access the cluster.</li>\n<li><strong><code>whitelisted-ips-only</code></strong>: The cluster can only be accessed from the IP addresses and CIDR blocks listed in <code>whitelistedIps</code>.</li>\n</ul>\n<p>To learn more about VPCs, see the <a href=\"/user-guides/vpcs/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">VPC documentation</a>.</p>\n"}},"whitelistedIps":{"description":"#### A list of IP addresses or IP ranges (in CIDR format) that are allowed to access the cluster.\n\n---\n\nThe behavior of this property varies based on the `accessibilityMode`:\n- **`internet`**: This property has no effect, as the database is accessible from anywhere.\n- **`vpc`** and **`scoping-workloads-in-vpc`**: These IP addresses can be used to allow access from specific locations outside of the VPC (e.g., your office IP address).\n- **`whitelisted-ips-only`**: These are the only addresses that can access the database.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of IP addresses or IP ranges (in CIDR format) that are allowed to access the cluster.</p>\n","ld":"<p>The behavior of this property varies based on the <code>accessibilityMode</code>:</p>\n<ul>\n<li><strong><code>internet</code></strong>: This property has no effect, as the database is accessible from anywhere.</li>\n<li><strong><code>vpc</code></strong> and <strong><code>scoping-workloads-in-vpc</code></strong>: These IP addresses can be used to allow access from specific locations outside of the VPC (e.g., your office IP address).</li>\n<li><strong><code>whitelisted-ips-only</code></strong>: These are the only addresses that can access the database.</li>\n</ul>\n"}}},"additionalProperties":false,"required":["accessibilityMode"]},"UpstashProvider":{"type":"object","properties":{"accountEmail":{"description":"#### The email address associated with your Upstash account.\n\n---\n\nAll database operations (create, update, delete) will be performed on behalf of this account.","type":"string","_MdxDesc":{"sd":"<p> The email address associated with your Upstash account.</p>\n","ld":"<p>All database operations (create, update, delete) will be performed on behalf of this account.</p>\n"}},"apiKey":{"description":"#### The API key associated with your Upstash account or team.\n\n---\n\nYou can create an API key in the [Upstash console](https://console.upstash.com/account/api).","type":"string","_MdxDesc":{"sd":"<p> The API key associated with your Upstash account or team.</p>\n","ld":"<p>You can create an API key in the <a href=\"https://console.upstash.com/account/api\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Upstash console</a>.</p>\n"}}},"additionalProperties":false,"required":["accountEmail","apiKey"]},"BudgetControl":{"type":"object","properties":{"limit":{"description":"#### Budget Limit\n\n---\n\nThe total cost (in USD) that you want to track with this budget. Notification thresholds are calculated as a percentage of this limit.","type":"number","_MdxDesc":{"sd":"<p> Budget Limit</p>\n","ld":"<p>The total cost (in USD) that you want to track with this budget. Notification thresholds are calculated as a percentage of this limit.</p>\n"}},"notifications":{"description":"#### Budget Notifications\n\n---\n\nA list of notifications to send when a budget threshold is met.\n\nNotifications are sent via email and can be triggered based on either actual or forecasted spend. You can configure up to 5 notifications per stack.","type":"array","items":{"$ref":"#/definitions/BudgetNotification"},"_MdxDesc":{"sd":"<p> Budget Notifications</p>\n","ld":"<p>A list of notifications to send when a budget threshold is met.</p>\n<p>Notifications are sent via email and can be triggered based on either actual or forecasted spend. You can configure up to 5 notifications per stack.</p>\n"}}},"additionalProperties":false,"required":["limit"]},"BudgetNotification":{"type":"object","properties":{"budgetType":{"description":"#### Budget Type\n\n---\n\nDetermines whether the notification is based on `ACTUAL` or `FORECASTED` spend.\n\n- `ACTUAL`: Based on the costs you have already incurred this month.\n- `FORECASTED`: Based on a prediction of your total spend for the month.\n\n> **Note:** AWS requires about 5 weeks of usage data to generate accurate forecasts. Forecast-based notifications will not be triggered until sufficient historical data is available.","default":"ACTUAL","enum":["ACTUAL","FORECASTED"],"type":"string","_MdxDesc":{"sd":"<p> Budget Type</p>\n","ld":"<p>Determines whether the notification is based on <code>ACTUAL</code> or <code>FORECASTED</code> spend.</p>\n<ul>\n<li><code>ACTUAL</code>: Based on the costs you have already incurred this month.</li>\n<li><code>FORECASTED</code>: Based on a prediction of your total spend for the month.</li>\n</ul>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> AWS requires about 5 weeks of usage data to generate accurate forecasts. Forecast-based notifications will not be triggered until sufficient historical data is available.</p>\n</div>\n</div>"}},"thresholdPercentage":{"description":"#### Threshold Percentage\n\n---\n\nThe percentage of the budget limit at which the notification should be triggered.\n\nFor example, if the `limit` is $200 and `thresholdPercentage` is 80, the notification will be sent when the spend exceeds $160.","default":100,"type":"number","_MdxDesc":{"sd":"<p> Threshold Percentage</p>\n","ld":"<p>The percentage of the budget limit at which the notification should be triggered.</p>\n<p>For example, if the <code>limit</code> is $200 and <code>thresholdPercentage</code> is 80, the notification will be sent when the spend exceeds $160.</p>\n"}},"emails":{"description":"#### Email Recipients\n\n---\n\nA list of email addresses that will receive the notification. You can specify up to 10 recipients.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Email Recipients</p>\n","ld":"<p>A list of email addresses that will receive the notification. You can specify up to 10 recipients.</p>\n"}}},"additionalProperties":false,"required":["emails"]},"Hooks":{"type":"object","properties":{"beforeDeploy":{"description":"#### Before Deploy\n\n---\n\nA list of scripts to execute before the `deploy` and `codebuild:deploy` commands. When using `codebuild:deploy`, these hooks run in the CodeBuild environment, not on your local machine.","type":"array","items":{"$ref":"#/definitions/NamedScriptLifecycleHook"},"_MdxDesc":{"sd":"<p> Before Deploy</p>\n","ld":"<p>A list of scripts to execute before the <code>deploy</code> and <code>codebuild:deploy</code> commands. When using <code>codebuild:deploy</code>, these hooks run in the CodeBuild environment, not on your local machine.</p>\n"}},"afterDeploy":{"description":"#### After Deploy\n\n---\n\nA list of scripts to execute after the `deploy` and `codebuild:deploy` commands. When using `codebuild:deploy`, these hooks run in the CodeBuild environment, not on your local machine.","type":"array","items":{"$ref":"#/definitions/NamedScriptLifecycleHook"},"_MdxDesc":{"sd":"<p> After Deploy</p>\n","ld":"<p>A list of scripts to execute after the <code>deploy</code> and <code>codebuild:deploy</code> commands. When using <code>codebuild:deploy</code>, these hooks run in the CodeBuild environment, not on your local machine.</p>\n"}},"beforeDelete":{"description":"#### Before Delete\n\n---\n\nA list of scripts to execute before the `delete` command. These hooks only run if you provide the `--configPath` and `--stage` options when running the command.","type":"array","items":{"$ref":"#/definitions/NamedScriptLifecycleHook"},"_MdxDesc":{"sd":"<p> Before Delete</p>\n","ld":"<p>A list of scripts to execute before the <code>delete</code> command. These hooks only run if you provide the <code>--configPath</code> and <code>--stage</code> options when running the command.</p>\n"}},"afterDelete":{"description":"#### After Delete\n\n---\n\nA list of scripts to execute after the `delete` command. These hooks only run if you provide the `--configPath` and `--stage` options when running the command.","type":"array","items":{"$ref":"#/definitions/NamedScriptLifecycleHook"},"_MdxDesc":{"sd":"<p> After Delete</p>\n","ld":"<p>A list of scripts to execute after the <code>delete</code> command. These hooks only run if you provide the <code>--configPath</code> and <code>--stage</code> options when running the command.</p>\n"}},"beforeBucketSync":{"description":"#### Before Bucket Sync\n\n---\n\nA list of scripts to execute before the `bucket:sync` command.","type":"array","items":{"$ref":"#/definitions/NamedScriptLifecycleHook"},"_MdxDesc":{"sd":"<p> Before Bucket Sync</p>\n","ld":"<p>A list of scripts to execute before the <code>bucket:sync</code> command.</p>\n"}},"afterBucketSync":{"description":"#### After Bucket Sync\n\n---\n\nA list of scripts to execute after the `bucket:sync` command.","type":"array","items":{"$ref":"#/definitions/NamedScriptLifecycleHook"},"_MdxDesc":{"sd":"<p> After Bucket Sync</p>\n","ld":"<p>A list of scripts to execute after the <code>bucket:sync</code> command.</p>\n"}},"beforeDev":{"description":"#### Before Dev\n\n---\n\nA list of scripts to execute before the `dev` command.","type":"array","items":{"$ref":"#/definitions/NamedScriptLifecycleHook"},"_MdxDesc":{"sd":"<p> Before Dev</p>\n","ld":"<p>A list of scripts to execute before the <code>dev</code> command.</p>\n"}},"afterDev":{"description":"#### After Dev\n\n---\n\nA list of scripts to execute after the `dev` command.","type":"array","items":{"$ref":"#/definitions/NamedScriptLifecycleHook"},"_MdxDesc":{"sd":"<p> After Dev</p>\n","ld":"<p>A list of scripts to execute after the <code>dev</code> command.</p>\n"}}},"additionalProperties":false},"NamedScriptLifecycleHook":{"type":"object","properties":{"scriptName":{"description":"#### Script Name\n\n---\n\nThe name of the script to execute. The script must be defined in the `scripts` section of your configuration.","type":"string","_MdxDesc":{"sd":"<p> Script Name</p>\n","ld":"<p>The name of the script to execute. The script must be defined in the <code>scripts</code> section of your configuration.</p>\n"}},"skipOnCI":{"description":"#### Skip on CI\n\n---\n\nIf `true`, this hook will not run in a CI/CD environment (e.g., AWS CodeBuild, GitHub Actions, GitLab CI). This is useful for hooks that should only run locally.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Skip on CI</p>\n","ld":"<p>If <code>true</code>, this hook will not run in a CI/CD environment (e.g., AWS CodeBuild, GitHub Actions, GitLab CI). This is useful for hooks that should only run locally.</p>\n"}},"skipOnLocal":{"description":"#### Skip on Local\n\n---\n\nIf `true`, this hook will only run in a CI/CD environment and will be skipped during local execution.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Skip on Local</p>\n","ld":"<p>If <code>true</code>, this hook will only run in a CI/CD environment and will be skipped during local execution.</p>\n"}}},"additionalProperties":false,"required":["scriptName"]},"LocalScript":{"description":"#### A script that runs on your local machine.\n\n---\n\nLocal scripts are executed on the same machine where the Stacktape command is run.\nThey are useful for tasks like building your application, running database migrations, or other automation.\n\nThe script must define one of the following: `executeCommand`, `executeScript`, `executeCommands`, or `executeScripts`.","type":"object","properties":{"type":{"type":"string","const":"local-script"},"properties":{"$ref":"#/definitions/LocalScriptProps"}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> A script that runs on your local machine.</p>\n","ld":"<p>Local scripts are executed on the same machine where the Stacktape command is run.\nThey are useful for tasks like building your application, running database migrations, or other automation.</p>\n<p>The script must define one of the following: <code>executeCommand</code>, <code>executeScript</code>, <code>executeCommands</code>, or <code>executeScripts</code>.</p>\n"}},"LocalScriptProps":{"type":"object","properties":{"executeScript":{"description":"#### Execute Script\n\n---\n\nThe path to a script file to execute. The script can be written in JavaScript, TypeScript, or Python and runs in a separate process.\n\nThe executable is determined by `defaults:configure` or the system default (`node` for JS/TS, `python` for Python). You can only use one of `executeScript`, `executeScripts`, `executeCommand`, or `executeCommands`.","type":"string","_MdxDesc":{"sd":"<p> Execute Script</p>\n","ld":"<p>The path to a script file to execute. The script can be written in JavaScript, TypeScript, or Python and runs in a separate process.</p>\n<p>The executable is determined by <code>defaults:configure</code> or the system default (<code>node</code> for JS/TS, <code>python</code> for Python). You can only use one of <code>executeScript</code>, <code>executeScripts</code>, <code>executeCommand</code>, or <code>executeCommands</code>.</p>\n"}},"executeCommand":{"description":"#### Execute Command\n\n---\n\nA single terminal command to execute in a separate shell process.\n\nThe command runs on the machine executing the Stacktape command. Be aware of potential differences between local and CI environments (e.g., OS, shell). You can only use one of `executeScript`, `executeScripts`, `executeCommand`, or `executeCommands`.","type":"string","_MdxDesc":{"sd":"<p> Execute Command</p>\n","ld":"<p>A single terminal command to execute in a separate shell process.</p>\n<p>The command runs on the machine executing the Stacktape command. Be aware of potential differences between local and CI environments (e.g., OS, shell). You can only use one of <code>executeScript</code>, <code>executeScripts</code>, <code>executeCommand</code>, or <code>executeCommands</code>.</p>\n"}},"executeScripts":{"description":"#### Execute Scripts\n\n---\n\nA list of script files to execute sequentially. Each script runs in a separate process.\n\nThe script can be written in JavaScript, TypeScript, or Python. The executable is determined by `defaults:configure` or the system default. You can only use one of `executeScript`, `executeScripts`, `executeCommand`, or `executeCommands`.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Execute Scripts</p>\n","ld":"<p>A list of script files to execute sequentially. Each script runs in a separate process.</p>\n<p>The script can be written in JavaScript, TypeScript, or Python. The executable is determined by <code>defaults:configure</code> or the system default. You can only use one of <code>executeScript</code>, <code>executeScripts</code>, <code>executeCommand</code>, or <code>executeCommands</code>.</p>\n"}},"executeCommands":{"description":"#### Execute Commands\n\n---\n\nA list of terminal commands to execute sequentially. Each command runs in a separate shell process.\n\nThe commands run on the machine executing the Stacktape command. Be aware of potential differences between environments. You can only use one of `executeScript`, `executeScripts`, `executeCommand`, or `executeCommands`.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Execute Commands</p>\n","ld":"<p>A list of terminal commands to execute sequentially. Each command runs in a separate shell process.</p>\n<p>The commands run on the machine executing the Stacktape command. Be aware of potential differences between environments. You can only use one of <code>executeScript</code>, <code>executeScripts</code>, <code>executeCommand</code>, or <code>executeCommands</code>.</p>\n"}},"cwd":{"description":"#### Working Directory\n\n---\n\nThe directory where the script or command will be executed.","default":"The directory where the Stacktape command was executed.","type":"string","_MdxDesc":{"sd":"<p> Working Directory</p>\n","ld":"<p>The directory where the script or command will be executed.</p>\n"}},"pipeStdio":{"description":"#### Pipe Stdio\n\n---\n\nIf `true`, pipes the standard input/output (stdio) of the hook process to the main process. This allows you to see logs from your hook and interact with prompts.","default":true,"type":"boolean","_MdxDesc":{"sd":"<p> Pipe Stdio</p>\n","ld":"<p>If <code>true</code>, pipes the standard input/output (stdio) of the hook process to the main process. This allows you to see logs from your hook and interact with prompts.</p>\n"}},"connectTo":{"description":"#### Connect To\n\n---\n\nA list of resources the script needs to interact with. Stacktape automatically injects environment variables with connection details for each specified resource.\n\nEnvironment variable names are in the format `STP_[RESOURCE_NAME]_[VARIABLE_NAME]` (e.g., `STP_MY_DATABASE_CONNECTION_STRING`).\n\n**Injected Variables by Resource Type:**\n- **`Bucket`**: `NAME`, `ARN`\n- **`DynamoDbTable`**: `NAME`, `ARN`, `STREAM_ARN`\n- **`MongoDbAtlasCluster`**: `CONNECTION_STRING`\n- **`RelationalDatabase`**: `CONNECTION_STRING`, `JDBC_CONNECTION_STRING`, `HOST`, `PORT`. For Aurora clusters, `READER_CONNECTION_STRING`, `READER_JDBC_CONNECTION_STRING`, and `READER_HOST` are also included.\n- **`RedisCluster`**: `HOST`, `READER_HOST`, `PORT`\n- **`EventBus`**: `ARN`\n- **`Function`**: `ARN`\n- **`BatchJob`**: `JOB_DEFINITION_ARN`, `STATE_MACHINE_ARN`\n- **`UserAuthPool`**: `ID`, `CLIENT_ID`, `ARN`\n- **`SnsTopic`**: `ARN`, `NAME`\n- **`SqsQueue`**: `ARN`, `NAME`, `URL`\n- **`UpstashKafkaTopic`**: `TOPIC_NAME`, `TOPIC_ID`, `USERNAME`, `PASSWORD`, `TCP_ENDPOINT`, `REST_URL`\n- **`UpstashRedis`**: `HOST`, `PORT`, `PASSWORD`, `REST_TOKEN`, `REST_URL`, `REDIS_URL`\n- **`PrivateService`**: `ADDRESS`\n- **`WebService`**: `URL`","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Connect To</p>\n","ld":"<p>A list of resources the script needs to interact with. Stacktape automatically injects environment variables with connection details for each specified resource.</p>\n<p>Environment variable names are in the format <code>STP_[RESOURCE_NAME]_[VARIABLE_NAME]</code> (e.g., <code>STP_MY_DATABASE_CONNECTION_STRING</code>).</p>\n<p><strong>Injected Variables by Resource Type:</strong></p>\n<ul>\n<li><strong><code>Bucket</code></strong>: <code>NAME</code>, <code>ARN</code></li>\n<li><strong><code>DynamoDbTable</code></strong>: <code>NAME</code>, <code>ARN</code>, <code>STREAM_ARN</code></li>\n<li><strong><code>MongoDbAtlasCluster</code></strong>: <code>CONNECTION_STRING</code></li>\n<li><strong><code>RelationalDatabase</code></strong>: <code>CONNECTION_STRING</code>, <code>JDBC_CONNECTION_STRING</code>, <code>HOST</code>, <code>PORT</code>. For Aurora clusters, <code>READER_CONNECTION_STRING</code>, <code>READER_JDBC_CONNECTION_STRING</code>, and <code>READER_HOST</code> are also included.</li>\n<li><strong><code>RedisCluster</code></strong>: <code>HOST</code>, <code>READER_HOST</code>, <code>PORT</code></li>\n<li><strong><code>EventBus</code></strong>: <code>ARN</code></li>\n<li><strong><code>Function</code></strong>: <code>ARN</code></li>\n<li><strong><code>BatchJob</code></strong>: <code>JOB_DEFINITION_ARN</code>, <code>STATE_MACHINE_ARN</code></li>\n<li><strong><code>UserAuthPool</code></strong>: <code>ID</code>, <code>CLIENT_ID</code>, <code>ARN</code></li>\n<li><strong><code>SnsTopic</code></strong>: <code>ARN</code>, <code>NAME</code></li>\n<li><strong><code>SqsQueue</code></strong>: <code>ARN</code>, <code>NAME</code>, <code>URL</code></li>\n<li><strong><code>UpstashKafkaTopic</code></strong>: <code>TOPIC_NAME</code>, <code>TOPIC_ID</code>, <code>USERNAME</code>, <code>PASSWORD</code>, <code>TCP_ENDPOINT</code>, <code>REST_URL</code></li>\n<li><strong><code>UpstashRedis</code></strong>: <code>HOST</code>, <code>PORT</code>, <code>PASSWORD</code>, <code>REST_TOKEN</code>, <code>REST_URL</code>, <code>REDIS_URL</code></li>\n<li><strong><code>PrivateService</code></strong>: <code>ADDRESS</code></li>\n<li><strong><code>WebService</code></strong>: <code>URL</code></li>\n</ul>\n"}},"environment":{"description":"#### Environment Variables\n\n---\n\nA list of environment variables to pass to the script or command.\n\nValues can be:\n- A static string, number, or boolean.\n- The result of a [custom directive](https://docs.stacktape.com/configuration/directives/#custom-directives).\n- A reference to another resource's parameter using the [`$ResourceParam` directive](https://docs.stacktape.com/configuration/referencing-parameters/).\n- A value from a [secret](https://docs.stacktape.com/resources/secrets/) using the [`$Secret` directive](https://docs.stacktape.com/configuration/directives/#secret).","type":"array","items":{"$ref":"#/definitions/EnvironmentVar"},"_MdxDesc":{"sd":"<p> Environment Variables</p>\n","ld":"<p>A list of environment variables to pass to the script or command.</p>\n<p>Values can be:</p>\n<ul>\n<li>A static string, number, or boolean.</li>\n<li>The result of a <a href=\"/configuration/directives/#custom-directives\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">custom directive</a>.</li>\n<li>A reference to another resource&#39;s parameter using the <a href=\"/configuration/referencing-parameters/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">`$ResourceParam` directive</a>.</li>\n<li>A value from a <a href=\"/resources/secrets/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">secret</a> using the <a href=\"/configuration/directives/#secret\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">`$Secret` directive</a>.</li>\n</ul>\n"}},"assumeRoleOfResource":{"description":"#### Assume Role of Resource\n\n---\n\nThe name of a deployed resource whose IAM role the script should assume. This grants the script the same permissions as the specified resource.\n\nThe resource must be deployed before the script is executed. Stacktape injects temporary AWS credentials as environment variables, which are automatically used by most AWS SDKs and CLIs.\n\n**Supported Resource Types:**\n- `function`\n- `batch-job`\n- `worker-service`\n- `web-service`\n- `private-service`\n- `multi-container-workload`\n- `nextjs-web`","type":"string","_MdxDesc":{"sd":"<p> Assume Role of Resource</p>\n","ld":"<p>The name of a deployed resource whose IAM role the script should assume. This grants the script the same permissions as the specified resource.</p>\n<p>The resource must be deployed before the script is executed. Stacktape injects temporary AWS credentials as environment variables, which are automatically used by most AWS SDKs and CLIs.</p>\n<p><strong>Supported Resource Types:</strong></p>\n<ul>\n<li><code>function</code></li>\n<li><code>batch-job</code></li>\n<li><code>worker-service</code></li>\n<li><code>web-service</code></li>\n<li><code>private-service</code></li>\n<li><code>multi-container-workload</code></li>\n<li><code>nextjs-web</code></li>\n</ul>\n"}}},"additionalProperties":false},"EnvironmentVar":{"type":"object","properties":{"name":{"description":"#### Variable Name\n\n---\n\nThe name of the environment variable.","type":"string","_MdxDesc":{"sd":"<p> Variable Name</p>\n","ld":"<p>The name of the environment variable.</p>\n"}},"value":{"description":"#### Variable Value\n\n---\n\nThe value of the environment variable. Numbers and booleans will be converted to strings.","type":["string","number","boolean"],"_MdxDesc":{"sd":"<p> Variable Value</p>\n","ld":"<p>The value of the environment variable. Numbers and booleans will be converted to strings.</p>\n"}}},"additionalProperties":false,"required":["name","value"]},"BastionScript":{"description":"#### A script that runs remotely on a bastion server.\n\n---\n\nBastion scripts are executed on a bastion server within your VPC, not on your local machine.\nLogs from the script's execution are streamed in real-time to your terminal.\n\nThis is useful for running commands that need direct access to VPC resources\nor for ensuring consistent execution environments across different machines.","type":"object","properties":{"type":{"type":"string","const":"bastion-script"},"properties":{"$ref":"#/definitions/BastionScriptProps"}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> A script that runs remotely on a bastion server.</p>\n","ld":"<p>Bastion scripts are executed on a bastion server within your VPC, not on your local machine.\nLogs from the script&#39;s execution are streamed in real-time to your terminal.</p>\n<p>This is useful for running commands that need direct access to VPC resources\nor for ensuring consistent execution environments across different machines.</p>\n"}},"BastionScriptProps":{"type":"object","properties":{"bastionResource":{"description":"#### Bastion Resource Name\n\n---\n\nThe name of the bastion resource on which the commands will be executed.","type":"string","_MdxDesc":{"sd":"<p> Bastion Resource Name</p>\n","ld":"<p>The name of the bastion resource on which the commands will be executed.</p>\n"}},"executeCommand":{"description":"#### Execute Command\n\n---\n\nA single terminal command to execute on the bastion host. Logs from the execution are streamed to your terminal.\n\nYou can use either `executeCommand` or `executeCommands`, but not both.","type":"string","_MdxDesc":{"sd":"<p> Execute Command</p>\n","ld":"<p>A single terminal command to execute on the bastion host. Logs from the execution are streamed to your terminal.</p>\n<p>You can use either <code>executeCommand</code> or <code>executeCommands</code>, but not both.</p>\n"}},"executeCommands":{"description":"#### Execute Commands\n\n---\n\nA list of terminal commands to execute sequentially as a script on the bastion host. Logs from the execution are streamed to your terminal.\n\nYou can use either `executeCommand` or `executeCommands`, but not both.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Execute Commands</p>\n","ld":"<p>A list of terminal commands to execute sequentially as a script on the bastion host. Logs from the execution are streamed to your terminal.</p>\n<p>You can use either <code>executeCommand</code> or <code>executeCommands</code>, but not both.</p>\n"}},"cwd":{"description":"#### Working Directory\n\n---\n\nThe directory on the bastion host where the command will be executed.","default":"/","type":"string","_MdxDesc":{"sd":"<p> Working Directory</p>\n","ld":"<p>The directory on the bastion host where the command will be executed.</p>\n"}},"connectTo":{"description":"#### Connect To\n\n---\n\nA list of resources the script needs to interact with. Stacktape automatically injects environment variables with connection details for each specified resource.\n\nEnvironment variable names are in the format `STP_[RESOURCE_NAME]_[VARIABLE_NAME]` (e.g., `STP_MY_DATABASE_CONNECTION_STRING`).\n\n**Injected Variables by Resource Type:**\n- **`Bucket`**: `NAME`, `ARN`\n- **`DynamoDbTable`**: `NAME`, `ARN`, `STREAM_ARN`\n- **`MongoDbAtlasCluster`**: `CONNECTION_STRING`\n- **`RelationalDatabase`**: `CONNECTION_STRING`, `JDBC_CONNECTION_STRING`, `HOST`, `PORT`. For Aurora clusters, `READER_CONNECTION_STRING`, `READER_JDBC_CONNECTION_STRING`, and `READER_HOST` are also included.\n- **`RedisCluster`**: `HOST`, `READER_HOST`, `PORT`\n- **`EventBus`**: `ARN`\n- **`Function`**: `ARN`\n- **`BatchJob`**: `JOB_DEFINITION_ARN`, `STATE_MACHINE_ARN`\n- **`UserAuthPool`**: `ID`, `CLIENT_ID`, `ARN`\n- **`SnsTopic`**: `ARN`, `NAME`\n- **`SqsQueue`**: `ARN`, `NAME`, `URL`\n- **`UpstashKafkaTopic`**: `TOPIC_NAME`, `TOPIC_ID`, `USERNAME`, `PASSWORD`, `TCP_ENDPOINT`, `REST_URL`\n- **`UpstashRedis`**: `HOST`, `PORT`, `PASSWORD`, `REST_TOKEN`, `REST_URL`, `REDIS_URL`\n- **`PrivateService`**: `ADDRESS`\n- **`WebService`**: `URL`","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Connect To</p>\n","ld":"<p>A list of resources the script needs to interact with. Stacktape automatically injects environment variables with connection details for each specified resource.</p>\n<p>Environment variable names are in the format <code>STP_[RESOURCE_NAME]_[VARIABLE_NAME]</code> (e.g., <code>STP_MY_DATABASE_CONNECTION_STRING</code>).</p>\n<p><strong>Injected Variables by Resource Type:</strong></p>\n<ul>\n<li><strong><code>Bucket</code></strong>: <code>NAME</code>, <code>ARN</code></li>\n<li><strong><code>DynamoDbTable</code></strong>: <code>NAME</code>, <code>ARN</code>, <code>STREAM_ARN</code></li>\n<li><strong><code>MongoDbAtlasCluster</code></strong>: <code>CONNECTION_STRING</code></li>\n<li><strong><code>RelationalDatabase</code></strong>: <code>CONNECTION_STRING</code>, <code>JDBC_CONNECTION_STRING</code>, <code>HOST</code>, <code>PORT</code>. For Aurora clusters, <code>READER_CONNECTION_STRING</code>, <code>READER_JDBC_CONNECTION_STRING</code>, and <code>READER_HOST</code> are also included.</li>\n<li><strong><code>RedisCluster</code></strong>: <code>HOST</code>, <code>READER_HOST</code>, <code>PORT</code></li>\n<li><strong><code>EventBus</code></strong>: <code>ARN</code></li>\n<li><strong><code>Function</code></strong>: <code>ARN</code></li>\n<li><strong><code>BatchJob</code></strong>: <code>JOB_DEFINITION_ARN</code>, <code>STATE_MACHINE_ARN</code></li>\n<li><strong><code>UserAuthPool</code></strong>: <code>ID</code>, <code>CLIENT_ID</code>, <code>ARN</code></li>\n<li><strong><code>SnsTopic</code></strong>: <code>ARN</code>, <code>NAME</code></li>\n<li><strong><code>SqsQueue</code></strong>: <code>ARN</code>, <code>NAME</code>, <code>URL</code></li>\n<li><strong><code>UpstashKafkaTopic</code></strong>: <code>TOPIC_NAME</code>, <code>TOPIC_ID</code>, <code>USERNAME</code>, <code>PASSWORD</code>, <code>TCP_ENDPOINT</code>, <code>REST_URL</code></li>\n<li><strong><code>UpstashRedis</code></strong>: <code>HOST</code>, <code>PORT</code>, <code>PASSWORD</code>, <code>REST_TOKEN</code>, <code>REST_URL</code>, <code>REDIS_URL</code></li>\n<li><strong><code>PrivateService</code></strong>: <code>ADDRESS</code></li>\n<li><strong><code>WebService</code></strong>: <code>URL</code></li>\n</ul>\n"}},"environment":{"description":"#### Environment Variables\n\n---\n\nA list of environment variables to pass to the script or command.\n\nValues can be:\n- A static string, number, or boolean.\n- The result of a [custom directive](https://docs.stacktape.com/configuration/directives/#custom-directives).\n- A reference to another resource's parameter using the [`$ResourceParam` directive](https://docs.stacktape.com/configuration/referencing-parameters/).\n- A value from a [secret](https://docs.stacktape.com/resources/secrets/) using the [`$Secret` directive](https://docs.stacktape.com/configuration/directives/#secret).","type":"array","items":{"$ref":"#/definitions/EnvironmentVar"},"_MdxDesc":{"sd":"<p> Environment Variables</p>\n","ld":"<p>A list of environment variables to pass to the script or command.</p>\n<p>Values can be:</p>\n<ul>\n<li>A static string, number, or boolean.</li>\n<li>The result of a <a href=\"/configuration/directives/#custom-directives\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">custom directive</a>.</li>\n<li>A reference to another resource&#39;s parameter using the <a href=\"/configuration/referencing-parameters/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">`$ResourceParam` directive</a>.</li>\n<li>A value from a <a href=\"/resources/secrets/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">secret</a> using the <a href=\"/configuration/directives/#secret\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">`$Secret` directive</a>.</li>\n</ul>\n"}},"assumeRoleOfResource":{"description":"#### Assume Role of Resource\n\n---\n\nThe name of a deployed resource whose IAM role the script should assume. This grants the script the same permissions as the specified resource.\n\nThe resource must be deployed before the script is executed. Stacktape injects temporary AWS credentials as environment variables, which are automatically used by most AWS SDKs and CLIs.\n\n**Supported Resource Types:**\n- `function`\n- `batch-job`\n- `worker-service`\n- `web-service`\n- `private-service`\n- `multi-container-workload`\n- `nextjs-web`","type":"string","_MdxDesc":{"sd":"<p> Assume Role of Resource</p>\n","ld":"<p>The name of a deployed resource whose IAM role the script should assume. This grants the script the same permissions as the specified resource.</p>\n<p>The resource must be deployed before the script is executed. Stacktape injects temporary AWS credentials as environment variables, which are automatically used by most AWS SDKs and CLIs.</p>\n<p><strong>Supported Resource Types:</strong></p>\n<ul>\n<li><code>function</code></li>\n<li><code>batch-job</code></li>\n<li><code>worker-service</code></li>\n<li><code>web-service</code></li>\n<li><code>private-service</code></li>\n<li><code>multi-container-workload</code></li>\n<li><code>nextjs-web</code></li>\n</ul>\n"}}},"additionalProperties":false},"LocalScriptWithBastionTunneling":{"description":"#### A local script with secure tunneling through a bastion host.\n\n---\n\nThis script type runs locally but tunnels connections to resources through a bastion server.\nIt provides a secure, encrypted connection to resources that are only accessible within the VPC,\nsuch as private databases or Redis clusters.\n\nThe environment variables injected by `connectTo` are automatically adjusted to use the tunneled endpoints.","type":"object","properties":{"type":{"type":"string","const":"local-script-with-bastion-tunneling"},"properties":{"$ref":"#/definitions/LocalScriptWithBastionTunnelingProps"}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> A local script with secure tunneling through a bastion host.</p>\n","ld":"<p>This script type runs locally but tunnels connections to resources through a bastion server.\nIt provides a secure, encrypted connection to resources that are only accessible within the VPC,\nsuch as private databases or Redis clusters.</p>\n<p>The environment variables injected by <code>connectTo</code> are automatically adjusted to use the tunneled endpoints.</p>\n"}},"LocalScriptWithBastionTunnelingProps":{"type":"object","properties":{"bastionResource":{"description":"#### Bastion Resource Name\n\n---\n\nThe name of the bastion resource to use for tunneling to protected resources.","type":"string","_MdxDesc":{"sd":"<p> Bastion Resource Name</p>\n","ld":"<p>The name of the bastion resource to use for tunneling to protected resources.</p>\n"}},"executeScript":{"description":"#### Execute Script\n\n---\n\nThe path to a script file to execute. The script can be written in JavaScript, TypeScript, or Python and runs in a separate process.\n\nThe executable is determined by `defaults:configure` or the system default (`node` for JS/TS, `python` for Python). You can only use one of `executeScript`, `executeScripts`, `executeCommand`, or `executeCommands`.","type":"string","_MdxDesc":{"sd":"<p> Execute Script</p>\n","ld":"<p>The path to a script file to execute. The script can be written in JavaScript, TypeScript, or Python and runs in a separate process.</p>\n<p>The executable is determined by <code>defaults:configure</code> or the system default (<code>node</code> for JS/TS, <code>python</code> for Python). You can only use one of <code>executeScript</code>, <code>executeScripts</code>, <code>executeCommand</code>, or <code>executeCommands</code>.</p>\n"}},"executeCommand":{"description":"#### Execute Command\n\n---\n\nA single terminal command to execute in a separate shell process.\n\nThe command runs on the machine executing the Stacktape command. Be aware of potential differences between local and CI environments (e.g., OS, shell). You can only use one of `executeScript`, `executeScripts`, `executeCommand`, or `executeCommands`.","type":"string","_MdxDesc":{"sd":"<p> Execute Command</p>\n","ld":"<p>A single terminal command to execute in a separate shell process.</p>\n<p>The command runs on the machine executing the Stacktape command. Be aware of potential differences between local and CI environments (e.g., OS, shell). You can only use one of <code>executeScript</code>, <code>executeScripts</code>, <code>executeCommand</code>, or <code>executeCommands</code>.</p>\n"}},"executeScripts":{"description":"#### Execute Scripts\n\n---\n\nA list of script files to execute sequentially. Each script runs in a separate process.\n\nThe script can be written in JavaScript, TypeScript, or Python. The executable is determined by `defaults:configure` or the system default. You can only use one of `executeScript`, `executeScripts`, `executeCommand`, or `executeCommands`.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Execute Scripts</p>\n","ld":"<p>A list of script files to execute sequentially. Each script runs in a separate process.</p>\n<p>The script can be written in JavaScript, TypeScript, or Python. The executable is determined by <code>defaults:configure</code> or the system default. You can only use one of <code>executeScript</code>, <code>executeScripts</code>, <code>executeCommand</code>, or <code>executeCommands</code>.</p>\n"}},"executeCommands":{"description":"#### Execute Commands\n\n---\n\nA list of terminal commands to execute sequentially. Each command runs in a separate shell process.\n\nThe commands run on the machine executing the Stacktape command. Be aware of potential differences between environments. You can only use one of `executeScript`, `executeScripts`, `executeCommand`, or `executeCommands`.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Execute Commands</p>\n","ld":"<p>A list of terminal commands to execute sequentially. Each command runs in a separate shell process.</p>\n<p>The commands run on the machine executing the Stacktape command. Be aware of potential differences between environments. You can only use one of <code>executeScript</code>, <code>executeScripts</code>, <code>executeCommand</code>, or <code>executeCommands</code>.</p>\n"}},"cwd":{"description":"#### Working Directory\n\n---\n\nThe directory where the script or command will be executed.","default":"The directory where the Stacktape command was executed.","type":"string","_MdxDesc":{"sd":"<p> Working Directory</p>\n","ld":"<p>The directory where the script or command will be executed.</p>\n"}},"pipeStdio":{"description":"#### Pipe Stdio\n\n---\n\nIf `true`, pipes the standard input/output (stdio) of the hook process to the main process. This allows you to see logs from your hook and interact with prompts.","default":true,"type":"boolean","_MdxDesc":{"sd":"<p> Pipe Stdio</p>\n","ld":"<p>If <code>true</code>, pipes the standard input/output (stdio) of the hook process to the main process. This allows you to see logs from your hook and interact with prompts.</p>\n"}},"connectTo":{"description":"#### Connect To\n\n---\n\nA list of resources the script needs to interact with. Stacktape automatically injects environment variables with connection details for each specified resource.\n\nEnvironment variable names are in the format `STP_[RESOURCE_NAME]_[VARIABLE_NAME]` (e.g., `STP_MY_DATABASE_CONNECTION_STRING`).\n\n**Injected Variables by Resource Type:**\n- **`Bucket`**: `NAME`, `ARN`\n- **`DynamoDbTable`**: `NAME`, `ARN`, `STREAM_ARN`\n- **`MongoDbAtlasCluster`**: `CONNECTION_STRING`\n- **`RelationalDatabase`**: `CONNECTION_STRING`, `JDBC_CONNECTION_STRING`, `HOST`, `PORT`. For Aurora clusters, `READER_CONNECTION_STRING`, `READER_JDBC_CONNECTION_STRING`, and `READER_HOST` are also included.\n- **`RedisCluster`**: `HOST`, `READER_HOST`, `PORT`\n- **`EventBus`**: `ARN`\n- **`Function`**: `ARN`\n- **`BatchJob`**: `JOB_DEFINITION_ARN`, `STATE_MACHINE_ARN`\n- **`UserAuthPool`**: `ID`, `CLIENT_ID`, `ARN`\n- **`SnsTopic`**: `ARN`, `NAME`\n- **`SqsQueue`**: `ARN`, `NAME`, `URL`\n- **`UpstashKafkaTopic`**: `TOPIC_NAME`, `TOPIC_ID`, `USERNAME`, `PASSWORD`, `TCP_ENDPOINT`, `REST_URL`\n- **`UpstashRedis`**: `HOST`, `PORT`, `PASSWORD`, `REST_TOKEN`, `REST_URL`, `REDIS_URL`\n- **`PrivateService`**: `ADDRESS`\n- **`WebService`**: `URL`","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Connect To</p>\n","ld":"<p>A list of resources the script needs to interact with. Stacktape automatically injects environment variables with connection details for each specified resource.</p>\n<p>Environment variable names are in the format <code>STP_[RESOURCE_NAME]_[VARIABLE_NAME]</code> (e.g., <code>STP_MY_DATABASE_CONNECTION_STRING</code>).</p>\n<p><strong>Injected Variables by Resource Type:</strong></p>\n<ul>\n<li><strong><code>Bucket</code></strong>: <code>NAME</code>, <code>ARN</code></li>\n<li><strong><code>DynamoDbTable</code></strong>: <code>NAME</code>, <code>ARN</code>, <code>STREAM_ARN</code></li>\n<li><strong><code>MongoDbAtlasCluster</code></strong>: <code>CONNECTION_STRING</code></li>\n<li><strong><code>RelationalDatabase</code></strong>: <code>CONNECTION_STRING</code>, <code>JDBC_CONNECTION_STRING</code>, <code>HOST</code>, <code>PORT</code>. For Aurora clusters, <code>READER_CONNECTION_STRING</code>, <code>READER_JDBC_CONNECTION_STRING</code>, and <code>READER_HOST</code> are also included.</li>\n<li><strong><code>RedisCluster</code></strong>: <code>HOST</code>, <code>READER_HOST</code>, <code>PORT</code></li>\n<li><strong><code>EventBus</code></strong>: <code>ARN</code></li>\n<li><strong><code>Function</code></strong>: <code>ARN</code></li>\n<li><strong><code>BatchJob</code></strong>: <code>JOB_DEFINITION_ARN</code>, <code>STATE_MACHINE_ARN</code></li>\n<li><strong><code>UserAuthPool</code></strong>: <code>ID</code>, <code>CLIENT_ID</code>, <code>ARN</code></li>\n<li><strong><code>SnsTopic</code></strong>: <code>ARN</code>, <code>NAME</code></li>\n<li><strong><code>SqsQueue</code></strong>: <code>ARN</code>, <code>NAME</code>, <code>URL</code></li>\n<li><strong><code>UpstashKafkaTopic</code></strong>: <code>TOPIC_NAME</code>, <code>TOPIC_ID</code>, <code>USERNAME</code>, <code>PASSWORD</code>, <code>TCP_ENDPOINT</code>, <code>REST_URL</code></li>\n<li><strong><code>UpstashRedis</code></strong>: <code>HOST</code>, <code>PORT</code>, <code>PASSWORD</code>, <code>REST_TOKEN</code>, <code>REST_URL</code>, <code>REDIS_URL</code></li>\n<li><strong><code>PrivateService</code></strong>: <code>ADDRESS</code></li>\n<li><strong><code>WebService</code></strong>: <code>URL</code></li>\n</ul>\n"}},"environment":{"description":"#### Environment Variables\n\n---\n\nA list of environment variables to pass to the script or command.\n\nValues can be:\n- A static string, number, or boolean.\n- The result of a [custom directive](https://docs.stacktape.com/configuration/directives/#custom-directives).\n- A reference to another resource's parameter using the [`$ResourceParam` directive](https://docs.stacktape.com/configuration/referencing-parameters/).\n- A value from a [secret](https://docs.stacktape.com/resources/secrets/) using the [`$Secret` directive](https://docs.stacktape.com/configuration/directives/#secret).","type":"array","items":{"$ref":"#/definitions/EnvironmentVar"},"_MdxDesc":{"sd":"<p> Environment Variables</p>\n","ld":"<p>A list of environment variables to pass to the script or command.</p>\n<p>Values can be:</p>\n<ul>\n<li>A static string, number, or boolean.</li>\n<li>The result of a <a href=\"/configuration/directives/#custom-directives\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">custom directive</a>.</li>\n<li>A reference to another resource&#39;s parameter using the <a href=\"/configuration/referencing-parameters/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">`$ResourceParam` directive</a>.</li>\n<li>A value from a <a href=\"/resources/secrets/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">secret</a> using the <a href=\"/configuration/directives/#secret\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">`$Secret` directive</a>.</li>\n</ul>\n"}},"assumeRoleOfResource":{"description":"#### Assume Role of Resource\n\n---\n\nThe name of a deployed resource whose IAM role the script should assume. This grants the script the same permissions as the specified resource.\n\nThe resource must be deployed before the script is executed. Stacktape injects temporary AWS credentials as environment variables, which are automatically used by most AWS SDKs and CLIs.\n\n**Supported Resource Types:**\n- `function`\n- `batch-job`\n- `worker-service`\n- `web-service`\n- `private-service`\n- `multi-container-workload`\n- `nextjs-web`","type":"string","_MdxDesc":{"sd":"<p> Assume Role of Resource</p>\n","ld":"<p>The name of a deployed resource whose IAM role the script should assume. This grants the script the same permissions as the specified resource.</p>\n<p>The resource must be deployed before the script is executed. Stacktape injects temporary AWS credentials as environment variables, which are automatically used by most AWS SDKs and CLIs.</p>\n<p><strong>Supported Resource Types:</strong></p>\n<ul>\n<li><code>function</code></li>\n<li><code>batch-job</code></li>\n<li><code>worker-service</code></li>\n<li><code>web-service</code></li>\n<li><code>private-service</code></li>\n<li><code>multi-container-workload</code></li>\n<li><code>nextjs-web</code></li>\n</ul>\n"}}},"additionalProperties":false},"DirectiveDefinition":{"type":"object","properties":{"name":{"description":"#### Directive Name\n\n---\n\nThe name of the custom directive.","type":"string","_MdxDesc":{"sd":"<p> Directive Name</p>\n","ld":"<p>The name of the custom directive.</p>\n"}},"filePath":{"description":"#### File Path\n\n---\n\nThe path to the file where the directive is defined, in the format `{file-path}:{handler}`.\n\nIf the `{handler}` is omitted:\n- For `.js` and `.ts` files, the `default` export is used.\n- For `.py` files, the `main` function is used.","type":"string","_MdxDesc":{"sd":"<p> File Path</p>\n","ld":"<p>The path to the file where the directive is defined, in the format <code>{file-path}:{handler}</code>.</p>\n<p>If the <code>{handler}</code> is omitted:</p>\n<ul>\n<li>For <code>.js</code> and <code>.ts</code> files, the <code>default</code> export is used.</li>\n<li>For <code>.py</code> files, the <code>main</code> function is used.</li>\n</ul>\n"}}},"additionalProperties":false,"required":["filePath","name"]},"DeploymentConfig":{"type":"object","properties":{"terminationProtection":{"description":"#### Enable Termination Protection\n\n---\n\nIf `true`, protects the stack from accidental deletion. You must disable this protection before you can delete the stack.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enable Termination Protection</p>\n","ld":"<p>If <code>true</code>, protects the stack from accidental deletion. You must disable this protection before you can delete the stack.</p>\n"}},"cloudformationRoleArn":{"description":"<< Description missing. Will be provided soon. >>","type":"string","_MdxDesc":{"sd":"<p>&lt;&lt; Description missing. Will be provided soon. &gt;&gt;</p>\n"}},"triggerRollbackOnAlarms":{"description":"#### Rollback Alarms\n\n---\n\nA list of alarms that will trigger a rollback if they enter the `ALARM` state during a stack deployment.\n\nYou can specify an alarm by its name (if defined in the `alarms` section) or by its ARN.\n\n> An alarm must exist before the deployment starts to be used as a rollback trigger. If you specify a newly created alarm, it will only be used in subsequent deployments.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Rollback Alarms</p>\n","ld":"<p>A list of alarms that will trigger a rollback if they enter the <code>ALARM</code> state during a stack deployment.</p>\n<p>You can specify an alarm by its name (if defined in the <code>alarms</code> section) or by its ARN.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>An alarm must exist before the deployment starts to be used as a rollback trigger. If you specify a newly created alarm, it will only be used in subsequent deployments.</p>\n</div>\n</div>"}},"monitoringTimeAfterDeploymentInMinutes":{"description":"#### Post-Deployment Monitoring Time\n\n---\n\nThe amount of time (in minutes) that CloudFormation should monitor the stack and rollback alarms after a deployment.\n\nIf a rollback alarm is triggered or the update is canceled during this period, the stack will be rolled back.","default":0,"type":"number","_MdxDesc":{"sd":"<p> Post-Deployment Monitoring Time</p>\n","ld":"<p>The amount of time (in minutes) that CloudFormation should monitor the stack and rollback alarms after a deployment.</p>\n<p>If a rollback alarm is triggered or the update is canceled during this period, the stack will be rolled back.</p>\n"}},"disableAutoRollback":{"description":"#### Disable Auto-Rollback\n\n---\n\nIf `true`, disables automatic rollback on deployment failure.\n\n- **With auto-rollback (default):** If a deployment fails, the stack is automatically rolled back to the last known good state.\n- **Without auto-rollback:** If a deployment fails, the stack remains in the `UPDATE_FAILED` state. You can then either fix the issues and redeploy or manually roll back using the `stacktape rollback` command.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disable Auto-Rollback</p>\n","ld":"<p>If <code>true</code>, disables automatic rollback on deployment failure.</p>\n<ul>\n<li><strong>With auto-rollback (default):</strong> If a deployment fails, the stack is automatically rolled back to the last known good state.</li>\n<li><strong>Without auto-rollback:</strong> If a deployment fails, the stack remains in the <code>UPDATE_FAILED</code> state. You can then either fix the issues and redeploy or manually roll back using the <code>stacktape rollback</code> command.</li>\n</ul>\n"}},"publishEventsToArn":{"description":"<< Description missing. Will be provided soon. >>","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p>&lt;&lt; Description missing. Will be provided soon. &gt;&gt;</p>\n"}},"previousVersionsToKeep":{"description":"#### Previous Versions to Keep\n\n---\n\nThe number of previous deployment artifact versions (functions, images, templates) to keep.","default":10,"type":"number","_MdxDesc":{"sd":"<p> Previous Versions to Keep</p>\n","ld":"<p>The number of previous deployment artifact versions (functions, images, templates) to keep.</p>\n"}},"disableS3TransferAcceleration":{"description":"#### Disable S3 Transfer Acceleration\n\n---\n\nIf `true`, disables the use of S3 Transfer Acceleration for uploading deployment artifacts.\n\nS3 Transfer Acceleration can improve upload times and security by routing uploads through the nearest AWS edge location. It may incur minor additional costs.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disable S3 Transfer Acceleration</p>\n","ld":"<p>If <code>true</code>, disables the use of S3 Transfer Acceleration for uploading deployment artifacts.</p>\n<p>S3 Transfer Acceleration can improve upload times and security by routing uploads through the nearest AWS edge location. It may incur minor additional costs.</p>\n"}}},"additionalProperties":false},"StackConfig":{"type":"object","properties":{"outputs":{"description":"#### Stack Outputs\n\n---\n\nA list of custom outputs for your stack, such as API Gateway URLs, database endpoints, or resource ARNs. These outputs are often dynamically generated by AWS and are only known after deployment.","type":"array","items":{"$ref":"#/definitions/StackOutput"},"_MdxDesc":{"sd":"<p> Stack Outputs</p>\n","ld":"<p>A list of custom outputs for your stack, such as API Gateway URLs, database endpoints, or resource ARNs. These outputs are often dynamically generated by AWS and are only known after deployment.</p>\n"}},"tags":{"description":"#### Stack Tags\n\n---\n\nA list of tags to apply to the stack. These tags are propagated to all supported AWS resources created in the stack and can help with cost allocation and resource management. You can specify a maximum of 45 tags.","type":"array","items":{"$ref":"#/definitions/CloudformationTag"},"_MdxDesc":{"sd":"<p> Stack Tags</p>\n","ld":"<p>A list of tags to apply to the stack. These tags are propagated to all supported AWS resources created in the stack and can help with cost allocation and resource management. You can specify a maximum of 45 tags.</p>\n"}},"disableStackInfoSaving":{"description":"#### Disable Stack Info Saving\n\n---\n\nIf `true`, disables saving information about the deployed stack to a local file after each deployment.\n\nBy default, stack information is saved to `.stacktape-stack-info/<<stack-name>>.json`.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disable Stack Info Saving</p>\n","ld":"<p>If <code>true</code>, disables saving information about the deployed stack to a local file after each deployment.</p>\n<p>By default, stack information is saved to <code>.stacktape-stack-info/<<stack-name>>.json</code>.</p>\n"}},"stackInfoDirectory":{"description":"#### Stack Info Directory\n\n---\n\nThe directory where information about deployed stacks will be saved.","default":".stacktape-stack-info/","type":"string","_MdxDesc":{"sd":"<p> Stack Info Directory</p>\n","ld":"<p>The directory where information about deployed stacks will be saved.</p>\n"}},"vpc":{"$ref":"#/definitions/VpcSettings","description":"#### VPC configuration\n\n---\n\nConfigure VPC settings including VPC reuse and NAT Gateway configuration for private subnets.","_MdxDesc":{"sd":"<p> VPC configuration</p>\n","ld":"<p>Configure VPC settings including VPC reuse and NAT Gateway configuration for private subnets.</p>\n"}}},"additionalProperties":false},"StackOutput":{"type":"object","properties":{"name":{"description":"#### Output Name\n\n---\n\nThe name of the stack output.","type":"string","_MdxDesc":{"sd":"<p> Output Name</p>\n","ld":"<p>The name of the stack output.</p>\n"}},"value":{"description":"#### Output Value\n\n---\n\nThe value of the stack output.","type":"string","_MdxDesc":{"sd":"<p> Output Value</p>\n","ld":"<p>The value of the stack output.</p>\n"}},"description":{"description":"#### Output Description\n\n---\n\nA human-readable description of the stack output.","type":"string","_MdxDesc":{"sd":"<p> Output Description</p>\n","ld":"<p>A human-readable description of the stack output.</p>\n"}},"export":{"description":"#### Export Output\n\n---\n\nIf `true`, exports the stack output so it can be referenced by other stacks using the [`$CfStackOutput` directive](https://docs.stacktape.com/configuration/directives#cf-stack-output).","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Export Output</p>\n","ld":"<p>If <code>true</code>, exports the stack output so it can be referenced by other stacks using the <a href=\"/configuration/directives/#cf-stack-output\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">`$CfStackOutput` directive</a>.</p>\n"}}},"additionalProperties":false,"required":["name","value"]},"CloudformationTag":{"type":"object","properties":{"name":{"description":"#### Tag Name\n\n---\n\nThe name of the tag. It must be between 1 and 128 characters and can contain Unicode letters, digits, whitespace, and the characters `_`, `.`, `/`, `=`, `+`, `-`.","type":"string","_MdxDesc":{"sd":"<p> Tag Name</p>\n","ld":"<p>The name of the tag. It must be between 1 and 128 characters and can contain Unicode letters, digits, whitespace, and the characters <code>_</code>, <code>.</code>, <code>/</code>, <code>=</code>, <code>+</code>, <code>-</code>.</p>\n"}},"value":{"description":"#### Tag Value\n\n---\n\nThe value of the tag. It must be between 1 and 256 characters.","type":"string","_MdxDesc":{"sd":"<p> Tag Value</p>\n","ld":"<p>The value of the tag. It must be between 1 and 256 characters.</p>\n"}}},"additionalProperties":false,"required":["name","value"]},"VpcSettings":{"type":"object","properties":{"reuseVpc":{"$ref":"#/definitions/VpcReuseConfig","description":"#### Reuse VPC from another stack or use existing VPC.\n\n---\n\nIf this property is set, resources will be created in the VPC of the specified existing stack or the provided VPC ID.\n\nReusing a VPC is helpful when services in this stack are tightly coupled with services in another stack\n(e.g., if this stack needs to access VPC-protected resources from another stack).\n\n> **Note:** It is recommended to specify this property when creating a new stack. If you add this property to an already deployed stack, updating may cause resources to be replaced and data to be lost.\n\nBy default, each stack has its own dedicated VPC.","_MdxDesc":{"sd":"<p> Reuse VPC from another stack or use existing VPC.</p>\n","ld":"<p>If this property is set, resources will be created in the VPC of the specified existing stack or the provided VPC ID.</p>\n<p>Reusing a VPC is helpful when services in this stack are tightly coupled with services in another stack\n(e.g., if this stack needs to access VPC-protected resources from another stack).</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> It is recommended to specify this property when creating a new stack. If you add this property to an already deployed stack, updating may cause resources to be replaced and data to be lost.</p>\n</div>\n</div><p>By default, each stack has its own dedicated VPC.</p>\n"}},"nat":{"$ref":"#/definitions/NatSettings","description":"#### NAT Gateway configuration for private subnets.\n\n---\n\nConfigures NAT Gateways that provide internet access for workloads deployed in private subnets.\n\nThis configuration only applies when you have workloads using the `usePrivateSubnetsWithNAT` option.","_MdxDesc":{"sd":"<p> NAT Gateway configuration for private subnets.</p>\n","ld":"<p>Configures NAT Gateways that provide internet access for workloads deployed in private subnets.</p>\n<p>This configuration only applies when you have workloads using the <code>usePrivateSubnetsWithNAT</code> option.</p>\n"}}},"additionalProperties":false},"VpcReuseConfig":{"type":"object","properties":{"projectName":{"description":"#### Project name of target stack\n---\n- Project name of the target stack (stack in which the VPC is created).\n- Must be used together with `stage`.\n- Cannot be used together with `vpcId`.","type":"string","_MdxDesc":{"sd":"<p> Project name of target stack</p>\n","ld":"<ul>\n<li>Project name of the target stack (stack in which the VPC is created).</li>\n<li>Must be used together with <code>stage</code>.</li>\n<li>Cannot be used together with <code>vpcId</code>.</li>\n</ul>\n"}},"stage":{"description":"#### Stage of target stack\n---\n- The stage of the target stack (stack in which the VPC is created).\n- Must be used together with `projectName`.\n- Cannot be used together with `vpcId`.","type":"string","_MdxDesc":{"sd":"<p> Stage of target stack</p>\n","ld":"<ul>\n<li>The stage of the target stack (stack in which the VPC is created).</li>\n<li>Must be used together with <code>projectName</code>.</li>\n<li>Cannot be used together with <code>vpcId</code>.</li>\n</ul>\n"}},"vpcId":{"description":"#### VPC ID\n---\n- Direct VPC ID to reuse (e.g., `vpc-1234567890abcdef0`).\n- Cannot be used together with `projectName` and `stage`.\n- The VPC must have at least 3 public subnets. Public subnets are identified by having a route to an Internet Gateway (0.0.0.0/0 -> igw-*) in their associated route table.","type":"string","_MdxDesc":{"sd":"<p> VPC ID</p>\n","ld":"<ul>\n<li>Direct VPC ID to reuse (e.g., <code>vpc-1234567890abcdef0</code>).</li>\n<li>Cannot be used together with <code>projectName</code> and <code>stage</code>.</li>\n<li>The VPC must have at least 3 public subnets. Public subnets are identified by having a route to an Internet Gateway (0.0.0.0/0 -&gt; igw-*) in their associated route table.</li>\n</ul>\n"}}},"additionalProperties":false},"NatSettings":{"type":"object","properties":{"availabilityZones":{"description":"#### Number of availability zones for NAT Gateway deployment.\n\n---\n\nControls how many availability zones will have a dedicated NAT Gateway for high availability.\n\n- **1 AZ:** Single NAT Gateway (lowest cost, but no redundancy if that AZ fails)\n- **2 AZs:** NAT Gateways in two zones (balanced cost and availability)\n- **3 AZs:** NAT Gateways in three zones (highest availability and cost)\n\nHigher numbers provide better fault tolerance but increase costs proportionally.\n\nEach NAT Gateway receives a static Elastic IP address that persists across deployments,\nallowing you to whitelist these IP addresses in external services (e.g., third-party APIs, databases, payment gateways).","default":2,"enum":[1,2,3],"type":"number","_MdxDesc":{"sd":"<p> Number of availability zones for NAT Gateway deployment.</p>\n","ld":"<p>Controls how many availability zones will have a dedicated NAT Gateway for high availability.</p>\n<ul>\n<li><strong>1 AZ:</strong> Single NAT Gateway (lowest cost, but no redundancy if that AZ fails)</li>\n<li><strong>2 AZs:</strong> NAT Gateways in two zones (balanced cost and availability)</li>\n<li><strong>3 AZs:</strong> NAT Gateways in three zones (highest availability and cost)</li>\n</ul>\n<p>Higher numbers provide better fault tolerance but increase costs proportionally.</p>\n<p>Each NAT Gateway receives a static Elastic IP address that persists across deployments,\nallowing you to whitelist these IP addresses in external services (e.g., third-party APIs, databases, payment gateways).</p>\n"}}},"additionalProperties":false},"StacktapeResourceDefinition":{"anyOf":[{"$ref":"#/definitions/ContainerWorkload"},{"$ref":"#/definitions/BatchJob"},{"$ref":"#/definitions/WebService"},{"$ref":"#/definitions/PrivateService"},{"$ref":"#/definitions/WorkerService"},{"$ref":"#/definitions/RelationalDatabase"},{"$ref":"#/definitions/ApplicationLoadBalancer"},{"$ref":"#/definitions/NetworkLoadBalancer"},{"$ref":"#/definitions/HttpApiGateway"},{"$ref":"#/definitions/Bucket"},{"$ref":"#/definitions/UserAuthPool"},{"$ref":"#/definitions/EventBus"},{"$ref":"#/definitions/Bastion"},{"$ref":"#/definitions/DynamoDbTable"},{"$ref":"#/definitions/StateMachine"},{"$ref":"#/definitions/MongoDbAtlasCluster"},{"$ref":"#/definitions/RedisCluster"},{"$ref":"#/definitions/CustomResourceInstance"},{"$ref":"#/definitions/CustomResourceDefinition"},{"$ref":"#/definitions/UpstashRedis"},{"$ref":"#/definitions/DeploymentScript"},{"$ref":"#/definitions/AwsCdkConstruct"},{"$ref":"#/definitions/SqsQueue"},{"$ref":"#/definitions/SnsTopic"},{"$ref":"#/definitions/HostingBucket"},{"$ref":"#/definitions/WebAppFirewall"},{"$ref":"#/definitions/NextjsWeb"},{"$ref":"#/definitions/OpenSearchDomain"},{"$ref":"#/definitions/EfsFilesystem"},{"$ref":"#/definitions/LambdaFunction"},{"$ref":"#/definitions/EdgeLambdaFunction"}]},"ContainerWorkload":{"description":"#### A resource for running and managing containerized applications.\n\n---\n\nA multi-container workload is a fully managed, auto-scaling, and easy-to-use runtime for your Docker containers.\nIt allows you to run one or more containers together with shared resources.","type":"object","properties":{"type":{"type":"string","const":"multi-container-workload"},"properties":{"$ref":"#/definitions/ContainerWorkloadProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> A resource for running and managing containerized applications.</p>\n","ld":"<p>A multi-container workload is a fully managed, auto-scaling, and easy-to-use runtime for your Docker containers.\nIt allows you to run one or more containers together with shared resources.</p>\n"}},"ContainerWorkloadProps":{"type":"object","properties":{"containers":{"description":"#### A list of containers that will run in this workload.\n\n---\n\nA workload can consist of one or more containers. Containers within the same workload share computing resources and scale together as a single unit.","type":"array","items":{"$ref":"#/definitions/ContainerWorkloadContainer"},"_MdxDesc":{"sd":"<p> A list of containers that will run in this workload.</p>\n","ld":"<p>A workload can consist of one or more containers. Containers within the same workload share computing resources and scale together as a single unit.</p>\n"}},"resources":{"$ref":"#/definitions/ContainerWorkloadResourcesConfig","description":"#### Configures the computing resources (CPU, memory, and instance types) for the workload.\n\n---\n\nYou can choose between two compute engines:\n- **Fargate**: A serverless option where you don't need to manage the underlying servers. You specify CPU and memory, and AWS handles the rest. This is the simplest way to run containers.\n- **EC2**: This option gives you fine-grained control over the underlying virtual machines (instances). You can choose specific EC2 instance types to optimize for your workload's needs.\n\nTo use Fargate, specify the `cpu` and `memory` properties. To use EC2, specify the `instanceTypes` property.","_MdxDesc":{"sd":"<p> Configures the computing resources (CPU, memory, and instance types) for the workload.</p>\n","ld":"<p>You can choose between two compute engines:</p>\n<ul>\n<li><strong>Fargate</strong>: A serverless option where you don&#39;t need to manage the underlying servers. You specify CPU and memory, and AWS handles the rest. This is the simplest way to run containers.</li>\n<li><strong>EC2</strong>: This option gives you fine-grained control over the underlying virtual machines (instances). You can choose specific EC2 instance types to optimize for your workload&#39;s needs.</li>\n</ul>\n<p>To use Fargate, specify the <code>cpu</code> and <code>memory</code> properties. To use EC2, specify the <code>instanceTypes</code> property.</p>\n"}},"scaling":{"$ref":"#/definitions/ContainerWorkloadScaling","description":"#### Configures how the workload scales in and out.\n\n---\n\nScaling is handled horizontally, meaning more instances of your workload are added to handle increased demand.\nIncoming traffic is automatically distributed among the available instances.","_MdxDesc":{"sd":"<p> Configures how the workload scales in and out.</p>\n","ld":"<p>Scaling is handled horizontally, meaning more instances of your workload are added to handle increased demand.\nIncoming traffic is automatically distributed among the available instances.</p>\n"}},"deployment":{"$ref":"#/definitions/ContainerWorkloadDeploymentConfig","description":"#### Configures the deployment strategy for updating the workload.\n\n---\n\nThis allows for safe, gradual deployments. Instead of instantly replacing the old version, traffic is shifted to the new version over time.\nThis provides an opportunity to monitor for issues and roll back if necessary.\n\nSupported strategies include Canary, Linear, and AllAtOnce deployments.\n\n> **Note:** To use gradual deployments, your workload must be integrated with an Application Load Balancer.","_MdxDesc":{"sd":"<p> Configures the deployment strategy for updating the workload.</p>\n","ld":"<p>This allows for safe, gradual deployments. Instead of instantly replacing the old version, traffic is shifted to the new version over time.\nThis provides an opportunity to monitor for issues and roll back if necessary.</p>\n<p>Supported strategies include Canary, Linear, and AllAtOnce deployments.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> To use gradual deployments, your workload must be integrated with an Application Load Balancer.</p>\n</div>\n</div>"}},"enableRemoteSessions":{"description":"#### Enables interactive shell access to running containers.\n\n---\n\nWhen enabled, you can use the `stacktape container:session` command to get a shell inside a running container.\nThis is useful for debugging and inspecting your application in a live environment.\nIt uses AWS ECS Exec and SSM Session Manager for secure connections.","type":"boolean","_MdxDesc":{"sd":"<p> Enables interactive shell access to running containers.</p>\n","ld":"<p>When enabled, you can use the <code>stacktape container:session</code> command to get a shell inside a running container.\nThis is useful for debugging and inspecting your application in a live environment.\nIt uses AWS ECS Exec and SSM Session Manager for secure connections.</p>\n"}},"usePrivateSubnetsWithNAT":{"description":"#### Deploys the workload in private subnets with internet access through NAT Gateway.\n\n---\n\nWhen the workload is in a private subnet, it does not have public IP and direct internet access.\nInstead, all outbound internet traffic is routed through a NAT Gateway.\n\nYou can assign a static public IP address to the NAT Gateway and configure high availability using `stackConfig.vpcSettings`.\nThis allows you to whitelist your service's IP address in external services (e.g., third-party APIs, databases, payment gateways).\n\n**Cost considerations:**\n- NAT Gateways incur additional AWS charges for both the gateway itself and data processing","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Deploys the workload in private subnets with internet access through NAT Gateway.</p>\n","ld":"<p>When the workload is in a private subnet, it does not have public IP and direct internet access.\nInstead, all outbound internet traffic is routed through a NAT Gateway.</p>\n<p>You can assign a static public IP address to the NAT Gateway and configure high availability using <code>stackConfig.vpcSettings</code>.\nThis allows you to whitelist your service&#39;s IP address in external services (e.g., third-party APIs, databases, payment gateways).</p>\n<p><strong>Cost considerations:</strong></p>\n<ul>\n<li>NAT Gateways incur additional AWS charges for both the gateway itself and data processing</li>\n</ul>\n"}},"connectTo":{"description":"#### Connect To\n\n---\n\nConfigures access to other resources in your stack and AWS services. By specifying resources here, Stacktape automatically:\n- Configures IAM role permissions.\n- Sets up security group rules to allow network traffic.\n- Injects environment variables with connection details into the compute resource.\n\nEnvironment variables are named `STP_[RESOURCE_NAME]_[VARIABLE_NAME]` (e.g., `STP_MY_DATABASE_CONNECTION_STRING`).\n\n---\n\n#### Granted Permissions and Injected Variables:\n\n**`Bucket`**\n- **Permissions:** List, create, get, delete, and tag objects.\n- **Variables:** `NAME`, `ARN`\n\n**`DynamoDbTable`**\n- **Permissions:** Get, put, update, delete, scan, and query items; describe table stream.\n- **Variables:** `NAME`, `ARN`, `STREAM_ARN`\n\n**`MongoDbAtlasCluster`**\n- **Permissions:** Allows connection to clusters with `accessibilityMode` set to `scoping-workloads-in-vpc`. Creates a temporary user for secure, credential-less access.\n- **Variables:** `CONNECTION_STRING`\n\n**`RelationalDatabase`**\n- **Permissions:** Allows connection to databases with `accessibilityMode` set to `scoping-workloads-in-vpc`.\n- **Variables:** `CONNECTION_STRING`, `JDBC_CONNECTION_STRING`, `HOST`, `PORT`. For Aurora clusters, `READER_CONNECTION_STRING`, `READER_JDBC_CONNECTION_STRING`, and `READER_HOST` are also included.\n\n**`RedisCluster`**\n- **Permissions:** Allows connection to clusters with `accessibilityMode` set to `scoping-workloads-in-vpc`.\n- **Variables:** `HOST`, `READER_HOST`, `PORT`\n\n**`EventBus`**\n- **Permissions:** Publish events.\n- **Variables:** `ARN`\n\n**`Function`**\n- **Permissions:** Invoke the function, including via its URL if enabled.\n- **Variables:** `ARN`\n\n**`BatchJob`**\n- **Permissions:** Submit, list, describe, and terminate jobs; manage state machine executions.\n- **Variables:** `JOB_DEFINITION_ARN`, `STATE_MACHINE_ARN`\n\n**`UserAuthPool`**\n- **Permissions:** Full control over the user pool (`cognito-idp:*`).\n- **Variables:** `ID`, `CLIENT_ID`, `ARN`\n\n**`SnsTopic`**\n- **Permissions:** Confirm, list, publish, and manage subscriptions.\n- **Variables:** `ARN`, `NAME`\n\n**`SqsQueue`**\n- **Permissions:** Send, receive, delete, and purge messages.\n- **Variables:** `ARN`, `NAME`, `URL`\n\n**`UpstashKafkaTopic`**\n- **Variables:** `TOPIC_NAME`, `TOPIC_ID`, `USERNAME`, `PASSWORD`, `TCP_ENDPOINT`, `REST_URL`\n\n**`UpstashRedis`**\n- **Variables:** `HOST`, `PORT`, `PASSWORD`, `REST_TOKEN`, `REST_URL`, `REDIS_URL`\n\n**`PrivateService`**\n- **Variables:** `ADDRESS`\n\n**`aws:ses` (Macro)**\n- **Permissions:** Full permissions for AWS SES (`ses:*`).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Connect To</p>\n","ld":"<p>Configures access to other resources in your stack and AWS services. By specifying resources here, Stacktape automatically:</p>\n<ul>\n<li>Configures IAM role permissions.</li>\n<li>Sets up security group rules to allow network traffic.</li>\n<li>Injects environment variables with connection details into the compute resource.</li>\n</ul>\n<p>Environment variables are named <code>STP_[RESOURCE_NAME]_[VARIABLE_NAME]</code> (e.g., <code>STP_MY_DATABASE_CONNECTION_STRING</code>).</p>\n"}},"iamRoleStatements":{"description":"#### Custom IAM Role Statements\n\n---\n\nA list of raw AWS IAM role statements to append to the resource's role, allowing for fine-grained permission control.","type":"array","items":{"$ref":"#/definitions/StpIamRoleStatement"},"_MdxDesc":{"sd":"<p> Custom IAM Role Statements</p>\n","ld":"<p>A list of raw AWS IAM role statements to append to the resource&#39;s role, allowing for fine-grained permission control.</p>\n"}}},"additionalProperties":false,"required":["containers","resources"]},"ContainerWorkloadContainer":{"type":"object","properties":{"events":{"description":"#### Configures how this container receives traffic and events.\n\n---\n\nEvent integrations allow containers to:\n- Receive requests from load balancers.\n- Communicate with other containers in the same workload.","type":"array","items":{"anyOf":[{"$ref":"#/definitions/ContainerWorkloadLoadBalancerIntegration"},{"$ref":"#/definitions/ContainerWorkloadHttpApiIntegration"},{"$ref":"#/definitions/ContainerWorkloadInternalIntegration"},{"$ref":"#/definitions/ContainerWorkloadServiceConnectIntegration"},{"$ref":"#/definitions/ContainerWorkloadNetworkLoadBalancerIntegration"}]},"_MdxDesc":{"sd":"<p> Configures how this container receives traffic and events.</p>\n","ld":"<p>Event integrations allow containers to:</p>\n<ul>\n<li>Receive requests from load balancers.</li>\n<li>Communicate with other containers in the same workload.</li>\n</ul>\n"}},"loadBalancerHealthCheck":{"$ref":"#/definitions/LoadBalancerHealthCheck","description":"#### Configures how a load balancer checks the health of this container.\n\n---\n\n> This property only has an effect if the container is integrated with an Application Load Balancer or Network Load Balancer.","_MdxDesc":{"sd":"<p> Configures how a load balancer checks the health of this container.</p>\n","ld":"<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>This property only has an effect if the container is integrated with an Application Load Balancer or Network Load Balancer.</p>\n</div>\n</div>"}},"name":{"description":"#### A unique name for the container within the workload.","type":"string","_MdxDesc":{"sd":"<p> A unique name for the container within the workload.</p>\n"}},"packaging":{"$ref":"#/definitions/ContainerWorkloadContainerPackaging","description":"#### Configures the container image.","_MdxDesc":{"sd":"<p> Configures the container image.</p>\n"}},"essential":{"description":"#### Determines if this container is critical for the workload's health.\n\n---\n\nIf an essential container fails or stops, all other containers in the same workload instance are also stopped. The entire instance is then terminated and replaced.","type":"boolean","_MdxDesc":{"sd":"<p> Determines if this container is critical for the workload&#39;s health.</p>\n","ld":"<p>If an essential container fails or stops, all other containers in the same workload instance are also stopped. The entire instance is then terminated and replaced.</p>\n"}},"logging":{"$ref":"#/definitions/ContainerWorkloadContainerLogging","description":"#### Configures the logging behavior for this container.\n\n---\n\nContainer logs (`stdout` and `stderr`) are automatically sent to a CloudWatch log group.\n\nYou can view logs in two ways:\n  - Through the AWS CloudWatch console. Use the `stacktape stack-info` command to get a direct link.\n  - Using the `stacktape logs` command to stream logs directly to your terminal.","_MdxDesc":{"sd":"<p> Configures the logging behavior for this container.</p>\n","ld":"<p>Container logs (<code>stdout</code> and <code>stderr</code>) are automatically sent to a CloudWatch log group.</p>\n<p>You can view logs in two ways:</p>\n<ul>\n<li>Through the AWS CloudWatch console. Use the <code>stacktape stack-info</code> command to get a direct link.</li>\n<li>Using the <code>stacktape logs</code> command to stream logs directly to your terminal.</li>\n</ul>\n"}},"dependsOn":{"description":"#### A list of other containers that this container depends on to start.\n\n---\n\nThis defines the startup order for containers within the workload.\nFor example, you can require a database container to be `HEALTHY` before your application container starts.","type":"array","items":{"$ref":"#/definitions/ContainerDependency"},"_MdxDesc":{"sd":"<p> A list of other containers that this container depends on to start.</p>\n","ld":"<p>This defines the startup order for containers within the workload.\nFor example, you can require a database container to be <code>HEALTHY</code> before your application container starts.</p>\n"}},"environment":{"description":"#### Environment variables to inject into the container.\n\n---\n\nEnvironment variables are ideal for providing configuration details to your container, such as database connection strings, API keys, or other dynamic parameters.","type":"array","items":{"$ref":"#/definitions/EnvironmentVar"},"_MdxDesc":{"sd":"<p> Environment variables to inject into the container.</p>\n","ld":"<p>Environment variables are ideal for providing configuration details to your container, such as database connection strings, API keys, or other dynamic parameters.</p>\n"}},"internalHealthCheck":{"$ref":"#/definitions/ContainerHealthCheck","description":"#### Configures an internal health check to determine if the container is healthy.\n\n---\n\nIf this health check fails for an essential container, the entire workload instance will be terminated and replaced.","_MdxDesc":{"sd":"<p> Configures an internal health check to determine if the container is healthy.</p>\n","ld":"<p>If this health check fails for an essential container, the entire workload instance will be terminated and replaced.</p>\n"}},"stopTimeout":{"description":"#### The time (in seconds) to wait before forcefully killing the container if it doesn't shut down gracefully.\n\n---\n\nWhen a container is stopped, it first receives a `SIGTERM` signal. If it doesn't exit within this timeout, it will be sent a `SIGKILL` signal.\nThis allows for graceful shutdown procedures. The timeout must be between 2 and 120 seconds.","default":2,"type":"number","_MdxDesc":{"sd":"<p> The time (in seconds) to wait before forcefully killing the container if it doesn&#39;t shut down gracefully.</p>\n","ld":"<p>When a container is stopped, it first receives a <code>SIGTERM</code> signal. If it doesn&#39;t exit within this timeout, it will be sent a <code>SIGKILL</code> signal.\nThis allows for graceful shutdown procedures. The timeout must be between 2 and 120 seconds.</p>\n"}},"volumeMounts":{"description":"#### A list of file system volumes to mount to the container.\n\n---\n\nVolumes provide persistent storage that can be shared across multiple containers and persists even if the container is stopped or replaced.\nCurrently, only EFS (Elastic File System) volumes are supported.","type":"array","items":{"$ref":"#/definitions/ContainerEfsMount"},"_MdxDesc":{"sd":"<p> A list of file system volumes to mount to the container.</p>\n","ld":"<p>Volumes provide persistent storage that can be shared across multiple containers and persists even if the container is stopped or replaced.\nCurrently, only EFS (Elastic File System) volumes are supported.</p>\n"}}},"additionalProperties":false,"required":["name","packaging"]},"ContainerWorkloadLoadBalancerIntegration":{"description":"#### Triggers a container when a request matches the specified conditions on an Application Load Balancer.\n\n---\n\nYou can route requests based on HTTP method, path, headers, query parameters, and source IP address.","type":"object","properties":{"type":{"type":"string","const":"application-load-balancer"},"properties":{"$ref":"#/definitions/ContainerWorkloadLoadBalancerIntegrationProps","description":"#### Properties of the integration","_MdxDesc":{"sd":"<p> Properties of the integration</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Triggers a container when a request matches the specified conditions on an Application Load Balancer.</p>\n","ld":"<p>You can route requests based on HTTP method, path, headers, query parameters, and source IP address.</p>\n"}},"ContainerWorkloadLoadBalancerIntegrationProps":{"type":"object","properties":{"containerPort":{"description":"#### The container port that will receive traffic from the load balancer.","type":"number","_MdxDesc":{"sd":"<p> The container port that will receive traffic from the load balancer.</p>\n"}},"loadBalancerName":{"description":"#### The name of the Application Load Balancer.\n\n---\n\nThis must reference a load balancer defined in your Stacktape configuration.","type":"string","_MdxDesc":{"sd":"<p> The name of the Application Load Balancer.</p>\n","ld":"<p>This must reference a load balancer defined in your Stacktape configuration.</p>\n"}},"listenerPort":{"description":"#### The port of the load balancer listener to attach to.\n\n---\n\nYou only need to specify this if the load balancer uses custom listeners.","type":"number","_MdxDesc":{"sd":"<p> The port of the load balancer listener to attach to.</p>\n","ld":"<p>You only need to specify this if the load balancer uses custom listeners.</p>\n"}},"priority":{"description":"#### The priority of this integration rule.\n\n---\n\nLoad balancer rules are evaluated in order from the lowest priority to the highest.\nThe first rule that matches an incoming request will handle it.","type":"number","_MdxDesc":{"sd":"<p> The priority of this integration rule.</p>\n","ld":"<p>Load balancer rules are evaluated in order from the lowest priority to the highest.\nThe first rule that matches an incoming request will handle it.</p>\n"}},"paths":{"description":"#### A list of URL paths that will trigger this integration.\n\n---\n\nThe request will be routed if its path matches any of the paths in this list.\nThe comparison is case-sensitive and supports `*` and `?` wildcards.\n\nExample: `/users`, `/articles/*`","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of URL paths that will trigger this integration.</p>\n","ld":"<p>The request will be routed if its path matches any of the paths in this list.\nThe comparison is case-sensitive and supports <code>*</code> and <code>?</code> wildcards.</p>\n<p>Example: <code>/users</code>, <code>/articles/*</code></p>\n"}},"methods":{"description":"#### A list of HTTP methods that will trigger this integration.\n\n---\n\nExample: `GET`, `POST`, `DELETE`","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of HTTP methods that will trigger this integration.</p>\n","ld":"<p>Example: <code>GET</code>, <code>POST</code>, <code>DELETE</code></p>\n"}},"hosts":{"description":"#### A list of hostnames that will trigger this integration.\n\n---\n\nThe hostname is parsed from the `Host` header of the request.\nWildcards (`*` and `?`) are supported.\n\nExample: `api.example.com`, `*.myapp.com`","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of hostnames that will trigger this integration.</p>\n","ld":"<p>The hostname is parsed from the <code>Host</code> header of the request.\nWildcards (<code>*</code> and <code>?</code>) are supported.</p>\n<p>Example: <code>api.example.com</code>, <code>*.myapp.com</code></p>\n"}},"headers":{"description":"#### A list of header conditions that the request must match.\n\n---\n\nAll header conditions must be met for the request to be routed.","type":"array","items":{"$ref":"#/definitions/LbHeaderCondition"},"_MdxDesc":{"sd":"<p> A list of header conditions that the request must match.</p>\n","ld":"<p>All header conditions must be met for the request to be routed.</p>\n"}},"queryParams":{"description":"#### A list of query parameter conditions that the request must match.\n\n---\n\nAll query parameter conditions must be met for the request to be routed.","type":"array","items":{"$ref":"#/definitions/LbQueryParamCondition"},"_MdxDesc":{"sd":"<p> A list of query parameter conditions that the request must match.</p>\n","ld":"<p>All query parameter conditions must be met for the request to be routed.</p>\n"}},"sourceIps":{"description":"#### A list of source IP addresses (in CIDR format) that are allowed to trigger this integration.\n\n---\n\n> **Note:** If the client is behind a proxy, this will be the IP address of the proxy.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of source IP addresses (in CIDR format) that are allowed to trigger this integration.</p>\n","ld":"<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> If the client is behind a proxy, this will be the IP address of the proxy.</p>\n</div>\n</div>"}}},"additionalProperties":false,"required":["containerPort","loadBalancerName","priority"]},"LbHeaderCondition":{"type":"object","properties":{"headerName":{"description":"#### The name of the HTTP header.","type":"string","_MdxDesc":{"sd":"<p> The name of the HTTP header.</p>\n"}},"values":{"description":"#### A list of allowed values for the header.\n\n---\n\nThe condition is met if the header's value in the incoming request matches any of the values in this list. The comparison is case-insensitive.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of allowed values for the header.</p>\n","ld":"<p>The condition is met if the header&#39;s value in the incoming request matches any of the values in this list. The comparison is case-insensitive.</p>\n"}}},"additionalProperties":false,"required":["headerName","values"]},"LbQueryParamCondition":{"type":"object","properties":{"paramName":{"description":"#### The name of the query parameter.","type":"string","_MdxDesc":{"sd":"<p> The name of the query parameter.</p>\n"}},"values":{"description":"#### A list of allowed values for the query parameter.\n\n---\n\nThe condition is met if the query parameter's value in the incoming request matches any of the values in this list. The comparison is case-insensitive.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of allowed values for the query parameter.</p>\n","ld":"<p>The condition is met if the query parameter&#39;s value in the incoming request matches any of the values in this list. The comparison is case-insensitive.</p>\n"}}},"additionalProperties":false,"required":["paramName","values"]},"ContainerWorkloadHttpApiIntegration":{"description":"#### Triggers a container when an HTTP API Gateway receives a matching request.\n\n---\n\nYou can route requests based on HTTP method and path.","type":"object","properties":{"type":{"type":"string","const":"http-api-gateway"},"properties":{"$ref":"#/definitions/ContainerWorkloadHttpApiIntegrationProps","description":"#### Properties of the integration","_MdxDesc":{"sd":"<p> Properties of the integration</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Triggers a container when an HTTP API Gateway receives a matching request.</p>\n","ld":"<p>You can route requests based on HTTP method and path.</p>\n"}},"ContainerWorkloadHttpApiIntegrationProps":{"type":"object","properties":{"containerPort":{"description":"#### The container port that will receive traffic from the API Gateway.","type":"number","_MdxDesc":{"sd":"<p> The container port that will receive traffic from the API Gateway.</p>\n"}},"httpApiGatewayName":{"description":"#### The name of the HTTP API Gateway.","type":"string","_MdxDesc":{"sd":"<p> The name of the HTTP API Gateway.</p>\n"}},"method":{"description":"#### The HTTP method that will trigger this integration.\n\n---\n\nYou can specify an exact method (e.g., `GET`) or use `*` to match any method.","enum":["*","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"],"type":"string","_MdxDesc":{"sd":"<p> The HTTP method that will trigger this integration.</p>\n","ld":"<p>You can specify an exact method (e.g., <code>GET</code>) or use <code>*</code> to match any method.</p>\n"}},"path":{"description":"#### The URL path that will trigger this integration.\n\n---\n\n- **Exact path**: `/users`\n- **Path with parameter**: `/users/{id}`. The `id` will be available in `event.pathParameters.id`.\n- **Greedy path**: `/files/{proxy+}`. This will match any path starting with `/files/`.","type":"string","_MdxDesc":{"sd":"<p> The URL path that will trigger this integration.</p>\n","ld":"<ul>\n<li><strong>Exact path</strong>: <code>/users</code></li>\n<li><strong>Path with parameter</strong>: <code>/users/{id}</code>. The <code>id</code> will be available in <code>event.pathParameters.id</code>.</li>\n<li><strong>Greedy path</strong>: <code>/files/{proxy+}</code>. This will match any path starting with <code>/files/</code>.</li>\n</ul>\n"}},"authorizer":{"$ref":"#/definitions/StpAuthorizer","description":"#### An authorizer to protect this route.\n\n---\n\nUnauthorized requests will be rejected with a `401 Unauthorized` response.","_MdxDesc":{"sd":"<p> An authorizer to protect this route.</p>\n","ld":"<p>Unauthorized requests will be rejected with a <code>401 Unauthorized</code> response.</p>\n"}},"payloadFormat":{"description":"#### The payload format version for the Lambda integration.\n\n---\n\nFor details on the differences between formats, see the [AWS documentation](https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-develop-integrations-lambda.html).","default":"'1.0'","enum":["1.0","2.0"],"type":"string","_MdxDesc":{"sd":"<p> The payload format version for the Lambda integration.</p>\n","ld":"<p>For details on the differences between formats, see the <a href=\"https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-develop-integrations-lambda.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["containerPort","httpApiGatewayName","method","path"]},"StpAuthorizer":{"anyOf":[{"$ref":"#/definitions/CognitoAuthorizer"},{"$ref":"#/definitions/LambdaAuthorizer"}]},"CognitoAuthorizer":{"type":"object","properties":{"type":{"description":"#### Cognito JWT authorizer\n\n---\n\nConfigures an HTTP API authorizer that validates JSON Web Tokens (JWTs) issued by a Cognito user pool.\nThis is the simplest way to protect routes when your users sign in via `user-auth-pool`.\n\nStacktape turns this into an API Gateway v2 authorizer of type `JWT` that checks the token's issuer and audience.","type":"string","const":"cognito","_MdxDesc":{"sd":"<p> Cognito JWT authorizer</p>\n","ld":"<p>Configures an HTTP API authorizer that validates JSON Web Tokens (JWTs) issued by a Cognito user pool.\nThis is the simplest way to protect routes when your users sign in via <code>user-auth-pool</code>.</p>\n<p>Stacktape turns this into an API Gateway v2 authorizer of type <code>JWT</code> that checks the token&#39;s issuer and audience.</p>\n"}},"properties":{"$ref":"#/definitions/CognitoAuthorizerProperties"}},"additionalProperties":false,"required":["properties","type"]},"CognitoAuthorizerProperties":{"type":"object","properties":{"userPoolName":{"description":"#### Name of the user pool to protect the API\n\n---\n\nThe Stacktape name of the `user-auth-pool` resource whose tokens should be accepted by this HTTP API authorizer.\nStacktape uses this to:\n\n- Set the expected **audience** to the user pool client ID.\n- Build the expected **issuer** URL based on the user pool and AWS region.\n\nIn practice this means only JWTs issued by this pool (and its client) will be considered valid.","type":"string","_MdxDesc":{"sd":"<p> Name of the user pool to protect the API</p>\n","ld":"<p>The Stacktape name of the <code>user-auth-pool</code> resource whose tokens should be accepted by this HTTP API authorizer.\nStacktape uses this to:</p>\n<ul>\n<li>Set the expected <strong>audience</strong> to the user pool client ID.</li>\n<li>Build the expected <strong>issuer</strong> URL based on the user pool and AWS region.</li>\n</ul>\n<p>In practice this means only JWTs issued by this pool (and its client) will be considered valid.</p>\n"}},"identitySources":{"description":"#### Where to read the JWT from in the request\n\n---\n\nA list of identity sources that tell API Gateway where to look for the bearer token, using the\n`$request.*` syntax from API Gateway (for example `'$request.header.Authorization'`).\n\nIf you omit this, Stacktape defaults to reading the token from the `Authorization` HTTP header,\nusing a JWT authorizer as described in the API Gateway v2 authorizer docs\n([AWS::ApiGatewayV2::Authorizer](https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-apigatewayv2-authorizer)).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Where to read the JWT from in the request</p>\n","ld":"<p>A list of identity sources that tell API Gateway where to look for the bearer token, using the\n<code>$request.*</code> syntax from API Gateway (for example <code>'$request.header.Authorization'</code>).</p>\n<p>If you omit this, Stacktape defaults to reading the token from the <code>Authorization</code> HTTP header,\nusing a JWT authorizer as described in the API Gateway v2 authorizer docs\n(<a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-apigatewayv2-authorizer\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS::ApiGatewayV2::Authorizer</a>).</p>\n"}}},"additionalProperties":false,"required":["userPoolName"]},"LambdaAuthorizer":{"type":"object","properties":{"type":{"description":"#### Lambda-based HTTP API authorizer\n\n---\n\nConfigures an API Gateway **request** authorizer that runs a Lambda function to decide whether a request is allowed.\nThis is useful when your authorization logic can't be expressed as simple JWT validation  for example when you\ncheck API keys, look up permissions in a database, or integrate with a non-JWT identity system.\n\nStacktape creates an `AWS::ApiGatewayV2::Authorizer` of type `REQUEST` and wires it up to your Lambda.","type":"string","const":"lambda","_MdxDesc":{"sd":"<p> Lambda-based HTTP API authorizer</p>\n","ld":"<p>Configures an API Gateway <strong>request</strong> authorizer that runs a Lambda function to decide whether a request is allowed.\nThis is useful when your authorization logic can&#39;t be expressed as simple JWT validation  for example when you\ncheck API keys, look up permissions in a database, or integrate with a non-JWT identity system.</p>\n<p>Stacktape creates an <code>AWS::ApiGatewayV2::Authorizer</code> of type <code>REQUEST</code> and wires it up to your Lambda.</p>\n"}},"properties":{"$ref":"#/definitions/LambdaAuthorizerProperties"}},"additionalProperties":false,"required":["properties","type"]},"LambdaAuthorizerProperties":{"type":"object","properties":{"functionName":{"description":"#### Name of the authorizer function\n\n---\n\nThe Stacktape name of a `function` resource that should run for each authorized request.\nAPI Gateway calls this Lambda, passes request details, and uses its response to allow or deny access.","type":"string","_MdxDesc":{"sd":"<p> Name of the authorizer function</p>\n","ld":"<p>The Stacktape name of a <code>function</code> resource that should run for each authorized request.\nAPI Gateway calls this Lambda, passes request details, and uses its response to allow or deny access.</p>\n"}},"iamResponse":{"description":"#### Use IAM-style (v1) authorizer responses\n\n---\n\n- If `true`, your Lambda must return a full IAM policy document (the \"v1\" format).\n- If `false` or omitted, Stacktape enables **simple responses** (the HTTP API v2 payload format)\n  so your Lambda can return a small JSON object with an `isAuthorized` flag and optional context.\n\nThis flag is wired to `EnableSimpleResponses` on the underlying `AWS::ApiGatewayV2::Authorizer`.","type":"boolean","_MdxDesc":{"sd":"<p> Use IAM-style (v1) authorizer responses</p>\n","ld":"<ul>\n<li>If <code>true</code>, your Lambda must return a full IAM policy document (the &quot;v1&quot; format).</li>\n<li>If <code>false</code> or omitted, Stacktape enables <strong>simple responses</strong> (the HTTP API v2 payload format)\nso your Lambda can return a small JSON object with an <code>isAuthorized</code> flag and optional context.</li>\n</ul>\n<p>This flag is wired to <code>EnableSimpleResponses</code> on the underlying <code>AWS::ApiGatewayV2::Authorizer</code>.</p>\n"}},"identitySources":{"description":"#### Where to read identity data from\n\n---\n\nA list of request fields API Gateway should pass into your Lambda authorizer (for example headers, query parameters,\nor stage variables) using the `$request.*` syntax.\n\nWhen left empty, no specific identity sources are configured and your Lambda must inspect the incoming event directly.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Where to read identity data from</p>\n","ld":"<p>A list of request fields API Gateway should pass into your Lambda authorizer (for example headers, query parameters,\nor stage variables) using the <code>$request.*</code> syntax.</p>\n<p>When left empty, no specific identity sources are configured and your Lambda must inspect the incoming event directly.</p>\n"}},"cacheResultSeconds":{"description":"#### Cache authorizer results\n\n---\n\nNumber of seconds API Gateway should cache the result of the Lambda authorizer for a given identity.\nWhile cached, repeated requests skip calling your authorizer function and reuse the previous result.\n\nThis value is applied to `AuthorizerResultTtlInSeconds`. If omitted, Stacktape sets it to `0` (no caching).","type":"number","_MdxDesc":{"sd":"<p> Cache authorizer results</p>\n","ld":"<p>Number of seconds API Gateway should cache the result of the Lambda authorizer for a given identity.\nWhile cached, repeated requests skip calling your authorizer function and reuse the previous result.</p>\n<p>This value is applied to <code>AuthorizerResultTtlInSeconds</code>. If omitted, Stacktape sets it to <code>0</code> (no caching).</p>\n"}}},"additionalProperties":false,"required":["functionName"]},"ContainerWorkloadInternalIntegration":{"description":"#### Opens a container port for connections from other containers within the same workload.","type":"object","properties":{"type":{"type":"string","const":"workload-internal"},"properties":{"$ref":"#/definitions/ContainerWorkloadInternalIntegrationProps","description":"#### Properties of the integration","_MdxDesc":{"sd":"<p> Properties of the integration</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Opens a container port for connections from other containers within the same workload.</p>\n"}},"ContainerWorkloadInternalIntegrationProps":{"type":"object","properties":{"containerPort":{"description":"#### The container port to open for internal traffic.","type":"number","_MdxDesc":{"sd":"<p> The container port to open for internal traffic.</p>\n"}}},"additionalProperties":false,"required":["containerPort"]},"ContainerWorkloadServiceConnectIntegration":{"description":"#### Opens a container port for connections from other compute resources in the same stack.","type":"object","properties":{"type":{"type":"string","const":"service-connect"},"properties":{"$ref":"#/definitions/ContainerWorkloadServiceConnectIntegrationProps","description":"#### Properties of the integration","_MdxDesc":{"sd":"<p> Properties of the integration</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Opens a container port for connections from other compute resources in the same stack.</p>\n"}},"ContainerWorkloadServiceConnectIntegrationProps":{"type":"object","properties":{"containerPort":{"description":"#### The container port to open for service-to-service communication.","type":"number","_MdxDesc":{"sd":"<p> The container port to open for service-to-service communication.</p>\n"}},"alias":{"description":"#### An alias for this service, used for service discovery.\n\n---\n\nOther resources in the stack can connect to this service using a URL like `protocol://alias:port` (e.g., `http://my-service:8080`).\nBy default, the alias is derived from the resource and container names (e.g., `my-resource-my-container`).","type":"string","_MdxDesc":{"sd":"<p> An alias for this service, used for service discovery.</p>\n","ld":"<p>Other resources in the stack can connect to this service using a URL like <code>protocol://alias:port</code> (e.g., <code>http://my-service:8080</code>).\nBy default, the alias is derived from the resource and container names (e.g., <code>my-resource-my-container</code>).</p>\n"}},"protocol":{"description":"#### The protocol used for service-to-service communication.\n\n---\n\nSpecifying the protocol allows AWS to capture protocol-specific metrics, such as the number of HTTP 5xx errors.","enum":["grpc","http","http2"],"type":"string","_MdxDesc":{"sd":"<p> The protocol used for service-to-service communication.</p>\n","ld":"<p>Specifying the protocol allows AWS to capture protocol-specific metrics, such as the number of HTTP 5xx errors.</p>\n"}}},"additionalProperties":false,"required":["containerPort"]},"ContainerWorkloadNetworkLoadBalancerIntegration":{"description":"#### Triggers a container when a request is made to a Network Load Balancer.\n\n---\n\nA Network Load Balancer operates at the transport layer (Layer 4) and can handle TCP and TLS traffic.","type":"object","properties":{"type":{"type":"string","const":"network-load-balancer"},"properties":{"$ref":"#/definitions/ContainerWorkloadNetworkLoadBalancerIntegrationProps","description":"#### Properties of the integration","_MdxDesc":{"sd":"<p> Properties of the integration</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Triggers a container when a request is made to a Network Load Balancer.</p>\n","ld":"<p>A Network Load Balancer operates at the transport layer (Layer 4) and can handle TCP and TLS traffic.</p>\n"}},"ContainerWorkloadNetworkLoadBalancerIntegrationProps":{"type":"object","properties":{"containerPort":{"description":"#### The container port that will receive traffic from the load balancer.","type":"number","_MdxDesc":{"sd":"<p> The container port that will receive traffic from the load balancer.</p>\n"}},"loadBalancerName":{"description":"#### The name of the Network Load Balancer.\n\n---\n\nThis must reference a load balancer defined in your Stacktape configuration.","type":"string","_MdxDesc":{"sd":"<p> The name of the Network Load Balancer.</p>\n","ld":"<p>This must reference a load balancer defined in your Stacktape configuration.</p>\n"}},"listenerPort":{"description":"#### The port of the listener that will forward traffic to this integration.","type":"number","_MdxDesc":{"sd":"<p> The port of the listener that will forward traffic to this integration.</p>\n"}}},"additionalProperties":false,"required":["containerPort","listenerPort","loadBalancerName"]},"LoadBalancerHealthCheck":{"type":"object","properties":{"healthcheckPath":{"description":"#### The path on which the load balancer performs health checks.\n---","default":"/","type":"string","_MdxDesc":{"sd":"<p> The path on which the load balancer performs health checks.</p>\n"}},"healthcheckInterval":{"description":"#### The interval (in seconds) between health checks.\n---","default":5,"type":"number","_MdxDesc":{"sd":"<p> The interval (in seconds) between health checks.</p>\n"}},"healthcheckTimeout":{"description":"#### The timeout (in seconds) for a health check to be considered failed.\n---","default":4,"type":"number","_MdxDesc":{"sd":"<p> The timeout (in seconds) for a health check to be considered failed.</p>\n"}},"healthCheckProtocol":{"description":"#### The protocol the load balancer uses for health checks.\n---\n- For Application Load Balancers, the default is `HTTP`.\n- For Network Load Balancers, the default is `TCP`.","enum":["HTTP","TCP"],"type":"string","_MdxDesc":{"sd":"<p> The protocol the load balancer uses for health checks.</p>\n","ld":"<ul>\n<li>For Application Load Balancers, the default is <code>HTTP</code>.</li>\n<li>For Network Load Balancers, the default is <code>TCP</code>.</li>\n</ul>\n"}},"healthCheckPort":{"description":"#### The port the load balancer uses for health checks.\n---\n- By default, this is the same port that receives traffic from the load balancer.","type":"number","_MdxDesc":{"sd":"<p> The port the load balancer uses for health checks.</p>\n","ld":"<ul>\n<li>By default, this is the same port that receives traffic from the load balancer.</li>\n</ul>\n"}}},"additionalProperties":false},"ContainerWorkloadContainerPackaging":{"anyOf":[{"$ref":"#/definitions/StpBuildpackCwImagePackaging"},{"$ref":"#/definitions/ExternalBuildpackCwImagePackaging"},{"$ref":"#/definitions/PrebuiltCwImagePackaging"},{"$ref":"#/definitions/CustomDockerfileCwImagePackaging"},{"$ref":"#/definitions/NixpacksCwImagePackaging"}]},"StpBuildpackCwImagePackaging":{"description":"#### A zero-config buildpack that creates a container image from your source code.\n\n---\n\nThe `stacktape-image-buildpack` automatically bundles your code and dependencies into an optimized container image.\n\n**Supported languages:** JavaScript, TypeScript, Python, Java, and Go.\n\nFor JS/TS, your code is bundled into a single file using esbuild with source maps.\nThe resulting image is uploaded to a managed ECR repository.","type":"object","properties":{"type":{"type":"string","const":"stacktape-image-buildpack"},"properties":{"$ref":"#/definitions/StpBuildpackCwImagePackagingProps"}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> A zero-config buildpack that creates a container image from your source code.</p>\n","ld":"<p>The <code>stacktape-image-buildpack</code> automatically bundles your code and dependencies into an optimized container image.</p>\n<p><strong>Supported languages:</strong> JavaScript, TypeScript, Python, Java, and Go.</p>\n<p>For JS/TS, your code is bundled into a single file using esbuild with source maps.\nThe resulting image is uploaded to a managed ECR repository.</p>\n"}},"StpBuildpackCwImagePackagingProps":{"description":"#### Configures an image to be built automatically by Stacktape from your source code.","type":"object","properties":{"languageSpecificConfig":{"description":"#### Language-specific packaging configuration.","anyOf":[{"$ref":"#/definitions/EsLanguageSpecificConfig"},{"$ref":"#/definitions/PyLanguageSpecificConfig"},{"$ref":"#/definitions/JavaLanguageSpecificConfig"},{"$ref":"#/definitions/GoLanguageSpecificConfig"}],"_MdxDesc":{"sd":"<p> Language-specific packaging configuration.</p>\n"}},"requiresGlibcBinaries":{"description":"#### Builds the image with support for glibc-based binaries.\n\n---\n\nBy default, Stacktape uses Alpine-based Docker images, which use `musl` instead of `glibc`.\nEnable this option if your application has native dependencies that require `glibc`.\nThis will result in a larger container image.","type":"boolean","_MdxDesc":{"sd":"<p> Builds the image with support for glibc-based binaries.</p>\n","ld":"<p>By default, Stacktape uses Alpine-based Docker images, which use <code>musl</code> instead of <code>glibc</code>.\nEnable this option if your application has native dependencies that require <code>glibc</code>.\nThis will result in a larger container image.</p>\n"}},"customDockerBuildCommands":{"description":"#### A list of commands to be executed during the `docker build` process.\n\n---\n\nThese commands are executed using the `RUN` directive in the Dockerfile.\nThis is useful for installing additional system dependencies in your container.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of commands to be executed during the <code>docker build</code> process.</p>\n","ld":"<p>These commands are executed using the <code>RUN</code> directive in the Dockerfile.\nThis is useful for installing additional system dependencies in your container.</p>\n"}},"entryfilePath":{"description":"#### The path to the entry point of your application, relative to your Stacktape configuration file.\n\n---\n\nStacktape will attempt to bundle your code and its dependencies into a single file.\nIf a dependency cannot be bundled (e.g., it relies on binary executables), it will be installed and included in the deployment package separately.","type":"string","_MdxDesc":{"sd":"<p> The path to the entry point of your application, relative to your Stacktape configuration file.</p>\n","ld":"<p>Stacktape will attempt to bundle your code and its dependencies into a single file.\nIf a dependency cannot be bundled (e.g., it relies on binary executables), it will be installed and included in the deployment package separately.</p>\n"}},"includeFiles":{"description":"#### A glob pattern of files to explicitly include in the deployment package.\n\n---\n\nThe path is relative to your Stacktape configuration file.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A glob pattern of files to explicitly include in the deployment package.</p>\n","ld":"<p>The path is relative to your Stacktape configuration file.</p>\n"}},"excludeFiles":{"description":"#### A glob pattern of files to explicitly exclude from the deployment package.\n\n---","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A glob pattern of files to explicitly exclude from the deployment package.</p>\n"}},"excludeDependencies":{"description":"#### A list of dependencies to exclude from the deployment package.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of dependencies to exclude from the deployment package.</p>\n"}}},"additionalProperties":false,"required":["entryfilePath"],"_MdxDesc":{"sd":"<p> Configures an image to be built automatically by Stacktape from your source code.</p>\n"}},"EsLanguageSpecificConfig":{"type":"object","properties":{"tsConfigPath":{"description":"#### The path to the `tsconfig.json` file.\n\n---\n\nThis is primarily used to resolve path aliases during the build process.","type":"string","_MdxDesc":{"sd":"<p> The path to the <code>tsconfig.json</code> file.</p>\n","ld":"<p>This is primarily used to resolve path aliases during the build process.</p>\n"}},"emitTsDecoratorMetadata":{"description":"#### Emits TypeScript decorator metadata in the final bundle.\n\n---\n\nThis is required by frameworks like NestJS and ORMs like TypeORM.\nIt's disabled by default as it can increase build times.","type":"boolean","_MdxDesc":{"sd":"<p> Emits TypeScript decorator metadata in the final bundle.</p>\n","ld":"<p>This is required by frameworks like NestJS and ORMs like TypeORM.\nIt&#39;s disabled by default as it can increase build times.</p>\n"}},"dependenciesToExcludeFromBundle":{"description":"#### A list of dependencies to exclude from the main bundle.\n\n---\n\nThese dependencies will be treated as \"external\" and will not be bundled directly into your application's code.\nInstead, they will be installed separately in the deployment package.\nUse `*` to exclude all dependencies from the bundle.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of dependencies to exclude from the main bundle.</p>\n","ld":"<p>These dependencies will be treated as &quot;external&quot; and will not be bundled directly into your application&#39;s code.\nInstead, they will be installed separately in the deployment package.\nUse <code>*</code> to exclude all dependencies from the bundle.</p>\n"}},"outputModuleFormat":{"description":"#### The output module format for the compiled code.\n\n---\n\n- `cjs` (CommonJS): The standard module system for Node.js.\n- `esm` (ECMAScript Modules): The modern standard for JavaScript modules. Allows features like top-level `await`.\n\n> **Note:** Many Node.js dependencies do not yet support ES modules.\n> Using `esm` may also affect the quality of stack traces for errors.","default":"'cjs'","enum":["cjs","esm"],"type":"string","_MdxDesc":{"sd":"<p> The output module format for the compiled code.</p>\n","ld":"<ul>\n<li><code>cjs</code> (CommonJS): The standard module system for Node.js.</li>\n<li><code>esm</code> (ECMAScript Modules): The modern standard for JavaScript modules. Allows features like top-level <code>await</code>.</li>\n</ul>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> Many Node.js dependencies do not yet support ES modules.\nUsing <code>esm</code> may also affect the quality of stack traces for errors.</p>\n</div>\n</div>"}},"nodeVersion":{"description":"#### The major version of Node.js to use.","default":18,"enum":[16,17,18,19,20,21,22,23,24],"type":"number","_MdxDesc":{"sd":"<p> The major version of Node.js to use.</p>\n"}},"disableSourceMaps":{"description":"#### Disables the generation of source maps.\n\n---\n\nDisabling source maps can reduce the size of your deployment package, but it will make it more difficult to debug errors in production, as stack traces will not map back to your original source code.","type":"boolean","_MdxDesc":{"sd":"<p> Disables the generation of source maps.</p>\n","ld":"<p>Disabling source maps can reduce the size of your deployment package, but it will make it more difficult to debug errors in production, as stack traces will not map back to your original source code.</p>\n"}},"outputSourceMapsTo":{"description":"#### Outputs source maps to a specified directory.\n\n---\n\nIf you use this option, source maps will not be uploaded to AWS, and stack traces in CloudWatch logs will not be correctly mapped.\nThis is useful if you plan to upload source maps to an external error tracking service like Sentry.","type":"string","_MdxDesc":{"sd":"<p> Outputs source maps to a specified directory.</p>\n","ld":"<p>If you use this option, source maps will not be uploaded to AWS, and stack traces in CloudWatch logs will not be correctly mapped.\nThis is useful if you plan to upload source maps to an external error tracking service like Sentry.</p>\n"}},"dependenciesToExcludeFromDeploymentPackage":{"description":"#### A list of dependencies to exclude from the deployment package.\n\n---\n\nThis only applies to dependencies that are not statically bundled.\nTo exclude a dependency from the static bundle, use `dependenciesToExcludeFromBundle`.\nUse `*` to exclude all non-bundled dependencies.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of dependencies to exclude from the deployment package.</p>\n","ld":"<p>This only applies to dependencies that are not statically bundled.\nTo exclude a dependency from the static bundle, use <code>dependenciesToExcludeFromBundle</code>.\nUse <code>*</code> to exclude all non-bundled dependencies.</p>\n"}}},"additionalProperties":false},"PyLanguageSpecificConfig":{"type":"object","properties":{"packageManagerFile":{"description":"#### The path to your project's dependency file.\n\n---\n\nThis can be a `requirements.txt`, `Pipfile`, or `pyproject.toml` file.","type":"string","_MdxDesc":{"sd":"<p> The path to your project&#39;s dependency file.</p>\n","ld":"<p>This can be a <code>requirements.txt</code>, <code>Pipfile</code>, or <code>pyproject.toml</code> file.</p>\n"}},"packageManager":{"$ref":"#/definitions/SupportedPythonPackageManager","description":"#### The Python package manager to use.\n\n---\n\nStacktape will automatically detect the package manager based on the files in your project.\nYou only need to set this if you are using a non-standard file name for your dependencies.","_MdxDesc":{"sd":"<p> The Python package manager to use.</p>\n","ld":"<p>Stacktape will automatically detect the package manager based on the files in your project.\nYou only need to set this if you are using a non-standard file name for your dependencies.</p>\n"}},"pythonVersion":{"$ref":"#/definitions/SupportedPythonVersion","description":"#### The version of Python to use.","default":3.9,"_MdxDesc":{"sd":"<p> The version of Python to use.</p>\n"}},"runAppAs":{"$ref":"#/definitions/SupportedPythonRunAppAs","description":"#### The Python web server gateway interface to use.\n\n---\n\n> This property is only for the `stacktape-image-buildpack`.\n\nYou can choose between `WSGI` (for frameworks like Flask or Django) and `ASGI` (for frameworks like FastAPI).\nThe server will automatically bind to the port specified by the `PORT` environment variable.\n\nTo use this, you must specify the application variable in your `entryfilePath` (e.g., `my_app/main.py:app`).","_MdxDesc":{"sd":"<p> The Python web server gateway interface to use.</p>\n","ld":"<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>This property is only for the <code>stacktape-image-buildpack</code>.</p>\n</div>\n</div><p>You can choose between <code>WSGI</code> (for frameworks like Flask or Django) and <code>ASGI</code> (for frameworks like FastAPI).\nThe server will automatically bind to the port specified by the <code>PORT</code> environment variable.</p>\n<p>To use this, you must specify the application variable in your <code>entryfilePath</code> (e.g., <code>my_app/main.py:app</code>).</p>\n"}},"minify":{"description":"#### Minifies the Python code.\n\n---\n\nIf enabled, Stacktape will minify the Python code using `pyminify`.\nThis can reduce the size of the deployment package, but it will make it more difficult to debug errors in production, as stack traces will not map back to your original source code.","default":true,"type":"boolean","_MdxDesc":{"sd":"<p> Minifies the Python code.</p>\n","ld":"<p>If enabled, Stacktape will minify the Python code using <code>pyminify</code>.\nThis can reduce the size of the deployment package, but it will make it more difficult to debug errors in production, as stack traces will not map back to your original source code.</p>\n"}}},"additionalProperties":false},"SupportedPythonPackageManager":{"enum":["pip","pipenv","poetry"],"type":"string"},"SupportedPythonVersion":{"enum":[2.7,3.11,3.12,3.13,3.14,3.6,3.7,3.8,3.9],"type":"number"},"SupportedPythonRunAppAs":{"enum":["ASGI","WSGI"],"type":"string"},"JavaLanguageSpecificConfig":{"type":"object","properties":{"useMaven":{"description":"#### Specifies whether to use Maven instead of Gradle.\n\n---\n\nBy default, Stacktape uses Gradle to build Java projects.","type":"boolean","_MdxDesc":{"sd":"<p> Specifies whether to use Maven instead of Gradle.</p>\n","ld":"<p>By default, Stacktape uses Gradle to build Java projects.</p>\n"}},"packageManagerFile":{"description":"#### The path to your project's build file (`pom.xml` for Maven or `build.gradle` for Gradle).","type":"string","_MdxDesc":{"sd":"<p> The path to your project&#39;s build file (<code>pom.xml</code> for Maven or <code>build.gradle</code> for Gradle).</p>\n"}},"javaVersion":{"$ref":"#/definitions/SupportedJavaVersion","description":"#### The version of Java to use.","default":11,"_MdxDesc":{"sd":"<p> The version of Java to use.</p>\n"}}},"additionalProperties":false},"SupportedJavaVersion":{"enum":[11,17,19,8],"type":"number"},"GoLanguageSpecificConfig":{"type":"object","additionalProperties":false},"ExternalBuildpackCwImagePackaging":{"description":"#### Builds a container image using an external buildpack.\n\n---\n\nExternal buildpacks (buildpacks.io) automatically detect your application type\nand build an optimized container image with zero configuration.\n\nThe default builder is `paketobuildpacks/builder-jammy-base`.\nYou can find buildpacks for almost any language or framework.","type":"object","properties":{"type":{"type":"string","const":"external-buildpack"},"properties":{"$ref":"#/definitions/ExternalBuildpackCwImagePackagingProps"}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Builds a container image using an external buildpack.</p>\n","ld":"<p>External buildpacks (buildpacks.io) automatically detect your application type\nand build an optimized container image with zero configuration.</p>\n<p>The default builder is <code>paketobuildpacks/builder-jammy-base</code>.\nYou can find buildpacks for almost any language or framework.</p>\n"}},"ExternalBuildpackCwImagePackagingProps":{"type":"object","properties":{"builder":{"description":"#### The Buildpack Builder to use.\n\n---","default":"paketobuildpacks/builder-jammy-base","type":"string","_MdxDesc":{"sd":"<p> The Buildpack Builder to use.</p>\n"}},"buildpacks":{"description":"#### The specific Buildpack to use.\n\n---\n\nBy default, the buildpack is detected automatically.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> The specific Buildpack to use.</p>\n","ld":"<p>By default, the buildpack is detected automatically.</p>\n"}},"sourceDirectoryPath":{"description":"#### The path to the source code directory.","type":"string","_MdxDesc":{"sd":"<p> The path to the source code directory.</p>\n"}},"command":{"description":"#### A command to be executed when the container starts.\n\n---\n\nExample: `['/app/start.sh']`","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A command to be executed when the container starts.</p>\n","ld":"<p>Example: <code>['/app/start.sh']</code></p>\n"}}},"additionalProperties":false,"required":["sourceDirectoryPath"]},"PrebuiltCwImagePackaging":{"description":"#### Uses a pre-built container image.\n\n---\n\nWith `prebuilt-image`, you provide a reference to an existing container image.\nThis can be a public image from Docker Hub or a private image from any container registry.\n\nFor private registries, configure `repositoryCredentialsSecretArn` with credentials stored in AWS Secrets Manager.","type":"object","properties":{"type":{"type":"string","const":"prebuilt-image"},"properties":{"$ref":"#/definitions/PrebuiltImageCwPackagingProps"}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Uses a pre-built container image.</p>\n","ld":"<p>With <code>prebuilt-image</code>, you provide a reference to an existing container image.\nThis can be a public image from Docker Hub or a private image from any container registry.</p>\n<p>For private registries, configure <code>repositoryCredentialsSecretArn</code> with credentials stored in AWS Secrets Manager.</p>\n"}},"PrebuiltImageCwPackagingProps":{"description":"#### Configures a pre-built container image.","type":"object","properties":{"repositoryCredentialsSecretArn":{"description":"#### The ARN of a secret containing credentials for a private container registry.\n\n---\n\nThe secret must be a JSON object with `username` and `password` keys.\nYou can create secrets using the `stacktape secret:create` command.","type":"string","_MdxDesc":{"sd":"<p> The ARN of a secret containing credentials for a private container registry.</p>\n","ld":"<p>The secret must be a JSON object with <code>username</code> and <code>password</code> keys.\nYou can create secrets using the <code>stacktape secret:create</code> command.</p>\n"}},"entryPoint":{"description":"#### A script to be executed when the container starts.\n\n---\n\nThis overrides the `ENTRYPOINT` instruction in the Dockerfile.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A script to be executed when the container starts.</p>\n","ld":"<p>This overrides the <code>ENTRYPOINT</code> instruction in the Dockerfile.</p>\n"}},"image":{"description":"#### The name or URL of the container image.","type":"string","_MdxDesc":{"sd":"<p> The name or URL of the container image.</p>\n"}},"command":{"description":"#### A command to be executed when the container starts.\n\n---\n\nThis overrides the `CMD` instruction in the Dockerfile.\n\nExample: `['/app/start.sh']`","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A command to be executed when the container starts.</p>\n","ld":"<p>This overrides the <code>CMD</code> instruction in the Dockerfile.</p>\n<p>Example: <code>['/app/start.sh']</code></p>\n"}}},"additionalProperties":false,"required":["image"],"_MdxDesc":{"sd":"<p> Configures a pre-built container image.</p>\n"}},"CustomDockerfileCwImagePackaging":{"description":"#### Builds a container image from your own Dockerfile.\n\n---\n\nWith `custom-dockerfile`, you provide a path to your Dockerfile and build context.\nStacktape builds the image and uploads it to a managed ECR repository.\n\nThis gives you full control over the container environment and is ideal for complex setups.","type":"object","properties":{"type":{"type":"string","const":"custom-dockerfile"},"properties":{"$ref":"#/definitions/CustomDockerfileCwImagePackagingProps"}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Builds a container image from your own Dockerfile.</p>\n","ld":"<p>With <code>custom-dockerfile</code>, you provide a path to your Dockerfile and build context.\nStacktape builds the image and uploads it to a managed ECR repository.</p>\n<p>This gives you full control over the container environment and is ideal for complex setups.</p>\n"}},"CustomDockerfileCwImagePackagingProps":{"description":"#### Configures an image to be built by Stacktape from a specified Dockerfile.","type":"object","properties":{"entryPoint":{"description":"#### A script to be executed when the container starts.\n\n---\n\nThis overrides the `ENTRYPOINT` instruction in the Dockerfile.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A script to be executed when the container starts.</p>\n","ld":"<p>This overrides the <code>ENTRYPOINT</code> instruction in the Dockerfile.</p>\n"}},"dockerfilePath":{"description":"#### The path to the Dockerfile, relative to `buildContextPath`.","type":"string","_MdxDesc":{"sd":"<p> The path to the Dockerfile, relative to <code>buildContextPath</code>.</p>\n"}},"buildContextPath":{"description":"#### The path to the build context directory, relative to your Stacktape configuration file.","type":"string","_MdxDesc":{"sd":"<p> The path to the build context directory, relative to your Stacktape configuration file.</p>\n"}},"buildArgs":{"description":"#### A list of arguments to pass to the `docker build` command.","type":"array","items":{"$ref":"#/definitions/DockerBuildArg"},"_MdxDesc":{"sd":"<p> A list of arguments to pass to the <code>docker build</code> command.</p>\n"}},"command":{"description":"#### A command to be executed when the container starts.\n\n---\n\nThis overrides the `CMD` instruction in the Dockerfile.\n\nExample: `['/app/start.sh']`","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A command to be executed when the container starts.</p>\n","ld":"<p>This overrides the <code>CMD</code> instruction in the Dockerfile.</p>\n<p>Example: <code>['/app/start.sh']</code></p>\n"}}},"additionalProperties":false,"required":["buildContextPath"],"_MdxDesc":{"sd":"<p> Configures an image to be built by Stacktape from a specified Dockerfile.</p>\n"}},"DockerBuildArg":{"type":"object","properties":{"argName":{"description":"#### Argument name","type":"string","_MdxDesc":{"sd":"<p> Argument name</p>\n"}},"value":{"description":"#### Argument value","type":"string","_MdxDesc":{"sd":"<p> Argument value</p>\n"}}},"additionalProperties":false,"required":["argName","value"]},"NixpacksCwImagePackaging":{"description":"#### Builds a container image using Nixpacks.\n\n---\n\nNixpacks automatically detects your application type and builds an optimized container image.\nIn most cases, no configuration is required.\n\nIt supports a wide range of languages and frameworks out of the box.","type":"object","properties":{"type":{"type":"string","const":"nixpacks"},"properties":{"$ref":"#/definitions/NixpacksCwImagePackagingProps"}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Builds a container image using Nixpacks.</p>\n","ld":"<p>Nixpacks automatically detects your application type and builds an optimized container image.\nIn most cases, no configuration is required.</p>\n<p>It supports a wide range of languages and frameworks out of the box.</p>\n"}},"NixpacksCwImagePackagingProps":{"type":"object","properties":{"sourceDirectoryPath":{"description":"#### The path to the source code directory.","type":"string","_MdxDesc":{"sd":"<p> The path to the source code directory.</p>\n"}},"buildImage":{"description":"#### The base image to use for building the application.\n\n---\n\nFor more details, see the [Nixpacks documentation](https://nixpacks.com/docs/configuration/file#build-image).","type":"string","_MdxDesc":{"sd":"<p> The base image to use for building the application.</p>\n","ld":"<p>For more details, see the <a href=\"https://nixpacks.com/docs/configuration/file#build-image\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Nixpacks documentation</a>.</p>\n"}},"providers":{"description":"#### A list of providers to use for determining the build and runtime environments.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of providers to use for determining the build and runtime environments.</p>\n"}},"startCmd":{"description":"#### The command to execute when starting the application.\n\n---\n\nThis overrides the default start command inferred by Nixpacks.","type":"string","_MdxDesc":{"sd":"<p> The command to execute when starting the application.</p>\n","ld":"<p>This overrides the default start command inferred by Nixpacks.</p>\n"}},"startRunImage":{"description":"#### The base image to use for running the application.","type":"string","_MdxDesc":{"sd":"<p> The base image to use for running the application.</p>\n"}},"startOnlyIncludeFiles":{"description":"#### A list of file paths to include in the runtime environment; all other files will be excluded.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of file paths to include in the runtime environment; all other files will be excluded.</p>\n"}},"phases":{"description":"#### The build phases for the application.","type":"array","items":{"$ref":"#/definitions/NixpacksPhase"},"_MdxDesc":{"sd":"<p> The build phases for the application.</p>\n"}}},"additionalProperties":false,"required":["sourceDirectoryPath"]},"NixpacksPhase":{"type":"object","properties":{"name":{"description":"#### The name of the build phase.","type":"string","_MdxDesc":{"sd":"<p> The name of the build phase.</p>\n"}},"cmds":{"description":"#### A list of shell commands to execute in this phase.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of shell commands to execute in this phase.</p>\n"}},"nixPkgs":{"description":"#### A list of Nix packages to install in this phase.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of Nix packages to install in this phase.</p>\n"}},"nixLibs":{"description":"#### A list of Nix libraries to include in this phase.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of Nix libraries to include in this phase.</p>\n"}},"nixOverlay":{"description":"#### A list of Nix overlay files to apply in this phase.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of Nix overlay files to apply in this phase.</p>\n"}},"nixpkgsArchive":{"description":"#### The Nixpkgs archive to use.","type":"string","_MdxDesc":{"sd":"<p> The Nixpkgs archive to use.</p>\n"}},"aptPkgs":{"description":"#### A list of APT packages to install in this phase.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of APT packages to install in this phase.</p>\n"}},"cacheDirectories":{"description":"#### A list of directories to cache between builds to speed up subsequent builds.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of directories to cache between builds to speed up subsequent builds.</p>\n"}},"onlyIncludeFiles":{"description":"#### A list of file paths to include in this phase; all other files will be excluded.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of file paths to include in this phase; all other files will be excluded.</p>\n"}}},"additionalProperties":false,"required":["name"]},"ContainerWorkloadContainerLogging":{"type":"object","properties":{"disabled":{"description":"#### Disables application logging to CloudWatch for this container.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disables application logging to CloudWatch for this container.</p>\n"}},"retentionDays":{"description":"#### The number of days to retain logs in CloudWatch.","default":90,"enum":[1,120,14,150,180,1827,3,30,365,3653,400,5,545,60,7,731,90],"type":"number","_MdxDesc":{"sd":"<p> The number of days to retain logs in CloudWatch.</p>\n"}},"logForwarding":{"description":"#### Log Forwarding\n\n---\n\nForwards logs to a specified destination for monitoring, analysis, or long-term storage.\n\nLog forwarding is handled by an [Amazon Kinesis Data Firehose](https://aws.amazon.com/kinesis/data-firehose/) delivery stream. You will incur costs based on the volume of data transferred (approximately $0.03 per GB). For detailed pricing, see the [AWS Kinesis Firehose Pricing](https://aws.amazon.com/kinesis/data-firehose/pricing/) page.\n\nSupported destinations:\n- `http-endpoint`: Delivers logs to any HTTP endpoint that complies with [Firehose request and response specifications](https://docs.aws.amazon.com/firehose/latest/dev/httpdeliveryrequestresponse.html). Many third-party logging services are compatible out-of-the-box.\n- `datadog`: Delivers logs to [Datadog](https://www.datadoghq.com/).\n- `highlight`: Delivers logs to a [Highlight.io](https://www.highlight.io/) project.\n\nFor more information, refer to the [Stacktape documentation on log forwarding](https://docs.stacktape.com/configuration/log-forwarding/).\n\n> If logs fail to be delivered after multiple retries, they are stored in a backup S3 bucket named `{stackName}-{resourceName}-logs-{generatedHash}`. The retry duration can be configured.","anyOf":[{"$ref":"#/definitions/HttpEndpointLogForwarding"},{"$ref":"#/definitions/HighlightLogForwarding"},{"$ref":"#/definitions/DatadogLogForwarding"}],"_MdxDesc":{"sd":"<p> Log Forwarding</p>\n","ld":"<p>Forwards logs to a specified destination for monitoring, analysis, or long-term storage.</p>\n<p>Log forwarding is handled by an <a href=\"https://aws.amazon.com/kinesis/data-firehose/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Amazon Kinesis Data Firehose</a> delivery stream. You will incur costs based on the volume of data transferred (approximately $0.03 per GB). For detailed pricing, see the <a href=\"https://aws.amazon.com/kinesis/data-firehose/pricing/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS Kinesis Firehose Pricing</a> page.</p>\n<p>Supported destinations:</p>\n<ul>\n<li><code>http-endpoint</code>: Delivers logs to any HTTP endpoint that complies with <a href=\"https://docs.aws.amazon.com/firehose/latest/dev/httpdeliveryrequestresponse.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Firehose request and response specifications</a>. Many third-party logging services are compatible out-of-the-box.</li>\n<li><code>datadog</code>: Delivers logs to <a href=\"https://www.datadoghq.com/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Datadog</a>.</li>\n<li><code>highlight</code>: Delivers logs to a <a href=\"https://www.highlight.io/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Highlight.io</a> project.</li>\n</ul>\n<p>For more information, refer to the <a href=\"/configuration/log-forwarding/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape documentation on log forwarding</a>.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>If logs fail to be delivered after multiple retries, they are stored in a backup S3 bucket named <code>{stackName}-{resourceName}-logs-{generatedHash}</code>. The retry duration can be configured.</p>\n</div>\n</div>"}}},"additionalProperties":false},"HttpEndpointLogForwarding":{"type":"object","properties":{"type":{"type":"string","const":"http-endpoint"},"properties":{"$ref":"#/definitions/HttpEndpointLogForwardingProps"}},"additionalProperties":false,"required":["properties","type"]},"HttpEndpointLogForwardingProps":{"type":"object","properties":{"endpointUrl":{"description":"#### Endpoint URL\n\n---\n\nThe HTTPS endpoint where logs will be forwarded.","type":"string","_MdxDesc":{"sd":"<p> Endpoint URL</p>\n","ld":"<p>The HTTPS endpoint where logs will be forwarded.</p>\n"}},"gzipEncodingEnabled":{"description":"#### Enable GZIP Compression\n\n---\n\nIf `true`, Firehose will compress the request body using GZIP before sending it to the destination. This can reduce data transfer costs.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enable GZIP Compression</p>\n","ld":"<p>If <code>true</code>, Firehose will compress the request body using GZIP before sending it to the destination. This can reduce data transfer costs.</p>\n"}},"parameters":{"description":"#### Custom Parameters\n\n---\n\nKey-value pairs of additional metadata to send to the HTTP endpoint.\n\nThese parameters are sent in the `X-Amz-Firehose-Common-Attributes` header as a JSON object: `{\"commonAttributes\":{\"param1\":\"val1\", \"param2\":\"val2\"}}`.","type":"object","additionalProperties":{"type":"string"},"_MdxDesc":{"sd":"<p> Custom Parameters</p>\n","ld":"<p>Key-value pairs of additional metadata to send to the HTTP endpoint.</p>\n<p>These parameters are sent in the <code>X-Amz-Firehose-Common-Attributes</code> header as a JSON object: <code>{\"commonAttributes\":{\"param1\":\"val1\", \"param2\":\"val2\"}}</code>.</p>\n"}},"retryDuration":{"description":"#### Retry Duration\n\n---\n\nThe total time Kinesis Data Firehose will spend retrying a failed delivery. This duration begins after the first delivery attempt fails.\n\nLogs that cannot be delivered within this duration are sent to a backup S3 bucket.","default":300,"type":"number","_MdxDesc":{"sd":"<p> Retry Duration</p>\n","ld":"<p>The total time Kinesis Data Firehose will spend retrying a failed delivery. This duration begins after the first delivery attempt fails.</p>\n<p>Logs that cannot be delivered within this duration are sent to a backup S3 bucket.</p>\n"}},"accessKey":{"description":"#### Access Key\n\n---\n\nCredentials for authenticating with the endpoint. The key is sent in the `X-Amz-Firehose-Access-Key` header.\n\nThe value can be any string, such as a JWT token or an access key. It is highly recommended to store the access key as a [Stacktape secret](https://docs.stacktape.com/resources/secrets/).","type":"string","_MdxDesc":{"sd":"<p> Access Key</p>\n","ld":"<p>Credentials for authenticating with the endpoint. The key is sent in the <code>X-Amz-Firehose-Access-Key</code> header.</p>\n<p>The value can be any string, such as a JWT token or an access key. It is highly recommended to store the access key as a <a href=\"/resources/secrets/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape secret</a>.</p>\n"}}},"additionalProperties":false,"required":["endpointUrl"]},"HighlightLogForwarding":{"type":"object","properties":{"type":{"type":"string","const":"highlight"},"properties":{"$ref":"#/definitions/HighlightLogForwardingProps"}},"additionalProperties":false,"required":["properties","type"]},"HighlightLogForwardingProps":{"type":"object","properties":{"projectId":{"description":"#### Project ID\n\n---\n\nThe ID of your [highlight.io](https://www.highlight.io/) project. You can find this in your [highlight.io console](https://app.highlight.io/).","type":"string","_MdxDesc":{"sd":"<p> Project ID</p>\n","ld":"<p>The ID of your <a href=\"https://www.highlight.io/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">highlight.io</a> project. You can find this in your <a href=\"https://app.highlight.io/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">highlight.io console</a>.</p>\n"}},"endpointUrl":{"description":"#### Endpoint URL\n\n---\n\nThe HTTPS endpoint where logs will be forwarded.","default":"https://pub.highlight.io/v1/logs/firehose","type":"string","_MdxDesc":{"sd":"<p> Endpoint URL</p>\n","ld":"<p>The HTTPS endpoint where logs will be forwarded.</p>\n"}}},"additionalProperties":false,"required":["projectId"]},"DatadogLogForwarding":{"type":"object","properties":{"type":{"type":"string","const":"datadog"},"properties":{"$ref":"#/definitions/DatadogLogForwardingProps"}},"additionalProperties":false,"required":["properties","type"]},"DatadogLogForwardingProps":{"type":"object","properties":{"apiKey":{"description":"#### API Key\n\n---\n\nYour Datadog API key, required for delivering logs. You can find your key in the [Datadog console](https://app.datadoghq.com/organization-settings/api-keys).\n\nIt is highly recommended to store the API key as a [Stacktape secret](https://docs.stacktape.com/resources/secrets/).","type":"string","_MdxDesc":{"sd":"<p> API Key</p>\n","ld":"<p>Your Datadog API key, required for delivering logs. You can find your key in the <a href=\"https://app.datadoghq.com/organization-settings/api-keys\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Datadog console</a>.</p>\n<p>It is highly recommended to store the API key as a <a href=\"/resources/secrets/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape secret</a>.</p>\n"}},"endpointUrl":{"description":"#### Endpoint URL\n\n---\n\nThe HTTPS endpoint where logs will be forwarded.\n\nIf your Datadog account is in the EU, you should use `https://aws-kinesis-http-intake.logs.datadoghq.eu/v1/input`.","default":"https://aws-kinesis-http-intake.logs.datadoghq.com/v1/input","type":"string","_MdxDesc":{"sd":"<p> Endpoint URL</p>\n","ld":"<p>The HTTPS endpoint where logs will be forwarded.</p>\n<p>If your Datadog account is in the EU, you should use <code>https://aws-kinesis-http-intake.logs.datadoghq.eu/v1/input</code>.</p>\n"}}},"additionalProperties":false,"required":["apiKey"]},"ContainerDependency":{"type":"object","properties":{"containerName":{"description":"The name of the container that this container depends on.","type":"string","_MdxDesc":{"sd":"<p>The name of the container that this container depends on.</p>\n"}},"condition":{"description":"#### The condition that the dependency container must meet.\n---\nAvailable conditions:\n- `START`: The dependency has started.\n- `COMPLETE`: The dependency has finished executing (regardless of success).\n- `SUCCESS`: The dependency has finished with an exit code of `0`.\n- `HEALTHY`: The dependency has passed its first health check.","enum":["COMPLETE","HEALTHY","START","SUCCESS"],"type":"string","_MdxDesc":{"sd":"<p> The condition that the dependency container must meet.</p>\n","ld":"<p>Available conditions:</p>\n<ul>\n<li><code>START</code>: The dependency has started.</li>\n<li><code>COMPLETE</code>: The dependency has finished executing (regardless of success).</li>\n<li><code>SUCCESS</code>: The dependency has finished with an exit code of <code>0</code>.</li>\n<li><code>HEALTHY</code>: The dependency has passed its first health check.</li>\n</ul>\n"}}},"additionalProperties":false,"required":["condition","containerName"]},"ContainerHealthCheck":{"type":"object","properties":{"healthCheckCommand":{"description":"#### The command to run to determine if the container is healthy.\n\n---\n\n- Must start with `CMD` (execute command directly) or `CMD-SHELL` (run with the container's default shell).\n- An exit code of `0` indicates success; any other exit code indicates failure.\n- Example: `[ \"CMD-SHELL\", \"curl -f http://localhost/ || exit 1\" ]`","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> The command to run to determine if the container is healthy.</p>\n","ld":"<ul>\n<li>Must start with <code>CMD</code> (execute command directly) or <code>CMD-SHELL</code> (run with the container&#39;s default shell).</li>\n<li>An exit code of <code>0</code> indicates success; any other exit code indicates failure.</li>\n<li>Example: <code>[ \"CMD-SHELL\", \"curl -f http://localhost/ || exit 1\" ]</code></li>\n</ul>\n"}},"intervalSeconds":{"description":"#### The time period (in seconds) between health checks.\n---\nMust be between 5 and 300 seconds.","default":30,"type":"number","_MdxDesc":{"sd":"<p> The time period (in seconds) between health checks.</p>\n","ld":"<p>Must be between 5 and 300 seconds.</p>\n"}},"timeoutSeconds":{"description":"#### The time period (in seconds) to wait for a health check to succeed before it is considered failed.\n---\nMust be between 2 and 60 seconds.","default":5,"type":"number","_MdxDesc":{"sd":"<p> The time period (in seconds) to wait for a health check to succeed before it is considered failed.</p>\n","ld":"<p>Must be between 2 and 60 seconds.</p>\n"}},"retries":{"description":"#### The number of consecutive failed health checks required before the container is considered unhealthy.\n---\nMust be between 1 and 10.","default":3,"type":"number","_MdxDesc":{"sd":"<p> The number of consecutive failed health checks required before the container is considered unhealthy.</p>\n","ld":"<p>Must be between 1 and 10.</p>\n"}},"startPeriodSeconds":{"description":"#### A grace period (in seconds) to allow the container to start before failed health checks are counted.\n---\nMust be between 0 and 300 seconds. Disabled by default.","type":"number","_MdxDesc":{"sd":"<p> A grace period (in seconds) to allow the container to start before failed health checks are counted.</p>\n","ld":"<p>Must be between 0 and 300 seconds. Disabled by default.</p>\n"}}},"additionalProperties":false,"required":["healthCheckCommand"]},"ContainerEfsMount":{"type":"object","properties":{"type":{"description":"#### The type of the volume mount.","type":"string","const":"efs","_MdxDesc":{"sd":"<p> The type of the volume mount.</p>\n"}},"properties":{"$ref":"#/definitions/ContainerEfsMountProps","description":"#### Properties for the EFS volume mount.","_MdxDesc":{"sd":"<p> Properties for the EFS volume mount.</p>\n"}}},"additionalProperties":false,"required":["properties","type"]},"ContainerEfsMountProps":{"type":"object","properties":{"efsFilesystemName":{"description":"#### The name of the EFS filesystem to mount.\n\n---\n\nThis must match the name of an EFS filesystem defined in your Stacktape configuration.","type":"string","_MdxDesc":{"sd":"<p> The name of the EFS filesystem to mount.</p>\n","ld":"<p>This must match the name of an EFS filesystem defined in your Stacktape configuration.</p>\n"}},"rootDirectory":{"description":"#### The root directory within the EFS filesystem to mount.\n\n---\n\nThis restricts the container's access to a specific directory within the filesystem. If not specified, the container can access the entire filesystem.","default":"/","type":"string","_MdxDesc":{"sd":"<p> The root directory within the EFS filesystem to mount.</p>\n","ld":"<p>This restricts the container&#39;s access to a specific directory within the filesystem. If not specified, the container can access the entire filesystem.</p>\n"}},"mountPath":{"description":"#### The path where the EFS volume will be mounted inside the container.\n\n---\n\nThis must be an absolute path, for example: `/data` or `/app/storage`.","type":"string","_MdxDesc":{"sd":"<p> The path where the EFS volume will be mounted inside the container.</p>\n","ld":"<p>This must be an absolute path, for example: <code>/data</code> or <code>/app/storage</code>.</p>\n"}}},"additionalProperties":false,"required":["efsFilesystemName","mountPath"]},"ContainerWorkloadResourcesConfig":{"type":"object","properties":{"cpu":{"description":"#### The number of virtual CPUs allocated to the workload.\n\n---\n\nWhen using EC2 `instanceTypes`, the vCPUs of the instance are shared among the containers running on it.","enum":[0.25,0.5,1,16,2,4,8],"type":"number","_MdxDesc":{"sd":"<p> The number of virtual CPUs allocated to the workload.</p>\n","ld":"<p>When using EC2 <code>instanceTypes</code>, the vCPUs of the instance are shared among the containers running on it.</p>\n"}},"memory":{"description":"#### The amount of memory (in MB) allocated to the workload.\n\n---\n\n**For Fargate:** You must choose a value compatible with your selected vCPU count.\n  - 0.25 vCPU: 512, 1024, 2048 MB\n  - 0.5 vCPU: 1024, 2048, 3072, 4096 MB\n  - 1 vCPU: 2048-8192 MB (in 1024 MB increments)\n  - 2 vCPU: 4096-16384 MB (in 1024 MB increments)\n  - 4 vCPU: 8192-30720 MB (in 1024 MB increments)\n  - 8 vCPU: 16384-61440 MB (in 4096 MB increments)\n  - 16 vCPU: 32768-122880 MB (in 8192 MB increments)\n\n**For EC2:** If you don't specify this, Stacktape will automatically allocate the maximum memory available on the smallest specified `instanceType`.","type":"number","_MdxDesc":{"sd":"<p> The amount of memory (in MB) allocated to the workload.</p>\n","ld":"<p><strong>For Fargate:</strong> You must choose a value compatible with your selected vCPU count.</p>\n<ul>\n<li>0.25 vCPU: 512, 1024, 2048 MB</li>\n<li>0.5 vCPU: 1024, 2048, 3072, 4096 MB</li>\n<li>1 vCPU: 2048-8192 MB (in 1024 MB increments)</li>\n<li>2 vCPU: 4096-16384 MB (in 1024 MB increments)</li>\n<li>4 vCPU: 8192-30720 MB (in 1024 MB increments)</li>\n<li>8 vCPU: 16384-61440 MB (in 4096 MB increments)</li>\n<li>16 vCPU: 32768-122880 MB (in 8192 MB increments)</li>\n</ul>\n<p><strong>For EC2:</strong> If you don&#39;t specify this, Stacktape will automatically allocate the maximum memory available on the smallest specified <code>instanceType</code>.</p>\n"}},"instanceTypes":{"description":"#### The types of EC2 instances (virtual machines) that can be used for the workload.\n\n---\n\nInstances are automatically added or removed to meet scaling demands.\n\n> **Recommendation:** For optimal resource utilization, specify a single instance type and omit the `cpu` and `memory` properties. Stacktape will then size the containers to fit the instance perfectly.\n\nThe order of instance types matters; the first in the list is preferred.\nFor a full list of instance types, see the [AWS EC2 instance types documentation](https://aws.amazon.com/ec2/instance-types/).\n\n> Instances are automatically refreshed weekly to ensure they are patched and up-to-date. Your workload remains available during this process.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> The types of EC2 instances (virtual machines) that can be used for the workload.</p>\n","ld":"<p>Instances are automatically added or removed to meet scaling demands.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Recommendation:</strong> For optimal resource utilization, specify a single instance type and omit the <code>cpu</code> and <code>memory</code> properties. Stacktape will then size the containers to fit the instance perfectly.</p>\n</div>\n</div><p>The order of instance types matters; the first in the list is preferred.\nFor a full list of instance types, see the <a href=\"https://aws.amazon.com/ec2/instance-types/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS EC2 instance types documentation</a>.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>Instances are automatically refreshed weekly to ensure they are patched and up-to-date. Your workload remains available during this process.</p>\n</div>\n</div>"}},"enableWarmPool":{"description":"#### Enables a warm pool for EC2 Auto Scaling.\n\n---\n\n> **Note:** This only works when a single instance type is specified.\n\nA warm pool keeps pre-initialized EC2 instances in a stopped state, ready to launch quickly for faster scale-out events.\nThis improves scaling performance and can reduce costs, as you only pay for storage on stopped instances.\nFor more details, see the [AWS Auto Scaling warm pools documentation](https://docs.aws.amazon.com/autoscaling/ec2/userguide/ec2-auto-scaling-warm-pools.html).","type":"boolean","_MdxDesc":{"sd":"<p> Enables a warm pool for EC2 Auto Scaling.</p>\n","ld":"<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> This only works when a single instance type is specified.</p>\n</div>\n</div><p>A warm pool keeps pre-initialized EC2 instances in a stopped state, ready to launch quickly for faster scale-out events.\nThis improves scaling performance and can reduce costs, as you only pay for storage on stopped instances.\nFor more details, see the <a href=\"https://docs.aws.amazon.com/autoscaling/ec2/userguide/ec2-auto-scaling-warm-pools.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS Auto Scaling warm pools documentation</a>.</p>\n"}},"architecture":{"description":"#### The CPU architecture for the containers (only applies to Fargate).\n\n---\n\n- **x86_64**: Traditional 64-bit architecture.\n- **arm64**: Modern ARM-based architecture, which is often ~20% cheaper.\n\nIf you are using a buildpack-based packaging method, Stacktape will automatically build for the target architecture.\nIf you are using a `prebuilt-image`, ensure it supports the specified architecture.\n\n> This property is ignored if you specify `instanceTypes`, as the architecture is determined by the EC2 instances.","default":"'x86_64'","enum":["arm64","x86_64"],"type":"string","_MdxDesc":{"sd":"<p> The CPU architecture for the containers (only applies to Fargate).</p>\n","ld":"<ul>\n<li><strong>x86_64</strong>: Traditional 64-bit architecture.</li>\n<li><strong>arm64</strong>: Modern ARM-based architecture, which is often ~20% cheaper.</li>\n</ul>\n<p>If you are using a buildpack-based packaging method, Stacktape will automatically build for the target architecture.\nIf you are using a <code>prebuilt-image</code>, ensure it supports the specified architecture.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>This property is ignored if you specify <code>instanceTypes</code>, as the architecture is determined by the EC2 instances.</p>\n</div>\n</div>"}}},"additionalProperties":false},"ContainerWorkloadScaling":{"type":"object","properties":{"minInstances":{"description":"#### The minimum number of workload instances to keep running.","default":1,"type":"number","_MdxDesc":{"sd":"<p> The minimum number of workload instances to keep running.</p>\n"}},"maxInstances":{"description":"#### The maximum number of workload instances that can be running.","default":1,"type":"number","_MdxDesc":{"sd":"<p> The maximum number of workload instances that can be running.</p>\n"}},"scalingPolicy":{"$ref":"#/definitions/ContainerWorkloadScalingPolicy","description":"#### Configures the triggers for scaling actions.","_MdxDesc":{"sd":"<p> Configures the triggers for scaling actions.</p>\n"}}},"additionalProperties":false},"ContainerWorkloadScalingPolicy":{"type":"object","properties":{"keepAvgCpuUtilizationUnder":{"description":"#### The average CPU utilization target for scaling.\n\n---\n\nIf the average CPU utilization across all instances exceeds this value, a new instance is added (scale-out).\nIf it falls below this value, an instance is removed (scale-in).","default":80,"type":"number","_MdxDesc":{"sd":"<p> The average CPU utilization target for scaling.</p>\n","ld":"<p>If the average CPU utilization across all instances exceeds this value, a new instance is added (scale-out).\nIf it falls below this value, an instance is removed (scale-in).</p>\n"}},"keepAvgMemoryUtilizationUnder":{"description":"#### The average memory utilization target for scaling.\n\n---\n\nIf the average memory utilization across all instances exceeds this value, a new instance is added (scale-out).\nIf it falls below this value, an instance is removed (scale-in).","default":80,"type":"number","_MdxDesc":{"sd":"<p> The average memory utilization target for scaling.</p>\n","ld":"<p>If the average memory utilization across all instances exceeds this value, a new instance is added (scale-out).\nIf it falls below this value, an instance is removed (scale-in).</p>\n"}}},"additionalProperties":false},"ContainerWorkloadDeploymentConfig":{"type":"object","properties":{"strategy":{"description":"#### The strategy to use for deploying updates.\n\n---\n\n- **Canary10Percent5Minutes**: Shifts 10% of traffic, then the rest after 5 minutes.\n- **Canary10Percent15Minutes**: Shifts 10% of traffic, then the rest after 15 minutes.\n- **Linear10PercentEvery1Minute**: Shifts 10% of traffic every minute.\n- **Linear10PercentEvery3Minutes**: Shifts 10% of traffic every 3 minutes.\n- **AllAtOnce**: Shifts all traffic at once.","enum":["AllAtOnce","Canary10Percent15Minutes","Canary10Percent5Minutes","Linear10PercentEvery1Minutes","Linear10PercentEvery3Minutes"],"type":"string","_MdxDesc":{"sd":"<p> The strategy to use for deploying updates.</p>\n","ld":"<ul>\n<li><strong>Canary10Percent5Minutes</strong>: Shifts 10% of traffic, then the rest after 5 minutes.</li>\n<li><strong>Canary10Percent15Minutes</strong>: Shifts 10% of traffic, then the rest after 15 minutes.</li>\n<li><strong>Linear10PercentEvery1Minute</strong>: Shifts 10% of traffic every minute.</li>\n<li><strong>Linear10PercentEvery3Minutes</strong>: Shifts 10% of traffic every 3 minutes.</li>\n<li><strong>AllAtOnce</strong>: Shifts all traffic at once.</li>\n</ul>\n"}},"beforeAllowTrafficFunction":{"description":"#### The name of a Lambda function to run before traffic shifting begins.\n\n---\n\nThis \"hook\" function is typically used to run validation checks before the new version receives production traffic.\nThe function must signal success or failure to CodeDeploy. For more details, see the [documentation](https://docs.stacktape.com/compute-resources/multi-container-workloads/#hook-functions).","type":"string","_MdxDesc":{"sd":"<p> The name of a Lambda function to run before traffic shifting begins.</p>\n","ld":"<p>This &quot;hook&quot; function is typically used to run validation checks before the new version receives production traffic.\nThe function must signal success or failure to CodeDeploy. For more details, see the <a href=\"/compute-resources/multi-container-workloads/#hook-functions\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">documentation</a>.</p>\n"}},"afterTrafficShiftFunction":{"description":"#### The name of a Lambda function to run after all traffic has been shifted.\n\n---\n\nThis \"hook\" function is typically used for post-deployment validation.\nThe function must signal success or failure to CodeDeploy. For more details, see the [documentation](https://docs.stacktape.com/compute-resources/multi-container-workloads/#hook-functions).","type":"string","_MdxDesc":{"sd":"<p> The name of a Lambda function to run after all traffic has been shifted.</p>\n","ld":"<p>This &quot;hook&quot; function is typically used for post-deployment validation.\nThe function must signal success or failure to CodeDeploy. For more details, see the <a href=\"/compute-resources/multi-container-workloads/#hook-functions\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">documentation</a>.</p>\n"}},"testListenerPort":{"description":"#### The port of the listener to be used for test traffic.\n\n---\n\nIf you are using `beforeAllowTrafficFunction` with a custom listener on your load balancer, specify the listener port here.\nTo learn how to use this, see the [test listener documentation](https://docs.stacktape.com/compute-resources/multi-container-workloads/#test-traffic-listener).","type":"number","_MdxDesc":{"sd":"<p> The port of the listener to be used for test traffic.</p>\n","ld":"<p>If you are using <code>beforeAllowTrafficFunction</code> with a custom listener on your load balancer, specify the listener port here.\nTo learn how to use this, see the <a href=\"/compute-resources/multi-container-workloads/#test-traffic-listener\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">test listener documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["strategy"]},"StpIamRoleStatement":{"type":"object","properties":{"Sid":{"description":"#### Statement ID (Sid)\n\n---\n\nAn optional identifier for the statement. For more information, see the [AWS documentation](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies-introduction).","type":"string","_MdxDesc":{"sd":"<p> Statement ID (Sid)</p>\n","ld":"<p>An optional identifier for the statement. For more information, see the <a href=\"https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies-introduction\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"Effect":{"description":"#### Effect\n\n---\n\nSpecifies whether the statement results in an `Allow` or `Deny`. For more information, see the [AWS documentation](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies-introduction).","default":"Allow","type":"string","_MdxDesc":{"sd":"<p> Effect</p>\n","ld":"<p>Specifies whether the statement results in an <code>Allow</code> or <code>Deny</code>. For more information, see the <a href=\"https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies-introduction\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"Action":{"description":"#### Action\n\n---\n\nA list of actions that the statement allows or denies (e.g., `s3:GetObject`). For more information, see the [AWS documentation](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies-introduction).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Action</p>\n","ld":"<p>A list of actions that the statement allows or denies (e.g., <code>s3:GetObject</code>). For more information, see the <a href=\"https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies-introduction\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"Condition":{"description":"#### Condition\n\n---\n\nSpecifies the conditions under which the statement is in effect. For more information, see the [AWS documentation](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies-introduction)."},"Resource":{"description":"#### Resource\n\n---\n\nA list of resources to which the actions apply. For more information, see the [AWS documentation](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies-introduction).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Resource</p>\n","ld":"<p>A list of resources to which the actions apply. For more information, see the <a href=\"https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies-introduction\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["Resource"]},"BatchJob":{"description":"#### A resource for running containerized batch computing jobs.\n\n---\n\nBatch jobs are ideal for workloads that need to run to completion, such as data processing, machine learning pipelines, or other long-running background tasks.\nStacktape manages the underlying infrastructure, so you can focus on your application.\n\n- **Pay-per-use**: You only pay for the compute resources consumed by your job.\n- **Scalable**: Handles both CPU-intensive and GPU-accelerated workloads.\n- **Resilient**: Provides built-in support for retries, logging, and event-driven scheduling.","type":"object","properties":{"type":{"type":"string","const":"batch-job"},"properties":{"$ref":"#/definitions/BatchJobProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> A resource for running containerized batch computing jobs.</p>\n","ld":"<p>Batch jobs are ideal for workloads that need to run to completion, such as data processing, machine learning pipelines, or other long-running background tasks.\nStacktape manages the underlying infrastructure, so you can focus on your application.</p>\n<ul>\n<li><strong>Pay-per-use</strong>: You only pay for the compute resources consumed by your job.</li>\n<li><strong>Scalable</strong>: Handles both CPU-intensive and GPU-accelerated workloads.</li>\n<li><strong>Resilient</strong>: Provides built-in support for retries, logging, and event-driven scheduling.</li>\n</ul>\n"}},"BatchJobProps":{"type":"object","properties":{"container":{"$ref":"#/definitions/BatchJobContainer","description":"#### Configures the Docker container for the batch job.","_MdxDesc":{"sd":"<p> Configures the Docker container for the batch job.</p>\n"}},"resources":{"$ref":"#/definitions/BatchJobResources","description":"#### Configures the computing resources for the job.\n\n---\n\nUse this to specify the amount of CPU, memory, and (optionally) GPU required.\nStacktape will automatically provision an instance that meets these requirements when the job runs.","_MdxDesc":{"sd":"<p> Configures the computing resources for the job.</p>\n","ld":"<p>Use this to specify the amount of CPU, memory, and (optionally) GPU required.\nStacktape will automatically provision an instance that meets these requirements when the job runs.</p>\n"}},"timeout":{"description":"#### The maximum time (in seconds) the job is allowed to run.\n\n---\n\nIf the job exceeds this timeout, it will be stopped. If retries are configured, the job will be re-run.","type":"number","_MdxDesc":{"sd":"<p> The maximum time (in seconds) the job is allowed to run.</p>\n","ld":"<p>If the job exceeds this timeout, it will be stopped. If retries are configured, the job will be re-run.</p>\n"}},"useSpotInstances":{"description":"#### Runs the job on Spot Instances to reduce compute costs.\n\n---\n\n**Benefits:**\n- Save up to 90% compared to on-demand pricing by using spare AWS capacity.\n\n**Important Considerations:**\n- Spot Instances can be interrupted at any time. Your container will receive a `SIGTERM` signal and has **120 seconds** to save its state and shut down gracefully.\n- Your application should be designed to be fault-tolerant. This can be achieved by implementing checkpointing or by making the job idempotent (safe to restart from the beginning).\n\nFor more information, see the [AWS Spot Instance Advisor](https://aws.amazon.com/ec2/spot/instance-advisor/) for interruption rates and best practices.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Runs the job on Spot Instances to reduce compute costs.</p>\n","ld":"<p><strong>Benefits:</strong></p>\n<ul>\n<li>Save up to 90% compared to on-demand pricing by using spare AWS capacity.</li>\n</ul>\n<p><strong>Important Considerations:</strong></p>\n<ul>\n<li>Spot Instances can be interrupted at any time. Your container will receive a <code>SIGTERM</code> signal and has <strong>120 seconds</strong> to save its state and shut down gracefully.</li>\n<li>Your application should be designed to be fault-tolerant. This can be achieved by implementing checkpointing or by making the job idempotent (safe to restart from the beginning).</li>\n</ul>\n<p>For more information, see the <a href=\"https://aws.amazon.com/ec2/spot/instance-advisor/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS Spot Instance Advisor</a> for interruption rates and best practices.</p>\n"}},"logging":{"$ref":"#/definitions/BatchJobLogging","description":"#### Configures the logging behavior for the batch job.\n\n---\n\nContainer logs (`stdout` and `stderr`) are automatically sent to a CloudWatch log group.\nBy default, logs are retained for 180 days. You can view them in the [Stacktape Console](https://console.stacktape.com).","_MdxDesc":{"sd":"<p> Configures the logging behavior for the batch job.</p>\n","ld":"<p>Container logs (<code>stdout</code> and <code>stderr</code>) are automatically sent to a CloudWatch log group.\nBy default, logs are retained for 180 days. You can view them in the <a href=\"https://console.stacktape.com\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape Console</a>.</p>\n"}},"retryConfig":{"$ref":"#/definitions/BatchJobRetryConfiguration","description":"#### Configures the retry behavior for the job.\n\n---\n\nIf a job fails (e.g., non-zero exit code, timeout, Spot Instance interruption), it can be automatically retried.","_MdxDesc":{"sd":"<p> Configures the retry behavior for the job.</p>\n","ld":"<p>If a job fails (e.g., non-zero exit code, timeout, Spot Instance interruption), it can be automatically retried.</p>\n"}},"events":{"description":"#### Configures event triggers that start the batch job.\n\n---\n\nA batch job can be triggered by various events, such as an HTTP request, a file upload to S3, or a schedule.\nStacktape manages the underlying trigger mechanism automatically.","type":"array","items":{"anyOf":[{"$ref":"#/definitions/ApplicationLoadBalancerIntegration"},{"$ref":"#/definitions/SnsIntegration"},{"$ref":"#/definitions/SqsIntegration"},{"$ref":"#/definitions/KinesisIntegration"},{"$ref":"#/definitions/DynamoDbIntegration"},{"$ref":"#/definitions/S3Integration"},{"$ref":"#/definitions/ScheduleIntegration"},{"$ref":"#/definitions/CloudwatchLogIntegration"},{"$ref":"#/definitions/HttpApiIntegration"},{"$ref":"#/definitions/EventBusIntegration"}]},"_MdxDesc":{"sd":"<p> Configures event triggers that start the batch job.</p>\n","ld":"<p>A batch job can be triggered by various events, such as an HTTP request, a file upload to S3, or a schedule.\nStacktape manages the underlying trigger mechanism automatically.</p>\n"}},"connectTo":{"description":"#### Connect To\n\n---\n\nConfigures access to other resources in your stack and AWS services. By specifying resources here, Stacktape automatically:\n- Configures IAM role permissions.\n- Sets up security group rules to allow network traffic.\n- Injects environment variables with connection details into the compute resource.\n\nEnvironment variables are named `STP_[RESOURCE_NAME]_[VARIABLE_NAME]` (e.g., `STP_MY_DATABASE_CONNECTION_STRING`).\n\n---\n\n#### Granted Permissions and Injected Variables:\n\n**`Bucket`**\n- **Permissions:** List, create, get, delete, and tag objects.\n- **Variables:** `NAME`, `ARN`\n\n**`DynamoDbTable`**\n- **Permissions:** Get, put, update, delete, scan, and query items; describe table stream.\n- **Variables:** `NAME`, `ARN`, `STREAM_ARN`\n\n**`MongoDbAtlasCluster`**\n- **Permissions:** Allows connection to clusters with `accessibilityMode` set to `scoping-workloads-in-vpc`. Creates a temporary user for secure, credential-less access.\n- **Variables:** `CONNECTION_STRING`\n\n**`RelationalDatabase`**\n- **Permissions:** Allows connection to databases with `accessibilityMode` set to `scoping-workloads-in-vpc`.\n- **Variables:** `CONNECTION_STRING`, `JDBC_CONNECTION_STRING`, `HOST`, `PORT`. For Aurora clusters, `READER_CONNECTION_STRING`, `READER_JDBC_CONNECTION_STRING`, and `READER_HOST` are also included.\n\n**`RedisCluster`**\n- **Permissions:** Allows connection to clusters with `accessibilityMode` set to `scoping-workloads-in-vpc`.\n- **Variables:** `HOST`, `READER_HOST`, `PORT`\n\n**`EventBus`**\n- **Permissions:** Publish events.\n- **Variables:** `ARN`\n\n**`Function`**\n- **Permissions:** Invoke the function, including via its URL if enabled.\n- **Variables:** `ARN`\n\n**`BatchJob`**\n- **Permissions:** Submit, list, describe, and terminate jobs; manage state machine executions.\n- **Variables:** `JOB_DEFINITION_ARN`, `STATE_MACHINE_ARN`\n\n**`UserAuthPool`**\n- **Permissions:** Full control over the user pool (`cognito-idp:*`).\n- **Variables:** `ID`, `CLIENT_ID`, `ARN`\n\n**`SnsTopic`**\n- **Permissions:** Confirm, list, publish, and manage subscriptions.\n- **Variables:** `ARN`, `NAME`\n\n**`SqsQueue`**\n- **Permissions:** Send, receive, delete, and purge messages.\n- **Variables:** `ARN`, `NAME`, `URL`\n\n**`UpstashKafkaTopic`**\n- **Variables:** `TOPIC_NAME`, `TOPIC_ID`, `USERNAME`, `PASSWORD`, `TCP_ENDPOINT`, `REST_URL`\n\n**`UpstashRedis`**\n- **Variables:** `HOST`, `PORT`, `PASSWORD`, `REST_TOKEN`, `REST_URL`, `REDIS_URL`\n\n**`PrivateService`**\n- **Variables:** `ADDRESS`\n\n**`aws:ses` (Macro)**\n- **Permissions:** Full permissions for AWS SES (`ses:*`).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Connect To</p>\n","ld":"<p>Configures access to other resources in your stack and AWS services. By specifying resources here, Stacktape automatically:</p>\n<ul>\n<li>Configures IAM role permissions.</li>\n<li>Sets up security group rules to allow network traffic.</li>\n<li>Injects environment variables with connection details into the compute resource.</li>\n</ul>\n<p>Environment variables are named <code>STP_[RESOURCE_NAME]_[VARIABLE_NAME]</code> (e.g., <code>STP_MY_DATABASE_CONNECTION_STRING</code>).</p>\n"}},"iamRoleStatements":{"description":"#### Custom IAM Role Statements\n\n---\n\nA list of raw AWS IAM role statements to append to the resource's role, allowing for fine-grained permission control.","type":"array","items":{"$ref":"#/definitions/StpIamRoleStatement"},"_MdxDesc":{"sd":"<p> Custom IAM Role Statements</p>\n","ld":"<p>A list of raw AWS IAM role statements to append to the resource&#39;s role, allowing for fine-grained permission control.</p>\n"}}},"additionalProperties":false,"required":["container","resources"]},"BatchJobContainer":{"type":"object","properties":{"packaging":{"$ref":"#/definitions/BatchJobContainerPackaging","description":"#### Configures the container image for the batch job.","_MdxDesc":{"sd":"<p> Configures the container image for the batch job.</p>\n"}},"environment":{"description":"#### A list of environment variables to inject into the container at runtime.\n\n---\n\nEnvironment variables are ideal for providing configuration details to your job, such as database connection strings, API keys, or other dynamic parameters.","type":"array","items":{"$ref":"#/definitions/EnvironmentVar"},"_MdxDesc":{"sd":"<p> A list of environment variables to inject into the container at runtime.</p>\n","ld":"<p>Environment variables are ideal for providing configuration details to your job, such as database connection strings, API keys, or other dynamic parameters.</p>\n"}}},"additionalProperties":false,"required":["packaging"]},"BatchJobContainerPackaging":{"anyOf":[{"$ref":"#/definitions/StpBuildpackBjImagePackaging"},{"$ref":"#/definitions/ExternalBuildpackBjImagePackaging"},{"$ref":"#/definitions/PrebuiltBjImagePackaging"},{"$ref":"#/definitions/CustomDockerfileBjImagePackaging"},{"$ref":"#/definitions/NixpacksBjImagePackaging"}]},"StpBuildpackBjImagePackaging":{"type":"object","properties":{"type":{"type":"string","const":"stacktape-image-buildpack"},"properties":{"$ref":"#/definitions/StpBuildpackBjImagePackagingProps"}},"additionalProperties":false,"required":["properties","type"]},"StpBuildpackBjImagePackagingProps":{"description":"#### Configures an image to be built automatically by Stacktape from your source code.","type":"object","properties":{"languageSpecificConfig":{"description":"#### Language-specific packaging configuration.","anyOf":[{"$ref":"#/definitions/EsLanguageSpecificConfig"},{"$ref":"#/definitions/PyLanguageSpecificConfig"},{"$ref":"#/definitions/JavaLanguageSpecificConfig"},{"$ref":"#/definitions/GoLanguageSpecificConfig"}],"_MdxDesc":{"sd":"<p> Language-specific packaging configuration.</p>\n"}},"requiresGlibcBinaries":{"description":"#### Builds the image with support for glibc-based binaries.\n\n---\n\nBy default, Stacktape uses Alpine-based Docker images, which use `musl` instead of `glibc`.\nEnable this option if your application has native dependencies that require `glibc`.\nThis will result in a larger container image.","type":"boolean","_MdxDesc":{"sd":"<p> Builds the image with support for glibc-based binaries.</p>\n","ld":"<p>By default, Stacktape uses Alpine-based Docker images, which use <code>musl</code> instead of <code>glibc</code>.\nEnable this option if your application has native dependencies that require <code>glibc</code>.\nThis will result in a larger container image.</p>\n"}},"customDockerBuildCommands":{"description":"#### A list of commands to be executed during the `docker build` process.\n\n---\n\nThese commands are executed using the `RUN` directive in the Dockerfile.\nThis is useful for installing additional system dependencies in your container.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of commands to be executed during the <code>docker build</code> process.</p>\n","ld":"<p>These commands are executed using the <code>RUN</code> directive in the Dockerfile.\nThis is useful for installing additional system dependencies in your container.</p>\n"}},"entryfilePath":{"description":"#### The path to the entry point of your application, relative to your Stacktape configuration file.\n\n---\n\nStacktape will attempt to bundle your code and its dependencies into a single file.\nIf a dependency cannot be bundled (e.g., it relies on binary executables), it will be installed and included in the deployment package separately.","type":"string","_MdxDesc":{"sd":"<p> The path to the entry point of your application, relative to your Stacktape configuration file.</p>\n","ld":"<p>Stacktape will attempt to bundle your code and its dependencies into a single file.\nIf a dependency cannot be bundled (e.g., it relies on binary executables), it will be installed and included in the deployment package separately.</p>\n"}},"includeFiles":{"description":"#### A glob pattern of files to explicitly include in the deployment package.\n\n---\n\nThe path is relative to your Stacktape configuration file.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A glob pattern of files to explicitly include in the deployment package.</p>\n","ld":"<p>The path is relative to your Stacktape configuration file.</p>\n"}},"excludeFiles":{"description":"#### A glob pattern of files to explicitly exclude from the deployment package.\n\n---","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A glob pattern of files to explicitly exclude from the deployment package.</p>\n"}},"excludeDependencies":{"description":"#### A list of dependencies to exclude from the deployment package.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of dependencies to exclude from the deployment package.</p>\n"}}},"additionalProperties":false,"required":["entryfilePath"],"_MdxDesc":{"sd":"<p> Configures an image to be built automatically by Stacktape from your source code.</p>\n"}},"ExternalBuildpackBjImagePackaging":{"type":"object","properties":{"type":{"type":"string","const":"external-buildpack"},"properties":{"$ref":"#/definitions/ExternalBuildpackBjImagePackagingProps"}},"additionalProperties":false,"required":["properties","type"]},"ExternalBuildpackBjImagePackagingProps":{"type":"object","properties":{"builder":{"description":"#### The Buildpack Builder to use.\n\n---","default":"paketobuildpacks/builder-jammy-base","type":"string","_MdxDesc":{"sd":"<p> The Buildpack Builder to use.</p>\n"}},"buildpacks":{"description":"#### The specific Buildpack to use.\n\n---\n\nBy default, the buildpack is detected automatically.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> The specific Buildpack to use.</p>\n","ld":"<p>By default, the buildpack is detected automatically.</p>\n"}},"sourceDirectoryPath":{"description":"#### The path to the source code directory.","type":"string","_MdxDesc":{"sd":"<p> The path to the source code directory.</p>\n"}},"command":{"description":"#### A command to be executed when the container starts.\n\n---\n\nExample: `['/app/start.sh']`","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A command to be executed when the container starts.</p>\n","ld":"<p>Example: <code>['/app/start.sh']</code></p>\n"}}},"additionalProperties":false,"required":["sourceDirectoryPath"]},"PrebuiltBjImagePackaging":{"type":"object","properties":{"type":{"type":"string","const":"prebuilt-image"},"properties":{"$ref":"#/definitions/PrebuiltImageBjPackagingProps"}},"additionalProperties":false,"required":["properties","type"]},"PrebuiltImageBjPackagingProps":{"description":"#### Configures a pre-built container image.","type":"object","properties":{"image":{"description":"#### The name or URL of the container image.","type":"string","_MdxDesc":{"sd":"<p> The name or URL of the container image.</p>\n"}},"command":{"description":"#### A command to be executed when the container starts.\n\n---\n\nThis overrides the `CMD` instruction in the Dockerfile.\n\nExample: `['/app/start.sh']`","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A command to be executed when the container starts.</p>\n","ld":"<p>This overrides the <code>CMD</code> instruction in the Dockerfile.</p>\n<p>Example: <code>['/app/start.sh']</code></p>\n"}}},"additionalProperties":false,"required":["image"],"_MdxDesc":{"sd":"<p> Configures a pre-built container image.</p>\n"}},"CustomDockerfileBjImagePackaging":{"type":"object","properties":{"type":{"type":"string","const":"custom-dockerfile"},"properties":{"$ref":"#/definitions/CustomDockerfileBjImagePackagingProps"}},"additionalProperties":false,"required":["properties","type"]},"CustomDockerfileBjImagePackagingProps":{"description":"#### Configures an image to be built by Stacktape from a specified Dockerfile.","type":"object","properties":{"dockerfilePath":{"description":"#### The path to the Dockerfile, relative to `buildContextPath`.","type":"string","_MdxDesc":{"sd":"<p> The path to the Dockerfile, relative to <code>buildContextPath</code>.</p>\n"}},"buildContextPath":{"description":"#### The path to the build context directory, relative to your Stacktape configuration file.","type":"string","_MdxDesc":{"sd":"<p> The path to the build context directory, relative to your Stacktape configuration file.</p>\n"}},"buildArgs":{"description":"#### A list of arguments to pass to the `docker build` command.","type":"array","items":{"$ref":"#/definitions/DockerBuildArg"},"_MdxDesc":{"sd":"<p> A list of arguments to pass to the <code>docker build</code> command.</p>\n"}},"command":{"description":"#### A command to be executed when the container starts.\n\n---\n\nThis overrides the `CMD` instruction in the Dockerfile.\n\nExample: `['/app/start.sh']`","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A command to be executed when the container starts.</p>\n","ld":"<p>This overrides the <code>CMD</code> instruction in the Dockerfile.</p>\n<p>Example: <code>['/app/start.sh']</code></p>\n"}}},"additionalProperties":false,"required":["buildContextPath"],"_MdxDesc":{"sd":"<p> Configures an image to be built by Stacktape from a specified Dockerfile.</p>\n"}},"NixpacksBjImagePackaging":{"type":"object","properties":{"type":{"type":"string","const":"nixpacks"},"properties":{"$ref":"#/definitions/NixpacksBjImagePackagingProps"}},"additionalProperties":false,"required":["properties","type"]},"NixpacksBjImagePackagingProps":{"type":"object","properties":{"sourceDirectoryPath":{"description":"#### The path to the source code directory.","type":"string","_MdxDesc":{"sd":"<p> The path to the source code directory.</p>\n"}},"buildImage":{"description":"#### The base image to use for building the application.\n\n---\n\nFor more details, see the [Nixpacks documentation](https://nixpacks.com/docs/configuration/file#build-image).","type":"string","_MdxDesc":{"sd":"<p> The base image to use for building the application.</p>\n","ld":"<p>For more details, see the <a href=\"https://nixpacks.com/docs/configuration/file#build-image\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Nixpacks documentation</a>.</p>\n"}},"providers":{"description":"#### A list of providers to use for determining the build and runtime environments.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of providers to use for determining the build and runtime environments.</p>\n"}},"startCmd":{"description":"#### The command to execute when starting the application.\n\n---\n\nThis overrides the default start command inferred by Nixpacks.","type":"string","_MdxDesc":{"sd":"<p> The command to execute when starting the application.</p>\n","ld":"<p>This overrides the default start command inferred by Nixpacks.</p>\n"}},"startRunImage":{"description":"#### The base image to use for running the application.","type":"string","_MdxDesc":{"sd":"<p> The base image to use for running the application.</p>\n"}},"startOnlyIncludeFiles":{"description":"#### A list of file paths to include in the runtime environment; all other files will be excluded.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of file paths to include in the runtime environment; all other files will be excluded.</p>\n"}},"phases":{"description":"#### The build phases for the application.","type":"array","items":{"$ref":"#/definitions/NixpacksPhase"},"_MdxDesc":{"sd":"<p> The build phases for the application.</p>\n"}}},"additionalProperties":false,"required":["sourceDirectoryPath"]},"BatchJobResources":{"type":"object","properties":{"cpu":{"description":"#### The number of virtual CPUs (vCPUs) to allocate to the job.\n\n---\n\nMust be an integer (e.g., 1, 2, 4).","type":"number","_MdxDesc":{"sd":"<p> The number of virtual CPUs (vCPUs) to allocate to the job.</p>\n","ld":"<p>Must be an integer (e.g., 1, 2, 4).</p>\n"}},"memory":{"description":"#### The amount of memory (in MB) to allocate to the job.\n\n---\n\n> **Important:** AWS instances require a small amount of memory for their own management processes.\n> If you request memory in exact powers of 2 (e.g., 8192 MB for 8 GiB), a larger instance may be provisioned than you expect.\n>\n> **Recommendation:** To ensure efficient instance usage, consider requesting slightly less memory (e.g., 7680 MB instead of 8192 MB).\n> This allows the job to fit on a standard 8 GiB instance without needing to scale up.\n>\n> For more details, see the [AWS documentation on memory management](https://docs.aws.amazon.com/batch/latest/userguide/memory-management.html#ecs-reserved-memory).","type":"number","_MdxDesc":{"sd":"<p> The amount of memory (in MB) to allocate to the job.</p>\n","ld":"<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Important:</strong> AWS instances require a small amount of memory for their own management processes.\nIf you request memory in exact powers of 2 (e.g., 8192 MB for 8 GiB), a larger instance may be provisioned than you expect.</p>\n<p><strong>Recommendation:</strong> To ensure efficient instance usage, consider requesting slightly less memory (e.g., 7680 MB instead of 8192 MB).\nThis allows the job to fit on a standard 8 GiB instance without needing to scale up.</p>\n<p>For more details, see the <a href=\"https://docs.aws.amazon.com/batch/latest/userguide/memory-management.html#ecs-reserved-memory\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on memory management</a>.</p>\n</div>\n</div>"}},"gpu":{"description":"#### The number of physical GPUs required by the job.\n\n---\n\nSpecifying this will ensure the job runs on a GPU-accelerated instance.\nSupported families include NVIDIA A100 (for deep learning) and A10G (for graphics and ML inference).\nIf omitted, a CPU-only instance will be used.","type":"number","_MdxDesc":{"sd":"<p> The number of physical GPUs required by the job.</p>\n","ld":"<p>Specifying this will ensure the job runs on a GPU-accelerated instance.\nSupported families include NVIDIA A100 (for deep learning) and A10G (for graphics and ML inference).\nIf omitted, a CPU-only instance will be used.</p>\n"}}},"additionalProperties":false,"required":["cpu","memory"]},"BatchJobLogging":{"type":"object","properties":{"disabled":{"description":"#### Disables application logging to CloudWatch.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disables application logging to CloudWatch.</p>\n"}},"retentionDays":{"description":"#### The number of days to retain logs in CloudWatch.","default":90,"enum":[1,120,14,150,180,1827,3,30,365,3653,400,5,545,60,7,731,90],"type":"number","_MdxDesc":{"sd":"<p> The number of days to retain logs in CloudWatch.</p>\n"}},"logForwarding":{"description":"#### Log Forwarding\n\n---\n\nForwards logs to a specified destination for monitoring, analysis, or long-term storage.\n\nLog forwarding is handled by an [Amazon Kinesis Data Firehose](https://aws.amazon.com/kinesis/data-firehose/) delivery stream. You will incur costs based on the volume of data transferred (approximately $0.03 per GB). For detailed pricing, see the [AWS Kinesis Firehose Pricing](https://aws.amazon.com/kinesis/data-firehose/pricing/) page.\n\nSupported destinations:\n- `http-endpoint`: Delivers logs to any HTTP endpoint that complies with [Firehose request and response specifications](https://docs.aws.amazon.com/firehose/latest/dev/httpdeliveryrequestresponse.html). Many third-party logging services are compatible out-of-the-box.\n- `datadog`: Delivers logs to [Datadog](https://www.datadoghq.com/).\n- `highlight`: Delivers logs to a [Highlight.io](https://www.highlight.io/) project.\n\nFor more information, refer to the [Stacktape documentation on log forwarding](https://docs.stacktape.com/configuration/log-forwarding/).\n\n> If logs fail to be delivered after multiple retries, they are stored in a backup S3 bucket named `{stackName}-{resourceName}-logs-{generatedHash}`. The retry duration can be configured.","anyOf":[{"$ref":"#/definitions/HttpEndpointLogForwarding"},{"$ref":"#/definitions/HighlightLogForwarding"},{"$ref":"#/definitions/DatadogLogForwarding"}],"_MdxDesc":{"sd":"<p> Log Forwarding</p>\n","ld":"<p>Forwards logs to a specified destination for monitoring, analysis, or long-term storage.</p>\n<p>Log forwarding is handled by an <a href=\"https://aws.amazon.com/kinesis/data-firehose/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Amazon Kinesis Data Firehose</a> delivery stream. You will incur costs based on the volume of data transferred (approximately $0.03 per GB). For detailed pricing, see the <a href=\"https://aws.amazon.com/kinesis/data-firehose/pricing/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS Kinesis Firehose Pricing</a> page.</p>\n<p>Supported destinations:</p>\n<ul>\n<li><code>http-endpoint</code>: Delivers logs to any HTTP endpoint that complies with <a href=\"https://docs.aws.amazon.com/firehose/latest/dev/httpdeliveryrequestresponse.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Firehose request and response specifications</a>. Many third-party logging services are compatible out-of-the-box.</li>\n<li><code>datadog</code>: Delivers logs to <a href=\"https://www.datadoghq.com/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Datadog</a>.</li>\n<li><code>highlight</code>: Delivers logs to a <a href=\"https://www.highlight.io/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Highlight.io</a> project.</li>\n</ul>\n<p>For more information, refer to the <a href=\"/configuration/log-forwarding/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape documentation on log forwarding</a>.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>If logs fail to be delivered after multiple retries, they are stored in a backup S3 bucket named <code>{stackName}-{resourceName}-logs-{generatedHash}</code>. The retry duration can be configured.</p>\n</div>\n</div>"}}},"additionalProperties":false},"BatchJobRetryConfiguration":{"type":"object","properties":{"attempts":{"description":"#### The maximum number of times to retry a failed job.\n\n---\n\nA job is retried if it fails due to an internal error, a timeout, or a Spot Instance interruption.\nOnce this limit is reached, the job is marked as failed.","default":1,"type":"number","_MdxDesc":{"sd":"<p> The maximum number of times to retry a failed job.</p>\n","ld":"<p>A job is retried if it fails due to an internal error, a timeout, or a Spot Instance interruption.\nOnce this limit is reached, the job is marked as failed.</p>\n"}},"retryIntervalSeconds":{"description":"#### The time (in seconds) to wait between retry attempts.","default":0,"type":"number","_MdxDesc":{"sd":"<p> The time (in seconds) to wait between retry attempts.</p>\n"}},"retryIntervalMultiplier":{"description":"#### A multiplier for the `retryIntervalSeconds`.\n\n---\n\nWith each retry, the wait time is multiplied by this value. This is useful for implementing an exponential backoff strategy, which can help alleviate pressure on downstream services.","default":1,"type":"number","_MdxDesc":{"sd":"<p> A multiplier for the <code>retryIntervalSeconds</code>.</p>\n","ld":"<p>With each retry, the wait time is multiplied by this value. This is useful for implementing an exponential backoff strategy, which can help alleviate pressure on downstream services.</p>\n"}}},"additionalProperties":false},"ApplicationLoadBalancerIntegration":{"description":"#### Triggers a function when an Application Load Balancer receives a matching HTTP request.\n\n---\n\nYou can route requests based on HTTP method, path, headers, query parameters, and source IP address.","type":"object","properties":{"type":{"description":"#### Triggers a function when an Application Load Balancer receives a matching HTTP request.\n\n---\n\nYou can route requests based on HTTP method, path, headers, query parameters, and source IP address.","type":"string","const":"application-load-balancer","_MdxDesc":{"sd":"<p> Triggers a function when an Application Load Balancer receives a matching HTTP request.</p>\n","ld":"<p>You can route requests based on HTTP method, path, headers, query parameters, and source IP address.</p>\n"}},"properties":{"$ref":"#/definitions/ApplicationLoadBalancerIntegrationProps","description":"#### Properties of the integration","_MdxDesc":{"sd":"<p> Properties of the integration</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Triggers a function when an Application Load Balancer receives a matching HTTP request.</p>\n","ld":"<p>You can route requests based on HTTP method, path, headers, query parameters, and source IP address.</p>\n"}},"ApplicationLoadBalancerIntegrationProps":{"type":"object","properties":{"loadBalancerName":{"description":"#### The name of the Application Load Balancer.\n\n---\n\nThis must reference a load balancer defined in your Stacktape configuration.","type":"string","_MdxDesc":{"sd":"<p> The name of the Application Load Balancer.</p>\n","ld":"<p>This must reference a load balancer defined in your Stacktape configuration.</p>\n"}},"listenerPort":{"description":"#### The port of the load balancer listener to attach to.\n\n---\n\nYou only need to specify this if the load balancer uses custom listeners.","type":"number","_MdxDesc":{"sd":"<p> The port of the load balancer listener to attach to.</p>\n","ld":"<p>You only need to specify this if the load balancer uses custom listeners.</p>\n"}},"priority":{"description":"#### The priority of this integration rule.\n\n---\n\nLoad balancer rules are evaluated in order from the lowest priority to the highest.\nThe first rule that matches an incoming request will handle it.","type":"number","_MdxDesc":{"sd":"<p> The priority of this integration rule.</p>\n","ld":"<p>Load balancer rules are evaluated in order from the lowest priority to the highest.\nThe first rule that matches an incoming request will handle it.</p>\n"}},"paths":{"description":"#### A list of URL paths that will trigger this integration.\n\n---\n\nThe request will be routed if its path matches any of the paths in this list.\nThe comparison is case-sensitive and supports `*` and `?` wildcards.\n\nExample: `/users`, `/articles/*`","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of URL paths that will trigger this integration.</p>\n","ld":"<p>The request will be routed if its path matches any of the paths in this list.\nThe comparison is case-sensitive and supports <code>*</code> and <code>?</code> wildcards.</p>\n<p>Example: <code>/users</code>, <code>/articles/*</code></p>\n"}},"methods":{"description":"#### A list of HTTP methods that will trigger this integration.\n\n---\n\nExample: `GET`, `POST`, `DELETE`","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of HTTP methods that will trigger this integration.</p>\n","ld":"<p>Example: <code>GET</code>, <code>POST</code>, <code>DELETE</code></p>\n"}},"hosts":{"description":"#### A list of hostnames that will trigger this integration.\n\n---\n\nThe hostname is parsed from the `Host` header of the request.\nWildcards (`*` and `?`) are supported.\n\nExample: `api.example.com`, `*.myapp.com`","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of hostnames that will trigger this integration.</p>\n","ld":"<p>The hostname is parsed from the <code>Host</code> header of the request.\nWildcards (<code>*</code> and <code>?</code>) are supported.</p>\n<p>Example: <code>api.example.com</code>, <code>*.myapp.com</code></p>\n"}},"headers":{"description":"#### A list of header conditions that the request must match.\n\n---\n\nAll header conditions must be met for the request to be routed.","type":"array","items":{"$ref":"#/definitions/LbHeaderCondition"},"_MdxDesc":{"sd":"<p> A list of header conditions that the request must match.</p>\n","ld":"<p>All header conditions must be met for the request to be routed.</p>\n"}},"queryParams":{"description":"#### A list of query parameter conditions that the request must match.\n\n---\n\nAll query parameter conditions must be met for the request to be routed.","type":"array","items":{"$ref":"#/definitions/LbQueryParamCondition"},"_MdxDesc":{"sd":"<p> A list of query parameter conditions that the request must match.</p>\n","ld":"<p>All query parameter conditions must be met for the request to be routed.</p>\n"}},"sourceIps":{"description":"#### A list of source IP addresses (in CIDR format) that are allowed to trigger this integration.\n\n---\n\n> **Note:** If the client is behind a proxy, this will be the IP address of the proxy.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of source IP addresses (in CIDR format) that are allowed to trigger this integration.</p>\n","ld":"<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> If the client is behind a proxy, this will be the IP address of the proxy.</p>\n</div>\n</div>"}}},"additionalProperties":false,"required":["loadBalancerName","priority"]},"SnsIntegration":{"description":"#### Triggers a function when a new message is published to an SNS topic.\n\n---\n\nAmazon SNS is a fully managed messaging service for both application-to-application (A2A) and application-to-person (A2P) communication.\n\nTo add a custom SNS topic to your stack, define it as a [CloudFormation resource](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sns-topic.html) in the `cloudformationResources` section of your configuration.","type":"object","properties":{"type":{"type":"string","const":"sns"},"properties":{"$ref":"#/definitions/SnsIntegrationProps","description":"#### Properties of the integration","_MdxDesc":{"sd":"<p> Properties of the integration</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Triggers a function when a new message is published to an SNS topic.</p>\n","ld":"<p>Amazon SNS is a fully managed messaging service for both application-to-application (A2A) and application-to-person (A2P) communication.</p>\n<p>To add a custom SNS topic to your stack, define it as a <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sns-topic.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">CloudFormation resource</a> in the <code>cloudformationResources</code> section of your configuration.</p>\n"}},"SnsIntegrationProps":{"type":"object","properties":{"snsTopicName":{"description":"#### The name of an SNS topic defined in your stack's resources.\n\n---\n\nYou must specify either `snsTopicName` or `snsTopicArn`.","type":"string","_MdxDesc":{"sd":"<p> The name of an SNS topic defined in your stack&#39;s resources.</p>\n","ld":"<p>You must specify either <code>snsTopicName</code> or <code>snsTopicArn</code>.</p>\n"}},"snsTopicArn":{"description":"#### The ARN of an existing SNS topic.\n\n---\n\nUse this to subscribe to a topic that is not managed by your stack.\nYou must specify either `snsTopicName` or `snsTopicArn`.","type":"string","_MdxDesc":{"sd":"<p> The ARN of an existing SNS topic.</p>\n","ld":"<p>Use this to subscribe to a topic that is not managed by your stack.\nYou must specify either <code>snsTopicName</code> or <code>snsTopicArn</code>.</p>\n"}},"filterPolicy":{"description":"#### A filter policy to apply to incoming messages.\n\n---\n\nThis allows you to filter messages based on their attributes, so the function is only triggered for relevant messages.\nIf you need to filter based on the message content, consider using an EventBridge event bus instead.\nFor more details on filter policies, see the [AWS documentation](https://docs.aws.amazon.com/sns/latest/dg/sns-subscription-filter-policies.html)."},"onDeliveryFailure":{"$ref":"#/definitions/SnsOnDeliveryFailure","description":"#### A destination for messages that fail to be delivered to the target.\n\n---\n\nIn rare cases (e.g., if the target function cannot scale fast enough), a message might fail to be delivered.\nThis property specifies an SQS queue where failed messages will be sent.","_MdxDesc":{"sd":"<p> A destination for messages that fail to be delivered to the target.</p>\n","ld":"<p>In rare cases (e.g., if the target function cannot scale fast enough), a message might fail to be delivered.\nThis property specifies an SQS queue where failed messages will be sent.</p>\n"}}},"additionalProperties":false},"SnsOnDeliveryFailure":{"type":"object","properties":{"sqsQueueArn":{"description":"#### The ARN of the SQS queue for failed messages.","type":"string","_MdxDesc":{"sd":"<p> The ARN of the SQS queue for failed messages.</p>\n"}},"sqsQueueName":{"description":"#### The name of an SQS queue (defined in your Stacktape configuration) for failed messages.","type":"string","_MdxDesc":{"sd":"<p> The name of an SQS queue (defined in your Stacktape configuration) for failed messages.</p>\n"}}},"additionalProperties":false},"SqsIntegration":{"description":"#### Triggers a function when new messages are available in an SQS queue.\n\n---\n\nMessages are processed in batches. A single function invocation can receive multiple messages.\n\n> A single SQS queue should only be consumed by one function. If you need multiple consumers for the same message (a \"fan-out\" pattern), use an SNS topic or an EventBridge event bus.\n\nTo add a custom SQS queue, define it as a [CloudFormation resource](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html) in the `cloudformationResources` section.\n\nThe function is triggered when:\n- The batch window (`maxBatchWindowSeconds`) expires.\n- The maximum batch size (`batchSize`) is reached.\n- The maximum payload size (6 MB) is reached.","type":"object","properties":{"type":{"type":"string","const":"sqs"},"properties":{"$ref":"#/definitions/SqsIntegrationProps","description":"#### Properties of the integration","_MdxDesc":{"sd":"<p> Properties of the integration</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Triggers a function when new messages are available in an SQS queue.</p>\n","ld":"<p>Messages are processed in batches. A single function invocation can receive multiple messages.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>A single SQS queue should only be consumed by one function. If you need multiple consumers for the same message (a &quot;fan-out&quot; pattern), use an SNS topic or an EventBridge event bus.</p>\n</div>\n</div><p>To add a custom SQS queue, define it as a <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">CloudFormation resource</a> in the <code>cloudformationResources</code> section.</p>\n<p>The function is triggered when:</p>\n<ul>\n<li>The batch window (<code>maxBatchWindowSeconds</code>) expires.</li>\n<li>The maximum batch size (<code>batchSize</code>) is reached.</li>\n<li>The maximum payload size (6 MB) is reached.</li>\n</ul>\n"}},"SqsIntegrationProps":{"type":"object","properties":{"sqsQueueName":{"description":"#### The name of an SQS queue defined in your stack's resources.\n\n---\n\nYou must specify either `sqsQueueName` or `sqsQueueArn`.","type":"string","_MdxDesc":{"sd":"<p> The name of an SQS queue defined in your stack&#39;s resources.</p>\n","ld":"<p>You must specify either <code>sqsQueueName</code> or <code>sqsQueueArn</code>.</p>\n"}},"sqsQueueArn":{"description":"#### The ARN of an existing SQS queue.\n\n---\n\nUse this to consume messages from a queue that is not managed by your stack.\nYou must specify either `sqsQueueName` or `sqsQueueArn`.","type":"string","_MdxDesc":{"sd":"<p> The ARN of an existing SQS queue.</p>\n","ld":"<p>Use this to consume messages from a queue that is not managed by your stack.\nYou must specify either <code>sqsQueueName</code> or <code>sqsQueueArn</code>.</p>\n"}},"batchSize":{"description":"#### The maximum number of records to process in a single batch.\n\n---\n\nMaximum is 10,000.","default":10,"type":"number","_MdxDesc":{"sd":"<p> The maximum number of records to process in a single batch.</p>\n","ld":"<p>Maximum is 10,000.</p>\n"}},"maxBatchWindowSeconds":{"description":"#### The maximum time (in seconds) to wait before invoking the function with a batch of records.\n\n---\n\nMaximum is 300 seconds. If not set, the function is invoked as soon as messages are available.","type":"number","_MdxDesc":{"sd":"<p> The maximum time (in seconds) to wait before invoking the function with a batch of records.</p>\n","ld":"<p>Maximum is 300 seconds. If not set, the function is invoked as soon as messages are available.</p>\n"}}},"additionalProperties":false},"KinesisIntegration":{"description":"#### Triggers a function when new records are available in a Kinesis Data Stream.\n\n---\n\nKinesis is suitable for real-time data streaming and processing. Records are processed in batches.\nFor a comparison with SQS, see the [AWS documentation](https://aws.amazon.com/kinesis/data-streams/faqs/).\n\nTo add a custom Kinesis stream, define it as a [CloudFormation resource](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-kinesis-stream.html) in the `cloudformationResources` section.\n\nYou can consume messages in two ways:\n- **Directly**: Polls each shard once per second. Read throughput is shared with other consumers.\n- **Stream Consumer**: Provides a dedicated connection to each shard for higher throughput and lower latency.","type":"object","properties":{"type":{"type":"string","const":"kinesis-stream"},"properties":{"$ref":"#/definitions/KinesisIntegrationProps","description":"#### Properties of the integration","_MdxDesc":{"sd":"<p> Properties of the integration</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Triggers a function when new records are available in a Kinesis Data Stream.</p>\n","ld":"<p>Kinesis is suitable for real-time data streaming and processing. Records are processed in batches.\nFor a comparison with SQS, see the <a href=\"https://aws.amazon.com/kinesis/data-streams/faqs/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n<p>To add a custom Kinesis stream, define it as a <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-kinesis-stream.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">CloudFormation resource</a> in the <code>cloudformationResources</code> section.</p>\n<p>You can consume messages in two ways:</p>\n<ul>\n<li><strong>Directly</strong>: Polls each shard once per second. Read throughput is shared with other consumers.</li>\n<li><strong>Stream Consumer</strong>: Provides a dedicated connection to each shard for higher throughput and lower latency.</li>\n</ul>\n"}},"KinesisIntegrationProps":{"type":"object","properties":{"streamArn":{"description":"#### The ARN of the Kinesis stream to consume records from.","type":"string","_MdxDesc":{"sd":"<p> The ARN of the Kinesis stream to consume records from.</p>\n"}},"consumerArn":{"description":"#### The ARN of a specific stream consumer to use.\n\n---\n\nThis cannot be used with `autoCreateConsumer`.","type":"string","_MdxDesc":{"sd":"<p> The ARN of a specific stream consumer to use.</p>\n","ld":"<p>This cannot be used with <code>autoCreateConsumer</code>.</p>\n"}},"autoCreateConsumer":{"description":"#### Automatically creates a dedicated stream consumer for this integration.\n\n---\n\nThis is recommended for minimizing latency and maximizing throughput.\nFor more details, see the [AWS documentation on stream consumers](https://docs.aws.amazon.com/streams/latest/dev/amazon-kinesis-consumers.html).\nThis cannot be used with `consumerArn`.","type":"boolean","_MdxDesc":{"sd":"<p> Automatically creates a dedicated stream consumer for this integration.</p>\n","ld":"<p>This is recommended for minimizing latency and maximizing throughput.\nFor more details, see the <a href=\"https://docs.aws.amazon.com/streams/latest/dev/amazon-kinesis-consumers.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on stream consumers</a>.\nThis cannot be used with <code>consumerArn</code>.</p>\n"}},"maxBatchWindowSeconds":{"description":"#### The maximum time (in seconds) to wait before invoking the function with a batch of records.\n\n---\n\nMaximum is 300 seconds.","type":"number","_MdxDesc":{"sd":"<p> The maximum time (in seconds) to wait before invoking the function with a batch of records.</p>\n","ld":"<p>Maximum is 300 seconds.</p>\n"}},"batchSize":{"description":"#### The maximum number of records to process in a single batch.\n\n---\n\nMaximum is 10,000.","default":10,"type":"number","_MdxDesc":{"sd":"<p> The maximum number of records to process in a single batch.</p>\n","ld":"<p>Maximum is 10,000.</p>\n"}},"startingPosition":{"description":"#### The position in the stream from which to start reading records.\n\n---\n\n- `LATEST`: Read only new records.\n- `TRIM_HORIZON`: Read all available records from the beginning of the stream.","default":"TRIM_HORIZON","enum":["LATEST","TRIM_HORIZON"],"type":"string","_MdxDesc":{"sd":"<p> The position in the stream from which to start reading records.</p>\n","ld":"<ul>\n<li><code>LATEST</code>: Read only new records.</li>\n<li><code>TRIM_HORIZON</code>: Read all available records from the beginning of the stream.</li>\n</ul>\n"}},"maximumRetryAttempts":{"description":"#### The number of times to retry a failed batch of records.\n\n---\n\n> **Important:** If an error occurs, the entire batch is retried, including records that were processed successfully. Your function should be idempotent to handle this.","type":"number","_MdxDesc":{"sd":"<p> The number of times to retry a failed batch of records.</p>\n","ld":"<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Important:</strong> If an error occurs, the entire batch is retried, including records that were processed successfully. Your function should be idempotent to handle this.</p>\n</div>\n</div>"}},"onFailure":{"$ref":"#/definitions/DestinationOnFailure","description":"#### A destination (SQS queue or SNS topic) for batches that fail after all retry attempts.","_MdxDesc":{"sd":"<p> A destination (SQS queue or SNS topic) for batches that fail after all retry attempts.</p>\n"}},"parallelizationFactor":{"description":"#### The number of batches to process concurrently from the same shard.","type":"number","_MdxDesc":{"sd":"<p> The number of batches to process concurrently from the same shard.</p>\n"}},"bisectBatchOnFunctionError":{"description":"#### Splits a failed batch in two before retrying.\n\n---\n\nThis can be useful if a failure is caused by a batch being too large.","type":"boolean","_MdxDesc":{"sd":"<p> Splits a failed batch in two before retrying.</p>\n","ld":"<p>This can be useful if a failure is caused by a batch being too large.</p>\n"}}},"additionalProperties":false,"required":["streamArn"]},"DestinationOnFailure":{"type":"object","properties":{"arn":{"description":"#### The ARN of the SNS topic or SQS queue for failed batches.","type":"string","_MdxDesc":{"sd":"<p> The ARN of the SNS topic or SQS queue for failed batches.</p>\n"}},"type":{"description":"#### The type of the destination.","enum":["sns","sqs"],"type":"string","_MdxDesc":{"sd":"<p> The type of the destination.</p>\n"}}},"additionalProperties":false,"required":["arn","type"]},"DynamoDbIntegration":{"description":"#### Triggers a function when item-level changes occur in a DynamoDB table.\n\n---\n\nDynamoDB Streams capture a time-ordered sequence of modifications to items in a table.\nRecords are processed in batches.\nTo use this, you must enable streams on your DynamoDB table. For more information, see the [DynamoDB table documentation](https://docs.stacktape.com/resources/dynamo-db-tables/#item-change-streaming).","type":"object","properties":{"type":{"type":"string","const":"dynamo-db-stream"},"properties":{"$ref":"#/definitions/DynamoDbIntegrationProps","description":"#### Properties of the integration","_MdxDesc":{"sd":"<p> Properties of the integration</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Triggers a function when item-level changes occur in a DynamoDB table.</p>\n","ld":"<p>DynamoDB Streams capture a time-ordered sequence of modifications to items in a table.\nRecords are processed in batches.\nTo use this, you must enable streams on your DynamoDB table. For more information, see the <a href=\"/resources/dynamo-db-tables/#item-change-streaming\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">DynamoDB table documentation</a>.</p>\n"}},"DynamoDbIntegrationProps":{"type":"object","properties":{"streamArn":{"description":"#### The ARN of the DynamoDB table stream.","type":"string","_MdxDesc":{"sd":"<p> The ARN of the DynamoDB table stream.</p>\n"}},"maxBatchWindowSeconds":{"description":"#### The maximum time (in seconds) to wait before invoking the function with a batch of records.\n\n---\n\nMaximum is 300 seconds.","type":"number","_MdxDesc":{"sd":"<p> The maximum time (in seconds) to wait before invoking the function with a batch of records.</p>\n","ld":"<p>Maximum is 300 seconds.</p>\n"}},"batchSize":{"description":"#### The maximum number of records to process in a single batch.\n\n---\n\nMaximum is 1,000.","default":100,"type":"number","_MdxDesc":{"sd":"<p> The maximum number of records to process in a single batch.</p>\n","ld":"<p>Maximum is 1,000.</p>\n"}},"startingPosition":{"description":"#### The position in the stream from which to start reading records.\n\n---\n\n- `LATEST`: Read only new records.\n- `TRIM_HORIZON`: Read all available records from the beginning of the stream.","default":"TRIM_HORIZON","type":"string","_MdxDesc":{"sd":"<p> The position in the stream from which to start reading records.</p>\n","ld":"<ul>\n<li><code>LATEST</code>: Read only new records.</li>\n<li><code>TRIM_HORIZON</code>: Read all available records from the beginning of the stream.</li>\n</ul>\n"}},"maximumRetryAttempts":{"description":"#### The number of times to retry a failed batch of records.\n\n---\n\n> **Important:** If an error occurs, the entire batch is retried, including records that were processed successfully. Your function should be idempotent to handle this.","type":"number","_MdxDesc":{"sd":"<p> The number of times to retry a failed batch of records.</p>\n","ld":"<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Important:</strong> If an error occurs, the entire batch is retried, including records that were processed successfully. Your function should be idempotent to handle this.</p>\n</div>\n</div>"}},"onFailure":{"$ref":"#/definitions/DestinationOnFailure","description":"#### A destination (SQS queue or SNS topic) for batches that fail after all retry attempts.","_MdxDesc":{"sd":"<p> A destination (SQS queue or SNS topic) for batches that fail after all retry attempts.</p>\n"}},"parallelizationFactor":{"description":"#### The number of batches to process concurrently from the same shard.","type":"number","_MdxDesc":{"sd":"<p> The number of batches to process concurrently from the same shard.</p>\n"}},"bisectBatchOnFunctionError":{"description":"#### Splits a failed batch in two before retrying.\n\n---\n\nThis can be useful if a failure is caused by a batch being too large.","type":"boolean","_MdxDesc":{"sd":"<p> Splits a failed batch in two before retrying.</p>\n","ld":"<p>This can be useful if a failure is caused by a batch being too large.</p>\n"}}},"additionalProperties":false,"required":["streamArn"]},"S3Integration":{"description":"#### Triggers a function when a specified event occurs in an S3 bucket.\n\n---\n\nFor a list of supported event types, see the [AWS documentation](https://docs.aws.amazon.com/AmazonS3/latest/userguide/notification-how-to-event-types-and-destinations.html#supported-notification-event-types).","type":"object","properties":{"type":{"type":"string","const":"s3"},"properties":{"$ref":"#/definitions/S3IntegrationProps","description":"#### Properties of the integration","_MdxDesc":{"sd":"<p> Properties of the integration</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Triggers a function when a specified event occurs in an S3 bucket.</p>\n","ld":"<p>For a list of supported event types, see the <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/notification-how-to-event-types-and-destinations.html#supported-notification-event-types\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"S3IntegrationProps":{"type":"object","properties":{"bucketArn":{"description":"#### The ARN of the S3 bucket to monitor for events.","type":"string","_MdxDesc":{"sd":"<p> The ARN of the S3 bucket to monitor for events.</p>\n"}},"s3EventType":{"description":"#### The type of S3 event that will trigger the function.","enum":["s3:ObjectCreated:*","s3:ObjectCreated:CompleteMultipartUpload","s3:ObjectCreated:Copy","s3:ObjectCreated:Post","s3:ObjectCreated:Put","s3:ObjectRemoved:*","s3:ObjectRemoved:Delete","s3:ObjectRemoved:DeleteMarkerCreated","s3:ObjectRestore:*","s3:ObjectRestore:Completed","s3:ObjectRestore:Post","s3:ReducedRedundancyLostObject","s3:Replication:*","s3:Replication:OperationFailedReplication","s3:Replication:OperationMissedThreshold","s3:Replication:OperationNotTracked","s3:Replication:OperationReplicatedAfterThreshold"],"type":"string","_MdxDesc":{"sd":"<p> The type of S3 event that will trigger the function.</p>\n"}},"filterRule":{"$ref":"#/definitions/S3FilterRule","description":"#### A filter to apply to objects, so the function is only triggered for relevant objects.","_MdxDesc":{"sd":"<p> A filter to apply to objects, so the function is only triggered for relevant objects.</p>\n"}}},"additionalProperties":false,"required":["bucketArn","s3EventType"]},"S3FilterRule":{"type":"object","properties":{"prefix":{"description":"#### The prefix that an object's key must have to trigger the function.","type":"string","_MdxDesc":{"sd":"<p> The prefix that an object&#39;s key must have to trigger the function.</p>\n"}},"suffix":{"description":"#### The suffix that an object's key must have to trigger the function.","type":"string","_MdxDesc":{"sd":"<p> The suffix that an object&#39;s key must have to trigger the function.</p>\n"}}},"additionalProperties":false},"ScheduleIntegration":{"description":"#### Triggers a function on a recurring schedule.\n\n---\n\nYou can define schedules using two formats:\n- **Rate expressions**: Run at a regular interval (e.g., `rate(5 minutes)`). See the [AWS documentation on rate expressions](https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/ScheduledEvents.html#RateExpressions).\n- **Cron expressions**: Run at specific times (e.g., `cron(0 18 ? * MON-FRI *)`). See the [AWS documentation on cron expressions](https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/ScheduledEvents.html#CronExpressions).","type":"object","properties":{"type":{"type":"string","const":"schedule"},"properties":{"$ref":"#/definitions/ScheduleIntegrationProps","description":"#### Properties of the integration","_MdxDesc":{"sd":"<p> Properties of the integration</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Triggers a function on a recurring schedule.</p>\n","ld":"<p>You can define schedules using two formats:</p>\n<ul>\n<li><strong>Rate expressions</strong>: Run at a regular interval (e.g., <code>rate(5 minutes)</code>). See the <a href=\"https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/ScheduledEvents.html#RateExpressions\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on rate expressions</a>.</li>\n<li><strong>Cron expressions</strong>: Run at specific times (e.g., <code>cron(0 18 ? * MON-FRI *)</code>). See the <a href=\"https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/ScheduledEvents.html#CronExpressions\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on cron expressions</a>.</li>\n</ul>\n"}},"ScheduleIntegrationProps":{"type":"object","properties":{"scheduleRate":{"description":"#### The schedule rate or cron expression.\n\n---\n\nExamples: `rate(2 hours)`, `cron(0 10 * * ? *)`","type":"string","_MdxDesc":{"sd":"<p> The schedule rate or cron expression.</p>\n","ld":"<p>Examples: <code>rate(2 hours)</code>, <code>cron(0 10 * * ? *)</code></p>\n"}},"input":{"description":"#### A fixed JSON object to be passed as the event payload.\n\n---\n\nIf you need to customize the payload based on the event, use `inputTransformer` instead.\nYou can only use one of `input`, `inputPath`, or `inputTransformer`.\n\nExample:\n\n```yaml\ninput:\n  source: 'my-scheduled-event'\n```"},"inputPath":{"description":"#### A JSONPath expression to extract a portion of the event to pass to the target.\n\n---\n\nThis is useful for forwarding only a specific part of the event payload.\nYou can only use one of `input`, `inputPath`, or `inputTransformer`.\n\nExample:\n\n```yaml\ninputPath: '$.detail'\n```","type":"string","_MdxDesc":{"sd":"<p> A JSONPath expression to extract a portion of the event to pass to the target.</p>\n","ld":"<p>This is useful for forwarding only a specific part of the event payload.\nYou can only use one of <code>input</code>, <code>inputPath</code>, or <code>inputTransformer</code>.</p>\n<p>Example:</p>\n<pre><code class=\"language-yaml\">inputPath: &#39;$.detail&#39;\n</code></pre>\n"}},"inputTransformer":{"$ref":"#/definitions/EventInputTransformer","description":"#### Customizes the event payload sent to the target.\n\n---\n\nThis allows you to extract values from the original event and use them to construct a new payload.\nYou can only use one of `input`, `inputPath`, or `inputTransformer`.\n\nExample:\n\n```yaml\ninputTransformer:\n  inputPathsMap:\n    eventTime: '$.time'\n  inputTemplate:\n    message: 'This event occurred at <eventTime>.'\n```","_MdxDesc":{"sd":"<p> Customizes the event payload sent to the target.</p>\n","ld":"<p>This allows you to extract values from the original event and use them to construct a new payload.\nYou can only use one of <code>input</code>, <code>inputPath</code>, or <code>inputTransformer</code>.</p>\n<p>Example:</p>\n<pre><code class=\"language-yaml\">inputTransformer:\n  inputPathsMap:\n    eventTime: &#39;$.time&#39;\n  inputTemplate:\n    message: &#39;This event occurred at &lt;eventTime&gt;.&#39;\n</code></pre>\n"}}},"additionalProperties":false,"required":["scheduleRate"]},"EventInputTransformer":{"type":"object","properties":{"inputPathsMap":{"description":"#### A map of key-value pairs to extract from the event payload.\n\n---\n\nEach value is a JSONPath expression that extracts data from the event. These extracted values can then be used in the `inputTemplate`."},"inputTemplate":{"description":"#### A template for constructing a new event payload.\n\n---\n\nUse placeholders (`<placeholder>`) to insert the values extracted with `inputPathsMap`."}},"additionalProperties":false,"required":["inputTemplate"]},"CloudwatchLogIntegration":{"description":"#### Triggers a function when a new log record is added to a CloudWatch log group.\n\n---\n\n> **Note:** The event payload is BASE64-encoded and gzipped. You will need to decode and decompress it in your function to access the log data.","type":"object","properties":{"type":{"type":"string","const":"cloudwatch-log"},"properties":{"$ref":"#/definitions/CloudwatchLogIntegrationProps","description":"#### Properties of the integration","_MdxDesc":{"sd":"<p> Properties of the integration</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Triggers a function when a new log record is added to a CloudWatch log group.</p>\n","ld":"<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> The event payload is BASE64-encoded and gzipped. You will need to decode and decompress it in your function to access the log data.</p>\n</div>\n</div>"}},"CloudwatchLogIntegrationProps":{"type":"object","properties":{"logGroupArn":{"description":"#### The ARN of the log group to watch for new records.","type":"string","_MdxDesc":{"sd":"<p> The ARN of the log group to watch for new records.</p>\n"}},"filter":{"description":"#### A filter pattern to apply to the log records.\n\n---\n\nOnly logs that match this pattern will trigger the function.\nFor details on the syntax, see the [AWS documentation on filter and pattern syntax](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html).","type":"string","_MdxDesc":{"sd":"<p> A filter pattern to apply to the log records.</p>\n","ld":"<p>Only logs that match this pattern will trigger the function.\nFor details on the syntax, see the <a href=\"https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on filter and pattern syntax</a>.</p>\n"}}},"additionalProperties":false,"required":["logGroupArn"]},"HttpApiIntegration":{"description":"#### Triggers a function when a request is made to an HTTP API Gateway.\n\n---\n\nRoutes are selected based on the most specific match. For more details on route evaluation, see the [AWS documentation](https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-develop-routes.html#http-api-develop-routes.evaluation).","type":"object","properties":{"type":{"type":"string","const":"http-api-gateway"},"properties":{"$ref":"#/definitions/HttpApiIntegrationProps","description":"#### Properties of the integration","_MdxDesc":{"sd":"<p> Properties of the integration</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Triggers a function when a request is made to an HTTP API Gateway.</p>\n","ld":"<p>Routes are selected based on the most specific match. For more details on route evaluation, see the <a href=\"https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-develop-routes.html#http-api-develop-routes.evaluation\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"HttpApiIntegrationProps":{"type":"object","properties":{"httpApiGatewayName":{"description":"#### The name of the HTTP API Gateway.","type":"string","_MdxDesc":{"sd":"<p> The name of the HTTP API Gateway.</p>\n"}},"method":{"description":"#### The HTTP method that will trigger this integration.\n\n---\n\nYou can specify an exact method (e.g., `GET`) or use `*` to match any method.","enum":["*","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"],"type":"string","_MdxDesc":{"sd":"<p> The HTTP method that will trigger this integration.</p>\n","ld":"<p>You can specify an exact method (e.g., <code>GET</code>) or use <code>*</code> to match any method.</p>\n"}},"path":{"description":"#### The URL path that will trigger this integration.\n\n---\n\n- **Exact path**: `/users`\n- **Path with parameter**: `/users/{id}`. The `id` will be available in `event.pathParameters.id`.\n- **Greedy path**: `/files/{proxy+}`. This will match any path starting with `/files/`.","type":"string","_MdxDesc":{"sd":"<p> The URL path that will trigger this integration.</p>\n","ld":"<ul>\n<li><strong>Exact path</strong>: <code>/users</code></li>\n<li><strong>Path with parameter</strong>: <code>/users/{id}</code>. The <code>id</code> will be available in <code>event.pathParameters.id</code>.</li>\n<li><strong>Greedy path</strong>: <code>/files/{proxy+}</code>. This will match any path starting with <code>/files/</code>.</li>\n</ul>\n"}},"authorizer":{"$ref":"#/definitions/StpAuthorizer","description":"#### An authorizer to protect this route.\n\n---\n\nUnauthorized requests will be rejected with a `401 Unauthorized` response.","_MdxDesc":{"sd":"<p> An authorizer to protect this route.</p>\n","ld":"<p>Unauthorized requests will be rejected with a <code>401 Unauthorized</code> response.</p>\n"}},"payloadFormat":{"description":"#### The payload format version for the Lambda integration.\n\n---\n\nFor details on the differences between formats, see the [AWS documentation](https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-develop-integrations-lambda.html).","default":"'1.0'","enum":["1.0","2.0"],"type":"string","_MdxDesc":{"sd":"<p> The payload format version for the Lambda integration.</p>\n","ld":"<p>For details on the differences between formats, see the <a href=\"https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-develop-integrations-lambda.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["httpApiGatewayName","method","path"]},"EventBusIntegration":{"description":"#### Triggers a batch job when an event matching a specified pattern is received by an event bus.\n\n---\n\nYou can use a custom event bus or the default AWS event bus.","type":"object","properties":{"type":{"type":"string","const":"event-bus"},"properties":{"$ref":"#/definitions/EventBusIntegrationProps","description":"#### Properties of the integration","_MdxDesc":{"sd":"<p> Properties of the integration</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Triggers a batch job when an event matching a specified pattern is received by an event bus.</p>\n","ld":"<p>You can use a custom event bus or the default AWS event bus.</p>\n"}},"EventBusIntegrationProps":{"type":"object","properties":{"eventBusArn":{"description":"#### The ARN of an existing event bus.\n\n---\n\nUse this to subscribe to an event bus that is not managed by your stack.\nYou must specify only one of `eventBusArn`, `eventBusName`, or `useDefaultBus`.","type":"string","_MdxDesc":{"sd":"<p> The ARN of an existing event bus.</p>\n","ld":"<p>Use this to subscribe to an event bus that is not managed by your stack.\nYou must specify only one of <code>eventBusArn</code>, <code>eventBusName</code>, or <code>useDefaultBus</code>.</p>\n"}},"eventBusName":{"description":"#### The name of an event bus defined in your stack's resources.\n\n---\n\nYou must specify only one of `eventBusArn`, `eventBusName`, or `useDefaultBus`.","type":"string","_MdxDesc":{"sd":"<p> The name of an event bus defined in your stack&#39;s resources.</p>\n","ld":"<p>You must specify only one of <code>eventBusArn</code>, <code>eventBusName</code>, or <code>useDefaultBus</code>.</p>\n"}},"useDefaultBus":{"description":"#### Uses the default AWS event bus.\n\n---\n\nYou must specify only one of `eventBusArn`, `eventBusName`, or `useDefaultBus`.","type":"boolean","_MdxDesc":{"sd":"<p> Uses the default AWS event bus.</p>\n","ld":"<p>You must specify only one of <code>eventBusArn</code>, <code>eventBusName</code>, or <code>useDefaultBus</code>.</p>\n"}},"eventPattern":{"$ref":"#/definitions/EventBusIntegrationPattern","description":"#### A pattern to filter events from the event bus.\n\n---\n\nOnly events that match this pattern will trigger the target.\nFor details on the syntax, see the [AWS EventBridge documentation on event patterns](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-patterns.html).","_MdxDesc":{"sd":"<p> A pattern to filter events from the event bus.</p>\n","ld":"<p>Only events that match this pattern will trigger the target.\nFor details on the syntax, see the <a href=\"https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-patterns.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS EventBridge documentation on event patterns</a>.</p>\n"}},"onDeliveryFailure":{"$ref":"#/definitions/EventBusOnDeliveryFailure","description":"#### A destination for events that fail to be delivered to the target.\n\n---\n\nIn rare cases, an event might fail to be delivered. This property specifies an SQS queue where failed events will be sent.","_MdxDesc":{"sd":"<p> A destination for events that fail to be delivered to the target.</p>\n","ld":"<p>In rare cases, an event might fail to be delivered. This property specifies an SQS queue where failed events will be sent.</p>\n"}},"input":{"description":"#### A fixed JSON object to be passed as the event payload.\n\n---\n\nIf you need to customize the payload based on the event, use `inputTransformer` instead.\nYou can only use one of `input`, `inputPath`, or `inputTransformer`.\n\nExample:\n\n```yaml\ninput:\n  source: 'my-custom-event'\n```"},"inputPath":{"description":"#### A JSONPath expression to extract a portion of the event to pass to the target.\n\n---\n\nThis is useful for forwarding only a specific part of the event payload.\nYou can only use one of `input`, `inputPath`, or `inputTransformer`.\n\nExample:\n\n```yaml\ninputPath: '$.detail'\n```","type":"string","_MdxDesc":{"sd":"<p> A JSONPath expression to extract a portion of the event to pass to the target.</p>\n","ld":"<p>This is useful for forwarding only a specific part of the event payload.\nYou can only use one of <code>input</code>, <code>inputPath</code>, or <code>inputTransformer</code>.</p>\n<p>Example:</p>\n<pre><code class=\"language-yaml\">inputPath: &#39;$.detail&#39;\n</code></pre>\n"}},"inputTransformer":{"$ref":"#/definitions/EventInputTransformer","description":"#### Customizes the event payload sent to the target.\n\n---\n\nThis allows you to extract values from the original event and use them to construct a new payload.\nYou can only use one of `input`, `inputPath`, or `inputTransformer`.\n\nExample:\n\n```yaml\ninputTransformer:\n  inputPathsMap:\n    instanceId: '$.detail.instance-id'\n    instanceState: '$.detail.state'\n  inputTemplate:\n    message: 'Instance <instanceId> is now in state <instanceState>.'\n```","_MdxDesc":{"sd":"<p> Customizes the event payload sent to the target.</p>\n","ld":"<p>This allows you to extract values from the original event and use them to construct a new payload.\nYou can only use one of <code>input</code>, <code>inputPath</code>, or <code>inputTransformer</code>.</p>\n<p>Example:</p>\n<pre><code class=\"language-yaml\">inputTransformer:\n  inputPathsMap:\n    instanceId: &#39;$.detail.instance-id&#39;\n    instanceState: &#39;$.detail.state&#39;\n  inputTemplate:\n    message: &#39;Instance &lt;instanceId&gt; is now in state &lt;instanceState&gt;.&#39;\n</code></pre>\n"}}},"additionalProperties":false,"required":["eventPattern"]},"EventBusIntegrationPattern":{"type":"object","properties":{"version":{"description":"#### A filter for the `version` field of the event.\n\n---\n\nFor more details on event patterns, see the [AWS EventBridge documentation](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-patterns.html)."},"detail-type":{"description":"#### A filter for the `detail-type` field of the event.\n\n---\n\nFor more details on event patterns, see the [AWS EventBridge documentation](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-patterns.html)."},"source":{"description":"#### A filter for the `source` field of the event.\n\n---\n\nFor more details on event patterns, see the [AWS EventBridge documentation](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-patterns.html)."},"account":{"description":"#### A filter for the `account` field of the event.\n\n---\n\nFor more details on event patterns, see the [AWS EventBridge documentation](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-patterns.html)."},"region":{"description":"#### A filter for the `region` field of the event.\n\n---\n\nFor more details on event patterns, see the [AWS EventBridge documentation](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-patterns.html)."},"resources":{"description":"#### A filter for the `resources` field of the event.\n\n---\n\nFor more details on event patterns, see the [AWS EventBridge documentation](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-patterns.html)."},"detail":{"description":"#### A filter for the `detail` field of the event.\n\n---\n\nThe `detail` field contains the main payload of the event as a JSON object. You can create complex matching rules based on its contents.\nFor more details on event patterns, see the [AWS EventBridge documentation](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-patterns.html)."},"replay-name":{"description":"#### A filter for the `replay-name` field of the event.\n\n---\n\nFor more details on event patterns, see the [AWS EventBridge documentation](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-patterns.html)."}},"additionalProperties":false},"EventBusOnDeliveryFailure":{"type":"object","properties":{"sqsQueueArn":{"description":"#### The ARN of the SQS queue for failed events.","type":"string","_MdxDesc":{"sd":"<p> The ARN of the SQS queue for failed events.</p>\n"}},"sqsQueueName":{"description":"#### The name of an SQS queue (defined in your Stacktape configuration) for failed events.","type":"string","_MdxDesc":{"sd":"<p> The name of an SQS queue (defined in your Stacktape configuration) for failed events.</p>\n"}}},"additionalProperties":false},"WebService":{"description":"#### Web Service\n\n---\n\nA continuously running container with a public endpoint (URL) that is accessible from the internet.\nIt includes TLS/SSL out of the box and provides easy configuration for scaling, health checks, and other properties.","type":"object","properties":{"type":{"type":"string","const":"web-service"},"properties":{"$ref":"#/definitions/WebServiceProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Web Service</p>\n","ld":"<p>A continuously running container with a public endpoint (URL) that is accessible from the internet.\nIt includes TLS/SSL out of the box and provides easy configuration for scaling, health checks, and other properties.</p>\n"}},"WebServiceProps":{"type":"object","properties":{"cors":{"$ref":"#/definitions/HttpApiCorsConfig","description":"#### Configures CORS (Cross-Origin Resource Sharing) for this service.\n\n---\n\nIf CORS is configured using this property, any CORS headers returned from your application will be ignored and replaced.\n\n> This property is only effective if the `loadBalancing` type is `http-api-gateway` (the default).","_MdxDesc":{"sd":"<p> Configures CORS (Cross-Origin Resource Sharing) for this service.</p>\n","ld":"<p>If CORS is configured using this property, any CORS headers returned from your application will be ignored and replaced.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>This property is only effective if the <code>loadBalancing</code> type is <code>http-api-gateway</code> (the default).</p>\n</div>\n</div>"}},"customDomains":{"description":"#### Attaches custom domains to this Web Service.\n\n---\n\nStacktape allows you to connect custom domains to various resources, including Web Services, HTTP API Gateways, Application Load Balancers, and Buckets with CDNs.\n\nWhen you connect a custom domain, Stacktape automatically:\n\n- **Creates DNS records:** A DNS record is created to point your domain name to the resource.\n- **Adds TLS certificates:** If the resource uses HTTPS, Stacktape issues and attaches a free, AWS-managed TLS certificate, handling TLS termination for you.\n\nIf you want to use your own certificates, you can configure `customCertificateArns`.\n\n> To manage a custom domain, it must first be added to your AWS account as a [hosted zone](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html), and your domain registrar's name servers must point to it.\n> For more details, see the [Adding a domain guide](https://docs.stacktape.com/other-resources/domains-and-certificates/#adding-domain).","type":"array","items":{"$ref":"#/definitions/DomainConfiguration"},"_MdxDesc":{"sd":"<p> Attaches custom domains to this Web Service.</p>\n","ld":"<p>Stacktape allows you to connect custom domains to various resources, including Web Services, HTTP API Gateways, Application Load Balancers, and Buckets with CDNs.</p>\n<p>When you connect a custom domain, Stacktape automatically:</p>\n<ul>\n<li><strong>Creates DNS records:</strong> A DNS record is created to point your domain name to the resource.</li>\n<li><strong>Adds TLS certificates:</strong> If the resource uses HTTPS, Stacktape issues and attaches a free, AWS-managed TLS certificate, handling TLS termination for you.</li>\n</ul>\n<p>If you want to use your own certificates, you can configure <code>customCertificateArns</code>.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>To manage a custom domain, it must first be added to your AWS account as a <a href=\"https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">hosted zone</a>, and your domain registrar&#39;s name servers must point to it.\nFor more details, see the <a href=\"/other-resources/domains-and-certificates/#adding-domain\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Adding a domain guide</a>.</p>\n</div>\n</div>"}},"loadBalancing":{"description":"#### Configures the entry point used for distributing traffic to containers.\n\n---\n\nThe following entry point types are supported:\n\n- **`http-api-gateway`** (default):\n  - Distributes traffic to available containers randomly.\n  - Uses a pay-per-use pricing model (~$1 per million requests).\n  - Ideal for most workloads, but an `application-load-balancer` may be more cost-effective if you exceed ~500,000 requests per day.\n\n- **`application-load-balancer`**:\n  - Distributes traffic to available containers in a round-robin fashion.\n  - Uses a pricing model that combines a flat hourly charge (~$0.0252/hour) with usage-based charges for LCUs (Load Balancer Capacity Units) (~$0.08/hour).\n  - Eligible for the AWS Free Tier. For more details, see the [AWS pricing documentation](https://aws.amazon.com/elasticloadbalancing/pricing/).\n\n- **`network-load-balancer`**:\n  - Supports TCP and TLS protocols.\n  - Uses the same pricing model as the `application-load-balancer`.\n  - Also eligible for the AWS Free Tier.","anyOf":[{"$ref":"#/definitions/WebServiceHttpApiGatewayLoadBalancing"},{"$ref":"#/definitions/WebServiceAlbLoadBalancing"},{"$ref":"#/definitions/WebServiceNlbLoadBalancing"}],"_MdxDesc":{"sd":"<p> Configures the entry point used for distributing traffic to containers.</p>\n","ld":"<p>The following entry point types are supported:</p>\n<ul>\n<li><p><strong><code>http-api-gateway</code></strong> (default):</p>\n<ul>\n<li>Distributes traffic to available containers randomly.</li>\n<li>Uses a pay-per-use pricing model (~$1 per million requests).</li>\n<li>Ideal for most workloads, but an <code>application-load-balancer</code> may be more cost-effective if you exceed ~500,000 requests per day.</li>\n</ul>\n</li>\n<li><p><strong><code>application-load-balancer</code></strong>:</p>\n<ul>\n<li>Distributes traffic to available containers in a round-robin fashion.</li>\n<li>Uses a pricing model that combines a flat hourly charge (<del>$0.0252/hour) with usage-based charges for LCUs (Load Balancer Capacity Units) (</del>$0.08/hour).</li>\n<li>Eligible for the AWS Free Tier. For more details, see the <a href=\"https://aws.amazon.com/elasticloadbalancing/pricing/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS pricing documentation</a>.</li>\n</ul>\n</li>\n<li><p><strong><code>network-load-balancer</code></strong>:</p>\n<ul>\n<li>Supports TCP and TLS protocols.</li>\n<li>Uses the same pricing model as the <code>application-load-balancer</code>.</li>\n<li>Also eligible for the AWS Free Tier.</li>\n</ul>\n</li>\n</ul>\n"}},"cdn":{"$ref":"#/definitions/CdnConfiguration","description":"#### Configures an AWS CloudFront CDN (Content Delivery Network) in front of your Web Service.\n\n---\n\nA CDN is a globally distributed network of edge locations that caches responses from your Web Service, bringing content closer to your users.\n\nUsing a CDN can:\n- Reduce latency and improve load times.\n- Lower bandwidth costs.\n- Decrease the amount of traffic hitting your origin (the Web Service containers).\n- Enhance security.\n\nThe CDN caches responses from the origin at the edge for a specified amount of time.","_MdxDesc":{"sd":"<p> Configures an AWS CloudFront CDN (Content Delivery Network) in front of your Web Service.</p>\n","ld":"<p>A CDN is a globally distributed network of edge locations that caches responses from your Web Service, bringing content closer to your users.</p>\n<p>Using a CDN can:</p>\n<ul>\n<li>Reduce latency and improve load times.</li>\n<li>Lower bandwidth costs.</li>\n<li>Decrease the amount of traffic hitting your origin (the Web Service containers).</li>\n<li>Enhance security.</li>\n</ul>\n<p>The CDN caches responses from the origin at the edge for a specified amount of time.</p>\n"}},"alarms":{"description":"#### Additional alarms associated with this resource.\n\n---\n\nThese alarms will be merged with any alarms configured globally in the [console](https://console.stacktape.com/alarms).","type":"array","items":{"anyOf":[{"$ref":"#/definitions/ApplicationLoadBalancerAlarm"},{"$ref":"#/definitions/HttpApiGatewayAlarm"}]},"_MdxDesc":{"sd":"<p> Additional alarms associated with this resource.</p>\n","ld":"<p>These alarms will be merged with any alarms configured globally in the <a href=\"https://console.stacktape.com/alarms\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">console</a>.</p>\n"}},"disabledGlobalAlarms":{"description":"#### Disables globally configured alarms for this resource.\n\n---\n\nProvide a list of alarm names as configured in the [console](https://console.stacktape.com/alarms).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Disables globally configured alarms for this resource.</p>\n","ld":"<p>Provide a list of alarm names as configured in the <a href=\"https://console.stacktape.com/alarms\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">console</a>.</p>\n"}},"deployment":{"$ref":"#/definitions/ContainerWorkloadDeploymentConfig","description":"#### Configures the deployment behavior of the Web Service.\n\n---\n\nThis allows you to safely update your service in a live environment by gradually shifting traffic to the new version.\nThis gives you the opportunity to monitor the workload during the update and quickly roll back in case of any issues.\n\nThe following deployment strategies are supported:\n- **`Canary10Percent5Minutes`**: Shifts 10% of traffic, then the remaining 90% five minutes later.\n- **`Canary10Percent15Minutes`**: Shifts 10% of traffic, then the remaining 90% fifteen minutes later.\n- **`Linear10PercentEvery1Minute`**: Shifts 10% of traffic every minute until all traffic is shifted.\n- **`Linear10PercentEvery3Minutes`**: Shifts 10% of traffic every three minutes until all traffic is shifted.\n- **`AllAtOnce`**: Shifts all traffic to the updated service at once.\n\nYou can use Lambda function hooks to validate or abort the deployment.\n\n> This feature requires the `loadBalancing` type to be set to `application-load-balancer`.","_MdxDesc":{"sd":"<p> Configures the deployment behavior of the Web Service.</p>\n","ld":"<p>This allows you to safely update your service in a live environment by gradually shifting traffic to the new version.\nThis gives you the opportunity to monitor the workload during the update and quickly roll back in case of any issues.</p>\n<p>The following deployment strategies are supported:</p>\n<ul>\n<li><strong><code>Canary10Percent5Minutes</code></strong>: Shifts 10% of traffic, then the remaining 90% five minutes later.</li>\n<li><strong><code>Canary10Percent15Minutes</code></strong>: Shifts 10% of traffic, then the remaining 90% fifteen minutes later.</li>\n<li><strong><code>Linear10PercentEvery1Minute</code></strong>: Shifts 10% of traffic every minute until all traffic is shifted.</li>\n<li><strong><code>Linear10PercentEvery3Minutes</code></strong>: Shifts 10% of traffic every three minutes until all traffic is shifted.</li>\n<li><strong><code>AllAtOnce</code></strong>: Shifts all traffic to the updated service at once.</li>\n</ul>\n<p>You can use Lambda function hooks to validate or abort the deployment.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>This feature requires the <code>loadBalancing</code> type to be set to <code>application-load-balancer</code>.</p>\n</div>\n</div>"}},"useFirewall":{"description":"#### The name of the `web-app-firewall` resource to use for this Web Service.\n\n---\n\nA `web-app-firewall` can protect your resources from common web exploits that could affect availability, compromise security, or consume excessive resources.\nThe firewall works by filtering malicious requests before they reach your application.\n\nFor more information, see the [firewall documentation](https://docs.stacktape.com/security-resources/web-app-firewalls/).","type":"string","_MdxDesc":{"sd":"<p> The name of the <code>web-app-firewall</code> resource to use for this Web Service.</p>\n","ld":"<p>A <code>web-app-firewall</code> can protect your resources from common web exploits that could affect availability, compromise security, or consume excessive resources.\nThe firewall works by filtering malicious requests before they reach your application.</p>\n<p>For more information, see the <a href=\"/security-resources/web-app-firewalls/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">firewall documentation</a>.</p>\n"}},"packaging":{"$ref":"#/definitions/ContainerWorkloadContainerPackaging","description":"#### Container Packaging\n\n---\n\nConfigures the container image for the service.","_MdxDesc":{"sd":"<p> Container Packaging</p>\n","ld":"<p>Configures the container image for the service.</p>\n"}},"environment":{"description":"#### Environment Variables\n\n---\n\nA list of environment variables to inject into the container at runtime. This is often used to provide configuration details, such as database URLs or secrets.","type":"array","items":{"$ref":"#/definitions/EnvironmentVar"},"_MdxDesc":{"sd":"<p> Environment Variables</p>\n","ld":"<p>A list of environment variables to inject into the container at runtime. This is often used to provide configuration details, such as database URLs or secrets.</p>\n"}},"logging":{"$ref":"#/definitions/ContainerWorkloadContainerLogging","description":"#### Logging Configuration\n\n---\n\nConfigures the logging behavior for the service container.\n\nContainer logs (from `stdout` and `stderr`) are automatically sent to a CloudWatch log group and retained for 180 days by default. You can view logs in the AWS CloudWatch console or by using the [`stacktape logs` command](https://docs.stacktape.com/cli/commands/logs/).","_MdxDesc":{"sd":"<p> Logging Configuration</p>\n","ld":"<p>Configures the logging behavior for the service container.</p>\n<p>Container logs (from <code>stdout</code> and <code>stderr</code>) are automatically sent to a CloudWatch log group and retained for 180 days by default. You can view logs in the AWS CloudWatch console or by using the <a href=\"/cli/commands/logs/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">`stacktape logs` command</a>.</p>\n"}},"resources":{"$ref":"#/definitions/ContainerWorkloadResourcesConfig","description":"#### Resource Allocation\n\n---\n\nConfigures the CPU, memory, and underlying compute engine for the service container.\n\nYou can choose between two compute engines:\n- **Fargate:** A serverless engine that abstracts away server management. To use Fargate, specify `cpu` and `memory` without `instanceTypes`.\n- **EC2:** Provides direct control over the underlying virtual servers. To use EC2, specify the desired `instanceTypes`.","_MdxDesc":{"sd":"<p> Resource Allocation</p>\n","ld":"<p>Configures the CPU, memory, and underlying compute engine for the service container.</p>\n<p>You can choose between two compute engines:</p>\n<ul>\n<li><strong>Fargate:</strong> A serverless engine that abstracts away server management. To use Fargate, specify <code>cpu</code> and <code>memory</code> without <code>instanceTypes</code>.</li>\n<li><strong>EC2:</strong> Provides direct control over the underlying virtual servers. To use EC2, specify the desired <code>instanceTypes</code>.</li>\n</ul>\n"}},"scaling":{"$ref":"#/definitions/ContainerWorkloadScaling","description":"#### Scaling Configuration\n\n---\n\nConfigures horizontal scaling by adding or removing container instances based on demand. Incoming requests are automatically distributed across all available containers.","_MdxDesc":{"sd":"<p> Scaling Configuration</p>\n","ld":"<p>Configures horizontal scaling by adding or removing container instances based on demand. Incoming requests are automatically distributed across all available containers.</p>\n"}},"internalHealthCheck":{"$ref":"#/definitions/ContainerHealthCheck","description":"#### Internal Health Check\n\n---\n\nConfigures an internal health check to monitor the container's status. If a container fails the health check, it is automatically terminated and replaced with a new one.","_MdxDesc":{"sd":"<p> Internal Health Check</p>\n","ld":"<p>Configures an internal health check to monitor the container&#39;s status. If a container fails the health check, it is automatically terminated and replaced with a new one.</p>\n"}},"stopTimeout":{"description":"#### Stop Timeout\n\n---\n\nThe amount of time (in seconds) to wait before a container is forcefully killed if it does not exit gracefully.\n\nWhen a container is stopped, it receives a `SIGTERM` signal. If it doesn't exit within the timeout period, it receives a `SIGKILL` signal. This allows for graceful shutdown and cleanup. The timeout must be between 2 and 120 seconds.","default":2,"type":"number","_MdxDesc":{"sd":"<p> Stop Timeout</p>\n","ld":"<p>The amount of time (in seconds) to wait before a container is forcefully killed if it does not exit gracefully.</p>\n<p>When a container is stopped, it receives a <code>SIGTERM</code> signal. If it doesn&#39;t exit within the timeout period, it receives a <code>SIGKILL</code> signal. This allows for graceful shutdown and cleanup. The timeout must be between 2 and 120 seconds.</p>\n"}},"enableRemoteSessions":{"description":"#### Enable Remote Sessions\n\n---\n\nIf `true`, allows you to start an interactive shell session inside a running container using the `stacktape container:session` command.\n\nThis uses AWS ECS Exec and SSM Session Manager for secure connections. It runs a small agent alongside your application, which consumes a minimal amount of CPU and memory. This is useful for debugging and inspecting deployed containers.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enable Remote Sessions</p>\n","ld":"<p>If <code>true</code>, allows you to start an interactive shell session inside a running container using the <code>stacktape container:session</code> command.</p>\n<p>This uses AWS ECS Exec and SSM Session Manager for secure connections. It runs a small agent alongside your application, which consumes a minimal amount of CPU and memory. This is useful for debugging and inspecting deployed containers.</p>\n"}},"volumeMounts":{"description":"#### Volume Mounts\n\n---\n\nA list of volumes to attach to the container for persistent storage.\n\nCurrently, only EFS (Elastic File System) volumes are supported. Volumes can be shared across multiple containers and persist even if the container is stopped or replaced.","type":"array","items":{"$ref":"#/definitions/ContainerEfsMount"},"_MdxDesc":{"sd":"<p> Volume Mounts</p>\n","ld":"<p>A list of volumes to attach to the container for persistent storage.</p>\n<p>Currently, only EFS (Elastic File System) volumes are supported. Volumes can be shared across multiple containers and persist even if the container is stopped or replaced.</p>\n"}},"sideContainers":{"description":"#### Sidecar Containers\n\n---\n\nA list of helper containers that run alongside the main service container to provide additional functionality.\n\n- **`run-on-init`:** Runs to completion before the main service container starts. Ideal for setup tasks like database migrations.\n- **`always-running`:** Runs for the entire lifecycle of the service container. Ideal for supporting services like logging, monitoring, or debugging agents.\n\n`always-running` containers can communicate with the main container via `localhost` on its exposed ports.","type":"array","items":{"$ref":"#/definitions/ServiceHelperContainer"},"_MdxDesc":{"sd":"<p> Sidecar Containers</p>\n","ld":"<p>A list of helper containers that run alongside the main service container to provide additional functionality.</p>\n<ul>\n<li><strong><code>run-on-init</code>:</strong> Runs to completion before the main service container starts. Ideal for setup tasks like database migrations.</li>\n<li><strong><code>always-running</code>:</strong> Runs for the entire lifecycle of the service container. Ideal for supporting services like logging, monitoring, or debugging agents.</li>\n</ul>\n<p><code>always-running</code> containers can communicate with the main container via <code>localhost</code> on its exposed ports.</p>\n"}},"usePrivateSubnetsWithNAT":{"description":"#### Deploys the service in private subnets with internet access through NAT Gateway.\n\n---\n\nWhen the service is in a private subnet, it does not have public IP and direct internet access.\nInstead, all outbound internet traffic is routed through a NAT Gateway.\n\nYou can assign a static public IP address to the NAT Gateway and configure high availability using `stackConfig.vpcSettings`.\nThis allows you to whitelist your service's IP address in external services (e.g., third-party APIs, databases, payment gateways).\n\n**Cost considerations:**\n- NAT Gateways incur additional AWS charges for both the gateway itself and data processing","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Deploys the service in private subnets with internet access through NAT Gateway.</p>\n","ld":"<p>When the service is in a private subnet, it does not have public IP and direct internet access.\nInstead, all outbound internet traffic is routed through a NAT Gateway.</p>\n<p>You can assign a static public IP address to the NAT Gateway and configure high availability using <code>stackConfig.vpcSettings</code>.\nThis allows you to whitelist your service&#39;s IP address in external services (e.g., third-party APIs, databases, payment gateways).</p>\n<p><strong>Cost considerations:</strong></p>\n<ul>\n<li>NAT Gateways incur additional AWS charges for both the gateway itself and data processing</li>\n</ul>\n"}},"connectTo":{"description":"#### Connect To\n\n---\n\nConfigures access to other resources in your stack and AWS services. By specifying resources here, Stacktape automatically:\n- Configures IAM role permissions.\n- Sets up security group rules to allow network traffic.\n- Injects environment variables with connection details into the compute resource.\n\nEnvironment variables are named `STP_[RESOURCE_NAME]_[VARIABLE_NAME]` (e.g., `STP_MY_DATABASE_CONNECTION_STRING`).\n\n---\n\n#### Granted Permissions and Injected Variables:\n\n**`Bucket`**\n- **Permissions:** List, create, get, delete, and tag objects.\n- **Variables:** `NAME`, `ARN`\n\n**`DynamoDbTable`**\n- **Permissions:** Get, put, update, delete, scan, and query items; describe table stream.\n- **Variables:** `NAME`, `ARN`, `STREAM_ARN`\n\n**`MongoDbAtlasCluster`**\n- **Permissions:** Allows connection to clusters with `accessibilityMode` set to `scoping-workloads-in-vpc`. Creates a temporary user for secure, credential-less access.\n- **Variables:** `CONNECTION_STRING`\n\n**`RelationalDatabase`**\n- **Permissions:** Allows connection to databases with `accessibilityMode` set to `scoping-workloads-in-vpc`.\n- **Variables:** `CONNECTION_STRING`, `JDBC_CONNECTION_STRING`, `HOST`, `PORT`. For Aurora clusters, `READER_CONNECTION_STRING`, `READER_JDBC_CONNECTION_STRING`, and `READER_HOST` are also included.\n\n**`RedisCluster`**\n- **Permissions:** Allows connection to clusters with `accessibilityMode` set to `scoping-workloads-in-vpc`.\n- **Variables:** `HOST`, `READER_HOST`, `PORT`\n\n**`EventBus`**\n- **Permissions:** Publish events.\n- **Variables:** `ARN`\n\n**`Function`**\n- **Permissions:** Invoke the function, including via its URL if enabled.\n- **Variables:** `ARN`\n\n**`BatchJob`**\n- **Permissions:** Submit, list, describe, and terminate jobs; manage state machine executions.\n- **Variables:** `JOB_DEFINITION_ARN`, `STATE_MACHINE_ARN`\n\n**`UserAuthPool`**\n- **Permissions:** Full control over the user pool (`cognito-idp:*`).\n- **Variables:** `ID`, `CLIENT_ID`, `ARN`\n\n**`SnsTopic`**\n- **Permissions:** Confirm, list, publish, and manage subscriptions.\n- **Variables:** `ARN`, `NAME`\n\n**`SqsQueue`**\n- **Permissions:** Send, receive, delete, and purge messages.\n- **Variables:** `ARN`, `NAME`, `URL`\n\n**`UpstashKafkaTopic`**\n- **Variables:** `TOPIC_NAME`, `TOPIC_ID`, `USERNAME`, `PASSWORD`, `TCP_ENDPOINT`, `REST_URL`\n\n**`UpstashRedis`**\n- **Variables:** `HOST`, `PORT`, `PASSWORD`, `REST_TOKEN`, `REST_URL`, `REDIS_URL`\n\n**`PrivateService`**\n- **Variables:** `ADDRESS`\n\n**`aws:ses` (Macro)**\n- **Permissions:** Full permissions for AWS SES (`ses:*`).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Connect To</p>\n","ld":"<p>Configures access to other resources in your stack and AWS services. By specifying resources here, Stacktape automatically:</p>\n<ul>\n<li>Configures IAM role permissions.</li>\n<li>Sets up security group rules to allow network traffic.</li>\n<li>Injects environment variables with connection details into the compute resource.</li>\n</ul>\n<p>Environment variables are named <code>STP_[RESOURCE_NAME]_[VARIABLE_NAME]</code> (e.g., <code>STP_MY_DATABASE_CONNECTION_STRING</code>).</p>\n"}},"iamRoleStatements":{"description":"#### Custom IAM Role Statements\n\n---\n\nA list of raw AWS IAM role statements to append to the resource's role, allowing for fine-grained permission control.","type":"array","items":{"$ref":"#/definitions/StpIamRoleStatement"},"_MdxDesc":{"sd":"<p> Custom IAM Role Statements</p>\n","ld":"<p>A list of raw AWS IAM role statements to append to the resource&#39;s role, allowing for fine-grained permission control.</p>\n"}}},"additionalProperties":false,"required":["packaging","resources"]},"HttpApiCorsConfig":{"type":"object","properties":{"enabled":{"description":"#### Enables CORS (Cross-Origin Resource Sharing).\n\n---\n\nIf you do not specify any additional properties, a default CORS configuration is used:\n- `allowedMethods`: Inferred from the methods used by integrations associated with the API Gateway.\n- `allowedOrigins`: `*`\n- `allowedHeaders`: `Content-Type`, `X-Amz-Date`, `Authorization`, `X-Api-Key`, `X-Amz-Security-Token`, `X-Amz-User-Agent`","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enables CORS (Cross-Origin Resource Sharing).</p>\n","ld":"<p>If you do not specify any additional properties, a default CORS configuration is used:</p>\n<ul>\n<li><code>allowedMethods</code>: Inferred from the methods used by integrations associated with the API Gateway.</li>\n<li><code>allowedOrigins</code>: <code>*</code></li>\n<li><code>allowedHeaders</code>: <code>Content-Type</code>, <code>X-Amz-Date</code>, <code>Authorization</code>, <code>X-Api-Key</code>, <code>X-Amz-Security-Token</code>, <code>X-Amz-User-Agent</code></li>\n</ul>\n"}},"allowedOrigins":{"description":"#### The origins to accept cross-domain requests from.\n\n---\n\nAn origin is a combination of a scheme (protocol), hostname (domain), and port.\n\nExample: `https://foo.example`","default":"*","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> The origins to accept cross-domain requests from.</p>\n","ld":"<p>An origin is a combination of a scheme (protocol), hostname (domain), and port.</p>\n<p>Example: <code>https://foo.example</code></p>\n"}},"allowedHeaders":{"description":"#### The allowed HTTP headers.\n\n---\n\nEach header name in the `Access-Control-Request-Headers` header of a preflight request must match an entry in this list.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> The allowed HTTP headers.</p>\n","ld":"<p>Each header name in the <code>Access-Control-Request-Headers</code> header of a preflight request must match an entry in this list.</p>\n"}},"allowedMethods":{"description":"#### The allowed HTTP methods.\n\n---\n\nBy default, Stacktape determines the allowed methods based on the event integrations associated with the gateway.","type":"array","items":{"$ref":"#/definitions/HttpMethod"},"_MdxDesc":{"sd":"<p> The allowed HTTP methods.</p>\n","ld":"<p>By default, Stacktape determines the allowed methods based on the event integrations associated with the gateway.</p>\n"}},"allowCredentials":{"description":"#### Configures the presence of credentials in the CORS request.","type":"boolean","_MdxDesc":{"sd":"<p> Configures the presence of credentials in the CORS request.</p>\n"}},"exposedResponseHeaders":{"description":"#### The response headers that should be made available to scripts running in the browser in response to a cross-origin request.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> The response headers that should be made available to scripts running in the browser in response to a cross-origin request.</p>\n"}},"maxAge":{"description":"#### The time (in seconds) that the browser can cache the response for a preflight request.","type":"number","_MdxDesc":{"sd":"<p> The time (in seconds) that the browser can cache the response for a preflight request.</p>\n"}}},"additionalProperties":false,"required":["enabled"]},"HttpMethod":{"enum":["*","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"],"type":"string"},"DomainConfiguration":{"type":"object","properties":{"domainName":{"description":"#### Domain Name\n\n---\n\nThe fully qualified domain name (e.g., `mydomain.com`, `api.mydomain.com`). Do not include the protocol (`https://`).","type":"string","_MdxDesc":{"sd":"<p> Domain Name</p>\n","ld":"<p>The fully qualified domain name (e.g., <code>mydomain.com</code>, <code>api.mydomain.com</code>). Do not include the protocol (<code>https://</code>).</p>\n"}},"customCertificateArn":{"description":"#### Custom Certificate ARN\n\n---\n\nThe ARN of a custom ACM certificate to use for this domain.\n\nBy default, Stacktape automatically generates and manages certificates for your domains. If you prefer to use a custom certificate from your AWS account, provide its ARN here.","type":"string","_MdxDesc":{"sd":"<p> Custom Certificate ARN</p>\n","ld":"<p>The ARN of a custom ACM certificate to use for this domain.</p>\n<p>By default, Stacktape automatically generates and manages certificates for your domains. If you prefer to use a custom certificate from your AWS account, provide its ARN here.</p>\n"}},"disableDnsRecordCreation":{"description":"#### Disable DNS Record Creation\n\n---\n\nIf `true`, Stacktape will not create a DNS record for this domain. This is useful if you want to manage DNS records manually.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disable DNS Record Creation</p>\n","ld":"<p>If <code>true</code>, Stacktape will not create a DNS record for this domain. This is useful if you want to manage DNS records manually.</p>\n"}}},"additionalProperties":false,"required":["domainName"]},"WebServiceHttpApiGatewayLoadBalancing":{"type":"object","properties":{"type":{"type":"string","const":"http-api-gateway"}},"additionalProperties":false,"required":["type"]},"WebServiceAlbLoadBalancing":{"type":"object","properties":{"type":{"type":"string","const":"application-load-balancer"},"properties":{"$ref":"#/definitions/WebServiceAlbLoadBalancingProps"}},"additionalProperties":false,"required":["type"]},"WebServiceAlbLoadBalancingProps":{"type":"object","properties":{"healthcheckPath":{"description":"#### The path on which the Load Balancer performs health checks.\n\n---","default":"/","type":"string","_MdxDesc":{"sd":"<p> The path on which the Load Balancer performs health checks.</p>\n"}},"healthcheckInterval":{"description":"#### The interval (in seconds) for how often the health check is performed.\n\n---","default":5,"type":"number","_MdxDesc":{"sd":"<p> The interval (in seconds) for how often the health check is performed.</p>\n"}},"healthcheckTimeout":{"description":"#### The timeout (in seconds) after which the health check is considered failed.\n\n---","default":4,"type":"number","_MdxDesc":{"sd":"<p> The timeout (in seconds) after which the health check is considered failed.</p>\n"}}},"additionalProperties":false},"WebServiceNlbLoadBalancing":{"type":"object","properties":{"type":{"type":"string","const":"network-load-balancer"},"properties":{"$ref":"#/definitions/WebServiceNlbLoadBalancingProps"}},"additionalProperties":false,"required":["properties","type"]},"WebServiceNlbLoadBalancingProps":{"type":"object","properties":{"healthcheckPath":{"description":"#### The path on which the Load Balancer performs health checks.\n\n---\n\nThis only takes effect if `healthcheckProtocol` is set to `HTTP`.","default":"/","type":"string","_MdxDesc":{"sd":"<p> The path on which the Load Balancer performs health checks.</p>\n","ld":"<p>This only takes effect if <code>healthcheckProtocol</code> is set to <code>HTTP</code>.</p>\n"}},"healthcheckInterval":{"description":"#### The interval (in seconds) for how often the health check is performed.\n\n---\n\nMust be between 5 and 300.","default":5,"type":"number","_MdxDesc":{"sd":"<p> The interval (in seconds) for how often the health check is performed.</p>\n","ld":"<p>Must be between 5 and 300.</p>\n"}},"healthcheckTimeout":{"description":"#### The timeout (in seconds) after which the health check is considered failed.\n\n---\n\nMust be between 2 and 120.","default":4,"type":"number","_MdxDesc":{"sd":"<p> The timeout (in seconds) after which the health check is considered failed.</p>\n","ld":"<p>Must be between 2 and 120.</p>\n"}},"healthCheckProtocol":{"description":"#### The protocol the Load Balancer uses when performing health checks on targets.\n\n---","default":"TCP","enum":["HTTP","TCP"],"type":"string","_MdxDesc":{"sd":"<p> The protocol the Load Balancer uses when performing health checks on targets.</p>\n"}},"healthCheckPort":{"description":"#### The port the Load Balancer uses when performing health checks on targets.\n\n---\n\nBy default, this uses the same port that receives traffic from the Load Balancer.","type":"number","_MdxDesc":{"sd":"<p> The port the Load Balancer uses when performing health checks on targets.</p>\n","ld":"<p>By default, this uses the same port that receives traffic from the Load Balancer.</p>\n"}},"ports":{"type":"array","items":{"$ref":"#/definitions/WebServiceNlbLoadBalancingPort"}}},"additionalProperties":false,"required":["ports"]},"WebServiceNlbLoadBalancingPort":{"type":"object","properties":{"port":{"description":"#### The port number exposed by the Load Balancer.\n\n---","type":"number","_MdxDesc":{"sd":"<p> The port number exposed by the Load Balancer.</p>\n"}},"protocol":{"description":"#### The protocol to be used for the Load Balancer.\n\n---","default":"TLS","enum":["TCP","TLS"],"type":"string","_MdxDesc":{"sd":"<p> The protocol to be used for the Load Balancer.</p>\n"}},"containerPort":{"description":"#### The port number on the container that will receive traffic from the Load Balancer.\n\n---\n\nDefaults to the same port number specified in the `port` property.","type":"number","_MdxDesc":{"sd":"<p> The port number on the container that will receive traffic from the Load Balancer.</p>\n","ld":"<p>Defaults to the same port number specified in the <code>port</code> property.</p>\n"}}},"additionalProperties":false,"required":["port"]},"CdnConfiguration":{"type":"object","properties":{"enabled":{"description":"#### Enables the CDN.\n\n---","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enables the CDN.</p>\n"}},"cachingOptions":{"$ref":"#/definitions/CdnCachingOptions","description":"#### Configures custom caching options.\n\n---\n\nThis property controls the caching behavior of your edge distribution, including what content is cached, for how long, and when it should be re-fetched from the origin.\n\nIf a response from the origin does not include `Cache-Control` or `Expires` headers, a default caching behavior is used:\n- **bucket**: Objects are cached for 6 months by default, or until the cache is invalidated.\n- **http-api-gateway** and **application-load-balancer**: Responses are not cached by default.","_MdxDesc":{"sd":"<p> Configures custom caching options.</p>\n","ld":"<p>This property controls the caching behavior of your edge distribution, including what content is cached, for how long, and when it should be re-fetched from the origin.</p>\n<p>If a response from the origin does not include <code>Cache-Control</code> or <code>Expires</code> headers, a default caching behavior is used:</p>\n<ul>\n<li><strong>bucket</strong>: Objects are cached for 6 months by default, or until the cache is invalidated.</li>\n<li><strong>http-api-gateway</strong> and <strong>application-load-balancer</strong>: Responses are not cached by default.</li>\n</ul>\n"}},"forwardingOptions":{"$ref":"#/definitions/CdnForwardingOptions","description":"#### Configures which parts of the request are forwarded to the origin.\n\n---\n\nThis includes headers, query parameters, and cookies.","_MdxDesc":{"sd":"<p> Configures which parts of the request are forwarded to the origin.</p>\n","ld":"<p>This includes headers, query parameters, and cookies.</p>\n"}},"routeRewrites":{"description":"#### Redirects specific requests to a different origin.\n\n---\n\nEach incoming request to the CDN is evaluated against a list of route rewrites. If the request path matches a rewrite's path pattern, it is sent to the configured route.\n\nRoute rewrites are evaluated in order, and the first match determines where the request will be sent.\nIf no match is found, the request is sent to the default origin (the resource the CDN is attached to).\n\n**Example Use Cases:**\n- Serving static content from a bucket while routing dynamic paths to a Lambda function.\n- Caching `.jpg` files for a longer duration than other file types.","type":"array","items":{"$ref":"#/definitions/CdnRouteRewrite"},"_MdxDesc":{"sd":"<p> Redirects specific requests to a different origin.</p>\n","ld":"<p>Each incoming request to the CDN is evaluated against a list of route rewrites. If the request path matches a rewrite&#39;s path pattern, it is sent to the configured route.</p>\n<p>Route rewrites are evaluated in order, and the first match determines where the request will be sent.\nIf no match is found, the request is sent to the default origin (the resource the CDN is attached to).</p>\n<p><strong>Example Use Cases:</strong></p>\n<ul>\n<li>Serving static content from a bucket while routing dynamic paths to a Lambda function.</li>\n<li>Caching <code>.jpg</code> files for a longer duration than other file types.</li>\n</ul>\n"}},"customDomains":{"description":"#### Attaches custom domains to this CDN.\n\n---\n\nWhen you connect a custom domain, Stacktape automatically:\n\n- **Creates DNS records:** A DNS record is created to point your domain name to the resource.\n- **Adds TLS certificates:** If the resource uses HTTPS, Stacktape issues and attaches a free, AWS-managed TLS certificate, handling TLS termination for you.\n\n> To manage a custom domain, it first needs to be added to your AWS account.\n> This means that a [hosted zone](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html)\n> (collection of records managed together for a given domain)\n> for your domain exists in your AWS account and your domain registrar's name servers are pointing to it.\n> To learn more, refer to [Adding a domain guide](https://docs.stacktape.com/other-resources/domains-and-certificates/#adding-domain).","type":"array","items":{"$ref":"#/definitions/DomainConfiguration"},"_MdxDesc":{"sd":"<p> Attaches custom domains to this CDN.</p>\n","ld":"<p>When you connect a custom domain, Stacktape automatically:</p>\n<ul>\n<li><strong>Creates DNS records:</strong> A DNS record is created to point your domain name to the resource.</li>\n<li><strong>Adds TLS certificates:</strong> If the resource uses HTTPS, Stacktape issues and attaches a free, AWS-managed TLS certificate, handling TLS termination for you.</li>\n</ul>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>To manage a custom domain, it first needs to be added to your AWS account.\nThis means that a <a href=\"https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">hosted zone</a>\n(collection of records managed together for a given domain)\nfor your domain exists in your AWS account and your domain registrar&#39;s name servers are pointing to it.\nTo learn more, refer to <a href=\"/other-resources/domains-and-certificates/#adding-domain\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Adding a domain guide</a>.</p>\n</div>\n</div>"}},"edgeFunctions":{"$ref":"#/definitions/EdgeFunctionsConfig","description":"#### Configures Edge function triggers.\n\n---\n\nYou can associate an `edge-lambda-function` with the CDN to be executed at different stages:\n\n- `onRequest`: Executed when the CDN receives a request from a client, before checking the cache.\n- `onResponse`: Executed before returning a response to the client.\n\n**Potential Use Cases:**\n- Generating an immediate HTTP response without checking the cache or forwarding to the origin.\n- Modifying the request (e.g., rewriting the URL or headers) before forwarding to the origin.\n- Inspecting cookies or validating authorization headers and tokens.","_MdxDesc":{"sd":"<p> Configures Edge function triggers.</p>\n","ld":"<p>You can associate an <code>edge-lambda-function</code> with the CDN to be executed at different stages:</p>\n<ul>\n<li><code>onRequest</code>: Executed when the CDN receives a request from a client, before checking the cache.</li>\n<li><code>onResponse</code>: Executed before returning a response to the client.</li>\n</ul>\n<p><strong>Potential Use Cases:</strong></p>\n<ul>\n<li>Generating an immediate HTTP response without checking the cache or forwarding to the origin.</li>\n<li>Modifying the request (e.g., rewriting the URL or headers) before forwarding to the origin.</li>\n<li>Inspecting cookies or validating authorization headers and tokens.</li>\n</ul>\n"}},"cloudfrontPriceClass":{"description":"#### Configures the locations from which the CDN serves traffic.\n\n---\n\nA higher price class results in more edge locations serving your traffic, which can improve performance in some regions but is more costly.\n\nFor example, if your users are primarily located in the US and Europe, you can save money by using `PriceClass_100`.\n\nFor more details, see the [AWS documentation on price classes](https://aws.amazon.com/cloudfront/pricing/).","default":"PriceClass_All","enum":["PriceClass_100","PriceClass_200","PriceClass_All"],"type":"string","_MdxDesc":{"sd":"<p> Configures the locations from which the CDN serves traffic.</p>\n","ld":"<p>A higher price class results in more edge locations serving your traffic, which can improve performance in some regions but is more costly.</p>\n<p>For example, if your users are primarily located in the US and Europe, you can save money by using <code>PriceClass_100</code>.</p>\n<p>For more details, see the <a href=\"https://aws.amazon.com/cloudfront/pricing/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on price classes</a>.</p>\n"}},"defaultRoutePrefix":{"description":"#### Prefixes requests to the origin with a specified path.\n\n---\n\nIncoming requests will be prefixed with `defaultRoutePrefix` before being forwarded to the origin.\nFor example, if the CDN receives a request for `/my/resource/url`, the request will be sent to the origin as `/your_prefix/my/resource/url`.","type":"string","_MdxDesc":{"sd":"<p> Prefixes requests to the origin with a specified path.</p>\n","ld":"<p>Incoming requests will be prefixed with <code>defaultRoutePrefix</code> before being forwarded to the origin.\nFor example, if the CDN receives a request for <code>/my/resource/url</code>, the request will be sent to the origin as <code>/your_prefix/my/resource/url</code>.</p>\n"}},"errorDocument":{"description":"#### The custom error document URL.\n\n---\n\nThis document is requested by the CDN if the original request to the origin returns a `404` error code.\n\nExample: `/error.html`","default":"/404.html","type":"string","_MdxDesc":{"sd":"<p> The custom error document URL.</p>\n","ld":"<p>This document is requested by the CDN if the original request to the origin returns a <code>404</code> error code.</p>\n<p>Example: <code>/error.html</code></p>\n"}},"indexDocument":{"description":"#### The custom index document served for requests to the root path (`/`).\n\n---","default":"/index.html","type":"string","_MdxDesc":{"sd":"<p> The custom index document served for requests to the root path (<code>/</code>).</p>\n"}},"disableInvalidationAfterDeploy":{"description":"#### Disables invalidation of the CDN cache after each deployment.\n\n---\n\nBy default, the cache is invalidated after every deployment to prevent serving outdated content.\nWhen the cache is invalidated, the CDN flushes all cached content, and new requests are sent directly to the origin.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disables invalidation of the CDN cache after each deployment.</p>\n","ld":"<p>By default, the cache is invalidated after every deployment to prevent serving outdated content.\nWhen the cache is invalidated, the CDN flushes all cached content, and new requests are sent directly to the origin.</p>\n"}},"useFirewall":{"description":"#### The name of the `web-app-firewall` resource to use with your CDN.\n\n---\n\nA `web-app-firewall` can protect your resources from common web exploits that could affect availability, compromise security, or consume excessive resources.\nThe firewall works by filtering malicious requests before they reach your application.\n\nFor more information, see the [firewall documentation](https://docs.stacktape.com/security-resources/web-app-firewalls/).","type":"string","_MdxDesc":{"sd":"<p> The name of the <code>web-app-firewall</code> resource to use with your CDN.</p>\n","ld":"<p>A <code>web-app-firewall</code> can protect your resources from common web exploits that could affect availability, compromise security, or consume excessive resources.\nThe firewall works by filtering malicious requests before they reach your application.</p>\n<p>For more information, see the <a href=\"/security-resources/web-app-firewalls/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">firewall documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["enabled"]},"CdnCachingOptions":{"type":"object","properties":{"cacheMethods":{"description":"#### The HTTP methods for which responses will be cached.\n\n---\n\nPossible values are:\n- `['GET', 'HEAD']`\n- `['GET', 'HEAD', 'OPTIONS']`","type":"array","items":{"enum":["GET","HEAD","OPTIONS"],"type":"string"},"_MdxDesc":{"sd":"<p> The HTTP methods for which responses will be cached.</p>\n","ld":"<p>Possible values are:</p>\n<ul>\n<li><code>['GET', 'HEAD']</code></li>\n<li><code>['GET', 'HEAD', 'OPTIONS']</code></li>\n</ul>\n"}},"minTTL":{"description":"#### The minimum amount of time (in seconds) that objects will remain in the CDN cache.\n\n---\n\nFor more details on cache expiration, see the [AWS documentation](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/Expiration.html).","type":"number","_MdxDesc":{"sd":"<p> The minimum amount of time (in seconds) that objects will remain in the CDN cache.</p>\n","ld":"<p>For more details on cache expiration, see the <a href=\"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/Expiration.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"maxTTL":{"description":"#### The maximum amount of time (in seconds) that objects will remain in the CDN cache.\n\n---\n\nFor more details on cache expiration, see the [AWS documentation](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/Expiration.html).","type":"number","_MdxDesc":{"sd":"<p> The maximum amount of time (in seconds) that objects will remain in the CDN cache.</p>\n","ld":"<p>For more details on cache expiration, see the <a href=\"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/Expiration.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"defaultTTL":{"description":"#### The default amount of time (in seconds) that objects will remain in the CDN cache.\n\n---\n\nFor more details on cache expiration, see the [AWS documentation](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/Expiration.html).","type":"number","_MdxDesc":{"sd":"<p> The default amount of time (in seconds) that objects will remain in the CDN cache.</p>\n","ld":"<p>For more details on cache expiration, see the <a href=\"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/Expiration.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"disableCompression":{"description":"#### Disables compression of objects served by the CDN.\n\n---\n\nCompression is enabled by default and can significantly reduce the size of responses, improving performance and lowering transfer costs.\nThe CDN uses `Gzip` and `Brotli` compression methods. If the viewer supports both, Brotli is used.\nThe client must indicate that it accepts compressed files using the `Accept-Encoding` HTTP header.\n\nFor more details on compression, see the [AWS documentation](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/ServingCompressedFiles.html).","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disables compression of objects served by the CDN.</p>\n","ld":"<p>Compression is enabled by default and can significantly reduce the size of responses, improving performance and lowering transfer costs.\nThe CDN uses <code>Gzip</code> and <code>Brotli</code> compression methods. If the viewer supports both, Brotli is used.\nThe client must indicate that it accepts compressed files using the <code>Accept-Encoding</code> HTTP header.</p>\n<p>For more details on compression, see the <a href=\"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/ServingCompressedFiles.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"cacheKeyParameters":{"$ref":"#/definitions/CdnCacheKey","description":"#### Configures the HTTP headers, cookies, and URL query strings to include in the cache key.\n\n---\n\nBy default, the cache key depends on the origin type:\n- **bucket**: Only the URL path is included.\n- **http-api-gateway** and **application-load-balancer**: The URL path and query string are included.\n\nThe values included in the cache key are automatically forwarded in requests sent to the origin.","_MdxDesc":{"sd":"<p> Configures the HTTP headers, cookies, and URL query strings to include in the cache key.</p>\n","ld":"<p>By default, the cache key depends on the origin type:</p>\n<ul>\n<li><strong>bucket</strong>: Only the URL path is included.</li>\n<li><strong>http-api-gateway</strong> and <strong>application-load-balancer</strong>: The URL path and query string are included.</li>\n</ul>\n<p>The values included in the cache key are automatically forwarded in requests sent to the origin.</p>\n"}},"cachePolicyId":{"description":"#### The ID of a pre-created cache policy to use.\n\n---\n\nUse this to apply a pre-configured cache policy instead of specifying `ttl`, `cacheKeyParameters`, and other options.","type":"string","_MdxDesc":{"sd":"<p> The ID of a pre-created cache policy to use.</p>\n","ld":"<p>Use this to apply a pre-configured cache policy instead of specifying <code>ttl</code>, <code>cacheKeyParameters</code>, and other options.</p>\n"}}},"additionalProperties":false},"CdnCacheKey":{"type":"object","properties":{"cookies":{"$ref":"#/definitions/CacheKeyCookies","description":"#### Configures which cookies are included in the cache key.\n\n---\n\nCookies included in the cache key are automatically forwarded in requests sent to the origin.\nBy default, no cookies are included in the cache key.","_MdxDesc":{"sd":"<p> Configures which cookies are included in the cache key.</p>\n","ld":"<p>Cookies included in the cache key are automatically forwarded in requests sent to the origin.\nBy default, no cookies are included in the cache key.</p>\n"}},"headers":{"$ref":"#/definitions/CacheKeyHeaders","description":"#### Configures which headers are included in the cache key.\n\n---\n\nHeaders included in the cache key are automatically forwarded in requests sent to the origin.\nBy default, no headers (except `Accept-Encoding` for compression) are included in the cache key.","_MdxDesc":{"sd":"<p> Configures which headers are included in the cache key.</p>\n","ld":"<p>Headers included in the cache key are automatically forwarded in requests sent to the origin.\nBy default, no headers (except <code>Accept-Encoding</code> for compression) are included in the cache key.</p>\n"}},"queryString":{"$ref":"#/definitions/CacheKeyQueryString","description":"#### Configures which query parameters are included in the cache key.\n\n---\n\nQuery parameters included in the cache key are automatically forwarded in requests sent to the origin.\nBy default, no query parameters are included in the cache key.","_MdxDesc":{"sd":"<p> Configures which query parameters are included in the cache key.</p>\n","ld":"<p>Query parameters included in the cache key are automatically forwarded in requests sent to the origin.\nBy default, no query parameters are included in the cache key.</p>\n"}}},"additionalProperties":false},"CacheKeyCookies":{"type":"object","properties":{"none":{"description":"#### No cookies are included in the cache key.","type":"boolean","_MdxDesc":{"sd":"<p> No cookies are included in the cache key.</p>\n"}},"whitelist":{"description":"#### Only the listed cookies are included in the cache key.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Only the listed cookies are included in the cache key.</p>\n"}},"allExcept":{"description":"#### All cookies except the listed ones are included in the cache key.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> All cookies except the listed ones are included in the cache key.</p>\n"}},"all":{"description":"#### All cookies are included in the cache key.","type":"boolean","_MdxDesc":{"sd":"<p> All cookies are included in the cache key.</p>\n"}}},"additionalProperties":false},"CacheKeyHeaders":{"type":"object","properties":{"none":{"description":"#### No headers are included in the cache key.","type":"boolean","_MdxDesc":{"sd":"<p> No headers are included in the cache key.</p>\n"}},"whitelist":{"description":"#### Only the listed headers are included in the cache key.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Only the listed headers are included in the cache key.</p>\n"}}},"additionalProperties":false},"CacheKeyQueryString":{"type":"object","properties":{"all":{"description":"#### All query parameters are included in the cache key.","type":"boolean","_MdxDesc":{"sd":"<p> All query parameters are included in the cache key.</p>\n"}},"none":{"description":"#### No query parameters are included in the cache key.","type":"boolean","_MdxDesc":{"sd":"<p> No query parameters are included in the cache key.</p>\n"}},"whitelist":{"description":"#### Only the listed query parameters are included in the cache key.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Only the listed query parameters are included in the cache key.</p>\n"}}},"additionalProperties":false},"CdnForwardingOptions":{"type":"object","properties":{"customRequestHeaders":{"description":"#### Adds static headers that the CDN will add to all requests sent to the origin.","type":"array","items":{"$ref":"#/definitions/CdnCustomRequestHeader"},"_MdxDesc":{"sd":"<p> Adds static headers that the CDN will add to all requests sent to the origin.</p>\n"}},"allowedMethods":{"description":"#### The HTTP methods that will be forwarded by the CDN to the origin.\n\n---\n\nIf not set, all methods are forwarded.","type":"array","items":{"enum":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"],"type":"string"},"_MdxDesc":{"sd":"<p> The HTTP methods that will be forwarded by the CDN to the origin.</p>\n","ld":"<p>If not set, all methods are forwarded.</p>\n"}},"cookies":{"$ref":"#/definitions/ForwardCookies","description":"#### The cookies that will be forwarded to the origin.\n\n---\n\nIf not set, all cookies are forwarded.\nAll cookies that are part of the cache key (see `cachingOptions`) are automatically forwarded to the origin.","_MdxDesc":{"sd":"<p> The cookies that will be forwarded to the origin.</p>\n","ld":"<p>If not set, all cookies are forwarded.\nAll cookies that are part of the cache key (see <code>cachingOptions</code>) are automatically forwarded to the origin.</p>\n"}},"headers":{"$ref":"#/definitions/ForwardHeaders","description":"#### The headers that will be forwarded to the origin.\n\n---\n\nIf not set, all headers are forwarded.\nAll headers that are part of the cache key (see `cachingOptions`) are automatically forwarded to the origin.\n\n> **Warning:** The `Authorization` header must be included as a cache key parameter in `cachingOptions` to be forwarded to the origin. This is to prevent unauthorized access to resources.","_MdxDesc":{"sd":"<p> The headers that will be forwarded to the origin.</p>\n","ld":"<p>If not set, all headers are forwarded.\nAll headers that are part of the cache key (see <code>cachingOptions</code>) are automatically forwarded to the origin.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Warning:</strong> The <code>Authorization</code> header must be included as a cache key parameter in <code>cachingOptions</code> to be forwarded to the origin. This is to prevent unauthorized access to resources.</p>\n</div>\n</div>"}},"queryString":{"$ref":"#/definitions/ForwardQueryString","description":"#### The query parameters that will be forwarded to the origin.\n\n---\n\nIf not set, all query string parameters are forwarded.\nAll query string parameters that are part of the cache key (see `cachingOptions`) are automatically forwarded to the origin.","_MdxDesc":{"sd":"<p> The query parameters that will be forwarded to the origin.</p>\n","ld":"<p>If not set, all query string parameters are forwarded.\nAll query string parameters that are part of the cache key (see <code>cachingOptions</code>) are automatically forwarded to the origin.</p>\n"}},"originRequestPolicyId":{"description":"#### The ID of a pre-created origin request policy to use.\n\n---\n\nUse this to apply a pre-configured origin request policy instead of specifying `cookies`, `headers`, and `queryString` options.","type":"string","_MdxDesc":{"sd":"<p> The ID of a pre-created origin request policy to use.</p>\n","ld":"<p>Use this to apply a pre-configured origin request policy instead of specifying <code>cookies</code>, <code>headers</code>, and <code>queryString</code> options.</p>\n"}}},"additionalProperties":false},"CdnCustomRequestHeader":{"type":"object","properties":{"headerName":{"description":"#### Name of the header","type":"string","_MdxDesc":{"sd":"<p> Name of the header</p>\n"}},"value":{"description":"#### Value of the header","type":"string","_MdxDesc":{"sd":"<p> Value of the header</p>\n"}}},"additionalProperties":false,"required":["headerName","value"]},"ForwardCookies":{"type":"object","properties":{"none":{"description":"#### No cookies are forwarded to the origin.","type":"boolean","_MdxDesc":{"sd":"<p> No cookies are forwarded to the origin.</p>\n"}},"whitelist":{"description":"#### Only the listed cookies are forwarded to the origin.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Only the listed cookies are forwarded to the origin.</p>\n"}},"all":{"description":"#### All cookies are forwarded to the origin.","type":"boolean","_MdxDesc":{"sd":"<p> All cookies are forwarded to the origin.</p>\n"}}},"additionalProperties":false},"ForwardHeaders":{"type":"object","properties":{"none":{"description":"#### No headers are forwarded to the origin.","type":"boolean","_MdxDesc":{"sd":"<p> No headers are forwarded to the origin.</p>\n"}},"whitelist":{"description":"#### Only the listed headers are forwarded to the origin.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Only the listed headers are forwarded to the origin.</p>\n"}},"allViewer":{"description":"#### All viewer headers are forwarded to the origin.","type":"boolean","_MdxDesc":{"sd":"<p> All viewer headers are forwarded to the origin.</p>\n"}},"allViewerAndWhitelistCloudFront":{"description":"#### All viewer headers and the listed CDN headers are forwarded to the origin.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> All viewer headers and the listed CDN headers are forwarded to the origin.</p>\n"}},"allExcept":{"description":"#### All viewer headers except the explicitly specified ones are forwarded to the origin.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> All viewer headers except the explicitly specified ones are forwarded to the origin.</p>\n"}}},"additionalProperties":false},"ForwardQueryString":{"type":"object","properties":{"all":{"description":"#### All query parameters are forwarded to the origin.","type":"boolean","_MdxDesc":{"sd":"<p> All query parameters are forwarded to the origin.</p>\n"}},"none":{"description":"#### No query parameters are forwarded to the origin.","type":"boolean","_MdxDesc":{"sd":"<p> No query parameters are forwarded to the origin.</p>\n"}},"whitelist":{"description":"#### Only the listed query parameters are forwarded to the origin.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Only the listed query parameters are forwarded to the origin.</p>\n"}}},"additionalProperties":false},"CdnRouteRewrite":{"type":"object","properties":{"path":{"description":"#### The path pattern to be matched by this route rewrite.\n\n---\n\nYou can use wildcards (`*`) to match multiple paths.\nFor more details on path patterns, see the [AWS documentation](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/distribution-web-values-specify.html#DownloadDistValuesPathPattern).","type":"string","_MdxDesc":{"sd":"<p> The path pattern to be matched by this route rewrite.</p>\n","ld":"<p>You can use wildcards (<code>*</code>) to match multiple paths.\nFor more details on path patterns, see the <a href=\"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/distribution-web-values-specify.html#DownloadDistValuesPathPattern\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"routePrefix":{"description":"#### Prefixes every request to the origin with the specified path.\n\n---\n\nAll requests matching this route will be prefixed with `routePrefix` before being forwarded to the origin.\nFor example, if the CDN receives a request for `/my/resource/url`, it will be sent to the origin as `/your_prefix/my/resource/url`.","type":"string","_MdxDesc":{"sd":"<p> Prefixes every request to the origin with the specified path.</p>\n","ld":"<p>All requests matching this route will be prefixed with <code>routePrefix</code> before being forwarded to the origin.\nFor example, if the CDN receives a request for <code>/my/resource/url</code>, it will be sent to the origin as <code>/your_prefix/my/resource/url</code>.</p>\n"}},"routeTo":{"description":"#### The origin to which the route rewrite forwards requests.\n\n---\n\nIf not set, the default origin (the one the CDN is attached to) is used.","anyOf":[{"$ref":"#/definitions/CdnLoadBalancerRoute"},{"$ref":"#/definitions/CdnHttpApiGatewayRoute"},{"$ref":"#/definitions/CdnLambdaFunctionRoute"},{"$ref":"#/definitions/CdnCustomDomainRoute"},{"$ref":"#/definitions/CdnBucketRoute"}],"_MdxDesc":{"sd":"<p> The origin to which the route rewrite forwards requests.</p>\n","ld":"<p>If not set, the default origin (the one the CDN is attached to) is used.</p>\n"}},"cachingOptions":{"$ref":"#/definitions/CdnCachingOptions","description":"#### Configures custom caching options for this route rewrite.\n\n---\n\nThis property controls the caching behavior for requests matching this route.\nIf a response from the origin does not include `Cache-Control` or `Expires` headers, a default caching behavior is used:\n- **bucket**: Objects are cached for 6 months by default.\n- **http-api-gateway** and **application-load-balancer**: Responses are not cached by default.","_MdxDesc":{"sd":"<p> Configures custom caching options for this route rewrite.</p>\n","ld":"<p>This property controls the caching behavior for requests matching this route.\nIf a response from the origin does not include <code>Cache-Control</code> or <code>Expires</code> headers, a default caching behavior is used:</p>\n<ul>\n<li><strong>bucket</strong>: Objects are cached for 6 months by default.</li>\n<li><strong>http-api-gateway</strong> and <strong>application-load-balancer</strong>: Responses are not cached by default.</li>\n</ul>\n"}},"forwardingOptions":{"$ref":"#/definitions/CdnForwardingOptions","description":"#### Redirects specific requests to a different origin.\n\n---\n\nForwarding options allow you to specify which parts of the request (headers, query parameters, cookies, etc.) are forwarded to the origin.","_MdxDesc":{"sd":"<p> Redirects specific requests to a different origin.</p>\n","ld":"<p>Forwarding options allow you to specify which parts of the request (headers, query parameters, cookies, etc.) are forwarded to the origin.</p>\n"}},"edgeFunctions":{"$ref":"#/definitions/EdgeFunctionsConfig","description":"#### Configures Edge function triggers for this route.\n\n---\n\nYou can associate an `edge-lambda-function` with this route to be executed at different stages:\n\n- `onRequest`: Executed when the CDN receives a request from a client, before checking the cache.\n- `onResponse`: Executed before returning a response to the client.\n\n**Potential Use Cases:**\n- Generating an immediate HTTP response.\n- Modifying the request before forwarding it to the origin.\n- Inspecting cookies or validating authorization tokens.","_MdxDesc":{"sd":"<p> Configures Edge function triggers for this route.</p>\n","ld":"<p>You can associate an <code>edge-lambda-function</code> with this route to be executed at different stages:</p>\n<ul>\n<li><code>onRequest</code>: Executed when the CDN receives a request from a client, before checking the cache.</li>\n<li><code>onResponse</code>: Executed before returning a response to the client.</li>\n</ul>\n<p><strong>Potential Use Cases:</strong></p>\n<ul>\n<li>Generating an immediate HTTP response.</li>\n<li>Modifying the request before forwarding it to the origin.</li>\n<li>Inspecting cookies or validating authorization tokens.</li>\n</ul>\n"}}},"additionalProperties":false,"required":["path"]},"CdnLoadBalancerRoute":{"type":"object","properties":{"type":{"type":"string","const":"application-load-balancer"},"properties":{"$ref":"#/definitions/CdnLoadBalancerOrigin"}},"additionalProperties":false,"required":["properties","type"]},"CdnLoadBalancerOrigin":{"type":"object","properties":{"loadBalancerName":{"description":"#### The name of the Load Balancer.","type":"string","_MdxDesc":{"sd":"<p> The name of the Load Balancer.</p>\n"}},"listenerPort":{"description":"#### The port of the Load Balancer listener.\n\n---\n\nYou must specify this if the Load Balancer you are routing to uses custom listeners.","type":"number","_MdxDesc":{"sd":"<p> The port of the Load Balancer listener.</p>\n","ld":"<p>You must specify this if the Load Balancer you are routing to uses custom listeners.</p>\n"}},"originDomainName":{"description":"#### Explicitly sets the origin domain name to use when forwarding to the Load Balancer.\n\n---\n\nThis is only required if the Load Balancer has no `customDomains` attached and the listener uses `customCertificateArns`.","type":"string","_MdxDesc":{"sd":"<p> Explicitly sets the origin domain name to use when forwarding to the Load Balancer.</p>\n","ld":"<p>This is only required if the Load Balancer has no <code>customDomains</code> attached and the listener uses <code>customCertificateArns</code>.</p>\n"}}},"additionalProperties":false,"required":["loadBalancerName"]},"CdnHttpApiGatewayRoute":{"type":"object","properties":{"type":{"type":"string","const":"http-api-gateway"},"properties":{"$ref":"#/definitions/CdnHttpApiGatewayOrigin"}},"additionalProperties":false,"required":["properties","type"]},"CdnHttpApiGatewayOrigin":{"type":"object","properties":{"httpApiGatewayName":{"description":"#### The name of the HTTP API Gateway.","type":"string","_MdxDesc":{"sd":"<p> The name of the HTTP API Gateway.</p>\n"}}},"additionalProperties":false,"required":["httpApiGatewayName"]},"CdnLambdaFunctionRoute":{"type":"object","properties":{"type":{"type":"string","const":"function"},"properties":{"$ref":"#/definitions/CdnLambdaFunctionOrigin"}},"additionalProperties":false,"required":["properties","type"]},"CdnLambdaFunctionOrigin":{"type":"object","properties":{"functionName":{"description":"#### The name of the Web Service resource.","type":"string","_MdxDesc":{"sd":"<p> The name of the Web Service resource.</p>\n"}}},"additionalProperties":false,"required":["functionName"]},"CdnCustomDomainRoute":{"type":"object","properties":{"type":{"type":"string","const":"custom-origin"},"properties":{"$ref":"#/definitions/CdnCustomOrigin"}},"additionalProperties":false,"required":["properties","type"]},"CdnCustomOrigin":{"type":"object","properties":{"domainName":{"description":"#### The domain name of the custom origin.\n\n---\n\nExample: `mydomain.com` or `domain.example.com`","type":"string","_MdxDesc":{"sd":"<p> The domain name of the custom origin.</p>\n","ld":"<p>Example: <code>mydomain.com</code> or <code>domain.example.com</code></p>\n"}},"protocol":{"description":"#### The protocol to use when connecting to the custom origin.\n\n---","default":"HTTPS","enum":["HTTP","HTTPS"],"type":"string","_MdxDesc":{"sd":"<p> The protocol to use when connecting to the custom origin.</p>\n"}},"port":{"description":"#### The port of the custom origin.\n\n---\n\nBy default, port 443 is used for `HTTPS` origins, and port 80 is used for `HTTP` origins.","default":443,"type":"number","_MdxDesc":{"sd":"<p> The port of the custom origin.</p>\n","ld":"<p>By default, port 443 is used for <code>HTTPS</code> origins, and port 80 is used for <code>HTTP</code> origins.</p>\n"}}},"additionalProperties":false,"required":["domainName"]},"CdnBucketRoute":{"type":"object","properties":{"type":{"type":"string","const":"bucket"},"properties":{"$ref":"#/definitions/CdnBucketOrigin"}},"additionalProperties":false,"required":["properties","type"]},"CdnBucketOrigin":{"type":"object","properties":{"bucketName":{"description":"#### The name of the bucket.","type":"string","_MdxDesc":{"sd":"<p> The name of the bucket.</p>\n"}},"disableUrlNormalization":{"description":"#### Disables URL normalization.\n\n---\n\nURL normalization is enabled by default and is useful for serving HTML files from a bucket with clean URLs (without the `.html` extension).\nWhen enabled, the CDN can fetch the correct HTML file even if the URL is incomplete (e.g., `/about` instead of `/about.html` or `/about/index.html`).","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disables URL normalization.</p>\n","ld":"<p>URL normalization is enabled by default and is useful for serving HTML files from a bucket with clean URLs (without the <code>.html</code> extension).\nWhen enabled, the CDN can fetch the correct HTML file even if the URL is incomplete (e.g., <code>/about</code> instead of <code>/about.html</code> or <code>/about/index.html</code>).</p>\n"}}},"additionalProperties":false,"required":["bucketName"]},"EdgeFunctionsConfig":{"type":"object","properties":{"onRequest":{"description":"#### The name of the `edge-lambda-function` to be executed on request.\n\n---\n\nThe `onRequest` function is triggered when the CDN receives a request from a client. It allows you to:\n- Modify the request before forwarding it to the origin.\n- Return an immediate response to the client.\n- Make network calls to external resources to confirm user credentials or fetch additional content.\n\nThe body of the request is exposed to the function with some restrictions. For more details, see the [AWS documentation](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/edge-functions-restrictions.html#lambda-at-edge-restrictions-request-body).","type":"string","_MdxDesc":{"sd":"<p> The name of the <code>edge-lambda-function</code> to be executed on request.</p>\n","ld":"<p>The <code>onRequest</code> function is triggered when the CDN receives a request from a client. It allows you to:</p>\n<ul>\n<li>Modify the request before forwarding it to the origin.</li>\n<li>Return an immediate response to the client.</li>\n<li>Make network calls to external resources to confirm user credentials or fetch additional content.</li>\n</ul>\n<p>The body of the request is exposed to the function with some restrictions. For more details, see the <a href=\"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/edge-functions-restrictions.html#lambda-at-edge-restrictions-request-body\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"onResponse":{"description":"#### The name of the `edge-lambda-function` to be executed on response.\n\n---\n\nThe `onResponse` function is triggered before the CDN returns a response to the client, allowing you to modify the response (e.g., headers, cookies).\n\nThis function does not execute if:\n- The origin returns an HTTP status code of 400 or higher.\n- The response was generated by a function triggered by a viewer request event (`onRequest`).","type":"string","_MdxDesc":{"sd":"<p> The name of the <code>edge-lambda-function</code> to be executed on response.</p>\n","ld":"<p>The <code>onResponse</code> function is triggered before the CDN returns a response to the client, allowing you to modify the response (e.g., headers, cookies).</p>\n<p>This function does not execute if:</p>\n<ul>\n<li>The origin returns an HTTP status code of 400 or higher.</li>\n<li>The response was generated by a function triggered by a viewer request event (<code>onRequest</code>).</li>\n</ul>\n"}},"onOriginRequest":{"description":"#### The name of the `edge-lambda-function` to be executed on origin request.\n\n---\n\n> **Warning:** Use this trigger only if you are an advanced user and understand the implications.\n> Using this trigger can override the default behavior configured by Stacktape, which uses pre-configured Lambdas for this trigger when using a CDN with a bucket, web-service, http-api-gateway, or application-load-balancer.\n\nThe `onOriginRequest` function is triggered after the CDN receives a request but before it is sent to the origin. This means the function is not triggered if the response is found in the cache.\n\nYou can use this function to:\n- Modify the request before forwarding it to the origin.\n- Return an immediate response to the client, which will be cached as if it came from the origin.\n- Make network calls to external resources.\n\nThe body of the request is exposed with some restrictions. See the [AWS documentation](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/edge-functions-restrictions.html#lambda-at-edge-restrictions-request-body) for more details.","type":"string","_MdxDesc":{"sd":"<p> The name of the <code>edge-lambda-function</code> to be executed on origin request.</p>\n","ld":"<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Warning:</strong> Use this trigger only if you are an advanced user and understand the implications.\nUsing this trigger can override the default behavior configured by Stacktape, which uses pre-configured Lambdas for this trigger when using a CDN with a bucket, web-service, http-api-gateway, or application-load-balancer.</p>\n</div>\n</div><p>The <code>onOriginRequest</code> function is triggered after the CDN receives a request but before it is sent to the origin. This means the function is not triggered if the response is found in the cache.</p>\n<p>You can use this function to:</p>\n<ul>\n<li>Modify the request before forwarding it to the origin.</li>\n<li>Return an immediate response to the client, which will be cached as if it came from the origin.</li>\n<li>Make network calls to external resources.</li>\n</ul>\n<p>The body of the request is exposed with some restrictions. See the <a href=\"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/edge-functions-restrictions.html#lambda-at-edge-restrictions-request-body\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a> for more details.</p>\n"}},"onOriginResponse":{"description":"#### The name of the `edge-lambda-function` to be executed on origin response.\n\n---\n\nThe `onOriginResponse` function is triggered after the origin returns a response but before it is sent to the client.\n\nYou can use this function to:\n- Modify the response (e.g., headers, cookies), which will be cached as if it came from the origin.\n- Update the response status.","type":"string","_MdxDesc":{"sd":"<p> The name of the <code>edge-lambda-function</code> to be executed on origin response.</p>\n","ld":"<p>The <code>onOriginResponse</code> function is triggered after the origin returns a response but before it is sent to the client.</p>\n<p>You can use this function to:</p>\n<ul>\n<li>Modify the response (e.g., headers, cookies), which will be cached as if it came from the origin.</li>\n<li>Update the response status.</li>\n</ul>\n"}}},"additionalProperties":false},"ApplicationLoadBalancerAlarm":{"type":"object","properties":{"trigger":{"$ref":"#/definitions/ApplicationLoadBalancerAlarmTrigger"},"evaluation":{"$ref":"#/definitions/AlarmEvaluation","description":"#### Specifies the time window for evaluating the metric to determine if the alarm should be triggered.\n\n---\n\nDefines the duration and frequency of metric evaluation.","_MdxDesc":{"sd":"<p> Specifies the time window for evaluating the metric to determine if the alarm should be triggered.</p>\n","ld":"<p>Defines the duration and frequency of metric evaluation.</p>\n"}},"notificationTargets":{"description":"#### Defines where to send notifications when the alarm is triggered.\n\n---\n\nYou can specify a list of integrations, such as Slack, MS Teams, or email.","type":"array","items":{"$ref":"#/definitions/AlarmUserIntegration"},"_MdxDesc":{"sd":"<p> Defines where to send notifications when the alarm is triggered.</p>\n","ld":"<p>You can specify a list of integrations, such as Slack, MS Teams, or email.</p>\n"}},"description":{"description":"#### Custom description for the alarm\n---\n- If custom description is specified, it is used in the alarm notification message\n- Custom description is also used in the alarm description in the AWS console (If not provided, Stacktape generates default description.)","type":"string","_MdxDesc":{"sd":"<p> Custom description for the alarm</p>\n","ld":"<ul>\n<li>If custom description is specified, it is used in the alarm notification message</li>\n<li>Custom description is also used in the alarm description in the AWS console (If not provided, Stacktape generates default description.)</li>\n</ul>\n"}}},"additionalProperties":false,"required":["trigger"]},"ApplicationLoadBalancerAlarmTrigger":{"anyOf":[{"$ref":"#/definitions/ApplicationLoadBalancerCustomTrigger"},{"$ref":"#/definitions/ApplicationLoadBalancerErrorRateTrigger"},{"$ref":"#/definitions/ApplicationLoadBalancerUnhealthyTargetsTrigger"}]},"ApplicationLoadBalancerCustomTrigger":{"type":"object","properties":{"type":{"type":"string","const":"application-load-balancer-custom"},"properties":{"$ref":"#/definitions/ApplicationLoadBalancerCustomTriggerProps"}},"additionalProperties":false,"required":["properties","type"]},"ApplicationLoadBalancerCustomTriggerProps":{"type":"object","properties":{"metric":{"$ref":"#/definitions/ApplicationLoadBalancerMetric","description":"#### The metric to monitor on the Load Balancer.\n\n---\n\nThe threshold will be compared against the calculated value of `statistic(METRIC)`, where:\n- `statistic` is the function applied to the metric values collected during the evaluation period (default: `avg`).\n- `METRIC` is the chosen metric.\n\n**Available Metrics:**\n\n- `ActiveConnectionCount`: The total number of concurrent TCP connections active from clients to the load balancer and from the load balancer to targets.\n- `AnomalousHostCount`: The number of hosts detected with anomalies.\n- `ClientTLSNegotiationErrorCount`: The number of TLS connections initiated by the client that did not establish a session with the load balancer due to a TLS error.\n- `ConsumedLCUs`: The number of load balancer capacity units (LCU) used by your load balancer.\n- `DesyncMitigationMode_NonCompliant_Request_Count`: The number of requests that do not comply with RFC 7230.\n- `DroppedInvalidHeaderRequestCount`: The number of requests where the load balancer removed HTTP headers with invalid fields before routing the request.\n- `MitigatedHostCount`: The number of targets under mitigation.\n- `ForwardedInvalidHeaderRequestCount`: The number of requests routed by the load balancer that had HTTP headers with invalid fields.\n- `GrpcRequestCount`: The number of gRPC requests processed over IPv4 and IPv6.\n- `HTTP_Fixed_Response_Count`: The number of successful fixed-response actions.\n- `HTTP_Redirect_Count`: The number of successful redirect actions.\n- `HTTP_Redirect_Url_Limit_Exceeded_Count`: The number of redirect actions that failed because the URL in the response location header exceeded 8K.\n- `HTTPCode_ELB_3XX_Count`: The number of HTTP 3XX redirection codes originating from the load balancer.\n- `HTTPCode_ELB_4XX_Count`: The number of HTTP 4XX client error codes originating from the load balancer.\n- `HTTPCode_ELB_5XX_Count`: The number of HTTP 5XX server error codes originating from the load balancer.\n- `HTTPCode_ELB_500_Count`: The number of HTTP 500 error codes originating from the load balancer.\n- `HTTPCode_ELB_502_Count`: The number of HTTP 502 error codes originating from the load balancer.\n- `HTTPCode_ELB_503_Count`: The number of HTTP 503 error codes originating from the load balancer.\n- `HTTPCode_ELB_504_Count`: The number of HTTP 504 error codes originating from the load balancer.\n- `IPv6ProcessedBytes`: The total number of bytes processed by the load balancer over IPv6.\n- `IPv6RequestCount`: The number of IPv6 requests received by the load balancer.\n- `NewConnectionCount`: The total number of new TCP connections established from clients to the load balancer and from the load balancer to targets.\n- `NonStickyRequestCount`: The number of requests where the load balancer chose a new target because it could not use an existing sticky session.\n- `ProcessedBytes`: The total number of bytes processed by the load balancer over IPv4 and IPv6.\n- `RejectedConnectionCount`: The number of connections rejected because the load balancer reached its maximum number of connections.\n- `RequestCount`: The number of requests processed over IPv4 and IPv6.\n- `RuleEvaluations`: The number of rules processed by the load balancer, averaged over an hour.\n- `HealthyHostCount`: The number of targets that are considered healthy.\n- `HTTPCode_Target_2XX_Count`: The number of HTTP 2XX response codes generated by the targets.\n- `HTTPCode_Target_3XX_Count`: The number of HTTP 3XX response codes generated by the targets.\n- `HTTPCode_Target_4XX_Count`: The number of HTTP 4XX response codes generated by the targets.\n- `HTTPCode_Target_5XX_Count`: The number of HTTP 5XX response codes generated by the targets.\n- `RequestCountPerTarget`: The average number of requests per target in a target group.\n- `TargetConnectionErrorCount`: The number of connections that were not successfully established between the load balancer and a target.\n- `TargetResponseTime`: The time elapsed (in seconds) from when a request leaves the load balancer until the target starts sending response headers.\n- `TargetTLSNegotiationErrorCount`: The number of TLS connections initiated by the load balancer that did not establish a session with the target.\n- `UnHealthyHostCount`: The number of targets that are considered unhealthy.\n- `HealthyStateDNS`: The number of zones that meet the DNS healthy state requirements.\n- `HealthyStateRouting`: The number of zones that meet the routing healthy state requirements.\n- `UnhealthyRoutingRequestCount`: The number of requests routed using the routing failover action (fail open).\n- `UnhealthyStateDNS`: The number of zones that do not meet the DNS healthy state requirements.\n- `UnhealthyStateRouting`: The number of zones that do not meet the routing healthy state requirements.\n- `LambdaInternalError`: The number of requests to a Lambda function that failed due to an issue internal to the load balancer or AWS Lambda.\n- `LambdaTargetProcessedBytes`: The total number of bytes processed by the load balancer for requests to and responses from a Lambda function.\n- `LambdaUserError`: The number of requests to a Lambda function that failed due to an issue with the Lambda function itself.\n- `ELBAuthError`: The number of user authentications that could not be completed due to an internal error.\n- `ELBAuthFailure`: The number of user authentications that could not be completed because the IdP denied access.\n- `ELBAuthLatency`: The time elapsed (in milliseconds) to query the IdP for the ID token and user info.\n- `ELBAuthRefreshTokenSuccess`: The number of times the load balancer successfully refreshed user claims using a refresh token.\n- `ELBAuthSuccess`: The number of successful authentication actions.\n- `ELBAuthUserClaimsSizeExceeded`: The number of times a configured IdP returned user claims that exceeded 11K bytes in size.","_MdxDesc":{"sd":"<p> The metric to monitor on the Load Balancer.</p>\n","ld":"<p>The threshold will be compared against the calculated value of <code>statistic(METRIC)</code>, where:</p>\n<ul>\n<li><code>statistic</code> is the function applied to the metric values collected during the evaluation period (default: <code>avg</code>).</li>\n<li><code>METRIC</code> is the chosen metric.</li>\n</ul>\n<p><strong>Available Metrics:</strong></p>\n<ul>\n<li><code>ActiveConnectionCount</code>: The total number of concurrent TCP connections active from clients to the load balancer and from the load balancer to targets.</li>\n<li><code>AnomalousHostCount</code>: The number of hosts detected with anomalies.</li>\n<li><code>ClientTLSNegotiationErrorCount</code>: The number of TLS connections initiated by the client that did not establish a session with the load balancer due to a TLS error.</li>\n<li><code>ConsumedLCUs</code>: The number of load balancer capacity units (LCU) used by your load balancer.</li>\n<li><code>DesyncMitigationMode_NonCompliant_Request_Count</code>: The number of requests that do not comply with RFC 7230.</li>\n<li><code>DroppedInvalidHeaderRequestCount</code>: The number of requests where the load balancer removed HTTP headers with invalid fields before routing the request.</li>\n<li><code>MitigatedHostCount</code>: The number of targets under mitigation.</li>\n<li><code>ForwardedInvalidHeaderRequestCount</code>: The number of requests routed by the load balancer that had HTTP headers with invalid fields.</li>\n<li><code>GrpcRequestCount</code>: The number of gRPC requests processed over IPv4 and IPv6.</li>\n<li><code>HTTP_Fixed_Response_Count</code>: The number of successful fixed-response actions.</li>\n<li><code>HTTP_Redirect_Count</code>: The number of successful redirect actions.</li>\n<li><code>HTTP_Redirect_Url_Limit_Exceeded_Count</code>: The number of redirect actions that failed because the URL in the response location header exceeded 8K.</li>\n<li><code>HTTPCode_ELB_3XX_Count</code>: The number of HTTP 3XX redirection codes originating from the load balancer.</li>\n<li><code>HTTPCode_ELB_4XX_Count</code>: The number of HTTP 4XX client error codes originating from the load balancer.</li>\n<li><code>HTTPCode_ELB_5XX_Count</code>: The number of HTTP 5XX server error codes originating from the load balancer.</li>\n<li><code>HTTPCode_ELB_500_Count</code>: The number of HTTP 500 error codes originating from the load balancer.</li>\n<li><code>HTTPCode_ELB_502_Count</code>: The number of HTTP 502 error codes originating from the load balancer.</li>\n<li><code>HTTPCode_ELB_503_Count</code>: The number of HTTP 503 error codes originating from the load balancer.</li>\n<li><code>HTTPCode_ELB_504_Count</code>: The number of HTTP 504 error codes originating from the load balancer.</li>\n<li><code>IPv6ProcessedBytes</code>: The total number of bytes processed by the load balancer over IPv6.</li>\n<li><code>IPv6RequestCount</code>: The number of IPv6 requests received by the load balancer.</li>\n<li><code>NewConnectionCount</code>: The total number of new TCP connections established from clients to the load balancer and from the load balancer to targets.</li>\n<li><code>NonStickyRequestCount</code>: The number of requests where the load balancer chose a new target because it could not use an existing sticky session.</li>\n<li><code>ProcessedBytes</code>: The total number of bytes processed by the load balancer over IPv4 and IPv6.</li>\n<li><code>RejectedConnectionCount</code>: The number of connections rejected because the load balancer reached its maximum number of connections.</li>\n<li><code>RequestCount</code>: The number of requests processed over IPv4 and IPv6.</li>\n<li><code>RuleEvaluations</code>: The number of rules processed by the load balancer, averaged over an hour.</li>\n<li><code>HealthyHostCount</code>: The number of targets that are considered healthy.</li>\n<li><code>HTTPCode_Target_2XX_Count</code>: The number of HTTP 2XX response codes generated by the targets.</li>\n<li><code>HTTPCode_Target_3XX_Count</code>: The number of HTTP 3XX response codes generated by the targets.</li>\n<li><code>HTTPCode_Target_4XX_Count</code>: The number of HTTP 4XX response codes generated by the targets.</li>\n<li><code>HTTPCode_Target_5XX_Count</code>: The number of HTTP 5XX response codes generated by the targets.</li>\n<li><code>RequestCountPerTarget</code>: The average number of requests per target in a target group.</li>\n<li><code>TargetConnectionErrorCount</code>: The number of connections that were not successfully established between the load balancer and a target.</li>\n<li><code>TargetResponseTime</code>: The time elapsed (in seconds) from when a request leaves the load balancer until the target starts sending response headers.</li>\n<li><code>TargetTLSNegotiationErrorCount</code>: The number of TLS connections initiated by the load balancer that did not establish a session with the target.</li>\n<li><code>UnHealthyHostCount</code>: The number of targets that are considered unhealthy.</li>\n<li><code>HealthyStateDNS</code>: The number of zones that meet the DNS healthy state requirements.</li>\n<li><code>HealthyStateRouting</code>: The number of zones that meet the routing healthy state requirements.</li>\n<li><code>UnhealthyRoutingRequestCount</code>: The number of requests routed using the routing failover action (fail open).</li>\n<li><code>UnhealthyStateDNS</code>: The number of zones that do not meet the DNS healthy state requirements.</li>\n<li><code>UnhealthyStateRouting</code>: The number of zones that do not meet the routing healthy state requirements.</li>\n<li><code>LambdaInternalError</code>: The number of requests to a Lambda function that failed due to an issue internal to the load balancer or AWS Lambda.</li>\n<li><code>LambdaTargetProcessedBytes</code>: The total number of bytes processed by the load balancer for requests to and responses from a Lambda function.</li>\n<li><code>LambdaUserError</code>: The number of requests to a Lambda function that failed due to an issue with the Lambda function itself.</li>\n<li><code>ELBAuthError</code>: The number of user authentications that could not be completed due to an internal error.</li>\n<li><code>ELBAuthFailure</code>: The number of user authentications that could not be completed because the IdP denied access.</li>\n<li><code>ELBAuthLatency</code>: The time elapsed (in milliseconds) to query the IdP for the ID token and user info.</li>\n<li><code>ELBAuthRefreshTokenSuccess</code>: The number of times the load balancer successfully refreshed user claims using a refresh token.</li>\n<li><code>ELBAuthSuccess</code>: The number of successful authentication actions.</li>\n<li><code>ELBAuthUserClaimsSizeExceeded</code>: The number of times a configured IdP returned user claims that exceeded 11K bytes in size.</li>\n</ul>\n"}},"threshold":{"description":"#### The threshold that triggers the alarm.\n\n---\n\nThe threshold is compared against the calculated value of `statistic(METRIC)`, where:\n- `statistic` is the function applied to the metric values collected during the evaluation period (default: `avg`).\n- `METRIC` is the chosen metric.","type":"number","_MdxDesc":{"sd":"<p> The threshold that triggers the alarm.</p>\n","ld":"<p>The threshold is compared against the calculated value of <code>statistic(METRIC)</code>, where:</p>\n<ul>\n<li><code>statistic</code> is the function applied to the metric values collected during the evaluation period (default: <code>avg</code>).</li>\n<li><code>METRIC</code> is the chosen metric.</li>\n</ul>\n"}},"statistic":{"$ref":"#/definitions/StatisticFunction","description":"#### The statistic to apply to the metric data points.\n\n---\n\nSupported statistics:\n- **avg**: The average of the metric values.\n- **sum**: The sum of the metric values.\n- **p90**: The 90th percentile. 90% of the data points are lower than this value.\n- **p95**: The 95th percentile. 95% of the data points are lower than this value.\n- **p99**: The 99th percentile. 99% of the data points are lower than this value.\n- **min**: The lowest value from the data points.\n- **max**: The highest value from the data points.","default":"avg","_MdxDesc":{"sd":"<p> The statistic to apply to the metric data points.</p>\n","ld":"<p>Supported statistics:</p>\n<ul>\n<li><strong>avg</strong>: The average of the metric values.</li>\n<li><strong>sum</strong>: The sum of the metric values.</li>\n<li><strong>p90</strong>: The 90th percentile. 90% of the data points are lower than this value.</li>\n<li><strong>p95</strong>: The 95th percentile. 95% of the data points are lower than this value.</li>\n<li><strong>p99</strong>: The 99th percentile. 99% of the data points are lower than this value.</li>\n<li><strong>min</strong>: The lowest value from the data points.</li>\n<li><strong>max</strong>: The highest value from the data points.</li>\n</ul>\n"}},"comparisonOperator":{"$ref":"#/definitions/ComparisonOperator","description":"#### The arithmetic operation to use when comparing the specified statistic and threshold.\n\n---\n\nSupported operators:\n- `GreaterThanThreshold`\n- `GreaterThanOrEqualToThreshold`\n- `LessThanThreshold`\n- `LessThanOrEqualToThreshold`","_MdxDesc":{"sd":"<p> The arithmetic operation to use when comparing the specified statistic and threshold.</p>\n","ld":"<p>Supported operators:</p>\n<ul>\n<li><code>GreaterThanThreshold</code></li>\n<li><code>GreaterThanOrEqualToThreshold</code></li>\n<li><code>LessThanThreshold</code></li>\n<li><code>LessThanOrEqualToThreshold</code></li>\n</ul>\n"}}},"additionalProperties":false,"required":["metric","threshold"]},"ApplicationLoadBalancerMetric":{"enum":["ActiveConnectionCount","AnomalousHostCount","ClientTLSNegotiationErrorCount","ConsumedLCUs","DesyncMitigationMode_NonCompliant_Request_Count","DroppedInvalidHeaderRequestCount","ELBAuthError","ELBAuthFailure","ELBAuthLatency","ELBAuthRefreshTokenSuccess","ELBAuthSuccess","ELBAuthUserClaimsSizeExceeded","ForwardedInvalidHeaderRequestCount","GrpcRequestCount","HTTPCode_ELB_3XX_Count","HTTPCode_ELB_4XX_Count","HTTPCode_ELB_500_Count","HTTPCode_ELB_502_Count","HTTPCode_ELB_503_Count","HTTPCode_ELB_504_Count","HTTPCode_ELB_5XX_Count","HTTPCode_Target_2XX_Count","HTTPCode_Target_3XX_Count","HTTPCode_Target_4XX_Count","HTTPCode_Target_5XX_Count","HTTP_Fixed_Response_Count","HTTP_Redirect_Count","HTTP_Redirect_Url_Limit_Exceeded_Count","HealthyHostCount","HealthyStateDNS","HealthyStateRouting","IPv6ProcessedBytes","IPv6RequestCount","LambdaInternalError","LambdaTargetProcessedBytes","LambdaUserError","MitigatedHostCount","NewConnectionCount","NonStickyRequestCount","ProcessedBytes","RejectedConnectionCount","RequestCount","RequestCountPerTarget","RuleEvaluations","TargetConnectionErrorCount","TargetResponseTime","TargetTLSNegotiationErrorCount","UnHealthyHostCount","UnhealthyRoutingRequestCount","UnhealthyStateDNS","UnhealthyStateRouting"],"type":"string"},"StatisticFunction":{"enum":["avg","max","min","p90","p95","p99","sum"],"type":"string"},"ComparisonOperator":{"enum":["GreaterThanOrEqualToThreshold","GreaterThanThreshold","LessThanOrEqualToThreshold","LessThanThreshold"],"type":"string"},"ApplicationLoadBalancerErrorRateTrigger":{"type":"object","properties":{"type":{"type":"string","const":"application-load-balancer-error-rate"},"properties":{"$ref":"#/definitions/ApplicationLoadBalancerErrorRateTriggerProps"}},"additionalProperties":false,"required":["properties","type"]},"ApplicationLoadBalancerErrorRateTriggerProps":{"type":"object","properties":{"thresholdPercent":{"description":"#### The error rate percentage that triggers the alarm.\n\n---\n\nThe error rate is the percentage of total requests that result in a 4xx or 5xx HTTP status code.\nFor example, a value of 5 means the alarm will trigger if more than 5% of requests result in an error.","type":"number","_MdxDesc":{"sd":"<p> The error rate percentage that triggers the alarm.</p>\n","ld":"<p>The error rate is the percentage of total requests that result in a 4xx or 5xx HTTP status code.\nFor example, a value of 5 means the alarm will trigger if more than 5% of requests result in an error.</p>\n"}},"comparisonOperator":{"$ref":"#/definitions/ComparisonOperator","description":"#### The arithmetic operation to use when comparing the specified statistic and threshold.\n\n---\n\nSupported operators:\n- `GreaterThanThreshold`\n- `GreaterThanOrEqualToThreshold`\n- `LessThanThreshold`\n- `LessThanOrEqualToThreshold`","_MdxDesc":{"sd":"<p> The arithmetic operation to use when comparing the specified statistic and threshold.</p>\n","ld":"<p>Supported operators:</p>\n<ul>\n<li><code>GreaterThanThreshold</code></li>\n<li><code>GreaterThanOrEqualToThreshold</code></li>\n<li><code>LessThanThreshold</code></li>\n<li><code>LessThanOrEqualToThreshold</code></li>\n</ul>\n"}}},"additionalProperties":false,"required":["thresholdPercent"]},"ApplicationLoadBalancerUnhealthyTargetsTrigger":{"type":"object","properties":{"type":{"type":"string","const":"application-load-balancer-unhealthy-targets"},"properties":{"$ref":"#/definitions/ApplicationLoadBalancerUnhealthyTargetsTriggerProps"}},"additionalProperties":false,"required":["properties","type"]},"ApplicationLoadBalancerUnhealthyTargetsTriggerProps":{"type":"object","properties":{"thresholdPercent":{"description":"#### The percentage of unhealthy targets that triggers the alarm.\n\n---\n\nAn Application Load Balancer routes traffic to multiple targets (e.g., containers). This alarm triggers if the percentage of unhealthy targets exceeds the specified threshold.\nIf the load balancer has multiple target groups, the alarm will trigger if *any* of them breach the threshold.","type":"number","_MdxDesc":{"sd":"<p> The percentage of unhealthy targets that triggers the alarm.</p>\n","ld":"<p>An Application Load Balancer routes traffic to multiple targets (e.g., containers). This alarm triggers if the percentage of unhealthy targets exceeds the specified threshold.\nIf the load balancer has multiple target groups, the alarm will trigger if <em>any</em> of them breach the threshold.</p>\n"}},"onlyIncludeTargets":{"description":"#### Limits alarm to monitor health of only the specified target container services\n---\n- By specifying this property, only the containers of target container services that are specified are monitored for health.\n- Only services that are actually targeted by the load balancer can be part of the list.\n- If not specified, all targeted container services are monitored.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Limits alarm to monitor health of only the specified target container services</p>\n","ld":"<ul>\n<li>By specifying this property, only the containers of target container services that are specified are monitored for health.</li>\n<li>Only services that are actually targeted by the load balancer can be part of the list.</li>\n<li>If not specified, all targeted container services are monitored.</li>\n</ul>\n"}},"comparisonOperator":{"$ref":"#/definitions/ComparisonOperator","description":"#### The arithmetic operation to use when comparing the specified statistic and threshold.\n\n---\n\nSupported operators:\n- `GreaterThanThreshold`\n- `GreaterThanOrEqualToThreshold`\n- `LessThanThreshold`\n- `LessThanOrEqualToThreshold`","_MdxDesc":{"sd":"<p> The arithmetic operation to use when comparing the specified statistic and threshold.</p>\n","ld":"<p>Supported operators:</p>\n<ul>\n<li><code>GreaterThanThreshold</code></li>\n<li><code>GreaterThanOrEqualToThreshold</code></li>\n<li><code>LessThanThreshold</code></li>\n<li><code>LessThanOrEqualToThreshold</code></li>\n</ul>\n"}}},"additionalProperties":false,"required":["thresholdPercent"]},"AlarmEvaluation":{"type":"object","properties":{"period":{"description":"#### The duration (in seconds) of a single evaluation period.\n\n---\n\nThis value determines how long to collect data for a single data point. It must be a multiple of 60.","default":60,"type":"number","_MdxDesc":{"sd":"<p> The duration (in seconds) of a single evaluation period.</p>\n","ld":"<p>This value determines how long to collect data for a single data point. It must be a multiple of 60.</p>\n"}},"evaluationPeriods":{"description":"#### The number of most recent periods to evaluate.\n\n---\n\nThe alarm is triggered only if the condition is met for a specified number of these periods (`breachedPeriods`).\nThis helps prevent alarms from being triggered by temporary spikes.\n\nFor example, a sudden, short-lived spike in CPU utilization might not be a problem.\nHowever, if the CPU utilization stays high for several consecutive periods, it could indicate an issue that requires attention.","default":1,"type":"number","_MdxDesc":{"sd":"<p> The number of most recent periods to evaluate.</p>\n","ld":"<p>The alarm is triggered only if the condition is met for a specified number of these periods (<code>breachedPeriods</code>).\nThis helps prevent alarms from being triggered by temporary spikes.</p>\n<p>For example, a sudden, short-lived spike in CPU utilization might not be a problem.\nHowever, if the CPU utilization stays high for several consecutive periods, it could indicate an issue that requires attention.</p>\n"}},"breachedPeriods":{"description":"#### The number of periods (within `evaluationPeriods`) that must breach the threshold to trigger the alarm.\n\n---\n\nThis allows you to configure the alarm's sensitivity. For example, if you set `evaluationPeriods` to 5 and `breachedPeriods` to 3, the alarm will only trigger if the metric exceeds the threshold in at least 3 of the 5 most recent periods.\n\nThis value must be less than or equal to `evaluationPeriods`.","default":1,"type":"number","_MdxDesc":{"sd":"<p> The number of periods (within <code>evaluationPeriods</code>) that must breach the threshold to trigger the alarm.</p>\n","ld":"<p>This allows you to configure the alarm&#39;s sensitivity. For example, if you set <code>evaluationPeriods</code> to 5 and <code>breachedPeriods</code> to 3, the alarm will only trigger if the metric exceeds the threshold in at least 3 of the 5 most recent periods.</p>\n<p>This value must be less than or equal to <code>evaluationPeriods</code>.</p>\n"}}},"additionalProperties":false},"AlarmUserIntegration":{"anyOf":[{"$ref":"#/definitions/MsTeamsIntegration"},{"$ref":"#/definitions/SlackIntegration"},{"$ref":"#/definitions/EmailIntegration"}]},"MsTeamsIntegration":{"type":"object","properties":{"type":{"type":"string","const":"ms-teams"},"properties":{"$ref":"#/definitions/MsTeamsIntegrationProps"}},"additionalProperties":false,"required":["type"]},"MsTeamsIntegrationProps":{"type":"object","properties":{"webhookUrl":{"description":"#### The URL that allows Stacktape to send a notification to the associated channel.\n\n---\n\nYou can get this URL by following [this guide](https://docs.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook#create-incoming-webhook-1).","type":"string","_MdxDesc":{"sd":"<p> The URL that allows Stacktape to send a notification to the associated channel.</p>\n","ld":"<p>You can get this URL by following <a href=\"https://docs.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook#create-incoming-webhook-1\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">this guide</a>.</p>\n"}}},"additionalProperties":false,"required":["webhookUrl"]},"SlackIntegration":{"type":"object","properties":{"type":{"type":"string","const":"slack"},"properties":{"$ref":"#/definitions/SlackIntegrationProps"}},"additionalProperties":false,"required":["type"]},"SlackIntegrationProps":{"type":"object","properties":{"conversationId":{"description":"#### The ID of the channel, direct message, multi-person direct message, or group.\n\n---\n\nTo get the conversation ID for a channel, navigate to the channel and click on its name.\nThe ID is located at the bottom of the **About** tab.","type":"string","_MdxDesc":{"sd":"<p> The ID of the channel, direct message, multi-person direct message, or group.</p>\n","ld":"<p>To get the conversation ID for a channel, navigate to the channel and click on its name.\nThe ID is located at the bottom of the <strong>About</strong> tab.</p>\n"}},"accessToken":{"description":"#### The Bot User OAuth Token.\n\n---\n\nYou can get an access token by following the first two steps in [this Slack guide](https://slack.dev/node-slack-sdk/getting-started).","type":"string","_MdxDesc":{"sd":"<p> The Bot User OAuth Token.</p>\n","ld":"<p>You can get an access token by following the first two steps in <a href=\"https://slack.dev/node-slack-sdk/getting-started\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">this Slack guide</a>.</p>\n"}}},"additionalProperties":false,"required":["accessToken","conversationId"]},"EmailIntegration":{"type":"object","properties":{"type":{"type":"string","const":"email"},"properties":{"$ref":"#/definitions/EmailIntegrationProps"}},"additionalProperties":false,"required":["properties","type"]},"EmailIntegrationProps":{"type":"object","properties":{"sender":{"description":"#### The email address of the sender.","type":"string","_MdxDesc":{"sd":"<p> The email address of the sender.</p>\n"}},"recipient":{"description":"#### The email address of the recipient.","type":"string","_MdxDesc":{"sd":"<p> The email address of the recipient.</p>\n"}}},"additionalProperties":false,"required":["recipient","sender"]},"HttpApiGatewayAlarm":{"type":"object","properties":{"trigger":{"$ref":"#/definitions/HttpApiGatewayAlarmTrigger"},"evaluation":{"$ref":"#/definitions/AlarmEvaluation","description":"#### Specifies the time window for evaluating the metric to determine if the alarm should be triggered.\n\n---\n\nDefines the duration and frequency of metric evaluation.","_MdxDesc":{"sd":"<p> Specifies the time window for evaluating the metric to determine if the alarm should be triggered.</p>\n","ld":"<p>Defines the duration and frequency of metric evaluation.</p>\n"}},"notificationTargets":{"description":"#### Defines where to send notifications when the alarm is triggered.\n\n---\n\nYou can specify a list of integrations, such as Slack, MS Teams, or email.","type":"array","items":{"$ref":"#/definitions/AlarmUserIntegration"},"_MdxDesc":{"sd":"<p> Defines where to send notifications when the alarm is triggered.</p>\n","ld":"<p>You can specify a list of integrations, such as Slack, MS Teams, or email.</p>\n"}},"description":{"description":"#### Custom description for the alarm\n---\n- If custom description is specified, it is used in the alarm notification message\n- Custom description is also used in the alarm description in the AWS console (If not provided, Stacktape generates default description.)","type":"string","_MdxDesc":{"sd":"<p> Custom description for the alarm</p>\n","ld":"<ul>\n<li>If custom description is specified, it is used in the alarm notification message</li>\n<li>Custom description is also used in the alarm description in the AWS console (If not provided, Stacktape generates default description.)</li>\n</ul>\n"}}},"additionalProperties":false,"required":["trigger"]},"HttpApiGatewayAlarmTrigger":{"anyOf":[{"$ref":"#/definitions/HttpApiGatewayErrorRateTrigger"},{"$ref":"#/definitions/HttpApiGatewayLatencyTrigger"}]},"HttpApiGatewayErrorRateTrigger":{"type":"object","properties":{"type":{"type":"string","const":"http-api-gateway-error-rate"},"properties":{"$ref":"#/definitions/HttpApiGatewayErrorRateTriggerProps"}},"additionalProperties":false,"required":["properties","type"]},"HttpApiGatewayErrorRateTriggerProps":{"type":"object","properties":{"thresholdPercent":{"description":"#### The error rate percentage that triggers the alarm.\n\n---\n\nThe error rate is the percentage of total requests that result in a 4xx or 5xx HTTP status code.\nFor example, a value of 5 means the alarm will trigger if more than 5% of requests result in an error.","type":"number","_MdxDesc":{"sd":"<p> The error rate percentage that triggers the alarm.</p>\n","ld":"<p>The error rate is the percentage of total requests that result in a 4xx or 5xx HTTP status code.\nFor example, a value of 5 means the alarm will trigger if more than 5% of requests result in an error.</p>\n"}},"comparisonOperator":{"$ref":"#/definitions/ComparisonOperator","description":"#### The arithmetic operation to use when comparing the specified statistic and threshold.\n\n---\n\nSupported operators:\n- `GreaterThanThreshold`\n- `GreaterThanOrEqualToThreshold`\n- `LessThanThreshold`\n- `LessThanOrEqualToThreshold`","_MdxDesc":{"sd":"<p> The arithmetic operation to use when comparing the specified statistic and threshold.</p>\n","ld":"<p>Supported operators:</p>\n<ul>\n<li><code>GreaterThanThreshold</code></li>\n<li><code>GreaterThanOrEqualToThreshold</code></li>\n<li><code>LessThanThreshold</code></li>\n<li><code>LessThanOrEqualToThreshold</code></li>\n</ul>\n"}}},"additionalProperties":false,"required":["thresholdPercent"]},"HttpApiGatewayLatencyTrigger":{"type":"object","properties":{"type":{"type":"string","const":"http-api-gateway-latency"},"properties":{"$ref":"#/definitions/HttpApiGatewayLatencyTriggerProps"}},"additionalProperties":false,"required":["properties","type"]},"HttpApiGatewayLatencyTriggerProps":{"type":"object","properties":{"thresholdMilliseconds":{"description":"#### The latency in milliseconds that triggers the alarm.\n\n---\n\nLatency is the time from when API Gateway receives a request to when it sends a response.\nBy default, the alarm triggers if the **average** latency over the evaluation period is **greater than** the `thresholdMilliseconds`.\nYou can customize the behavior using the `statistic` and `comparisonOperator` properties.","type":"number","_MdxDesc":{"sd":"<p> The latency in milliseconds that triggers the alarm.</p>\n","ld":"<p>Latency is the time from when API Gateway receives a request to when it sends a response.\nBy default, the alarm triggers if the <strong>average</strong> latency over the evaluation period is <strong>greater than</strong> the <code>thresholdMilliseconds</code>.\nYou can customize the behavior using the <code>statistic</code> and <code>comparisonOperator</code> properties.</p>\n"}},"comparisonOperator":{"$ref":"#/definitions/ComparisonOperator","description":"#### The arithmetic operation to use when comparing the specified statistic and threshold.\n\n---\n\nSupported operators:\n- `GreaterThanThreshold`\n- `GreaterThanOrEqualToThreshold`\n- `LessThanThreshold`\n- `LessThanOrEqualToThreshold`","_MdxDesc":{"sd":"<p> The arithmetic operation to use when comparing the specified statistic and threshold.</p>\n","ld":"<p>Supported operators:</p>\n<ul>\n<li><code>GreaterThanThreshold</code></li>\n<li><code>GreaterThanOrEqualToThreshold</code></li>\n<li><code>LessThanThreshold</code></li>\n<li><code>LessThanOrEqualToThreshold</code></li>\n</ul>\n"}},"statistic":{"$ref":"#/definitions/StatisticFunction","description":"#### The statistic to apply to the metric data points.\n\n---\n\nSupported statistics:\n- **avg**: The average of the metric values.\n- **sum**: The sum of the metric values.\n- **p90**: The 90th percentile. 90% of the data points are lower than this value.\n- **p95**: The 95th percentile. 95% of the data points are lower than this value.\n- **p99**: The 99th percentile. 99% of the data points are lower than this value.\n- **min**: The lowest value from the data points.\n- **max**: The highest value from the data points.","default":"avg","_MdxDesc":{"sd":"<p> The statistic to apply to the metric data points.</p>\n","ld":"<p>Supported statistics:</p>\n<ul>\n<li><strong>avg</strong>: The average of the metric values.</li>\n<li><strong>sum</strong>: The sum of the metric values.</li>\n<li><strong>p90</strong>: The 90th percentile. 90% of the data points are lower than this value.</li>\n<li><strong>p95</strong>: The 95th percentile. 95% of the data points are lower than this value.</li>\n<li><strong>p99</strong>: The 99th percentile. 99% of the data points are lower than this value.</li>\n<li><strong>min</strong>: The lowest value from the data points.</li>\n<li><strong>max</strong>: The highest value from the data points.</li>\n</ul>\n"}}},"additionalProperties":false,"required":["thresholdMilliseconds"]},"ServiceHelperContainer":{"type":"object","properties":{"containerType":{"description":"#### Container Type\n\n---\n\nThe type of the helper container.\n\n- **`run-on-init`:** Runs to completion before the main service container starts. The main container will wait for this container to exit with a code of 0. Ideal for setup tasks like database migrations.\n- **`always-running`:** Runs for the entire lifecycle of the service container. Ideal for supporting services like logging or monitoring agents.","enum":["always-running","run-on-init"],"type":"string","_MdxDesc":{"sd":"<p> Container Type</p>\n","ld":"<p>The type of the helper container.</p>\n<ul>\n<li><strong><code>run-on-init</code>:</strong> Runs to completion before the main service container starts. The main container will wait for this container to exit with a code of 0. Ideal for setup tasks like database migrations.</li>\n<li><strong><code>always-running</code>:</strong> Runs for the entire lifecycle of the service container. Ideal for supporting services like logging or monitoring agents.</li>\n</ul>\n"}},"name":{"description":"#### A unique name for the container within the workload.","type":"string","_MdxDesc":{"sd":"<p> A unique name for the container within the workload.</p>\n"}},"packaging":{"$ref":"#/definitions/ContainerWorkloadContainerPackaging","description":"#### Configures the container image.","_MdxDesc":{"sd":"<p> Configures the container image.</p>\n"}},"essential":{"description":"#### Determines if this container is critical for the workload's health.\n\n---\n\nIf an essential container fails or stops, all other containers in the same workload instance are also stopped. The entire instance is then terminated and replaced.","type":"boolean","_MdxDesc":{"sd":"<p> Determines if this container is critical for the workload&#39;s health.</p>\n","ld":"<p>If an essential container fails or stops, all other containers in the same workload instance are also stopped. The entire instance is then terminated and replaced.</p>\n"}},"logging":{"$ref":"#/definitions/ContainerWorkloadContainerLogging","description":"#### Configures the logging behavior for this container.\n\n---\n\nContainer logs (`stdout` and `stderr`) are automatically sent to a CloudWatch log group.\n\nYou can view logs in two ways:\n  - Through the AWS CloudWatch console. Use the `stacktape stack-info` command to get a direct link.\n  - Using the `stacktape logs` command to stream logs directly to your terminal.","_MdxDesc":{"sd":"<p> Configures the logging behavior for this container.</p>\n","ld":"<p>Container logs (<code>stdout</code> and <code>stderr</code>) are automatically sent to a CloudWatch log group.</p>\n<p>You can view logs in two ways:</p>\n<ul>\n<li>Through the AWS CloudWatch console. Use the <code>stacktape stack-info</code> command to get a direct link.</li>\n<li>Using the <code>stacktape logs</code> command to stream logs directly to your terminal.</li>\n</ul>\n"}},"dependsOn":{"description":"#### A list of other containers that this container depends on to start.\n\n---\n\nThis defines the startup order for containers within the workload.\nFor example, you can require a database container to be `HEALTHY` before your application container starts.","type":"array","items":{"$ref":"#/definitions/ContainerDependency"},"_MdxDesc":{"sd":"<p> A list of other containers that this container depends on to start.</p>\n","ld":"<p>This defines the startup order for containers within the workload.\nFor example, you can require a database container to be <code>HEALTHY</code> before your application container starts.</p>\n"}},"environment":{"description":"#### Environment variables to inject into the container.\n\n---\n\nEnvironment variables are ideal for providing configuration details to your container, such as database connection strings, API keys, or other dynamic parameters.","type":"array","items":{"$ref":"#/definitions/EnvironmentVar"},"_MdxDesc":{"sd":"<p> Environment variables to inject into the container.</p>\n","ld":"<p>Environment variables are ideal for providing configuration details to your container, such as database connection strings, API keys, or other dynamic parameters.</p>\n"}},"internalHealthCheck":{"$ref":"#/definitions/ContainerHealthCheck","description":"#### Configures an internal health check to determine if the container is healthy.\n\n---\n\nIf this health check fails for an essential container, the entire workload instance will be terminated and replaced.","_MdxDesc":{"sd":"<p> Configures an internal health check to determine if the container is healthy.</p>\n","ld":"<p>If this health check fails for an essential container, the entire workload instance will be terminated and replaced.</p>\n"}},"stopTimeout":{"description":"#### The time (in seconds) to wait before forcefully killing the container if it doesn't shut down gracefully.\n\n---\n\nWhen a container is stopped, it first receives a `SIGTERM` signal. If it doesn't exit within this timeout, it will be sent a `SIGKILL` signal.\nThis allows for graceful shutdown procedures. The timeout must be between 2 and 120 seconds.","default":2,"type":"number","_MdxDesc":{"sd":"<p> The time (in seconds) to wait before forcefully killing the container if it doesn&#39;t shut down gracefully.</p>\n","ld":"<p>When a container is stopped, it first receives a <code>SIGTERM</code> signal. If it doesn&#39;t exit within this timeout, it will be sent a <code>SIGKILL</code> signal.\nThis allows for graceful shutdown procedures. The timeout must be between 2 and 120 seconds.</p>\n"}},"volumeMounts":{"description":"#### A list of file system volumes to mount to the container.\n\n---\n\nVolumes provide persistent storage that can be shared across multiple containers and persists even if the container is stopped or replaced.\nCurrently, only EFS (Elastic File System) volumes are supported.","type":"array","items":{"$ref":"#/definitions/ContainerEfsMount"},"_MdxDesc":{"sd":"<p> A list of file system volumes to mount to the container.</p>\n","ld":"<p>Volumes provide persistent storage that can be shared across multiple containers and persists even if the container is stopped or replaced.\nCurrently, only EFS (Elastic File System) volumes are supported.</p>\n"}}},"additionalProperties":false,"required":["containerType","name","packaging"]},"PrivateService":{"description":"#### Private Service\n\n---\n\nA continuously running container with a private endpoint that is only accessible from within your private network (VPC).\nIt provides an easy setup for scaling, health checks, and other properties.","type":"object","properties":{"type":{"type":"string","const":"private-service"},"properties":{"$ref":"#/definitions/PrivateServiceProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Private Service</p>\n","ld":"<p>A continuously running container with a private endpoint that is only accessible from within your private network (VPC).\nIt provides an easy setup for scaling, health checks, and other properties.</p>\n"}},"PrivateServiceProps":{"type":"object","properties":{"port":{"description":"#### The port on which the service is available to other resources in the stack.\n\n---\n\nThe port is injected into the container's runtime as the `PORT` environment variable.\n\n> If `loadBalancing` is set to `service-connect` (the default), connections are only possible from other container-based resources (e.g., web services, worker services, multi-container workloads).","default":3000,"type":"number","_MdxDesc":{"sd":"<p> The port on which the service is available to other resources in the stack.</p>\n","ld":"<p>The port is injected into the container&#39;s runtime as the <code>PORT</code> environment variable.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>If <code>loadBalancing</code> is set to <code>service-connect</code> (the default), connections are only possible from other container-based resources (e.g., web services, worker services, multi-container workloads).</p>\n</div>\n</div>"}},"protocol":{"description":"#### The Service Connect protocol type.\n\n---\n\nIf you specify this parameter, AWS is able to capture protocol-specific metrics for the service (e.g., HTTP 5xx responses).","enum":["grpc","http","http2"],"type":"string","_MdxDesc":{"sd":"<p> The Service Connect protocol type.</p>\n","ld":"<p>If you specify this parameter, AWS is able to capture protocol-specific metrics for the service (e.g., HTTP 5xx responses).</p>\n"}},"loadBalancing":{"$ref":"#/definitions/PrivateServiceLoadBalancing","description":"#### Configures the load balancing mechanism to use.\n\n---\n\nSupported types are `service-connect` and `application-load-balancer`.\n\n- **`service-connect`**:\n  - Distributes traffic evenly to available containers.\n  - Connections are only possible from other container-based resources in the stack.\n  - Supports any TCP protocol.\n  - This option is significantly cheaper, costing only ~$0.50 per month for a private Cloud Map DNS namespace.\n\n- **`application-load-balancer`**:\n  - Distributes traffic to available containers in a round-robin fashion.\n  - Supports the HTTP protocol only.\n  - Uses a pricing model that combines a flat hourly charge (~$0.0252/hour) with usage-based charges for LCUs (Load Balancer Capacity Units) (~$0.08/hour).\n  - Eligible for the AWS Free Tier. For more details, see the [AWS pricing documentation](https://aws.amazon.com/elasticloadbalancing/pricing/).","default":"service-connect","_MdxDesc":{"sd":"<p> Configures the load balancing mechanism to use.</p>\n","ld":"<p>Supported types are <code>service-connect</code> and <code>application-load-balancer</code>.</p>\n<ul>\n<li><p><strong><code>service-connect</code></strong>:</p>\n<ul>\n<li>Distributes traffic evenly to available containers.</li>\n<li>Connections are only possible from other container-based resources in the stack.</li>\n<li>Supports any TCP protocol.</li>\n<li>This option is significantly cheaper, costing only ~$0.50 per month for a private Cloud Map DNS namespace.</li>\n</ul>\n</li>\n<li><p><strong><code>application-load-balancer</code></strong>:</p>\n<ul>\n<li>Distributes traffic to available containers in a round-robin fashion.</li>\n<li>Supports the HTTP protocol only.</li>\n<li>Uses a pricing model that combines a flat hourly charge (<del>$0.0252/hour) with usage-based charges for LCUs (Load Balancer Capacity Units) (</del>$0.08/hour).</li>\n<li>Eligible for the AWS Free Tier. For more details, see the <a href=\"https://aws.amazon.com/elasticloadbalancing/pricing/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS pricing documentation</a>.</li>\n</ul>\n</li>\n</ul>\n"}},"packaging":{"$ref":"#/definitions/ContainerWorkloadContainerPackaging","description":"#### Container Packaging\n\n---\n\nConfigures the container image for the service.","_MdxDesc":{"sd":"<p> Container Packaging</p>\n","ld":"<p>Configures the container image for the service.</p>\n"}},"environment":{"description":"#### Environment Variables\n\n---\n\nA list of environment variables to inject into the container at runtime. This is often used to provide configuration details, such as database URLs or secrets.","type":"array","items":{"$ref":"#/definitions/EnvironmentVar"},"_MdxDesc":{"sd":"<p> Environment Variables</p>\n","ld":"<p>A list of environment variables to inject into the container at runtime. This is often used to provide configuration details, such as database URLs or secrets.</p>\n"}},"logging":{"$ref":"#/definitions/ContainerWorkloadContainerLogging","description":"#### Logging Configuration\n\n---\n\nConfigures the logging behavior for the service container.\n\nContainer logs (from `stdout` and `stderr`) are automatically sent to a CloudWatch log group and retained for 180 days by default. You can view logs in the AWS CloudWatch console or by using the [`stacktape logs` command](https://docs.stacktape.com/cli/commands/logs/).","_MdxDesc":{"sd":"<p> Logging Configuration</p>\n","ld":"<p>Configures the logging behavior for the service container.</p>\n<p>Container logs (from <code>stdout</code> and <code>stderr</code>) are automatically sent to a CloudWatch log group and retained for 180 days by default. You can view logs in the AWS CloudWatch console or by using the <a href=\"/cli/commands/logs/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">`stacktape logs` command</a>.</p>\n"}},"resources":{"$ref":"#/definitions/ContainerWorkloadResourcesConfig","description":"#### Resource Allocation\n\n---\n\nConfigures the CPU, memory, and underlying compute engine for the service container.\n\nYou can choose between two compute engines:\n- **Fargate:** A serverless engine that abstracts away server management. To use Fargate, specify `cpu` and `memory` without `instanceTypes`.\n- **EC2:** Provides direct control over the underlying virtual servers. To use EC2, specify the desired `instanceTypes`.","_MdxDesc":{"sd":"<p> Resource Allocation</p>\n","ld":"<p>Configures the CPU, memory, and underlying compute engine for the service container.</p>\n<p>You can choose between two compute engines:</p>\n<ul>\n<li><strong>Fargate:</strong> A serverless engine that abstracts away server management. To use Fargate, specify <code>cpu</code> and <code>memory</code> without <code>instanceTypes</code>.</li>\n<li><strong>EC2:</strong> Provides direct control over the underlying virtual servers. To use EC2, specify the desired <code>instanceTypes</code>.</li>\n</ul>\n"}},"scaling":{"$ref":"#/definitions/ContainerWorkloadScaling","description":"#### Scaling Configuration\n\n---\n\nConfigures horizontal scaling by adding or removing container instances based on demand. Incoming requests are automatically distributed across all available containers.","_MdxDesc":{"sd":"<p> Scaling Configuration</p>\n","ld":"<p>Configures horizontal scaling by adding or removing container instances based on demand. Incoming requests are automatically distributed across all available containers.</p>\n"}},"internalHealthCheck":{"$ref":"#/definitions/ContainerHealthCheck","description":"#### Internal Health Check\n\n---\n\nConfigures an internal health check to monitor the container's status. If a container fails the health check, it is automatically terminated and replaced with a new one.","_MdxDesc":{"sd":"<p> Internal Health Check</p>\n","ld":"<p>Configures an internal health check to monitor the container&#39;s status. If a container fails the health check, it is automatically terminated and replaced with a new one.</p>\n"}},"stopTimeout":{"description":"#### Stop Timeout\n\n---\n\nThe amount of time (in seconds) to wait before a container is forcefully killed if it does not exit gracefully.\n\nWhen a container is stopped, it receives a `SIGTERM` signal. If it doesn't exit within the timeout period, it receives a `SIGKILL` signal. This allows for graceful shutdown and cleanup. The timeout must be between 2 and 120 seconds.","default":2,"type":"number","_MdxDesc":{"sd":"<p> Stop Timeout</p>\n","ld":"<p>The amount of time (in seconds) to wait before a container is forcefully killed if it does not exit gracefully.</p>\n<p>When a container is stopped, it receives a <code>SIGTERM</code> signal. If it doesn&#39;t exit within the timeout period, it receives a <code>SIGKILL</code> signal. This allows for graceful shutdown and cleanup. The timeout must be between 2 and 120 seconds.</p>\n"}},"enableRemoteSessions":{"description":"#### Enable Remote Sessions\n\n---\n\nIf `true`, allows you to start an interactive shell session inside a running container using the `stacktape container:session` command.\n\nThis uses AWS ECS Exec and SSM Session Manager for secure connections. It runs a small agent alongside your application, which consumes a minimal amount of CPU and memory. This is useful for debugging and inspecting deployed containers.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enable Remote Sessions</p>\n","ld":"<p>If <code>true</code>, allows you to start an interactive shell session inside a running container using the <code>stacktape container:session</code> command.</p>\n<p>This uses AWS ECS Exec and SSM Session Manager for secure connections. It runs a small agent alongside your application, which consumes a minimal amount of CPU and memory. This is useful for debugging and inspecting deployed containers.</p>\n"}},"volumeMounts":{"description":"#### Volume Mounts\n\n---\n\nA list of volumes to attach to the container for persistent storage.\n\nCurrently, only EFS (Elastic File System) volumes are supported. Volumes can be shared across multiple containers and persist even if the container is stopped or replaced.","type":"array","items":{"$ref":"#/definitions/ContainerEfsMount"},"_MdxDesc":{"sd":"<p> Volume Mounts</p>\n","ld":"<p>A list of volumes to attach to the container for persistent storage.</p>\n<p>Currently, only EFS (Elastic File System) volumes are supported. Volumes can be shared across multiple containers and persist even if the container is stopped or replaced.</p>\n"}},"sideContainers":{"description":"#### Sidecar Containers\n\n---\n\nA list of helper containers that run alongside the main service container to provide additional functionality.\n\n- **`run-on-init`:** Runs to completion before the main service container starts. Ideal for setup tasks like database migrations.\n- **`always-running`:** Runs for the entire lifecycle of the service container. Ideal for supporting services like logging, monitoring, or debugging agents.\n\n`always-running` containers can communicate with the main container via `localhost` on its exposed ports.","type":"array","items":{"$ref":"#/definitions/ServiceHelperContainer"},"_MdxDesc":{"sd":"<p> Sidecar Containers</p>\n","ld":"<p>A list of helper containers that run alongside the main service container to provide additional functionality.</p>\n<ul>\n<li><strong><code>run-on-init</code>:</strong> Runs to completion before the main service container starts. Ideal for setup tasks like database migrations.</li>\n<li><strong><code>always-running</code>:</strong> Runs for the entire lifecycle of the service container. Ideal for supporting services like logging, monitoring, or debugging agents.</li>\n</ul>\n<p><code>always-running</code> containers can communicate with the main container via <code>localhost</code> on its exposed ports.</p>\n"}},"usePrivateSubnetsWithNAT":{"description":"#### Deploys the service in private subnets with internet access through NAT Gateway.\n\n---\n\nWhen the service is in a private subnet, it does not have public IP and direct internet access.\nInstead, all outbound internet traffic is routed through a NAT Gateway.\n\nYou can assign a static public IP address to the NAT Gateway and configure high availability using `stackConfig.vpcSettings`.\nThis allows you to whitelist your service's IP address in external services (e.g., third-party APIs, databases, payment gateways).\n\n**Cost considerations:**\n- NAT Gateways incur additional AWS charges for both the gateway itself and data processing","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Deploys the service in private subnets with internet access through NAT Gateway.</p>\n","ld":"<p>When the service is in a private subnet, it does not have public IP and direct internet access.\nInstead, all outbound internet traffic is routed through a NAT Gateway.</p>\n<p>You can assign a static public IP address to the NAT Gateway and configure high availability using <code>stackConfig.vpcSettings</code>.\nThis allows you to whitelist your service&#39;s IP address in external services (e.g., third-party APIs, databases, payment gateways).</p>\n<p><strong>Cost considerations:</strong></p>\n<ul>\n<li>NAT Gateways incur additional AWS charges for both the gateway itself and data processing</li>\n</ul>\n"}},"connectTo":{"description":"#### Connect To\n\n---\n\nConfigures access to other resources in your stack and AWS services. By specifying resources here, Stacktape automatically:\n- Configures IAM role permissions.\n- Sets up security group rules to allow network traffic.\n- Injects environment variables with connection details into the compute resource.\n\nEnvironment variables are named `STP_[RESOURCE_NAME]_[VARIABLE_NAME]` (e.g., `STP_MY_DATABASE_CONNECTION_STRING`).\n\n---\n\n#### Granted Permissions and Injected Variables:\n\n**`Bucket`**\n- **Permissions:** List, create, get, delete, and tag objects.\n- **Variables:** `NAME`, `ARN`\n\n**`DynamoDbTable`**\n- **Permissions:** Get, put, update, delete, scan, and query items; describe table stream.\n- **Variables:** `NAME`, `ARN`, `STREAM_ARN`\n\n**`MongoDbAtlasCluster`**\n- **Permissions:** Allows connection to clusters with `accessibilityMode` set to `scoping-workloads-in-vpc`. Creates a temporary user for secure, credential-less access.\n- **Variables:** `CONNECTION_STRING`\n\n**`RelationalDatabase`**\n- **Permissions:** Allows connection to databases with `accessibilityMode` set to `scoping-workloads-in-vpc`.\n- **Variables:** `CONNECTION_STRING`, `JDBC_CONNECTION_STRING`, `HOST`, `PORT`. For Aurora clusters, `READER_CONNECTION_STRING`, `READER_JDBC_CONNECTION_STRING`, and `READER_HOST` are also included.\n\n**`RedisCluster`**\n- **Permissions:** Allows connection to clusters with `accessibilityMode` set to `scoping-workloads-in-vpc`.\n- **Variables:** `HOST`, `READER_HOST`, `PORT`\n\n**`EventBus`**\n- **Permissions:** Publish events.\n- **Variables:** `ARN`\n\n**`Function`**\n- **Permissions:** Invoke the function, including via its URL if enabled.\n- **Variables:** `ARN`\n\n**`BatchJob`**\n- **Permissions:** Submit, list, describe, and terminate jobs; manage state machine executions.\n- **Variables:** `JOB_DEFINITION_ARN`, `STATE_MACHINE_ARN`\n\n**`UserAuthPool`**\n- **Permissions:** Full control over the user pool (`cognito-idp:*`).\n- **Variables:** `ID`, `CLIENT_ID`, `ARN`\n\n**`SnsTopic`**\n- **Permissions:** Confirm, list, publish, and manage subscriptions.\n- **Variables:** `ARN`, `NAME`\n\n**`SqsQueue`**\n- **Permissions:** Send, receive, delete, and purge messages.\n- **Variables:** `ARN`, `NAME`, `URL`\n\n**`UpstashKafkaTopic`**\n- **Variables:** `TOPIC_NAME`, `TOPIC_ID`, `USERNAME`, `PASSWORD`, `TCP_ENDPOINT`, `REST_URL`\n\n**`UpstashRedis`**\n- **Variables:** `HOST`, `PORT`, `PASSWORD`, `REST_TOKEN`, `REST_URL`, `REDIS_URL`\n\n**`PrivateService`**\n- **Variables:** `ADDRESS`\n\n**`aws:ses` (Macro)**\n- **Permissions:** Full permissions for AWS SES (`ses:*`).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Connect To</p>\n","ld":"<p>Configures access to other resources in your stack and AWS services. By specifying resources here, Stacktape automatically:</p>\n<ul>\n<li>Configures IAM role permissions.</li>\n<li>Sets up security group rules to allow network traffic.</li>\n<li>Injects environment variables with connection details into the compute resource.</li>\n</ul>\n<p>Environment variables are named <code>STP_[RESOURCE_NAME]_[VARIABLE_NAME]</code> (e.g., <code>STP_MY_DATABASE_CONNECTION_STRING</code>).</p>\n"}},"iamRoleStatements":{"description":"#### Custom IAM Role Statements\n\n---\n\nA list of raw AWS IAM role statements to append to the resource's role, allowing for fine-grained permission control.","type":"array","items":{"$ref":"#/definitions/StpIamRoleStatement"},"_MdxDesc":{"sd":"<p> Custom IAM Role Statements</p>\n","ld":"<p>A list of raw AWS IAM role statements to append to the resource&#39;s role, allowing for fine-grained permission control.</p>\n"}}},"additionalProperties":false,"required":["packaging","resources"]},"PrivateServiceLoadBalancing":{"type":"object","properties":{"type":{"enum":["application-load-balancer","service-connect"],"type":"string"}},"additionalProperties":false,"required":["type"]},"WorkerService":{"description":"#### Worker Service\n\n---\n\nA continuously running container that is inaccessible from the internet.\nIdeal for background jobs and processing tasks.","type":"object","properties":{"type":{"type":"string","const":"worker-service"},"properties":{"$ref":"#/definitions/WorkerServiceProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Worker Service</p>\n","ld":"<p>A continuously running container that is inaccessible from the internet.\nIdeal for background jobs and processing tasks.</p>\n"}},"WorkerServiceProps":{"type":"object","properties":{"packaging":{"$ref":"#/definitions/ContainerWorkloadContainerPackaging","description":"#### Container Packaging\n\n---\n\nConfigures the container image for the service.","_MdxDesc":{"sd":"<p> Container Packaging</p>\n","ld":"<p>Configures the container image for the service.</p>\n"}},"environment":{"description":"#### Environment Variables\n\n---\n\nA list of environment variables to inject into the container at runtime. This is often used to provide configuration details, such as database URLs or secrets.","type":"array","items":{"$ref":"#/definitions/EnvironmentVar"},"_MdxDesc":{"sd":"<p> Environment Variables</p>\n","ld":"<p>A list of environment variables to inject into the container at runtime. This is often used to provide configuration details, such as database URLs or secrets.</p>\n"}},"logging":{"$ref":"#/definitions/ContainerWorkloadContainerLogging","description":"#### Logging Configuration\n\n---\n\nConfigures the logging behavior for the service container.\n\nContainer logs (from `stdout` and `stderr`) are automatically sent to a CloudWatch log group and retained for 180 days by default. You can view logs in the AWS CloudWatch console or by using the [`stacktape logs` command](https://docs.stacktape.com/cli/commands/logs/).","_MdxDesc":{"sd":"<p> Logging Configuration</p>\n","ld":"<p>Configures the logging behavior for the service container.</p>\n<p>Container logs (from <code>stdout</code> and <code>stderr</code>) are automatically sent to a CloudWatch log group and retained for 180 days by default. You can view logs in the AWS CloudWatch console or by using the <a href=\"/cli/commands/logs/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">`stacktape logs` command</a>.</p>\n"}},"resources":{"$ref":"#/definitions/ContainerWorkloadResourcesConfig","description":"#### Resource Allocation\n\n---\n\nConfigures the CPU, memory, and underlying compute engine for the service container.\n\nYou can choose between two compute engines:\n- **Fargate:** A serverless engine that abstracts away server management. To use Fargate, specify `cpu` and `memory` without `instanceTypes`.\n- **EC2:** Provides direct control over the underlying virtual servers. To use EC2, specify the desired `instanceTypes`.","_MdxDesc":{"sd":"<p> Resource Allocation</p>\n","ld":"<p>Configures the CPU, memory, and underlying compute engine for the service container.</p>\n<p>You can choose between two compute engines:</p>\n<ul>\n<li><strong>Fargate:</strong> A serverless engine that abstracts away server management. To use Fargate, specify <code>cpu</code> and <code>memory</code> without <code>instanceTypes</code>.</li>\n<li><strong>EC2:</strong> Provides direct control over the underlying virtual servers. To use EC2, specify the desired <code>instanceTypes</code>.</li>\n</ul>\n"}},"scaling":{"$ref":"#/definitions/ContainerWorkloadScaling","description":"#### Scaling Configuration\n\n---\n\nConfigures horizontal scaling by adding or removing container instances based on demand. Incoming requests are automatically distributed across all available containers.","_MdxDesc":{"sd":"<p> Scaling Configuration</p>\n","ld":"<p>Configures horizontal scaling by adding or removing container instances based on demand. Incoming requests are automatically distributed across all available containers.</p>\n"}},"internalHealthCheck":{"$ref":"#/definitions/ContainerHealthCheck","description":"#### Internal Health Check\n\n---\n\nConfigures an internal health check to monitor the container's status. If a container fails the health check, it is automatically terminated and replaced with a new one.","_MdxDesc":{"sd":"<p> Internal Health Check</p>\n","ld":"<p>Configures an internal health check to monitor the container&#39;s status. If a container fails the health check, it is automatically terminated and replaced with a new one.</p>\n"}},"stopTimeout":{"description":"#### Stop Timeout\n\n---\n\nThe amount of time (in seconds) to wait before a container is forcefully killed if it does not exit gracefully.\n\nWhen a container is stopped, it receives a `SIGTERM` signal. If it doesn't exit within the timeout period, it receives a `SIGKILL` signal. This allows for graceful shutdown and cleanup. The timeout must be between 2 and 120 seconds.","default":2,"type":"number","_MdxDesc":{"sd":"<p> Stop Timeout</p>\n","ld":"<p>The amount of time (in seconds) to wait before a container is forcefully killed if it does not exit gracefully.</p>\n<p>When a container is stopped, it receives a <code>SIGTERM</code> signal. If it doesn&#39;t exit within the timeout period, it receives a <code>SIGKILL</code> signal. This allows for graceful shutdown and cleanup. The timeout must be between 2 and 120 seconds.</p>\n"}},"enableRemoteSessions":{"description":"#### Enable Remote Sessions\n\n---\n\nIf `true`, allows you to start an interactive shell session inside a running container using the `stacktape container:session` command.\n\nThis uses AWS ECS Exec and SSM Session Manager for secure connections. It runs a small agent alongside your application, which consumes a minimal amount of CPU and memory. This is useful for debugging and inspecting deployed containers.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enable Remote Sessions</p>\n","ld":"<p>If <code>true</code>, allows you to start an interactive shell session inside a running container using the <code>stacktape container:session</code> command.</p>\n<p>This uses AWS ECS Exec and SSM Session Manager for secure connections. It runs a small agent alongside your application, which consumes a minimal amount of CPU and memory. This is useful for debugging and inspecting deployed containers.</p>\n"}},"volumeMounts":{"description":"#### Volume Mounts\n\n---\n\nA list of volumes to attach to the container for persistent storage.\n\nCurrently, only EFS (Elastic File System) volumes are supported. Volumes can be shared across multiple containers and persist even if the container is stopped or replaced.","type":"array","items":{"$ref":"#/definitions/ContainerEfsMount"},"_MdxDesc":{"sd":"<p> Volume Mounts</p>\n","ld":"<p>A list of volumes to attach to the container for persistent storage.</p>\n<p>Currently, only EFS (Elastic File System) volumes are supported. Volumes can be shared across multiple containers and persist even if the container is stopped or replaced.</p>\n"}},"sideContainers":{"description":"#### Sidecar Containers\n\n---\n\nA list of helper containers that run alongside the main service container to provide additional functionality.\n\n- **`run-on-init`:** Runs to completion before the main service container starts. Ideal for setup tasks like database migrations.\n- **`always-running`:** Runs for the entire lifecycle of the service container. Ideal for supporting services like logging, monitoring, or debugging agents.\n\n`always-running` containers can communicate with the main container via `localhost` on its exposed ports.","type":"array","items":{"$ref":"#/definitions/ServiceHelperContainer"},"_MdxDesc":{"sd":"<p> Sidecar Containers</p>\n","ld":"<p>A list of helper containers that run alongside the main service container to provide additional functionality.</p>\n<ul>\n<li><strong><code>run-on-init</code>:</strong> Runs to completion before the main service container starts. Ideal for setup tasks like database migrations.</li>\n<li><strong><code>always-running</code>:</strong> Runs for the entire lifecycle of the service container. Ideal for supporting services like logging, monitoring, or debugging agents.</li>\n</ul>\n<p><code>always-running</code> containers can communicate with the main container via <code>localhost</code> on its exposed ports.</p>\n"}},"usePrivateSubnetsWithNAT":{"description":"#### Deploys the service in private subnets with internet access through NAT Gateway.\n\n---\n\nWhen the service is in a private subnet, it does not have public IP and direct internet access.\nInstead, all outbound internet traffic is routed through a NAT Gateway.\n\nYou can assign a static public IP address to the NAT Gateway and configure high availability using `stackConfig.vpcSettings`.\nThis allows you to whitelist your service's IP address in external services (e.g., third-party APIs, databases, payment gateways).\n\n**Cost considerations:**\n- NAT Gateways incur additional AWS charges for both the gateway itself and data processing","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Deploys the service in private subnets with internet access through NAT Gateway.</p>\n","ld":"<p>When the service is in a private subnet, it does not have public IP and direct internet access.\nInstead, all outbound internet traffic is routed through a NAT Gateway.</p>\n<p>You can assign a static public IP address to the NAT Gateway and configure high availability using <code>stackConfig.vpcSettings</code>.\nThis allows you to whitelist your service&#39;s IP address in external services (e.g., third-party APIs, databases, payment gateways).</p>\n<p><strong>Cost considerations:</strong></p>\n<ul>\n<li>NAT Gateways incur additional AWS charges for both the gateway itself and data processing</li>\n</ul>\n"}},"connectTo":{"description":"#### Connect To\n\n---\n\nConfigures access to other resources in your stack and AWS services. By specifying resources here, Stacktape automatically:\n- Configures IAM role permissions.\n- Sets up security group rules to allow network traffic.\n- Injects environment variables with connection details into the compute resource.\n\nEnvironment variables are named `STP_[RESOURCE_NAME]_[VARIABLE_NAME]` (e.g., `STP_MY_DATABASE_CONNECTION_STRING`).\n\n---\n\n#### Granted Permissions and Injected Variables:\n\n**`Bucket`**\n- **Permissions:** List, create, get, delete, and tag objects.\n- **Variables:** `NAME`, `ARN`\n\n**`DynamoDbTable`**\n- **Permissions:** Get, put, update, delete, scan, and query items; describe table stream.\n- **Variables:** `NAME`, `ARN`, `STREAM_ARN`\n\n**`MongoDbAtlasCluster`**\n- **Permissions:** Allows connection to clusters with `accessibilityMode` set to `scoping-workloads-in-vpc`. Creates a temporary user for secure, credential-less access.\n- **Variables:** `CONNECTION_STRING`\n\n**`RelationalDatabase`**\n- **Permissions:** Allows connection to databases with `accessibilityMode` set to `scoping-workloads-in-vpc`.\n- **Variables:** `CONNECTION_STRING`, `JDBC_CONNECTION_STRING`, `HOST`, `PORT`. For Aurora clusters, `READER_CONNECTION_STRING`, `READER_JDBC_CONNECTION_STRING`, and `READER_HOST` are also included.\n\n**`RedisCluster`**\n- **Permissions:** Allows connection to clusters with `accessibilityMode` set to `scoping-workloads-in-vpc`.\n- **Variables:** `HOST`, `READER_HOST`, `PORT`\n\n**`EventBus`**\n- **Permissions:** Publish events.\n- **Variables:** `ARN`\n\n**`Function`**\n- **Permissions:** Invoke the function, including via its URL if enabled.\n- **Variables:** `ARN`\n\n**`BatchJob`**\n- **Permissions:** Submit, list, describe, and terminate jobs; manage state machine executions.\n- **Variables:** `JOB_DEFINITION_ARN`, `STATE_MACHINE_ARN`\n\n**`UserAuthPool`**\n- **Permissions:** Full control over the user pool (`cognito-idp:*`).\n- **Variables:** `ID`, `CLIENT_ID`, `ARN`\n\n**`SnsTopic`**\n- **Permissions:** Confirm, list, publish, and manage subscriptions.\n- **Variables:** `ARN`, `NAME`\n\n**`SqsQueue`**\n- **Permissions:** Send, receive, delete, and purge messages.\n- **Variables:** `ARN`, `NAME`, `URL`\n\n**`UpstashKafkaTopic`**\n- **Variables:** `TOPIC_NAME`, `TOPIC_ID`, `USERNAME`, `PASSWORD`, `TCP_ENDPOINT`, `REST_URL`\n\n**`UpstashRedis`**\n- **Variables:** `HOST`, `PORT`, `PASSWORD`, `REST_TOKEN`, `REST_URL`, `REDIS_URL`\n\n**`PrivateService`**\n- **Variables:** `ADDRESS`\n\n**`aws:ses` (Macro)**\n- **Permissions:** Full permissions for AWS SES (`ses:*`).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Connect To</p>\n","ld":"<p>Configures access to other resources in your stack and AWS services. By specifying resources here, Stacktape automatically:</p>\n<ul>\n<li>Configures IAM role permissions.</li>\n<li>Sets up security group rules to allow network traffic.</li>\n<li>Injects environment variables with connection details into the compute resource.</li>\n</ul>\n<p>Environment variables are named <code>STP_[RESOURCE_NAME]_[VARIABLE_NAME]</code> (e.g., <code>STP_MY_DATABASE_CONNECTION_STRING</code>).</p>\n"}},"iamRoleStatements":{"description":"#### Custom IAM Role Statements\n\n---\n\nA list of raw AWS IAM role statements to append to the resource's role, allowing for fine-grained permission control.","type":"array","items":{"$ref":"#/definitions/StpIamRoleStatement"},"_MdxDesc":{"sd":"<p> Custom IAM Role Statements</p>\n","ld":"<p>A list of raw AWS IAM role statements to append to the resource&#39;s role, allowing for fine-grained permission control.</p>\n"}}},"additionalProperties":false,"required":["packaging","resources"]},"RelationalDatabase":{"description":"#### A fully managed relational (SQL) database resource.\n\n---\n\nSupports various database engines like PostgreSQL, MySQL, and MariaDB, with features like clustering and high availability.","type":"object","properties":{"type":{"type":"string","const":"relational-database"},"properties":{"$ref":"#/definitions/RelationalDatabaseProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> A fully managed relational (SQL) database resource.</p>\n","ld":"<p>Supports various database engines like PostgreSQL, MySQL, and MariaDB, with features like clustering and high availability.</p>\n"}},"RelationalDatabaseProps":{"type":"object","properties":{"credentials":{"$ref":"#/definitions/RelationalDatabaseCredentials","description":"#### Configures the credentials for the database's master user.\n\n---\n\nThese credentials are used to connect to the database and are included in the connection string.","_MdxDesc":{"sd":"<p> Configures the credentials for the database&#39;s master user.</p>\n","ld":"<p>These credentials are used to connect to the database and are included in the connection string.</p>\n"}},"engine":{"description":"#### Configures the database engine.\n\n---\n\nThe engine determines the database type (e.g., PostgreSQL, MySQL), performance characteristics, and features like high availability and scaling.\n\nStacktape supports several engine types:\n\n- **RDS Engines**: Fully managed, single-node databases (e.g., `postgres`, `mysql`). Ideal for standard workloads.\n- **Aurora Engines**: High-performance, highly available clustered databases developed by AWS (e.g., `aurora-postgresql`, `aurora-mysql`).\n- **Aurora Serverless V2 Engines**: A serverless version of Aurora that automatically scales compute capacity based on demand (e.g., `aurora-postgresql-serverless-v2`). This is the recommended serverless option.\n\nFor more details on each engine, see the [AWS documentation](https://aws.amazon.com/rds/).","anyOf":[{"$ref":"#/definitions/AuroraEngine"},{"$ref":"#/definitions/AuroraServerlessEngine"},{"$ref":"#/definitions/AuroraServerlessV2Engine"},{"$ref":"#/definitions/RdsEngine"}],"_MdxDesc":{"sd":"<p> Configures the database engine.</p>\n","ld":"<p>The engine determines the database type (e.g., PostgreSQL, MySQL), performance characteristics, and features like high availability and scaling.</p>\n<p>Stacktape supports several engine types:</p>\n<ul>\n<li><strong>RDS Engines</strong>: Fully managed, single-node databases (e.g., <code>postgres</code>, <code>mysql</code>). Ideal for standard workloads.</li>\n<li><strong>Aurora Engines</strong>: High-performance, highly available clustered databases developed by AWS (e.g., <code>aurora-postgresql</code>, <code>aurora-mysql</code>).</li>\n<li><strong>Aurora Serverless V2 Engines</strong>: A serverless version of Aurora that automatically scales compute capacity based on demand (e.g., <code>aurora-postgresql-serverless-v2</code>). This is the recommended serverless option.</li>\n</ul>\n<p>For more details on each engine, see the <a href=\"https://aws.amazon.com/rds/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"accessibility":{"$ref":"#/definitions/DatabaseAccessibility","description":"#### Configures the network accessibility of the database.\n\n---\n\nBy default, the database is accessible from the internet (but still protected by credentials).\nYou can restrict access to a VPC, specific IP addresses, or only to other resources within your stack.","_MdxDesc":{"sd":"<p> Configures the network accessibility of the database.</p>\n","ld":"<p>By default, the database is accessible from the internet (but still protected by credentials).\nYou can restrict access to a VPC, specific IP addresses, or only to other resources within your stack.</p>\n"}},"deletionProtection":{"description":"#### Protects the database from accidental deletion.\n\n---\n\nIf enabled, you must explicitly disable this protection before you can delete the database.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Protects the database from accidental deletion.</p>\n","ld":"<p>If enabled, you must explicitly disable this protection before you can delete the database.</p>\n"}},"automatedBackupRetentionDays":{"description":"#### The number of days to retain automated backups.\n\n---\n\nAutomated backups are taken daily. You can retain them for up to 35 days.\nTo disable automated backups for RDS engines, set this to 0.\nThis setting does not affect manual snapshots.","default":1,"type":"number","_MdxDesc":{"sd":"<p> The number of days to retain automated backups.</p>\n","ld":"<p>Automated backups are taken daily. You can retain them for up to 35 days.\nTo disable automated backups for RDS engines, set this to 0.\nThis setting does not affect manual snapshots.</p>\n"}},"preferredMaintenanceWindow":{"description":"#### The preferred time window for database maintenance.\n\n---\n\nMaintenance activities, such as OS patching or engine upgrades, will be performed during this window.\nThe database may be briefly unavailable during maintenance. To avoid downtime, use a multi-AZ deployment or an Aurora engine.\n\nThe format is `day:start_time-day:end_time` in UTC (e.g., `Sun:02:00-Sun:04:00`).\nBy default, the maintenance window is set to a region-specific time on Sundays.","type":"string","_MdxDesc":{"sd":"<p> The preferred time window for database maintenance.</p>\n","ld":"<p>Maintenance activities, such as OS patching or engine upgrades, will be performed during this window.\nThe database may be briefly unavailable during maintenance. To avoid downtime, use a multi-AZ deployment or an Aurora engine.</p>\n<p>The format is <code>day:start_time-day:end_time</code> in UTC (e.g., <code>Sun:02:00-Sun:04:00</code>).\nBy default, the maintenance window is set to a region-specific time on Sundays.</p>\n"}},"alarms":{"description":"#### A list of additional alarms to associate with this database.\n\n---\n\nThese alarms are merged with any globally configured alarms from the Stacktape console.","type":"array","items":{"$ref":"#/definitions/RelationalDatabaseAlarm"},"_MdxDesc":{"sd":"<p> A list of additional alarms to associate with this database.</p>\n","ld":"<p>These alarms are merged with any globally configured alarms from the Stacktape console.</p>\n"}},"disabledGlobalAlarms":{"description":"#### A list of global alarm names to disable for this database.\n\n---\n\nUse this to prevent specific globally-defined alarms from applying to this database.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of global alarm names to disable for this database.</p>\n","ld":"<p>Use this to prevent specific globally-defined alarms from applying to this database.</p>\n"}},"logging":{"$ref":"#/definitions/RelationalDatabaseLogging","description":"#### Configures logging for the database.\n\n---\n\nBy default, logs are enabled and retained for 90 days.\nThe available log types depend on the database engine. You can log connections, queries, errors, and more.","_MdxDesc":{"sd":"<p> Configures logging for the database.</p>\n","ld":"<p>By default, logs are enabled and retained for 90 days.\nThe available log types depend on the database engine. You can log connections, queries, errors, and more.</p>\n"}}},"additionalProperties":false,"required":["credentials","engine"]},"RelationalDatabaseCredentials":{"type":"object","properties":{"masterUserName":{"description":"#### The username for the database's master user.\n\n---\n\nThis user will have administrative privileges for the database.\nAvoid using the following characters in the username: `[]{}(),;?*=!@`.\n\n> Changing this value after the database has been created will cause the database to be replaced, resulting in data loss.","default":"db_master_user","type":"string","_MdxDesc":{"sd":"<p> The username for the database&#39;s master user.</p>\n","ld":"<p>This user will have administrative privileges for the database.\nAvoid using the following characters in the username: <code>[]{}(),;?*=!@</code>.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>Changing this value after the database has been created will cause the database to be replaced, resulting in data loss.</p>\n</div>\n</div>"}},"masterUserPassword":{"description":"#### The password for the database's master user.\n\n---\n\nAvoid using the following characters in the password: `[]{}(),;?*=!@`.\n\n> **Recommendation:** Store the password in a [Stacktape secret](https://docs.stacktape.com/security-resources/secrets/) and reference it using the `$Secret` directive to avoid exposing it in your configuration file.","type":"string","_MdxDesc":{"sd":"<p> The password for the database&#39;s master user.</p>\n","ld":"<p>Avoid using the following characters in the password: <code>[]{}(),;?*=!@</code>.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Recommendation:</strong> Store the password in a <a href=\"/security-resources/secrets/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape secret</a> and reference it using the <code>$Secret</code> directive to avoid exposing it in your configuration file.</p>\n</div>\n</div>"}}},"additionalProperties":false,"required":["masterUserPassword"]},"AuroraEngine":{"description":"#### A high-performance Aurora clustered database engine.\n\n---\n\nAurora is a fully managed, MySQL and PostgreSQL-compatible database developed by AWS.\nIt offers up to 5x the throughput of standard MySQL and 3x the throughput of standard PostgreSQL.\n\nAurora automatically replicates data across multiple Availability Zones for high availability\nand provides automatic failover with read replicas.","type":"object","properties":{"type":{"enum":["aurora-mysql","aurora-postgresql"],"type":"string"},"properties":{"$ref":"#/definitions/AuroraEngineProperties"}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> A high-performance Aurora clustered database engine.</p>\n","ld":"<p>Aurora is a fully managed, MySQL and PostgreSQL-compatible database developed by AWS.\nIt offers up to 5x the throughput of standard MySQL and 3x the throughput of standard PostgreSQL.</p>\n<p>Aurora automatically replicates data across multiple Availability Zones for high availability\nand provides automatic failover with read replicas.</p>\n"}},"AuroraEngineProperties":{"type":"object","properties":{"dbName":{"description":"#### The name of the initial database to create.","default":"defdb","type":"string","_MdxDesc":{"sd":"<p> The name of the initial database to create.</p>\n"}},"port":{"description":"#### The port on which the database will listen for connections.\n\n---\n\n- `aurora-mysql`: 3306\n- `aurora-postgresql`: 5432","type":"number","_MdxDesc":{"sd":"<p> The port on which the database will listen for connections.</p>\n","ld":"<ul>\n<li><code>aurora-mysql</code>: 3306</li>\n<li><code>aurora-postgresql</code>: 5432</li>\n</ul>\n"}},"instances":{"description":"#### A list of database instances in the Aurora cluster.\n\n---\n\nThe first instance in the list is the primary (writer) instance. The rest are read replicas.\nRead requests are automatically load-balanced across all instances.\nIf the primary instance fails, a read replica is automatically promoted to be the new primary.","type":"array","items":{"$ref":"#/definitions/AuroraEngineInstance"},"_MdxDesc":{"sd":"<p> A list of database instances in the Aurora cluster.</p>\n","ld":"<p>The first instance in the list is the primary (writer) instance. The rest are read replicas.\nRead requests are automatically load-balanced across all instances.\nIf the primary instance fails, a read replica is automatically promoted to be the new primary.</p>\n"}},"version":{"description":"#### The version of the database engine.\n\n---\n\nEach engine type supports a specific set of versions.\nFor a full list, see the [Stacktape documentation](https://docs.stacktape.com/database-resources/relational-databases/#engine-version).","type":"string","_MdxDesc":{"sd":"<p> The version of the database engine.</p>\n","ld":"<p>Each engine type supports a specific set of versions.\nFor a full list, see the <a href=\"/database-resources/relational-databases/#engine-version\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape documentation</a>.</p>\n"}},"disableAutoMinorVersionUpgrade":{"description":"#### Specifies whether minor engine upgrades should be applied automatically.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Specifies whether minor engine upgrades should be applied automatically.</p>\n"}}},"additionalProperties":false,"required":["instances","version"]},"AuroraEngineInstance":{"type":"object","properties":{"instanceSize":{"description":"#### The instance size for the database.\n\n---\n\nThis determines the CPU, memory, and networking capacity of the database instance.\nFor a list of available instance sizes, see the [AWS Aurora pricing documentation](https://aws.amazon.com/rds/aurora/pricing/#Database%20Instances).\n\n> **Note:** Not all instance sizes are available for all engines, versions, and regions.\n> Some instance families (like `t3` or `t4`) are intended for development and testing, not production workloads.","type":"string","_MdxDesc":{"sd":"<p> The instance size for the database.</p>\n","ld":"<p>This determines the CPU, memory, and networking capacity of the database instance.\nFor a list of available instance sizes, see the <a href=\"https://aws.amazon.com/rds/aurora/pricing/#Database%20Instances\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS Aurora pricing documentation</a>.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> Not all instance sizes are available for all engines, versions, and regions.\nSome instance families (like <code>t3</code> or <code>t4</code>) are intended for development and testing, not production workloads.</p>\n</div>\n</div>"}}},"additionalProperties":false,"required":["instanceSize"]},"AuroraServerlessEngine":{"description":"#### An Aurora Serverless v1 database engine.\n\n---\n\nAurora Serverless v1 automatically scales compute capacity based on your application's needs.\nIt can pause during periods of inactivity and resume when traffic arrives, making it cost-effective\nfor variable or unpredictable workloads.\n\n**Note:** For new projects, consider using Aurora Serverless v2 which offers better scaling.","type":"object","properties":{"type":{"enum":["aurora-mysql-serverless","aurora-postgresql-serverless"],"type":"string"},"properties":{"$ref":"#/definitions/AuroraServerlessEngineProperties"}},"additionalProperties":false,"required":["type"],"_MdxDesc":{"sd":"<p> An Aurora Serverless v1 database engine.</p>\n","ld":"<p>Aurora Serverless v1 automatically scales compute capacity based on your application&#39;s needs.\nIt can pause during periods of inactivity and resume when traffic arrives, making it cost-effective\nfor variable or unpredictable workloads.</p>\n<p><strong>Note:</strong> For new projects, consider using Aurora Serverless v2 which offers better scaling.</p>\n"}},"AuroraServerlessEngineProperties":{"type":"object","properties":{"version":{"description":"#### The version of the database engine.\n\n---\n\nFor serverless engines, you typically don't need to specify this, as AWS manages the version.\nFor a list of supported versions, see the [Stacktape documentation](https://docs.stacktape.com/database-resources/relational-databases/#engine-version).","type":"string","_MdxDesc":{"sd":"<p> The version of the database engine.</p>\n","ld":"<p>For serverless engines, you typically don&#39;t need to specify this, as AWS manages the version.\nFor a list of supported versions, see the <a href=\"/database-resources/relational-databases/#engine-version\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape documentation</a>.</p>\n"}},"dbName":{"description":"#### The name of the initial database to create.","default":"defdb","type":"string","_MdxDesc":{"sd":"<p> The name of the initial database to create.</p>\n"}},"minCapacity":{"description":"#### The minimum number of Aurora Capacity Units (ACUs) for the database to scale down to.\n\n---\n\nEach ACU provides approximately 2 GB of memory and corresponding CPU and networking.\n\n**Allowed values:**\n- `aurora-mysql-serverless`: 1, 2, 4, 8, 16, 32, 64, 128, 256\n- `aurora-postgresql-serverless`: 2, 4, 8, 16, 32, 64, 128, 256","default":2,"type":"number","_MdxDesc":{"sd":"<p> The minimum number of Aurora Capacity Units (ACUs) for the database to scale down to.</p>\n","ld":"<p>Each ACU provides approximately 2 GB of memory and corresponding CPU and networking.</p>\n<p><strong>Allowed values:</strong></p>\n<ul>\n<li><code>aurora-mysql-serverless</code>: 1, 2, 4, 8, 16, 32, 64, 128, 256</li>\n<li><code>aurora-postgresql-serverless</code>: 2, 4, 8, 16, 32, 64, 128, 256</li>\n</ul>\n"}},"maxCapacity":{"description":"#### The maximum number of Aurora Capacity Units (ACUs) for the database to scale up to.\n\n---\n\n**Allowed values:**\n- `aurora-mysql-serverless`: 1, 2, 4, 8, 16, 32, 64, 128, 256\n- `aurora-postgresql-serverless`: 2, 4, 8, 16, 32, 64, 128, 256","default":4,"type":"number","_MdxDesc":{"sd":"<p> The maximum number of Aurora Capacity Units (ACUs) for the database to scale up to.</p>\n","ld":"<p><strong>Allowed values:</strong></p>\n<ul>\n<li><code>aurora-mysql-serverless</code>: 1, 2, 4, 8, 16, 32, 64, 128, 256</li>\n<li><code>aurora-postgresql-serverless</code>: 2, 4, 8, 16, 32, 64, 128, 256</li>\n</ul>\n"}},"pauseAfterSeconds":{"description":"#### The time (in seconds) of inactivity before the serverless database is paused.\n\n---\n\nThe database is considered inactive if there are no active connections.\nWhen paused, you are only charged for storage.\n\nThe value must be between 300 (5 minutes) and 86400 (24 hours). If not set, the database is never paused.","type":"number","_MdxDesc":{"sd":"<p> The time (in seconds) of inactivity before the serverless database is paused.</p>\n","ld":"<p>The database is considered inactive if there are no active connections.\nWhen paused, you are only charged for storage.</p>\n<p>The value must be between 300 (5 minutes) and 86400 (24 hours). If not set, the database is never paused.</p>\n"}},"disableAutoMinorVersionUpgrade":{"description":"#### Specifies whether minor engine upgrades should be applied automatically.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Specifies whether minor engine upgrades should be applied automatically.</p>\n"}}},"additionalProperties":false},"AuroraServerlessV2Engine":{"description":"#### An Aurora Serverless v2 database engine (recommended serverless option).\n\n---\n\nAurora Serverless v2 provides instant, fine-grained scaling from 0.5 to 128 ACUs.\nIt scales in increments as small as 0.5 ACUs for more precise capacity matching.\n\nThis is the recommended serverless engine for most use cases, offering better performance\nand more granular scaling than v1.","type":"object","properties":{"type":{"enum":["aurora-mysql-serverless-v2","aurora-postgresql-serverless-v2"],"type":"string"},"properties":{"$ref":"#/definitions/AuroraServerlessV2EngineProperties"}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> An Aurora Serverless v2 database engine (recommended serverless option).</p>\n","ld":"<p>Aurora Serverless v2 provides instant, fine-grained scaling from 0.5 to 128 ACUs.\nIt scales in increments as small as 0.5 ACUs for more precise capacity matching.</p>\n<p>This is the recommended serverless engine for most use cases, offering better performance\nand more granular scaling than v1.</p>\n"}},"AuroraServerlessV2EngineProperties":{"type":"object","properties":{"dbName":{"description":"#### The name of the initial database to create.","default":"defdb","type":"string","_MdxDesc":{"sd":"<p> The name of the initial database to create.</p>\n"}},"minCapacity":{"description":"#### The minimum number of Aurora Capacity Units (ACUs) for the database to scale down to.\n\n---\n\nEach ACU provides approximately 2 GB of memory and corresponding CPU and networking.\n\n**Allowed values:**\n- `aurora-mysql-serverless-v2`: 0.5-128 (in 0.5 increments)\n- `aurora-postgresql-serverless-v2`: 0.5-128 (in 0.5 increments)","default":0.5,"type":"number","_MdxDesc":{"sd":"<p> The minimum number of Aurora Capacity Units (ACUs) for the database to scale down to.</p>\n","ld":"<p>Each ACU provides approximately 2 GB of memory and corresponding CPU and networking.</p>\n<p><strong>Allowed values:</strong></p>\n<ul>\n<li><code>aurora-mysql-serverless-v2</code>: 0.5-128 (in 0.5 increments)</li>\n<li><code>aurora-postgresql-serverless-v2</code>: 0.5-128 (in 0.5 increments)</li>\n</ul>\n"}},"maxCapacity":{"description":"#### The maximum number of Aurora Capacity Units (ACUs) for the database to scale up to.\n\n---\n\n**Allowed values:**\n- `aurora-mysql-serverless-v2`: 0.5-128 (in 0.5 increments)\n- `aurora-postgresql-serverless-v2`: 0.5-128 (in 0.5 increments)","default":10,"type":"number","_MdxDesc":{"sd":"<p> The maximum number of Aurora Capacity Units (ACUs) for the database to scale up to.</p>\n","ld":"<p><strong>Allowed values:</strong></p>\n<ul>\n<li><code>aurora-mysql-serverless-v2</code>: 0.5-128 (in 0.5 increments)</li>\n<li><code>aurora-postgresql-serverless-v2</code>: 0.5-128 (in 0.5 increments)</li>\n</ul>\n"}},"version":{"description":"#### The version of the database engine.\n\n---\n\nEach engine type supports a specific set of versions.\nFor a full list, see the [Stacktape documentation](https://docs.stacktape.com/database-resources/relational-databases/#engine-version).","type":"string","_MdxDesc":{"sd":"<p> The version of the database engine.</p>\n","ld":"<p>Each engine type supports a specific set of versions.\nFor a full list, see the <a href=\"/database-resources/relational-databases/#engine-version\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape documentation</a>.</p>\n"}},"disableAutoMinorVersionUpgrade":{"description":"#### Specifies whether minor engine upgrades should be applied automatically.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Specifies whether minor engine upgrades should be applied automatically.</p>\n"}}},"additionalProperties":false,"required":["version"]},"RdsEngine":{"description":"#### A standard RDS single-instance database engine.\n\n---\n\nRDS engines are fully managed, single-node databases ideal for standard workloads.\nSupported engines include PostgreSQL, MySQL, MariaDB, Oracle, and SQL Server.\n\nRDS handles routine database tasks such as provisioning, patching, backup, recovery,\nand failure detection. For high availability, enable multi-AZ deployment.","type":"object","properties":{"type":{"enum":["mariadb","mysql","oracle-ee","oracle-se2","postgres","sqlserver-ee","sqlserver-ex","sqlserver-se","sqlserver-web"],"type":"string"},"properties":{"$ref":"#/definitions/RdsEngineProperties"}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> A standard RDS single-instance database engine.</p>\n","ld":"<p>RDS engines are fully managed, single-node databases ideal for standard workloads.\nSupported engines include PostgreSQL, MySQL, MariaDB, Oracle, and SQL Server.</p>\n<p>RDS handles routine database tasks such as provisioning, patching, backup, recovery,\nand failure detection. For high availability, enable multi-AZ deployment.</p>\n"}},"RdsEngineProperties":{"type":"object","properties":{"dbName":{"description":"#### The name of the initial database to create in the cluster.\n\n---\n\nThe behavior of this property depends on the engine:\n- For MySQL, MariaDB, and PostgreSQL, this is the name of the database created on initialization. If not specified, a default database is created.\n- For Oracle, this is the System ID (SID) of the database instance.\n- For SQL Server, this property is not applicable.","type":"string","_MdxDesc":{"sd":"<p> The name of the initial database to create in the cluster.</p>\n","ld":"<p>The behavior of this property depends on the engine:</p>\n<ul>\n<li>For MySQL, MariaDB, and PostgreSQL, this is the name of the database created on initialization. If not specified, a default database is created.</li>\n<li>For Oracle, this is the System ID (SID) of the database instance.</li>\n<li>For SQL Server, this property is not applicable.</li>\n</ul>\n"}},"port":{"description":"#### The port on which the database server will listen for connections.\n\n---\n\nDefault ports vary by engine:\n- MySQL/MariaDB: 3306\n- PostgreSQL: 5432\n- Oracle: 1521\n- SQL Server: 1433","type":"number","_MdxDesc":{"sd":"<p> The port on which the database server will listen for connections.</p>\n","ld":"<p>Default ports vary by engine:</p>\n<ul>\n<li>MySQL/MariaDB: 3306</li>\n<li>PostgreSQL: 5432</li>\n<li>Oracle: 1521</li>\n<li>SQL Server: 1433</li>\n</ul>\n"}},"storage":{"$ref":"#/definitions/RdsEngineStorage","description":"#### Configures storage for the database.\n\n---\n\nStorage will automatically scale up when free space is low.\nFor more details on storage autoscaling, see the [AWS documentation](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_PIOPS.StorageTypes.html#USER_PIOPS.Autoscaling).","_MdxDesc":{"sd":"<p> Configures storage for the database.</p>\n","ld":"<p>Storage will automatically scale up when free space is low.\nFor more details on storage autoscaling, see the <a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_PIOPS.StorageTypes.html#USER_PIOPS.Autoscaling\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"primaryInstance":{"$ref":"#/definitions/RdsEnginePrimaryInstance","description":"#### Configures the primary database instance.\n\n---\n\nThe primary instance handles all write operations. You can specify its size and enable multi-AZ deployment for high availability.","_MdxDesc":{"sd":"<p> Configures the primary database instance.</p>\n","ld":"<p>The primary instance handles all write operations. You can specify its size and enable multi-AZ deployment for high availability.</p>\n"}},"readReplicas":{"description":"#### A list of read replicas for the primary instance.\n\n---\n\nRead replicas can handle read-only traffic to reduce the load on the primary instance.\nThey are kept in sync with the primary through asynchronous replication.\nEach read replica has its own endpoint.","type":"array","items":{"$ref":"#/definitions/RdsEngineReadReplica"},"_MdxDesc":{"sd":"<p> A list of read replicas for the primary instance.</p>\n","ld":"<p>Read replicas can handle read-only traffic to reduce the load on the primary instance.\nThey are kept in sync with the primary through asynchronous replication.\nEach read replica has its own endpoint.</p>\n"}},"version":{"description":"#### The version of the database engine.\n\n---\n\nEach engine type supports a specific set of versions.\nFor a full list, see the [Stacktape documentation](https://docs.stacktape.com/database-resources/relational-databases/#engine-version).","type":"string","_MdxDesc":{"sd":"<p> The version of the database engine.</p>\n","ld":"<p>Each engine type supports a specific set of versions.\nFor a full list, see the <a href=\"/database-resources/relational-databases/#engine-version\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape documentation</a>.</p>\n"}},"disableAutoMinorVersionUpgrade":{"description":"#### Specifies whether minor engine upgrades should be applied automatically.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Specifies whether minor engine upgrades should be applied automatically.</p>\n"}}},"additionalProperties":false,"required":["primaryInstance","version"]},"RdsEngineStorage":{"type":"object","properties":{"initialSize":{"description":"#### The initial storage size (in GB) for the database.","default":20,"type":"number","_MdxDesc":{"sd":"<p> The initial storage size (in GB) for the database.</p>\n"}},"maxSize":{"description":"#### The maximum storage size (in GB) that the database can scale up to.","default":200,"type":"number","_MdxDesc":{"sd":"<p> The maximum storage size (in GB) that the database can scale up to.</p>\n"}}},"additionalProperties":false},"RdsEnginePrimaryInstance":{"type":"object","properties":{"instanceSize":{"description":"#### The instance size for the database.\n\n---\n\nThis determines the CPU, memory, and networking capacity of the database instance.\nFor a list of available instance sizes, see the [AWS RDS instance types documentation](https://aws.amazon.com/rds/instance-types/).\n\n> **Note:** Not all instance sizes are available for all engines, versions, and regions.\n> Some instance families (like `t3` or `t4`) are intended for development and testing, not production workloads.","type":"string","_MdxDesc":{"sd":"<p> The instance size for the database.</p>\n","ld":"<p>This determines the CPU, memory, and networking capacity of the database instance.\nFor a list of available instance sizes, see the <a href=\"https://aws.amazon.com/rds/instance-types/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS RDS instance types documentation</a>.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> Not all instance sizes are available for all engines, versions, and regions.\nSome instance families (like <code>t3</code> or <code>t4</code>) are intended for development and testing, not production workloads.</p>\n</div>\n</div>"}},"multiAz":{"description":"#### Specifies whether the database should be deployed across multiple Availability Zones (AZs) for high availability.\n\n---\n\nWhen enabled, a standby replica is created in a different AZ. If the primary instance fails, traffic is automatically failed over to the standby.\nThis also minimizes downtime during maintenance.","type":"boolean","_MdxDesc":{"sd":"<p> Specifies whether the database should be deployed across multiple Availability Zones (AZs) for high availability.</p>\n","ld":"<p>When enabled, a standby replica is created in a different AZ. If the primary instance fails, traffic is automatically failed over to the standby.\nThis also minimizes downtime during maintenance.</p>\n"}}},"additionalProperties":false,"required":["instanceSize"]},"RdsEngineReadReplica":{"type":"object","properties":{"instanceSize":{"description":"#### The instance size for the database.\n\n---\n\nThis determines the CPU, memory, and networking capacity of the database instance.\nFor a list of available instance sizes, see the [AWS RDS instance types documentation](https://aws.amazon.com/rds/instance-types/).\n\n> **Note:** Not all instance sizes are available for all engines, versions, and regions.\n> Some instance families (like `t3` or `t4`) are intended for development and testing, not production workloads.","type":"string","_MdxDesc":{"sd":"<p> The instance size for the database.</p>\n","ld":"<p>This determines the CPU, memory, and networking capacity of the database instance.\nFor a list of available instance sizes, see the <a href=\"https://aws.amazon.com/rds/instance-types/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS RDS instance types documentation</a>.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> Not all instance sizes are available for all engines, versions, and regions.\nSome instance families (like <code>t3</code> or <code>t4</code>) are intended for development and testing, not production workloads.</p>\n</div>\n</div>"}},"multiAz":{"description":"#### Specifies whether the database should be deployed across multiple Availability Zones (AZs) for high availability.\n\n---\n\nWhen enabled, a standby replica is created in a different AZ. If the primary instance fails, traffic is automatically failed over to the standby.\nThis also minimizes downtime during maintenance.","type":"boolean","_MdxDesc":{"sd":"<p> Specifies whether the database should be deployed across multiple Availability Zones (AZs) for high availability.</p>\n","ld":"<p>When enabled, a standby replica is created in a different AZ. If the primary instance fails, traffic is automatically failed over to the standby.\nThis also minimizes downtime during maintenance.</p>\n"}}},"additionalProperties":false,"required":["instanceSize"]},"DatabaseAccessibility":{"type":"object","properties":{"accessibilityMode":{"description":"#### The accessibility mode for the database.\n\n---\n\n- **internet**: The database is accessible from anywhere on the internet.\n- **vpc**: The database is only accessible from within the same VPC. You can optionally whitelist external IPs.\n- **scoping-workloads-in-vpc**: Similar to `vpc` mode, but requires explicit `connectTo` permissions for other resources in the stack to access the database.\n- **whitelisted-ips-only**: The database is only accessible from a specific list of IP addresses.\n\n> **Note:** Aurora Serverless engines do not support public accessibility. You must use `vpc` or `scoping-workloads-in-vpc` and connect via a bastion host or the Data API.\n\nFor more information on VPCs, see the [Stacktape VPCs documentation](https://docs.stacktape.com/user-guides/vpcs/).","default":"internet","enum":["internet","scoping-workloads-in-vpc","vpc","whitelisted-ips-only"],"type":"string","_MdxDesc":{"sd":"<p> The accessibility mode for the database.</p>\n","ld":"<ul>\n<li><strong>internet</strong>: The database is accessible from anywhere on the internet.</li>\n<li><strong>vpc</strong>: The database is only accessible from within the same VPC. You can optionally whitelist external IPs.</li>\n<li><strong>scoping-workloads-in-vpc</strong>: Similar to <code>vpc</code> mode, but requires explicit <code>connectTo</code> permissions for other resources in the stack to access the database.</li>\n<li><strong>whitelisted-ips-only</strong>: The database is only accessible from a specific list of IP addresses.</li>\n</ul>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> Aurora Serverless engines do not support public accessibility. You must use <code>vpc</code> or <code>scoping-workloads-in-vpc</code> and connect via a bastion host or the Data API.</p>\n</div>\n</div><p>For more information on VPCs, see the <a href=\"/user-guides/vpcs/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape VPCs documentation</a>.</p>\n"}},"forceDisablePublicIp":{"description":"#### Disables public accessibility for the database endpoint.\n\n---\n\nThis ensures that the database can only be accessed from within its VPC, providing an additional layer of isolation.\n\n> For Aurora engines, this property can only be set when the database is created and cannot be changed later.","type":"boolean","_MdxDesc":{"sd":"<p> Disables public accessibility for the database endpoint.</p>\n","ld":"<p>This ensures that the database can only be accessed from within its VPC, providing an additional layer of isolation.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>For Aurora engines, this property can only be set when the database is created and cannot be changed later.</p>\n</div>\n</div>"}},"whitelistedIps":{"description":"#### A list of IP addresses or CIDR ranges to allow access from.\n\n---\n\n- In `vpc` and `scoping-workloads-in-vpc` modes, this allows access from outside the VPC (e.g., an office IP).\n- In `whitelisted-ips-only` mode, only these addresses can access the database.\n- This has no effect in `internet` mode.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of IP addresses or CIDR ranges to allow access from.</p>\n","ld":"<ul>\n<li>In <code>vpc</code> and <code>scoping-workloads-in-vpc</code> modes, this allows access from outside the VPC (e.g., an office IP).</li>\n<li>In <code>whitelisted-ips-only</code> mode, only these addresses can access the database.</li>\n<li>This has no effect in <code>internet</code> mode.</li>\n</ul>\n"}}},"additionalProperties":false,"required":["accessibilityMode"]},"RelationalDatabaseAlarm":{"type":"object","properties":{"trigger":{"$ref":"#/definitions/RelationalDatabaseAlarmTrigger"},"evaluation":{"$ref":"#/definitions/AlarmEvaluation","description":"#### Specifies the time window for evaluating the metric to determine if the alarm should be triggered.\n\n---\n\nDefines the duration and frequency of metric evaluation.","_MdxDesc":{"sd":"<p> Specifies the time window for evaluating the metric to determine if the alarm should be triggered.</p>\n","ld":"<p>Defines the duration and frequency of metric evaluation.</p>\n"}},"notificationTargets":{"description":"#### Defines where to send notifications when the alarm is triggered.\n\n---\n\nYou can specify a list of integrations, such as Slack, MS Teams, or email.","type":"array","items":{"$ref":"#/definitions/AlarmUserIntegration"},"_MdxDesc":{"sd":"<p> Defines where to send notifications when the alarm is triggered.</p>\n","ld":"<p>You can specify a list of integrations, such as Slack, MS Teams, or email.</p>\n"}},"description":{"description":"#### Custom description for the alarm\n---\n- If custom description is specified, it is used in the alarm notification message\n- Custom description is also used in the alarm description in the AWS console (If not provided, Stacktape generates default description.)","type":"string","_MdxDesc":{"sd":"<p> Custom description for the alarm</p>\n","ld":"<ul>\n<li>If custom description is specified, it is used in the alarm notification message</li>\n<li>Custom description is also used in the alarm description in the AWS console (If not provided, Stacktape generates default description.)</li>\n</ul>\n"}}},"additionalProperties":false,"required":["trigger"]},"RelationalDatabaseAlarmTrigger":{"anyOf":[{"$ref":"#/definitions/RelationalDatabaseReadLatencyTrigger"},{"$ref":"#/definitions/RelationalDatabaseWriteLatencyTrigger"},{"$ref":"#/definitions/RelationalDatabaseCPUUtilizationTrigger"},{"$ref":"#/definitions/RelationalDatabaseFreeStorageTrigger"},{"$ref":"#/definitions/RelationalDatabaseFreeMemoryTrigger"},{"$ref":"#/definitions/RelationalDatabaseConnectionCountTrigger"}]},"RelationalDatabaseReadLatencyTrigger":{"type":"object","properties":{"type":{"type":"string","const":"database-read-latency"},"properties":{"$ref":"#/definitions/RelationalDatabaseReadLatencyTriggerProps"}},"additionalProperties":false,"required":["properties","type"]},"RelationalDatabaseReadLatencyTriggerProps":{"type":"object","properties":{"thresholdSeconds":{"description":"#### The read latency in seconds that triggers the alarm.\n\n---\n\nRead latency is the average amount of time taken for a read I/O operation.\nBy default, the alarm triggers if the **average** read latency over the evaluation period is **greater than** the `thresholdSeconds`.\nYou can customize the behavior using the `statistic` and `comparisonOperator` properties.","type":"number","_MdxDesc":{"sd":"<p> The read latency in seconds that triggers the alarm.</p>\n","ld":"<p>Read latency is the average amount of time taken for a read I/O operation.\nBy default, the alarm triggers if the <strong>average</strong> read latency over the evaluation period is <strong>greater than</strong> the <code>thresholdSeconds</code>.\nYou can customize the behavior using the <code>statistic</code> and <code>comparisonOperator</code> properties.</p>\n"}},"comparisonOperator":{"$ref":"#/definitions/ComparisonOperator","description":"#### The arithmetic operation to use when comparing the specified statistic and threshold.\n\n---\n\nSupported operators:\n- `GreaterThanThreshold`\n- `GreaterThanOrEqualToThreshold`\n- `LessThanThreshold`\n- `LessThanOrEqualToThreshold`","_MdxDesc":{"sd":"<p> The arithmetic operation to use when comparing the specified statistic and threshold.</p>\n","ld":"<p>Supported operators:</p>\n<ul>\n<li><code>GreaterThanThreshold</code></li>\n<li><code>GreaterThanOrEqualToThreshold</code></li>\n<li><code>LessThanThreshold</code></li>\n<li><code>LessThanOrEqualToThreshold</code></li>\n</ul>\n"}},"statistic":{"$ref":"#/definitions/StatisticFunction","description":"#### The statistic to apply to the metric data points.\n\n---\n\nSupported statistics:\n- **avg**: The average of the metric values.\n- **sum**: The sum of the metric values.\n- **p90**: The 90th percentile. 90% of the data points are lower than this value.\n- **p95**: The 95th percentile. 95% of the data points are lower than this value.\n- **p99**: The 99th percentile. 99% of the data points are lower than this value.\n- **min**: The lowest value from the data points.\n- **max**: The highest value from the data points.","default":"avg","_MdxDesc":{"sd":"<p> The statistic to apply to the metric data points.</p>\n","ld":"<p>Supported statistics:</p>\n<ul>\n<li><strong>avg</strong>: The average of the metric values.</li>\n<li><strong>sum</strong>: The sum of the metric values.</li>\n<li><strong>p90</strong>: The 90th percentile. 90% of the data points are lower than this value.</li>\n<li><strong>p95</strong>: The 95th percentile. 95% of the data points are lower than this value.</li>\n<li><strong>p99</strong>: The 99th percentile. 99% of the data points are lower than this value.</li>\n<li><strong>min</strong>: The lowest value from the data points.</li>\n<li><strong>max</strong>: The highest value from the data points.</li>\n</ul>\n"}}},"additionalProperties":false,"required":["thresholdSeconds"]},"RelationalDatabaseWriteLatencyTrigger":{"type":"object","properties":{"type":{"type":"string","const":"database-write-latency"},"properties":{"$ref":"#/definitions/RelationalDatabaseWriteLatencyTriggerProps"}},"additionalProperties":false,"required":["properties","type"]},"RelationalDatabaseWriteLatencyTriggerProps":{"type":"object","properties":{"thresholdSeconds":{"description":"#### The write latency in seconds that triggers the alarm.\n\n---\n\nWrite latency is the average amount of time taken for a write I/O operation.\nBy default, the alarm triggers if the **average** write latency over the evaluation period is **greater than** the `thresholdSeconds`.\nYou can customize the behavior using the `statistic` and `comparisonOperator` properties.","type":"number","_MdxDesc":{"sd":"<p> The write latency in seconds that triggers the alarm.</p>\n","ld":"<p>Write latency is the average amount of time taken for a write I/O operation.\nBy default, the alarm triggers if the <strong>average</strong> write latency over the evaluation period is <strong>greater than</strong> the <code>thresholdSeconds</code>.\nYou can customize the behavior using the <code>statistic</code> and <code>comparisonOperator</code> properties.</p>\n"}},"comparisonOperator":{"$ref":"#/definitions/ComparisonOperator","description":"#### The arithmetic operation to use when comparing the specified statistic and threshold.\n\n---\n\nSupported operators:\n- `GreaterThanThreshold`\n- `GreaterThanOrEqualToThreshold`\n- `LessThanThreshold`\n- `LessThanOrEqualToThreshold`","_MdxDesc":{"sd":"<p> The arithmetic operation to use when comparing the specified statistic and threshold.</p>\n","ld":"<p>Supported operators:</p>\n<ul>\n<li><code>GreaterThanThreshold</code></li>\n<li><code>GreaterThanOrEqualToThreshold</code></li>\n<li><code>LessThanThreshold</code></li>\n<li><code>LessThanOrEqualToThreshold</code></li>\n</ul>\n"}},"statistic":{"$ref":"#/definitions/StatisticFunction","description":"#### The statistic to apply to the metric data points.\n\n---\n\nSupported statistics:\n- **avg**: The average of the metric values.\n- **sum**: The sum of the metric values.\n- **p90**: The 90th percentile. 90% of the data points are lower than this value.\n- **p95**: The 95th percentile. 95% of the data points are lower than this value.\n- **p99**: The 99th percentile. 99% of the data points are lower than this value.\n- **min**: The lowest value from the data points.\n- **max**: The highest value from the data points.","default":"avg","_MdxDesc":{"sd":"<p> The statistic to apply to the metric data points.</p>\n","ld":"<p>Supported statistics:</p>\n<ul>\n<li><strong>avg</strong>: The average of the metric values.</li>\n<li><strong>sum</strong>: The sum of the metric values.</li>\n<li><strong>p90</strong>: The 90th percentile. 90% of the data points are lower than this value.</li>\n<li><strong>p95</strong>: The 95th percentile. 95% of the data points are lower than this value.</li>\n<li><strong>p99</strong>: The 99th percentile. 99% of the data points are lower than this value.</li>\n<li><strong>min</strong>: The lowest value from the data points.</li>\n<li><strong>max</strong>: The highest value from the data points.</li>\n</ul>\n"}}},"additionalProperties":false,"required":["thresholdSeconds"]},"RelationalDatabaseCPUUtilizationTrigger":{"type":"object","properties":{"type":{"type":"string","const":"database-cpu-utilization"},"properties":{"$ref":"#/definitions/RelationalDatabaseCPUUtilizationTriggerProps"}},"additionalProperties":false,"required":["properties","type"]},"RelationalDatabaseCPUUtilizationTriggerProps":{"type":"object","properties":{"thresholdPercent":{"description":"#### The CPU utilization percentage that triggers the alarm.\n\n---\n\nBy default, the alarm triggers if the **average** CPU utilization over the evaluation period is **greater than** the `thresholdPercent`.\nYou can customize the behavior using the `statistic` and `comparisonOperator` properties.","type":"number","_MdxDesc":{"sd":"<p> The CPU utilization percentage that triggers the alarm.</p>\n","ld":"<p>By default, the alarm triggers if the <strong>average</strong> CPU utilization over the evaluation period is <strong>greater than</strong> the <code>thresholdPercent</code>.\nYou can customize the behavior using the <code>statistic</code> and <code>comparisonOperator</code> properties.</p>\n"}},"comparisonOperator":{"$ref":"#/definitions/ComparisonOperator","description":"#### The arithmetic operation to use when comparing the specified statistic and threshold.\n\n---\n\nSupported operators:\n- `GreaterThanThreshold`\n- `GreaterThanOrEqualToThreshold`\n- `LessThanThreshold`\n- `LessThanOrEqualToThreshold`","_MdxDesc":{"sd":"<p> The arithmetic operation to use when comparing the specified statistic and threshold.</p>\n","ld":"<p>Supported operators:</p>\n<ul>\n<li><code>GreaterThanThreshold</code></li>\n<li><code>GreaterThanOrEqualToThreshold</code></li>\n<li><code>LessThanThreshold</code></li>\n<li><code>LessThanOrEqualToThreshold</code></li>\n</ul>\n"}},"statistic":{"$ref":"#/definitions/StatisticFunction","description":"#### The statistic to apply to the metric data points.\n\n---\n\nSupported statistics:\n- **avg**: The average of the metric values.\n- **sum**: The sum of the metric values.\n- **p90**: The 90th percentile. 90% of the data points are lower than this value.\n- **p95**: The 95th percentile. 95% of the data points are lower than this value.\n- **p99**: The 99th percentile. 99% of the data points are lower than this value.\n- **min**: The lowest value from the data points.\n- **max**: The highest value from the data points.","default":"avg","_MdxDesc":{"sd":"<p> The statistic to apply to the metric data points.</p>\n","ld":"<p>Supported statistics:</p>\n<ul>\n<li><strong>avg</strong>: The average of the metric values.</li>\n<li><strong>sum</strong>: The sum of the metric values.</li>\n<li><strong>p90</strong>: The 90th percentile. 90% of the data points are lower than this value.</li>\n<li><strong>p95</strong>: The 95th percentile. 95% of the data points are lower than this value.</li>\n<li><strong>p99</strong>: The 99th percentile. 99% of the data points are lower than this value.</li>\n<li><strong>min</strong>: The lowest value from the data points.</li>\n<li><strong>max</strong>: The highest value from the data points.</li>\n</ul>\n"}}},"additionalProperties":false,"required":["thresholdPercent"]},"RelationalDatabaseFreeStorageTrigger":{"type":"object","properties":{"type":{"type":"string","const":"database-free-storage"},"properties":{"$ref":"#/definitions/RelationalDatabaseFreeStorageTriggerProps"}},"additionalProperties":false,"required":["properties","type"]},"RelationalDatabaseFreeStorageTriggerProps":{"type":"object","properties":{"thresholdMB":{"description":"#### The minimum amount of free storage (in MB) before the alarm is triggered.\n\n---\n\nBy default, the alarm triggers if the **minimum** available storage space over the evaluation period is **lower than** the `thresholdMB`.\nYou can customize the behavior using the `statistic` and `comparisonOperator` properties.","type":"number","_MdxDesc":{"sd":"<p> The minimum amount of free storage (in MB) before the alarm is triggered.</p>\n","ld":"<p>By default, the alarm triggers if the <strong>minimum</strong> available storage space over the evaluation period is <strong>lower than</strong> the <code>thresholdMB</code>.\nYou can customize the behavior using the <code>statistic</code> and <code>comparisonOperator</code> properties.</p>\n"}},"comparisonOperator":{"$ref":"#/definitions/ComparisonOperator","description":"#### The arithmetic operation to use when comparing the specified statistic and threshold.\n\n---\n\nSupported operators:\n- `GreaterThanThreshold`\n- `GreaterThanOrEqualToThreshold`\n- `LessThanThreshold`\n- `LessThanOrEqualToThreshold`","_MdxDesc":{"sd":"<p> The arithmetic operation to use when comparing the specified statistic and threshold.</p>\n","ld":"<p>Supported operators:</p>\n<ul>\n<li><code>GreaterThanThreshold</code></li>\n<li><code>GreaterThanOrEqualToThreshold</code></li>\n<li><code>LessThanThreshold</code></li>\n<li><code>LessThanOrEqualToThreshold</code></li>\n</ul>\n"}},"statistic":{"$ref":"#/definitions/StatisticFunction","description":"#### The statistic to apply to the metric data points.\n\n---\n\nSupported statistics:\n- **avg**: The average of the metric values.\n- **sum**: The sum of the metric values.\n- **p90**: The 90th percentile. 90% of the data points are lower than this value.\n- **p95**: The 95th percentile. 95% of the data points are lower than this value.\n- **p99**: The 99th percentile. 99% of the data points are lower than this value.\n- **min**: The lowest value from the data points.\n- **max**: The highest value from the data points.","default":"avg","_MdxDesc":{"sd":"<p> The statistic to apply to the metric data points.</p>\n","ld":"<p>Supported statistics:</p>\n<ul>\n<li><strong>avg</strong>: The average of the metric values.</li>\n<li><strong>sum</strong>: The sum of the metric values.</li>\n<li><strong>p90</strong>: The 90th percentile. 90% of the data points are lower than this value.</li>\n<li><strong>p95</strong>: The 95th percentile. 95% of the data points are lower than this value.</li>\n<li><strong>p99</strong>: The 99th percentile. 99% of the data points are lower than this value.</li>\n<li><strong>min</strong>: The lowest value from the data points.</li>\n<li><strong>max</strong>: The highest value from the data points.</li>\n</ul>\n"}}},"additionalProperties":false,"required":["thresholdMB"]},"RelationalDatabaseFreeMemoryTrigger":{"type":"object","properties":{"type":{"type":"string","const":"database-free-memory"},"properties":{"$ref":"#/definitions/RelationalDatabaseFreeMemoryTriggerProps"}},"additionalProperties":false,"required":["properties","type"]},"RelationalDatabaseFreeMemoryTriggerProps":{"type":"object","properties":{"thresholdMB":{"description":"#### The minimum amount of free memory (in MB) before the alarm is triggered.\n\n---\n\nBy default, the alarm triggers if the **average** available free memory over the evaluation period is **lower than** the `thresholdMB`.\nYou can customize the behavior using the `statistic` and `comparisonOperator` properties.","type":"number","_MdxDesc":{"sd":"<p> The minimum amount of free memory (in MB) before the alarm is triggered.</p>\n","ld":"<p>By default, the alarm triggers if the <strong>average</strong> available free memory over the evaluation period is <strong>lower than</strong> the <code>thresholdMB</code>.\nYou can customize the behavior using the <code>statistic</code> and <code>comparisonOperator</code> properties.</p>\n"}},"comparisonOperator":{"$ref":"#/definitions/ComparisonOperator","description":"#### The arithmetic operation to use when comparing the specified statistic and threshold.\n\n---\n\nSupported operators:\n- `GreaterThanThreshold`\n- `GreaterThanOrEqualToThreshold`\n- `LessThanThreshold`\n- `LessThanOrEqualToThreshold`","_MdxDesc":{"sd":"<p> The arithmetic operation to use when comparing the specified statistic and threshold.</p>\n","ld":"<p>Supported operators:</p>\n<ul>\n<li><code>GreaterThanThreshold</code></li>\n<li><code>GreaterThanOrEqualToThreshold</code></li>\n<li><code>LessThanThreshold</code></li>\n<li><code>LessThanOrEqualToThreshold</code></li>\n</ul>\n"}},"statistic":{"$ref":"#/definitions/StatisticFunction","description":"#### The statistic to apply to the metric data points.\n\n---\n\nSupported statistics:\n- **avg**: The average of the metric values.\n- **sum**: The sum of the metric values.\n- **p90**: The 90th percentile. 90% of the data points are lower than this value.\n- **p95**: The 95th percentile. 95% of the data points are lower than this value.\n- **p99**: The 99th percentile. 99% of the data points are lower than this value.\n- **min**: The lowest value from the data points.\n- **max**: The highest value from the data points.","default":"avg","_MdxDesc":{"sd":"<p> The statistic to apply to the metric data points.</p>\n","ld":"<p>Supported statistics:</p>\n<ul>\n<li><strong>avg</strong>: The average of the metric values.</li>\n<li><strong>sum</strong>: The sum of the metric values.</li>\n<li><strong>p90</strong>: The 90th percentile. 90% of the data points are lower than this value.</li>\n<li><strong>p95</strong>: The 95th percentile. 95% of the data points are lower than this value.</li>\n<li><strong>p99</strong>: The 99th percentile. 99% of the data points are lower than this value.</li>\n<li><strong>min</strong>: The lowest value from the data points.</li>\n<li><strong>max</strong>: The highest value from the data points.</li>\n</ul>\n"}}},"additionalProperties":false,"required":["thresholdMB"]},"RelationalDatabaseConnectionCountTrigger":{"type":"object","properties":{"type":{"type":"string","const":"database-connection-count"},"properties":{"$ref":"#/definitions/RelationalDatabaseConnectionCountTriggerProps"}},"additionalProperties":false,"required":["properties","type"]},"RelationalDatabaseConnectionCountTriggerProps":{"type":"object","properties":{"thresholdCount":{"description":"#### The number of database connections that triggers the alarm.\n\n---\n\nBy default, the alarm triggers if the **average** number of database connections over the evaluation period is **greater than** the `thresholdCount`.\nYou can customize the behavior using the `statistic` and `comparisonOperator` properties.","type":"number","_MdxDesc":{"sd":"<p> The number of database connections that triggers the alarm.</p>\n","ld":"<p>By default, the alarm triggers if the <strong>average</strong> number of database connections over the evaluation period is <strong>greater than</strong> the <code>thresholdCount</code>.\nYou can customize the behavior using the <code>statistic</code> and <code>comparisonOperator</code> properties.</p>\n"}},"comparisonOperator":{"$ref":"#/definitions/ComparisonOperator","description":"#### The arithmetic operation to use when comparing the specified statistic and threshold.\n\n---\n\nSupported operators:\n- `GreaterThanThreshold`\n- `GreaterThanOrEqualToThreshold`\n- `LessThanThreshold`\n- `LessThanOrEqualToThreshold`","_MdxDesc":{"sd":"<p> The arithmetic operation to use when comparing the specified statistic and threshold.</p>\n","ld":"<p>Supported operators:</p>\n<ul>\n<li><code>GreaterThanThreshold</code></li>\n<li><code>GreaterThanOrEqualToThreshold</code></li>\n<li><code>LessThanThreshold</code></li>\n<li><code>LessThanOrEqualToThreshold</code></li>\n</ul>\n"}},"statistic":{"$ref":"#/definitions/StatisticFunction","description":"#### The statistic to apply to the metric data points.\n\n---\n\nSupported statistics:\n- **avg**: The average of the metric values.\n- **sum**: The sum of the metric values.\n- **p90**: The 90th percentile. 90% of the data points are lower than this value.\n- **p95**: The 95th percentile. 95% of the data points are lower than this value.\n- **p99**: The 99th percentile. 99% of the data points are lower than this value.\n- **min**: The lowest value from the data points.\n- **max**: The highest value from the data points.","default":"avg","_MdxDesc":{"sd":"<p> The statistic to apply to the metric data points.</p>\n","ld":"<p>Supported statistics:</p>\n<ul>\n<li><strong>avg</strong>: The average of the metric values.</li>\n<li><strong>sum</strong>: The sum of the metric values.</li>\n<li><strong>p90</strong>: The 90th percentile. 90% of the data points are lower than this value.</li>\n<li><strong>p95</strong>: The 95th percentile. 95% of the data points are lower than this value.</li>\n<li><strong>p99</strong>: The 99th percentile. 99% of the data points are lower than this value.</li>\n<li><strong>min</strong>: The lowest value from the data points.</li>\n<li><strong>max</strong>: The highest value from the data points.</li>\n</ul>\n"}}},"additionalProperties":false,"required":["thresholdCount"]},"RelationalDatabaseLogging":{"type":"object","properties":{"disabled":{"description":"#### Disables the collection of database server logs to CloudWatch.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disables the collection of database server logs to CloudWatch.</p>\n"}},"retentionDays":{"description":"#### The number of days to retain logs in CloudWatch.","default":90,"enum":[1,120,14,150,180,1827,3,30,365,3653,400,5,545,60,7,731,90],"type":"number","_MdxDesc":{"sd":"<p> The number of days to retain logs in CloudWatch.</p>\n"}},"logTypes":{"description":"#### The types of logs to export to CloudWatch.\n\n---\n\nThe available log types depend on the database engine.\n\n- **PostgreSQL**: `postgresql`\n- **MySQL/MariaDB**: `audit`, `error`, `general`, `slowquery`\n- **Oracle**: `alert`, `audit`, `listener`, `trace`\n- **SQL Server**: `agent`, `error`","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> The types of logs to export to CloudWatch.</p>\n","ld":"<p>The available log types depend on the database engine.</p>\n<ul>\n<li><strong>PostgreSQL</strong>: <code>postgresql</code></li>\n<li><strong>MySQL/MariaDB</strong>: <code>audit</code>, <code>error</code>, <code>general</code>, <code>slowquery</code></li>\n<li><strong>Oracle</strong>: <code>alert</code>, <code>audit</code>, <code>listener</code>, <code>trace</code></li>\n<li><strong>SQL Server</strong>: <code>agent</code>, <code>error</code></li>\n</ul>\n"}},"engineSpecificOptions":{"description":"#### Engine-specific logging options.\n\n---\n\nThis allows for more granular control over what is logged.\nCurrently supported for PostgreSQL, MySQL, and MariaDB.","anyOf":[{"$ref":"#/definitions/PostgresLoggingOptions"},{"$ref":"#/definitions/MysqlLoggingOptions"}],"_MdxDesc":{"sd":"<p> Engine-specific logging options.</p>\n","ld":"<p>This allows for more granular control over what is logged.\nCurrently supported for PostgreSQL, MySQL, and MariaDB.</p>\n"}},"logForwarding":{"description":"#### Log Forwarding\n\n---\n\nForwards logs to a specified destination for monitoring, analysis, or long-term storage.\n\nLog forwarding is handled by an [Amazon Kinesis Data Firehose](https://aws.amazon.com/kinesis/data-firehose/) delivery stream. You will incur costs based on the volume of data transferred (approximately $0.03 per GB). For detailed pricing, see the [AWS Kinesis Firehose Pricing](https://aws.amazon.com/kinesis/data-firehose/pricing/) page.\n\nSupported destinations:\n- `http-endpoint`: Delivers logs to any HTTP endpoint that complies with [Firehose request and response specifications](https://docs.aws.amazon.com/firehose/latest/dev/httpdeliveryrequestresponse.html). Many third-party logging services are compatible out-of-the-box.\n- `datadog`: Delivers logs to [Datadog](https://www.datadoghq.com/).\n- `highlight`: Delivers logs to a [Highlight.io](https://www.highlight.io/) project.\n\nFor more information, refer to the [Stacktape documentation on log forwarding](https://docs.stacktape.com/configuration/log-forwarding/).\n\n> If logs fail to be delivered after multiple retries, they are stored in a backup S3 bucket named `{stackName}-{resourceName}-logs-{generatedHash}`. The retry duration can be configured.","anyOf":[{"$ref":"#/definitions/HttpEndpointLogForwarding"},{"$ref":"#/definitions/HighlightLogForwarding"},{"$ref":"#/definitions/DatadogLogForwarding"}],"_MdxDesc":{"sd":"<p> Log Forwarding</p>\n","ld":"<p>Forwards logs to a specified destination for monitoring, analysis, or long-term storage.</p>\n<p>Log forwarding is handled by an <a href=\"https://aws.amazon.com/kinesis/data-firehose/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Amazon Kinesis Data Firehose</a> delivery stream. You will incur costs based on the volume of data transferred (approximately $0.03 per GB). For detailed pricing, see the <a href=\"https://aws.amazon.com/kinesis/data-firehose/pricing/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS Kinesis Firehose Pricing</a> page.</p>\n<p>Supported destinations:</p>\n<ul>\n<li><code>http-endpoint</code>: Delivers logs to any HTTP endpoint that complies with <a href=\"https://docs.aws.amazon.com/firehose/latest/dev/httpdeliveryrequestresponse.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Firehose request and response specifications</a>. Many third-party logging services are compatible out-of-the-box.</li>\n<li><code>datadog</code>: Delivers logs to <a href=\"https://www.datadoghq.com/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Datadog</a>.</li>\n<li><code>highlight</code>: Delivers logs to a <a href=\"https://www.highlight.io/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Highlight.io</a> project.</li>\n</ul>\n<p>For more information, refer to the <a href=\"/configuration/log-forwarding/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape documentation on log forwarding</a>.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>If logs fail to be delivered after multiple retries, they are stored in a backup S3 bucket named <code>{stackName}-{resourceName}-logs-{generatedHash}</code>. The retry duration can be configured.</p>\n</div>\n</div>"}}},"additionalProperties":false},"PostgresLoggingOptions":{"type":"object","properties":{"log_connections":{"description":"#### Logs all new client connections.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Logs all new client connections.</p>\n"}},"log_disconnections":{"description":"#### Logs all client disconnections.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Logs all client disconnections.</p>\n"}},"log_lock_waits":{"description":"#### Logs sessions that are waiting for a lock.\n\n---\n\nThis can help identify performance issues caused by lock contention.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Logs sessions that are waiting for a lock.</p>\n","ld":"<p>This can help identify performance issues caused by lock contention.</p>\n"}},"log_min_duration_statement":{"description":"#### The minimum execution time (in milliseconds) for a statement to be logged.\n\n---\n\n- `-1`: Disables this feature.\n- `0`: Logs all statements.\n- `>0`: Logs statements that exceed this duration.\n\nThis is useful for identifying slow queries.","default":10000,"type":"number","_MdxDesc":{"sd":"<p> The minimum execution time (in milliseconds) for a statement to be logged.</p>\n","ld":"<ul>\n<li><code>-1</code>: Disables this feature.</li>\n<li><code>0</code>: Logs all statements.</li>\n<li><code>>0</code>: Logs statements that exceed this duration.</li>\n</ul>\n<p>This is useful for identifying slow queries.</p>\n"}},"log_statement":{"description":"#### Controls which types of SQL statements are logged.\n\n---\n\n- `none`: No statements are logged.\n- `ddl`: Logs all Data Definition Language (DDL) statements (e.g., `CREATE`, `ALTER`).\n- `mod`: Logs all DDL statements plus `INSERT`, `UPDATE`, and `DELETE`.\n- `all`: Logs all statements.","default":"ddl","enum":["all","ddl","mod","none"],"type":"string","_MdxDesc":{"sd":"<p> Controls which types of SQL statements are logged.</p>\n","ld":"<ul>\n<li><code>none</code>: No statements are logged.</li>\n<li><code>ddl</code>: Logs all Data Definition Language (DDL) statements (e.g., <code>CREATE</code>, <code>ALTER</code>).</li>\n<li><code>mod</code>: Logs all DDL statements plus <code>INSERT</code>, <code>UPDATE</code>, and <code>DELETE</code>.</li>\n<li><code>all</code>: Logs all statements.</li>\n</ul>\n"}}},"additionalProperties":false},"MysqlLoggingOptions":{"type":"object","properties":{"server_audit_events":{"description":"#### The types of activity to record in the audit log.\n\n---\n\n- `CONNECT`: Successful and unsuccessful connections and disconnections.\n- `QUERY`: The text of all queries.\n- `QUERY_DDL`: Only Data Definition Language (DDL) queries.\n- `QUERY_DML`: Only Data Manipulation Language (DML) queries (including `SELECT`).\n- `QUERY_DML_NO_SELECT`: DML queries, excluding `SELECT`.\n- `QUERY_DCL`: Only Data Control Language (DCL) queries.","default":["QUERY_DDL"],"type":"array","items":{"enum":["CONNECT","QUERY","QUERY_DCL","QUERY_DDL","QUERY_DML","QUERY_DML_NO_SELECT"],"type":"string"},"_MdxDesc":{"sd":"<p> The types of activity to record in the audit log.</p>\n","ld":"<ul>\n<li><code>CONNECT</code>: Successful and unsuccessful connections and disconnections.</li>\n<li><code>QUERY</code>: The text of all queries.</li>\n<li><code>QUERY_DDL</code>: Only Data Definition Language (DDL) queries.</li>\n<li><code>QUERY_DML</code>: Only Data Manipulation Language (DML) queries (including <code>SELECT</code>).</li>\n<li><code>QUERY_DML_NO_SELECT</code>: DML queries, excluding <code>SELECT</code>.</li>\n<li><code>QUERY_DCL</code>: Only Data Control Language (DCL) queries.</li>\n</ul>\n"}},"long_query_time":{"description":"#### The execution time (in seconds) above which a query is considered \"slow\" and logged to the slow query log.\n\n---\n\nUse `-1` to disable slow query logging.","default":10,"type":"number","_MdxDesc":{"sd":"<p> The execution time (in seconds) above which a query is considered &quot;slow&quot; and logged to the slow query log.</p>\n","ld":"<p>Use <code>-1</code> to disable slow query logging.</p>\n"}}},"additionalProperties":false},"ApplicationLoadBalancer":{"description":"#### Application Load Balancer\n\n---\n\nA fully managed, Application (L7) Load Balancer that routes HTTP and HTTPS requests to other resources.","type":"object","properties":{"type":{"type":"string","const":"application-load-balancer"},"properties":{"$ref":"#/definitions/ApplicationLoadBalancerProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["type"],"_MdxDesc":{"sd":"<p> Application Load Balancer</p>\n","ld":"<p>A fully managed, Application (L7) Load Balancer that routes HTTP and HTTPS requests to other resources.</p>\n"}},"ApplicationLoadBalancerProps":{"type":"object","properties":{"interface":{"description":"#### Configures the accessibility of the Load Balancer.\n\n---\n\n- `internet`: The Load Balancer is accessible from the internet.\n- `internal`: The Load Balancer is only accessible from within the same VPC network.\n\nTo learn more about VPCs, see the [Stacktape documentation](https://docs.stacktape.com/user-guides/vpcs).","default":"internet","enum":["internal","internet"],"type":"string","_MdxDesc":{"sd":"<p> Configures the accessibility of the Load Balancer.</p>\n","ld":"<ul>\n<li><code>internet</code>: The Load Balancer is accessible from the internet.</li>\n<li><code>internal</code>: The Load Balancer is only accessible from within the same VPC network.</li>\n</ul>\n<p>To learn more about VPCs, see the <a href=\"/user-guides/vpcs/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape documentation</a>.</p>\n"}},"customDomains":{"description":"#### Configures custom domains for this Load Balancer.\n\n---\n\nStacktape allows you to connect your custom domain names to various resources, including Web Services, HTTP API Gateways, Application Load Balancers, and Buckets with CDNs.\n\nWhen you connect a custom domain, Stacktape automatically:\n\n- **Creates DNS records:** A DNS record is created to point your domain name to the resource.\n- **Adds TLS certificates:** If you are using HTTPS, Stacktape issues and attaches a free, AWS-managed TLS certificate to the resource, handling TLS termination for you.\n\nIf you want to use your own certificates, you can configure `customCertificateArns` on the listener.\n\n> To manage a custom domain, it must first be added to your AWS account as a [hosted zone](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html), and your domain registrar's name servers must point to it.\n> For more details, see the [Adding a domain guide](https://docs.stacktape.com/other-resources/domains-and-certificates/#adding-domain).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Configures custom domains for this Load Balancer.</p>\n","ld":"<p>Stacktape allows you to connect your custom domain names to various resources, including Web Services, HTTP API Gateways, Application Load Balancers, and Buckets with CDNs.</p>\n<p>When you connect a custom domain, Stacktape automatically:</p>\n<ul>\n<li><strong>Creates DNS records:</strong> A DNS record is created to point your domain name to the resource.</li>\n<li><strong>Adds TLS certificates:</strong> If you are using HTTPS, Stacktape issues and attaches a free, AWS-managed TLS certificate to the resource, handling TLS termination for you.</li>\n</ul>\n<p>If you want to use your own certificates, you can configure <code>customCertificateArns</code> on the listener.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>To manage a custom domain, it must first be added to your AWS account as a <a href=\"https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">hosted zone</a>, and your domain registrar&#39;s name servers must point to it.\nFor more details, see the <a href=\"/other-resources/domains-and-certificates/#adding-domain\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Adding a domain guide</a>.</p>\n</div>\n</div>"}},"listeners":{"description":"#### Configures custom listeners for this Load Balancer.\n\n---\n\nListeners define the port and protocol that the Load Balancer uses to accept incoming traffic.\n\nIf you do not specify any listeners, two are created by default:\n- An HTTPS listener on port 443 (all traffic is routed here).\n- An HTTP listener on port 80 (which automatically redirects to the HTTPS listener).","type":"array","items":{"$ref":"#/definitions/ApplicationLoadBalancerListener"},"_MdxDesc":{"sd":"<p> Configures custom listeners for this Load Balancer.</p>\n","ld":"<p>Listeners define the port and protocol that the Load Balancer uses to accept incoming traffic.</p>\n<p>If you do not specify any listeners, two are created by default:</p>\n<ul>\n<li>An HTTPS listener on port 443 (all traffic is routed here).</li>\n<li>An HTTP listener on port 80 (which automatically redirects to the HTTPS listener).</li>\n</ul>\n"}},"cdn":{"$ref":"#/definitions/ApplicationLoadBalancerCdnConfiguration","description":"#### Configures an AWS CloudFront CDN (Content Delivery Network) in front of your Application Load Balancer.\n\n---\n\nA CDN is a globally distributed network of edge locations that caches responses from your Application Load Balancer, bringing content closer to your users.\n\nUsing a CDN can:\n- Reduce latency and improve load times.\n- Lower bandwidth costs.\n- Decrease the amount of traffic hitting your origin.\n- Enhance security.\n\nThe \"origin\" is the resource (in this case, the Application Load Balancer) that the CDN is attached to.\nThe CDN has its own URL endpoint.","_MdxDesc":{"sd":"<p> Configures an AWS CloudFront CDN (Content Delivery Network) in front of your Application Load Balancer.</p>\n","ld":"<p>A CDN is a globally distributed network of edge locations that caches responses from your Application Load Balancer, bringing content closer to your users.</p>\n<p>Using a CDN can:</p>\n<ul>\n<li>Reduce latency and improve load times.</li>\n<li>Lower bandwidth costs.</li>\n<li>Decrease the amount of traffic hitting your origin.</li>\n<li>Enhance security.</li>\n</ul>\n<p>The &quot;origin&quot; is the resource (in this case, the Application Load Balancer) that the CDN is attached to.\nThe CDN has its own URL endpoint.</p>\n"}},"alarms":{"description":"#### Additional alarms associated with this resource.\n\n---\n\nThese alarms will be merged with any alarms configured globally in the [console](https://console.stacktape.com/alarms).","type":"array","items":{"$ref":"#/definitions/ApplicationLoadBalancerAlarm"},"_MdxDesc":{"sd":"<p> Additional alarms associated with this resource.</p>\n","ld":"<p>These alarms will be merged with any alarms configured globally in the <a href=\"https://console.stacktape.com/alarms\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">console</a>.</p>\n"}},"disabledGlobalAlarms":{"description":"#### Disables globally configured alarms for this resource.\n\n---\n\nProvide a list of alarm names as configured in the [console](https://console.stacktape.com/alarms).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Disables globally configured alarms for this resource.</p>\n","ld":"<p>Provide a list of alarm names as configured in the <a href=\"https://console.stacktape.com/alarms\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">console</a>.</p>\n"}},"useFirewall":{"description":"#### The name of the `web-app-firewall` resource to use for this Load Balancer.\n\n---\n\nA `web-app-firewall` can protect your resources from common web exploits that could affect availability, compromise security, or consume excessive resources.\nThe firewall works by filtering malicious requests before they reach your application.\n\nFor more information, see the [firewall documentation](https://docs.stacktape.com/security-resources/web-app-firewalls/).","type":"string","_MdxDesc":{"sd":"<p> The name of the <code>web-app-firewall</code> resource to use for this Load Balancer.</p>\n","ld":"<p>A <code>web-app-firewall</code> can protect your resources from common web exploits that could affect availability, compromise security, or consume excessive resources.\nThe firewall works by filtering malicious requests before they reach your application.</p>\n<p>For more information, see the <a href=\"/security-resources/web-app-firewalls/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">firewall documentation</a>.</p>\n"}}},"additionalProperties":false},"ApplicationLoadBalancerListener":{"type":"object","properties":{"protocol":{"description":"#### The protocol for the listener.\n\n---\n\nIf you use `HTTPS`, the listener needs an SSL/TLS certificate. This can be configured in two ways:\n1.  **Automatic:** Configure `customDomains` to have Stacktape automatically generate and manage the certificate.\n2.  **Manual:** Configure `customCertificateArns` to use your own certificate, referenced by its ARN (Amazon Resource Name).","enum":["HTTP","HTTPS"],"type":"string","_MdxDesc":{"sd":"<p> The protocol for the listener.</p>\n","ld":"<p>If you use <code>HTTPS</code>, the listener needs an SSL/TLS certificate. This can be configured in two ways:</p>\n<ol>\n<li><strong>Automatic:</strong> Configure <code>customDomains</code> to have Stacktape automatically generate and manage the certificate.</li>\n<li><strong>Manual:</strong> Configure <code>customCertificateArns</code> to use your own certificate, referenced by its ARN (Amazon Resource Name).</li>\n</ol>\n"}},"port":{"description":"#### The port number on which the listener is accessible.\n\n---\n\nBy default, `HTTPS` connections use port `443`, and `HTTP` connections use port `80`.","type":"number","_MdxDesc":{"sd":"<p> The port number on which the listener is accessible.</p>\n","ld":"<p>By default, <code>HTTPS</code> connections use port <code>443</code>, and <code>HTTP</code> connections use port <code>80</code>.</p>\n"}},"customCertificateArns":{"description":"#### Used to configure custom SSL/TLS certificates.\n\n---\n\nThis is not necessary if you specify `customDomains` or if you are not using the `HTTPS` protocol for this listener.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Used to configure custom SSL/TLS certificates.</p>\n","ld":"<p>This is not necessary if you specify <code>customDomains</code> or if you are not using the <code>HTTPS</code> protocol for this listener.</p>\n"}},"whitelistIps":{"description":"#### Limits listener accessibility to specific IP addresses.\n\n---\n\nBy default, all IP addresses are whitelisted.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Limits listener accessibility to specific IP addresses.</p>\n","ld":"<p>By default, all IP addresses are whitelisted.</p>\n"}},"defaultAction":{"$ref":"#/definitions/LbRedirect","description":"#### Configures the listener's behavior for requests that do not match any integration.\n\n---\n\nCurrently, the only supported default action is `redirect`.","_MdxDesc":{"sd":"<p> Configures the listener&#39;s behavior for requests that do not match any integration.</p>\n","ld":"<p>Currently, the only supported default action is <code>redirect</code>.</p>\n"}}},"additionalProperties":false,"required":["port","protocol"]},"LbRedirect":{"type":"object","properties":{"type":{"description":"#### The type of the default action.","type":"string","const":"redirect","_MdxDesc":{"sd":"<p> The type of the default action.</p>\n"}},"properties":{"$ref":"#/definitions/LbRedirectProperties","description":"#### Configures where to redirect the request.\n\n---\n\nA redirect changes the URI, which has the format: `protocol://hostname:port/path?query`.\nUnmodified URI components will retain their original values.\n\nTo avoid redirect loops, ensure that you sufficiently modify the URI.\nYou can reuse URI components with the following keywords: `#{protocol}`, `#{host}`, `#{port}`, `#{path}` (the leading `/` is removed), and `#{query}`.\n\nFor example, you can change the path to `/new/#{path}`, the hostname to `example.#{host}`, or the query to `#{query}&value=xyz`.","_MdxDesc":{"sd":"<p> Configures where to redirect the request.</p>\n","ld":"<p>A redirect changes the URI, which has the format: <code>protocol://hostname:port/path?query</code>.\nUnmodified URI components will retain their original values.</p>\n<p>To avoid redirect loops, ensure that you sufficiently modify the URI.\nYou can reuse URI components with the following keywords: <code>#{protocol}</code>, <code>#{host}</code>, <code>#{port}</code>, <code>#{path}</code> (the leading <code>/</code> is removed), and <code>#{query}</code>.</p>\n<p>For example, you can change the path to <code>/new/#{path}</code>, the hostname to <code>example.#{host}</code>, or the query to <code>#{query}&value=xyz</code>.</p>\n"}}},"additionalProperties":false,"required":["properties","type"]},"LbRedirectProperties":{"type":"object","properties":{"path":{"description":"#### The absolute path to redirect to.\n\n---\n\n- Must start with a leading `/`.\n- Should not be percent-encoded.","type":"string","_MdxDesc":{"sd":"<p> The absolute path to redirect to.</p>\n","ld":"<ul>\n<li>Must start with a leading <code>/</code>.</li>\n<li>Should not be percent-encoded.</li>\n</ul>\n"}},"query":{"description":"#### The query parameters for the redirect.\n\n---\n\n- Should be URL-encoded where necessary, but not percent-encoded.\n- Do not include the leading `?`, as it is added automatically.","type":"string","_MdxDesc":{"sd":"<p> The query parameters for the redirect.</p>\n","ld":"<ul>\n<li>Should be URL-encoded where necessary, but not percent-encoded.</li>\n<li>Do not include the leading <code>?</code>, as it is added automatically.</li>\n</ul>\n"}},"port":{"description":"#### The port for the redirect.\n\n---\n\nYou can specify a value from 1 to 65535 or `#{port}`.","type":"number","_MdxDesc":{"sd":"<p> The port for the redirect.</p>\n","ld":"<p>You can specify a value from 1 to 65535 or <code>#{port}</code>.</p>\n"}},"host":{"description":"#### The hostname for the redirect.\n\n---\n\nShould not be percent-encoded.","type":"string","_MdxDesc":{"sd":"<p> The hostname for the redirect.</p>\n","ld":"<p>Should not be percent-encoded.</p>\n"}},"protocol":{"description":"#### The protocol for the redirect.\n\n---\n\n- Must be `HTTP`, `HTTPS`, or `#{protocol}`.\n- You cannot redirect from `HTTPS` to `HTTP`.","enum":["HTTP","HTTPS"],"type":"string","_MdxDesc":{"sd":"<p> The protocol for the redirect.</p>\n","ld":"<ul>\n<li>Must be <code>HTTP</code>, <code>HTTPS</code>, or <code>#{protocol}</code>.</li>\n<li>You cannot redirect from <code>HTTPS</code> to <code>HTTP</code>.</li>\n</ul>\n"}},"statusCode":{"description":"#### The HTTP redirect code.\n\n---\n\n- Use `HTTP_301` for a permanent redirect.\n- Use `HTTP_302` for a temporary redirect.","enum":["HTTP_301","HTTP_302"],"type":"string","_MdxDesc":{"sd":"<p> The HTTP redirect code.</p>\n","ld":"<ul>\n<li>Use <code>HTTP_301</code> for a permanent redirect.</li>\n<li>Use <code>HTTP_302</code> for a temporary redirect.</li>\n</ul>\n"}}},"additionalProperties":false,"required":["statusCode"]},"ApplicationLoadBalancerCdnConfiguration":{"type":"object","properties":{"listenerPort":{"description":"#### The listener port to which CDN traffic will be forwarded.\n\n---\n\nYou must specify this if the Load Balancer uses custom listeners.","type":"number","_MdxDesc":{"sd":"<p> The listener port to which CDN traffic will be forwarded.</p>\n","ld":"<p>You must specify this if the Load Balancer uses custom listeners.</p>\n"}},"originDomainName":{"description":"#### The origin domain name used for forwarding to the Load Balancer.\n\n---\n\nThis is only necessary if the Load Balancer has no `customDomains` attached and the listener uses `customCertificateArns`.","type":"string","_MdxDesc":{"sd":"<p> The origin domain name used for forwarding to the Load Balancer.</p>\n","ld":"<p>This is only necessary if the Load Balancer has no <code>customDomains</code> attached and the listener uses <code>customCertificateArns</code>.</p>\n"}},"enabled":{"description":"#### Enables the CDN.\n\n---","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enables the CDN.</p>\n"}},"cachingOptions":{"$ref":"#/definitions/CdnCachingOptions","description":"#### Configures custom caching options.\n\n---\n\nThis property controls the caching behavior of your edge distribution, including what content is cached, for how long, and when it should be re-fetched from the origin.\n\nIf a response from the origin does not include `Cache-Control` or `Expires` headers, a default caching behavior is used:\n- **bucket**: Objects are cached for 6 months by default, or until the cache is invalidated.\n- **http-api-gateway** and **application-load-balancer**: Responses are not cached by default.","_MdxDesc":{"sd":"<p> Configures custom caching options.</p>\n","ld":"<p>This property controls the caching behavior of your edge distribution, including what content is cached, for how long, and when it should be re-fetched from the origin.</p>\n<p>If a response from the origin does not include <code>Cache-Control</code> or <code>Expires</code> headers, a default caching behavior is used:</p>\n<ul>\n<li><strong>bucket</strong>: Objects are cached for 6 months by default, or until the cache is invalidated.</li>\n<li><strong>http-api-gateway</strong> and <strong>application-load-balancer</strong>: Responses are not cached by default.</li>\n</ul>\n"}},"forwardingOptions":{"$ref":"#/definitions/CdnForwardingOptions","description":"#### Configures which parts of the request are forwarded to the origin.\n\n---\n\nThis includes headers, query parameters, and cookies.","_MdxDesc":{"sd":"<p> Configures which parts of the request are forwarded to the origin.</p>\n","ld":"<p>This includes headers, query parameters, and cookies.</p>\n"}},"routeRewrites":{"description":"#### Redirects specific requests to a different origin.\n\n---\n\nEach incoming request to the CDN is evaluated against a list of route rewrites. If the request path matches a rewrite's path pattern, it is sent to the configured route.\n\nRoute rewrites are evaluated in order, and the first match determines where the request will be sent.\nIf no match is found, the request is sent to the default origin (the resource the CDN is attached to).\n\n**Example Use Cases:**\n- Serving static content from a bucket while routing dynamic paths to a Lambda function.\n- Caching `.jpg` files for a longer duration than other file types.","type":"array","items":{"$ref":"#/definitions/CdnRouteRewrite"},"_MdxDesc":{"sd":"<p> Redirects specific requests to a different origin.</p>\n","ld":"<p>Each incoming request to the CDN is evaluated against a list of route rewrites. If the request path matches a rewrite&#39;s path pattern, it is sent to the configured route.</p>\n<p>Route rewrites are evaluated in order, and the first match determines where the request will be sent.\nIf no match is found, the request is sent to the default origin (the resource the CDN is attached to).</p>\n<p><strong>Example Use Cases:</strong></p>\n<ul>\n<li>Serving static content from a bucket while routing dynamic paths to a Lambda function.</li>\n<li>Caching <code>.jpg</code> files for a longer duration than other file types.</li>\n</ul>\n"}},"customDomains":{"description":"#### Attaches custom domains to this CDN.\n\n---\n\nWhen you connect a custom domain, Stacktape automatically:\n\n- **Creates DNS records:** A DNS record is created to point your domain name to the resource.\n- **Adds TLS certificates:** If the resource uses HTTPS, Stacktape issues and attaches a free, AWS-managed TLS certificate, handling TLS termination for you.\n\n> To manage a custom domain, it first needs to be added to your AWS account.\n> This means that a [hosted zone](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html)\n> (collection of records managed together for a given domain)\n> for your domain exists in your AWS account and your domain registrar's name servers are pointing to it.\n> To learn more, refer to [Adding a domain guide](https://docs.stacktape.com/other-resources/domains-and-certificates/#adding-domain).","type":"array","items":{"$ref":"#/definitions/DomainConfiguration"},"_MdxDesc":{"sd":"<p> Attaches custom domains to this CDN.</p>\n","ld":"<p>When you connect a custom domain, Stacktape automatically:</p>\n<ul>\n<li><strong>Creates DNS records:</strong> A DNS record is created to point your domain name to the resource.</li>\n<li><strong>Adds TLS certificates:</strong> If the resource uses HTTPS, Stacktape issues and attaches a free, AWS-managed TLS certificate, handling TLS termination for you.</li>\n</ul>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>To manage a custom domain, it first needs to be added to your AWS account.\nThis means that a <a href=\"https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">hosted zone</a>\n(collection of records managed together for a given domain)\nfor your domain exists in your AWS account and your domain registrar&#39;s name servers are pointing to it.\nTo learn more, refer to <a href=\"/other-resources/domains-and-certificates/#adding-domain\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Adding a domain guide</a>.</p>\n</div>\n</div>"}},"edgeFunctions":{"$ref":"#/definitions/EdgeFunctionsConfig","description":"#### Configures Edge function triggers.\n\n---\n\nYou can associate an `edge-lambda-function` with the CDN to be executed at different stages:\n\n- `onRequest`: Executed when the CDN receives a request from a client, before checking the cache.\n- `onResponse`: Executed before returning a response to the client.\n\n**Potential Use Cases:**\n- Generating an immediate HTTP response without checking the cache or forwarding to the origin.\n- Modifying the request (e.g., rewriting the URL or headers) before forwarding to the origin.\n- Inspecting cookies or validating authorization headers and tokens.","_MdxDesc":{"sd":"<p> Configures Edge function triggers.</p>\n","ld":"<p>You can associate an <code>edge-lambda-function</code> with the CDN to be executed at different stages:</p>\n<ul>\n<li><code>onRequest</code>: Executed when the CDN receives a request from a client, before checking the cache.</li>\n<li><code>onResponse</code>: Executed before returning a response to the client.</li>\n</ul>\n<p><strong>Potential Use Cases:</strong></p>\n<ul>\n<li>Generating an immediate HTTP response without checking the cache or forwarding to the origin.</li>\n<li>Modifying the request (e.g., rewriting the URL or headers) before forwarding to the origin.</li>\n<li>Inspecting cookies or validating authorization headers and tokens.</li>\n</ul>\n"}},"cloudfrontPriceClass":{"description":"#### Configures the locations from which the CDN serves traffic.\n\n---\n\nA higher price class results in more edge locations serving your traffic, which can improve performance in some regions but is more costly.\n\nFor example, if your users are primarily located in the US and Europe, you can save money by using `PriceClass_100`.\n\nFor more details, see the [AWS documentation on price classes](https://aws.amazon.com/cloudfront/pricing/).","default":"PriceClass_All","enum":["PriceClass_100","PriceClass_200","PriceClass_All"],"type":"string","_MdxDesc":{"sd":"<p> Configures the locations from which the CDN serves traffic.</p>\n","ld":"<p>A higher price class results in more edge locations serving your traffic, which can improve performance in some regions but is more costly.</p>\n<p>For example, if your users are primarily located in the US and Europe, you can save money by using <code>PriceClass_100</code>.</p>\n<p>For more details, see the <a href=\"https://aws.amazon.com/cloudfront/pricing/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on price classes</a>.</p>\n"}},"defaultRoutePrefix":{"description":"#### Prefixes requests to the origin with a specified path.\n\n---\n\nIncoming requests will be prefixed with `defaultRoutePrefix` before being forwarded to the origin.\nFor example, if the CDN receives a request for `/my/resource/url`, the request will be sent to the origin as `/your_prefix/my/resource/url`.","type":"string","_MdxDesc":{"sd":"<p> Prefixes requests to the origin with a specified path.</p>\n","ld":"<p>Incoming requests will be prefixed with <code>defaultRoutePrefix</code> before being forwarded to the origin.\nFor example, if the CDN receives a request for <code>/my/resource/url</code>, the request will be sent to the origin as <code>/your_prefix/my/resource/url</code>.</p>\n"}},"errorDocument":{"description":"#### The custom error document URL.\n\n---\n\nThis document is requested by the CDN if the original request to the origin returns a `404` error code.\n\nExample: `/error.html`","default":"/404.html","type":"string","_MdxDesc":{"sd":"<p> The custom error document URL.</p>\n","ld":"<p>This document is requested by the CDN if the original request to the origin returns a <code>404</code> error code.</p>\n<p>Example: <code>/error.html</code></p>\n"}},"indexDocument":{"description":"#### The custom index document served for requests to the root path (`/`).\n\n---","default":"/index.html","type":"string","_MdxDesc":{"sd":"<p> The custom index document served for requests to the root path (<code>/</code>).</p>\n"}},"disableInvalidationAfterDeploy":{"description":"#### Disables invalidation of the CDN cache after each deployment.\n\n---\n\nBy default, the cache is invalidated after every deployment to prevent serving outdated content.\nWhen the cache is invalidated, the CDN flushes all cached content, and new requests are sent directly to the origin.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disables invalidation of the CDN cache after each deployment.</p>\n","ld":"<p>By default, the cache is invalidated after every deployment to prevent serving outdated content.\nWhen the cache is invalidated, the CDN flushes all cached content, and new requests are sent directly to the origin.</p>\n"}},"useFirewall":{"description":"#### The name of the `web-app-firewall` resource to use with your CDN.\n\n---\n\nA `web-app-firewall` can protect your resources from common web exploits that could affect availability, compromise security, or consume excessive resources.\nThe firewall works by filtering malicious requests before they reach your application.\n\nFor more information, see the [firewall documentation](https://docs.stacktape.com/security-resources/web-app-firewalls/).","type":"string","_MdxDesc":{"sd":"<p> The name of the <code>web-app-firewall</code> resource to use with your CDN.</p>\n","ld":"<p>A <code>web-app-firewall</code> can protect your resources from common web exploits that could affect availability, compromise security, or consume excessive resources.\nThe firewall works by filtering malicious requests before they reach your application.</p>\n<p>For more information, see the <a href=\"/security-resources/web-app-firewalls/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">firewall documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["enabled"]},"NetworkLoadBalancer":{"description":"#### Network Load Balancer\n\n---\n\nA fully managed, Network (L4) Load Balancer that routes TCP or UDP traffic to other resources.","type":"object","properties":{"type":{"type":"string","const":"network-load-balancer"},"properties":{"$ref":"#/definitions/NetworkLoadBalancerProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Network Load Balancer</p>\n","ld":"<p>A fully managed, Network (L4) Load Balancer that routes TCP or UDP traffic to other resources.</p>\n"}},"NetworkLoadBalancerProps":{"type":"object","properties":{"interface":{"description":"#### Configures the accessibility of the Load Balancer.\n\n---\n\n- `internet`: The Load Balancer is accessible from the internet.\n- `internal`: The Load Balancer is only accessible from within the same VPC network.\n\nTo learn more about VPCs, see the [Stacktape documentation](https://docs.stacktape.com/user-guides/vpcs).","default":"internet","enum":["internal","internet"],"type":"string","_MdxDesc":{"sd":"<p> Configures the accessibility of the Load Balancer.</p>\n","ld":"<ul>\n<li><code>internet</code>: The Load Balancer is accessible from the internet.</li>\n<li><code>internal</code>: The Load Balancer is only accessible from within the same VPC network.</li>\n</ul>\n<p>To learn more about VPCs, see the <a href=\"/user-guides/vpcs/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape documentation</a>.</p>\n"}},"customDomains":{"description":"#### Configures custom domains for this Load Balancer.\n\n---\n\nStacktape allows you to connect your custom domain names to various resources, including Web Services, HTTP API Gateways, Application Load Balancers, and Buckets with CDNs.\n\nWhen you connect a custom domain, Stacktape automatically:\n\n- **Creates DNS records:** A DNS record is created to point your domain name to the resource.\n- **Adds TLS certificates:** If your listeners use TLS, Stacktape issues and attaches a free, AWS-managed TLS certificate to the resource, handling TLS termination for you.\n\nIf you want to use your own certificates, you can configure `customCertificateArns` on the listener.\n\n> To manage a custom domain, it must first be added to your AWS account as a [hosted zone](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html), and your domain registrar's name servers must point to it.\n> For more details, see the [Adding a domain guide](https://docs.stacktape.com/other-resources/domains-and-certificates/#adding-domain).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Configures custom domains for this Load Balancer.</p>\n","ld":"<p>Stacktape allows you to connect your custom domain names to various resources, including Web Services, HTTP API Gateways, Application Load Balancers, and Buckets with CDNs.</p>\n<p>When you connect a custom domain, Stacktape automatically:</p>\n<ul>\n<li><strong>Creates DNS records:</strong> A DNS record is created to point your domain name to the resource.</li>\n<li><strong>Adds TLS certificates:</strong> If your listeners use TLS, Stacktape issues and attaches a free, AWS-managed TLS certificate to the resource, handling TLS termination for you.</li>\n</ul>\n<p>If you want to use your own certificates, you can configure <code>customCertificateArns</code> on the listener.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>To manage a custom domain, it must first be added to your AWS account as a <a href=\"https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">hosted zone</a>, and your domain registrar&#39;s name servers must point to it.\nFor more details, see the <a href=\"/other-resources/domains-and-certificates/#adding-domain\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Adding a domain guide</a>.</p>\n</div>\n</div>"}},"listeners":{"description":"#### Configures custom listeners for this Load Balancer.\n\n---\n\nListeners define the port and protocol that the Load Balancer uses to accept incoming traffic.\nTraffic routed to a listener is then forwarded to a target resource based on the integrations.","type":"array","items":{"$ref":"#/definitions/NetworkLoadBalancerListener"},"_MdxDesc":{"sd":"<p> Configures custom listeners for this Load Balancer.</p>\n","ld":"<p>Listeners define the port and protocol that the Load Balancer uses to accept incoming traffic.\nTraffic routed to a listener is then forwarded to a target resource based on the integrations.</p>\n"}}},"additionalProperties":false,"required":["listeners"]},"NetworkLoadBalancerListener":{"type":"object","properties":{"protocol":{"description":"#### The protocol for the listener.\n\n---\n\nIf you use `TLS`, the listener needs an SSL/TLS certificate. This can be configured in two ways:\n1.  **Automatic:** Configure `customDomains` to have Stacktape automatically generate and manage the certificate.\n2.  **Manual:** Configure `customCertificateArns` to use your own certificate, referenced by its ARN (Amazon Resource Name).","enum":["TCP","TLS"],"type":"string","_MdxDesc":{"sd":"<p> The protocol for the listener.</p>\n","ld":"<p>If you use <code>TLS</code>, the listener needs an SSL/TLS certificate. This can be configured in two ways:</p>\n<ol>\n<li><strong>Automatic:</strong> Configure <code>customDomains</code> to have Stacktape automatically generate and manage the certificate.</li>\n<li><strong>Manual:</strong> Configure <code>customCertificateArns</code> to use your own certificate, referenced by its ARN (Amazon Resource Name).</li>\n</ol>\n"}},"port":{"description":"#### The port number on which the listener is accessible.\n\n---","type":"number","_MdxDesc":{"sd":"<p> The port number on which the listener is accessible.</p>\n"}},"customCertificateArns":{"description":"#### Used to configure custom SSL/TLS certificates.\n\n---\n\nThis is not necessary if you specify `customDomains` or if you are not using the `TLS` protocol for this listener.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Used to configure custom SSL/TLS certificates.</p>\n","ld":"<p>This is not necessary if you specify <code>customDomains</code> or if you are not using the <code>TLS</code> protocol for this listener.</p>\n"}},"whitelistIps":{"description":"#### Limits listener accessibility to specific IP addresses.\n\n---\n\nBy default, all IP addresses are whitelisted.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Limits listener accessibility to specific IP addresses.</p>\n","ld":"<p>By default, all IP addresses are whitelisted.</p>\n"}}},"additionalProperties":false,"required":["port","protocol"]},"HttpApiGateway":{"description":"#### HTTP API Gateway\n\n---\n\nA fully managed, serverless HTTP API Gateway with pay-per-request pricing.","type":"object","properties":{"type":{"type":"string","const":"http-api-gateway"},"properties":{"$ref":"#/definitions/HttpApiGatewayProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["type"],"_MdxDesc":{"sd":"<p> HTTP API Gateway</p>\n","ld":"<p>A fully managed, serverless HTTP API Gateway with pay-per-request pricing.</p>\n"}},"HttpApiGatewayProps":{"type":"object","properties":{"payloadFormat":{"description":"#### Determines the shape of the event delivered to your integrations.\n\n---\n\nThis value is only used if the payload format is not set on the integration level.\n\nFor more details on the differences between payload formats, see the [AWS documentation](https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-develop-integrations-lambda.html#http-api-develop-integrations-lambda.proxy-format).","enum":["1.0","2.0"],"type":"string","_MdxDesc":{"sd":"<p> Determines the shape of the event delivered to your integrations.</p>\n","ld":"<p>This value is only used if the payload format is not set on the integration level.</p>\n<p>For more details on the differences between payload formats, see the <a href=\"https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-develop-integrations-lambda.html#http-api-develop-integrations-lambda.proxy-format\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"cors":{"$ref":"#/definitions/HttpApiCorsConfig","description":"#### Configures CORS (Cross-Origin Resource Sharing) HTTP headers for this HTTP API Gateway.\n\n---\n\nIf CORS is configured using this property, any CORS headers returned from your application will be ignored and replaced.","_MdxDesc":{"sd":"<p> Configures CORS (Cross-Origin Resource Sharing) HTTP headers for this HTTP API Gateway.</p>\n","ld":"<p>If CORS is configured using this property, any CORS headers returned from your application will be ignored and replaced.</p>\n"}},"logging":{"$ref":"#/definitions/HttpApiAccessLogsConfig","description":"#### Configures access logging for requests to the HTTP API Gateway.\n\n---\n\nThe following properties are stored: `requestId`, `ip`, `requestTime`, `httpMethod`, `routeKey`, `status`, `protocol`, and `responseLength`.\nYou can configure the log format using `CLF`, `JSON`, `XML`, or `CSV`.\n\nYou can access your logs in two ways:\n1.  **AWS CloudWatch Console:** Use the `stacktape stack-info` command to get a direct link to the log group.\n2.  **Stacktape CLI:** Use the [`stacktape logs` command](https://docs.stacktape.com/cli/commands/logs/) to view logs in your terminal.","_MdxDesc":{"sd":"<p> Configures access logging for requests to the HTTP API Gateway.</p>\n","ld":"<p>The following properties are stored: <code>requestId</code>, <code>ip</code>, <code>requestTime</code>, <code>httpMethod</code>, <code>routeKey</code>, <code>status</code>, <code>protocol</code>, and <code>responseLength</code>.\nYou can configure the log format using <code>CLF</code>, <code>JSON</code>, <code>XML</code>, or <code>CSV</code>.</p>\n<p>You can access your logs in two ways:</p>\n<ol>\n<li><strong>AWS CloudWatch Console:</strong> Use the <code>stacktape stack-info</code> command to get a direct link to the log group.</li>\n<li><strong>Stacktape CLI:</strong> Use the <a href=\"/cli/commands/logs/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">`stacktape logs` command</a> to view logs in your terminal.</li>\n</ol>\n"}},"customDomains":{"description":"#### Attaches custom domains to this HTTP API Gateway.\n\n---\n\nWhen you connect a custom domain, Stacktape automatically:\n\n- **Creates DNS records:** A DNS record is created to point your domain name to the resource.\n- **Adds TLS certificates:** If the resource uses HTTPS, Stacktape issues and attaches a free, AWS-managed TLS certificate, handling TLS termination for you.\n\n> To manage a custom domain, it must first be added to your AWS account as a [hosted zone](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html), and your domain registrar's name servers must point to it.\n> For more details, see the [Adding a domain guide](https://docs.stacktape.com/other-resources/domains-and-certificates/#adding-domain).","type":"array","items":{"$ref":"#/definitions/DomainConfiguration"},"_MdxDesc":{"sd":"<p> Attaches custom domains to this HTTP API Gateway.</p>\n","ld":"<p>When you connect a custom domain, Stacktape automatically:</p>\n<ul>\n<li><strong>Creates DNS records:</strong> A DNS record is created to point your domain name to the resource.</li>\n<li><strong>Adds TLS certificates:</strong> If the resource uses HTTPS, Stacktape issues and attaches a free, AWS-managed TLS certificate, handling TLS termination for you.</li>\n</ul>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>To manage a custom domain, it must first be added to your AWS account as a <a href=\"https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">hosted zone</a>, and your domain registrar&#39;s name servers must point to it.\nFor more details, see the <a href=\"/other-resources/domains-and-certificates/#adding-domain\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Adding a domain guide</a>.</p>\n</div>\n</div>"}},"cdn":{"$ref":"#/definitions/CdnConfiguration","description":"#### Configures an AWS CloudFront CDN (Content Delivery Network) in front of your HTTP API Gateway.\n\n---\n\nA CDN is a globally distributed network of edge locations that caches responses from your HTTP API Gateway, bringing content closer to your users.\n\nUsing a CDN can:\n- Reduce latency and improve load times.\n- Lower bandwidth costs.\n- Decrease the amount of traffic hitting your origin.\n- Enhance security.\n\nThe \"origin\" is the resource (in this case, the HTTP API Gateway) that the CDN is attached to.","_MdxDesc":{"sd":"<p> Configures an AWS CloudFront CDN (Content Delivery Network) in front of your HTTP API Gateway.</p>\n","ld":"<p>A CDN is a globally distributed network of edge locations that caches responses from your HTTP API Gateway, bringing content closer to your users.</p>\n<p>Using a CDN can:</p>\n<ul>\n<li>Reduce latency and improve load times.</li>\n<li>Lower bandwidth costs.</li>\n<li>Decrease the amount of traffic hitting your origin.</li>\n<li>Enhance security.</li>\n</ul>\n<p>The &quot;origin&quot; is the resource (in this case, the HTTP API Gateway) that the CDN is attached to.</p>\n"}},"alarms":{"description":"#### Additional alarms associated with this resource.\n\n---\n\nThese alarms will be merged with any alarms configured globally in the [console](https://console.stacktape.com/alarms).","type":"array","items":{"$ref":"#/definitions/HttpApiGatewayAlarm"},"_MdxDesc":{"sd":"<p> Additional alarms associated with this resource.</p>\n","ld":"<p>These alarms will be merged with any alarms configured globally in the <a href=\"https://console.stacktape.com/alarms\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">console</a>.</p>\n"}},"disabledGlobalAlarms":{"description":"#### Disables globally configured alarms for this resource.\n\n---\n\nProvide a list of alarm names as configured in the [console](https://console.stacktape.com/alarms).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Disables globally configured alarms for this resource.</p>\n","ld":"<p>Provide a list of alarm names as configured in the <a href=\"https://console.stacktape.com/alarms\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">console</a>.</p>\n"}}},"additionalProperties":false},"HttpApiAccessLogsConfig":{"type":"object","properties":{"disabled":{"description":"#### Disables the collection of access logs to CloudWatch.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disables the collection of access logs to CloudWatch.</p>\n"}},"format":{"description":"#### The format of the stored access logs.\n\n---\n\nStored properties include: `requestId`, `ip`, `requestTime`, `httpMethod`, `routeKey`, `status`, `protocol`, and `responseLength`.","default":"JSON","enum":["CLF","CSV","JSON","XML"],"type":"string","_MdxDesc":{"sd":"<p> The format of the stored access logs.</p>\n","ld":"<p>Stored properties include: <code>requestId</code>, <code>ip</code>, <code>requestTime</code>, <code>httpMethod</code>, <code>routeKey</code>, <code>status</code>, <code>protocol</code>, and <code>responseLength</code>.</p>\n"}},"retentionDays":{"description":"#### The number of days to retain logs in the CloudWatch log group.","default":30,"enum":[1,120,14,150,180,1827,3,30,365,3653,400,5,545,60,7,731,90],"type":"number","_MdxDesc":{"sd":"<p> The number of days to retain logs in the CloudWatch log group.</p>\n"}},"logForwarding":{"description":"#### Log Forwarding\n\n---\n\nForwards logs to a specified destination for monitoring, analysis, or long-term storage.\n\nLog forwarding is handled by an [Amazon Kinesis Data Firehose](https://aws.amazon.com/kinesis/data-firehose/) delivery stream. You will incur costs based on the volume of data transferred (approximately $0.03 per GB). For detailed pricing, see the [AWS Kinesis Firehose Pricing](https://aws.amazon.com/kinesis/data-firehose/pricing/) page.\n\nSupported destinations:\n- `http-endpoint`: Delivers logs to any HTTP endpoint that complies with [Firehose request and response specifications](https://docs.aws.amazon.com/firehose/latest/dev/httpdeliveryrequestresponse.html). Many third-party logging services are compatible out-of-the-box.\n- `datadog`: Delivers logs to [Datadog](https://www.datadoghq.com/).\n- `highlight`: Delivers logs to a [Highlight.io](https://www.highlight.io/) project.\n\nFor more information, refer to the [Stacktape documentation on log forwarding](https://docs.stacktape.com/configuration/log-forwarding/).\n\n> If logs fail to be delivered after multiple retries, they are stored in a backup S3 bucket named `{stackName}-{resourceName}-logs-{generatedHash}`. The retry duration can be configured.","anyOf":[{"$ref":"#/definitions/HttpEndpointLogForwarding"},{"$ref":"#/definitions/HighlightLogForwarding"},{"$ref":"#/definitions/DatadogLogForwarding"}],"_MdxDesc":{"sd":"<p> Log Forwarding</p>\n","ld":"<p>Forwards logs to a specified destination for monitoring, analysis, or long-term storage.</p>\n<p>Log forwarding is handled by an <a href=\"https://aws.amazon.com/kinesis/data-firehose/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Amazon Kinesis Data Firehose</a> delivery stream. You will incur costs based on the volume of data transferred (approximately $0.03 per GB). For detailed pricing, see the <a href=\"https://aws.amazon.com/kinesis/data-firehose/pricing/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS Kinesis Firehose Pricing</a> page.</p>\n<p>Supported destinations:</p>\n<ul>\n<li><code>http-endpoint</code>: Delivers logs to any HTTP endpoint that complies with <a href=\"https://docs.aws.amazon.com/firehose/latest/dev/httpdeliveryrequestresponse.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Firehose request and response specifications</a>. Many third-party logging services are compatible out-of-the-box.</li>\n<li><code>datadog</code>: Delivers logs to <a href=\"https://www.datadoghq.com/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Datadog</a>.</li>\n<li><code>highlight</code>: Delivers logs to a <a href=\"https://www.highlight.io/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Highlight.io</a> project.</li>\n</ul>\n<p>For more information, refer to the <a href=\"/configuration/log-forwarding/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape documentation on log forwarding</a>.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>If logs fail to be delivered after multiple retries, they are stored in a backup S3 bucket named <code>{stackName}-{resourceName}-logs-{generatedHash}</code>. The retry duration can be configured.</p>\n</div>\n</div>"}}},"additionalProperties":false},"Bucket":{"description":"#### Storage Bucket\n\n---\n\nA durable and highly available object storage service with pay-per-use pricing.","type":"object","properties":{"type":{"type":"string","const":"bucket"},"properties":{"$ref":"#/definitions/BucketProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["type"],"_MdxDesc":{"sd":"<p> Storage Bucket</p>\n","ld":"<p>A durable and highly available object storage service with pay-per-use pricing.</p>\n"}},"BucketProps":{"type":"object","properties":{"directoryUpload":{"$ref":"#/definitions/DirectoryUpload","description":"#### Allows you to upload a specified directory to the bucket on every deployment.\n\n---\n\nAfter the upload is finished, the contents of your bucket will mirror the contents of the local folder.\nFiles are uploaded using parallel, multipart uploads.\n\n> **Warning:** Any existing contents of the bucket will be deleted and replaced with the contents of the local directory.\n> You should not use `directoryUpload` for buckets with application-generated or user-generated content.","_MdxDesc":{"sd":"<p> Allows you to upload a specified directory to the bucket on every deployment.</p>\n","ld":"<p>After the upload is finished, the contents of your bucket will mirror the contents of the local folder.\nFiles are uploaded using parallel, multipart uploads.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Warning:</strong> Any existing contents of the bucket will be deleted and replaced with the contents of the local directory.\nYou should not use <code>directoryUpload</code> for buckets with application-generated or user-generated content.</p>\n</div>\n</div>"}},"accessibility":{"$ref":"#/definitions/BucketAccessibility","description":"#### Configures the accessibility of the bucket.","_MdxDesc":{"sd":"<p> Configures the accessibility of the bucket.</p>\n"}},"cors":{"$ref":"#/definitions/BucketCorsConfig","description":"#### Configures CORS (Cross-Origin Resource Sharing) HTTP headers for the bucket.\n\n---\n\nWeb browsers use CORS to block websites from making requests to a different origin (server) than the one they are served from.","_MdxDesc":{"sd":"<p> Configures CORS (Cross-Origin Resource Sharing) HTTP headers for the bucket.</p>\n","ld":"<p>Web browsers use CORS to block websites from making requests to a different origin (server) than the one they are served from.</p>\n"}},"versioning":{"description":"#### Enables versioning of objects in the bucket.\n\n---\n\nWhen enabled, the bucket will keep multiple variants of an object.\nThis can help you recover objects from accidental deletion or overwrites.","type":"boolean","_MdxDesc":{"sd":"<p> Enables versioning of objects in the bucket.</p>\n","ld":"<p>When enabled, the bucket will keep multiple variants of an object.\nThis can help you recover objects from accidental deletion or overwrites.</p>\n"}},"encryption":{"description":"#### Enables encryption of the objects stored in this bucket.\n\n---\n\nObjects are encrypted using the AES-256 algorithm.","type":"boolean","_MdxDesc":{"sd":"<p> Enables encryption of the objects stored in this bucket.</p>\n","ld":"<p>Objects are encrypted using the AES-256 algorithm.</p>\n"}},"lifecycleRules":{"description":"#### Configures how objects are stored throughout their lifecycle.\n\n---\n\nLifecycle rules are used to transition objects to different storage classes or delete old objects.","type":"array","items":{"anyOf":[{"$ref":"#/definitions/Expiration"},{"$ref":"#/definitions/NonCurrentVersionExpiration"},{"$ref":"#/definitions/ClassTransition"},{"$ref":"#/definitions/NonCurrentVersionClassTransition"},{"$ref":"#/definitions/AbortIncompleteMultipartUpload"}]},"_MdxDesc":{"sd":"<p> Configures how objects are stored throughout their lifecycle.</p>\n","ld":"<p>Lifecycle rules are used to transition objects to different storage classes or delete old objects.</p>\n"}},"enableEventBusNotifications":{"description":"#### Enables sending bucket events to the default EventBridge bus.\n\n---\n\nWhen enabled, an event is sent to the default event bus whenever certain actions occur in your bucket (e.g., an object is created or deleted).\n\nFor a full list of all bucket events, see the [AWS documentation](https://docs.aws.amazon.com/AmazonS3/latest/userguide/EventBridge.html).","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enables sending bucket events to the default EventBridge bus.</p>\n","ld":"<p>When enabled, an event is sent to the default event bus whenever certain actions occur in your bucket (e.g., an object is created or deleted).</p>\n<p>For a full list of all bucket events, see the <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/EventBridge.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"cdn":{"$ref":"#/definitions/BucketCdnConfiguration","description":"#### Configures an AWS CloudFront CDN (Content Delivery Network) in front of your bucket.\n\n---\n\nA CDN is a globally distributed network of edge locations that caches responses from your bucket, bringing content closer to your users.\n\nUsing a CDN can:\n- Reduce latency and improve load times.\n- Lower bandwidth costs.\n- Decrease the amount of traffic hitting your origin.\n- Enhance security.\n\nThe \"origin\" is the resource (in this case, the bucket) that the CDN is attached to.","_MdxDesc":{"sd":"<p> Configures an AWS CloudFront CDN (Content Delivery Network) in front of your bucket.</p>\n","ld":"<p>A CDN is a globally distributed network of edge locations that caches responses from your bucket, bringing content closer to your users.</p>\n<p>Using a CDN can:</p>\n<ul>\n<li>Reduce latency and improve load times.</li>\n<li>Lower bandwidth costs.</li>\n<li>Decrease the amount of traffic hitting your origin.</li>\n<li>Enhance security.</li>\n</ul>\n<p>The &quot;origin&quot; is the resource (in this case, the bucket) that the CDN is attached to.</p>\n"}}},"additionalProperties":false},"DirectoryUpload":{"type":"object","properties":{"directoryPath":{"description":"#### The path to the directory that should be uploaded to the bucket.\n\n---\n\nAfter the sync is finished, the contents of your bucket will mirror the contents of the local folder.\nThe path is relative to your current working directory.\n\n> **Warning:** Any existing contents of the bucket will be deleted and replaced with the contents of the local directory.\n> You should not use a bucket with `directoryUpload` enabled for application-generated or user-generated content.","type":"string","_MdxDesc":{"sd":"<p> The path to the directory that should be uploaded to the bucket.</p>\n","ld":"<p>After the sync is finished, the contents of your bucket will mirror the contents of the local folder.\nThe path is relative to your current working directory.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Warning:</strong> Any existing contents of the bucket will be deleted and replaced with the contents of the local directory.\nYou should not use a bucket with <code>directoryUpload</code> enabled for application-generated or user-generated content.</p>\n</div>\n</div>"}},"fileOptions":{"description":"#### Allows you to set properties of files (objects) during the upload.","type":"array","items":{"$ref":"#/definitions/DirectoryUploadFilter"},"_MdxDesc":{"sd":"<p> Allows you to set properties of files (objects) during the upload.</p>\n"}},"excludeFilesPatterns":{"description":"#### Glob patterns for files to be excluded from the upload.\n\n---\n\nThese patterns are relative to the `directoryPath`.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Glob patterns for files to be excluded from the upload.</p>\n","ld":"<p>These patterns are relative to the <code>directoryPath</code>.</p>\n"}},"headersPreset":{"$ref":"#/definitions/SupportedHeaderPreset","description":"#### Configures HTTP headers of uploaded files to be optimized for a selected preset.\n\n---\n\nAvailable presets:\n\n- **`static-website`**:\n  - Sets the `Cache-Control` header to `public, max-age=0, s-maxage=31536000, must-revalidate` for all uploaded files.\n  - This setup caches all content on the CDN but never in the browser.\n\n- **`gatsby-static-website`**:\n  - Optimizes headers for static websites built with [Gatsby](https://www.gatsbyjs.com/), following their [caching recommendations](https://www.gatsbyjs.com/docs/caching/).\n\n- **`single-page-app`**:\n  - Optimizes headers for [Single-Page Applications](https://en.wikipedia.org/wiki/Single-page_application).\n  - `html` files are never cached to ensure users always get the latest content after a deployment.\n  - All other assets (e.g., `.js`, `.css`) are cached indefinitely. You should **always** add a content hash to your filenames to ensure users receive new versions after updates.\n\nYou can override these presets using custom `filters`.\n\n> When `headersPreset` is used, `cdn.invalidateAfterDeploy` must also be configured.","_MdxDesc":{"sd":"<p> Configures HTTP headers of uploaded files to be optimized for a selected preset.</p>\n","ld":"<p>Available presets:</p>\n<ul>\n<li><p><strong><code>static-website</code></strong>:</p>\n<ul>\n<li>Sets the <code>Cache-Control</code> header to <code>public, max-age=0, s-maxage=31536000, must-revalidate</code> for all uploaded files.</li>\n<li>This setup caches all content on the CDN but never in the browser.</li>\n</ul>\n</li>\n<li><p><strong><code>gatsby-static-website</code></strong>:</p>\n<ul>\n<li>Optimizes headers for static websites built with <a href=\"https://www.gatsbyjs.com/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Gatsby</a>, following their <a href=\"https://www.gatsbyjs.com/docs/caching/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">caching recommendations</a>.</li>\n</ul>\n</li>\n<li><p><strong><code>single-page-app</code></strong>:</p>\n<ul>\n<li>Optimizes headers for <a href=\"https://en.wikipedia.org/wiki/Single-page_application\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Single-Page Applications</a>.</li>\n<li><code>html</code> files are never cached to ensure users always get the latest content after a deployment.</li>\n<li>All other assets (e.g., <code>.js</code>, <code>.css</code>) are cached indefinitely. You should <strong>always</strong> add a content hash to your filenames to ensure users receive new versions after updates.</li>\n</ul>\n</li>\n</ul>\n<p>You can override these presets using custom <code>filters</code>.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>When <code>headersPreset</code> is used, <code>cdn.invalidateAfterDeploy</code> must also be configured.</p>\n</div>\n</div>"}},"disableS3TransferAcceleration":{"description":"#### Disables S3 Transfer Acceleration.\n\n---\n\nS3 Transfer Acceleration improves the upload times of your directory contents by uploading objects to the nearest AWS edge location and routing them to the bucket through the AWS backbone network.\n\nThis feature incurs a small additional cost.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disables S3 Transfer Acceleration.</p>\n","ld":"<p>S3 Transfer Acceleration improves the upload times of your directory contents by uploading objects to the nearest AWS edge location and routing them to the bucket through the AWS backbone network.</p>\n<p>This feature incurs a small additional cost.</p>\n"}}},"additionalProperties":false,"required":["directoryPath"]},"DirectoryUploadFilter":{"type":"object","properties":{"includePattern":{"description":"#### A glob pattern that specifies which files should be handled by this filter.\n\n---\n\nThe pattern is relative to the `directoryPath`.","type":"string","_MdxDesc":{"sd":"<p> A glob pattern that specifies which files should be handled by this filter.</p>\n","ld":"<p>The pattern is relative to the <code>directoryPath</code>.</p>\n"}},"excludePattern":{"description":"#### A glob pattern that specifies which files should be excluded from this filter, even if they match the `includePattern`.\n\n---\n\nThe pattern is relative to the `directoryPath`.","type":"string","_MdxDesc":{"sd":"<p> A glob pattern that specifies which files should be excluded from this filter, even if they match the <code>includePattern</code>.</p>\n","ld":"<p>The pattern is relative to the <code>directoryPath</code>.</p>\n"}},"headers":{"description":"#### Configures HTTP headers for files (objects) that match this filter.\n\n---\n\nIf you are using a CDN, these headers will be forwarded to the client.\nThis can be used to implement a custom HTTP caching strategy for your static content.","type":"array","items":{"$ref":"#/definitions/KeyValuePair"},"_MdxDesc":{"sd":"<p> Configures HTTP headers for files (objects) that match this filter.</p>\n","ld":"<p>If you are using a CDN, these headers will be forwarded to the client.\nThis can be used to implement a custom HTTP caching strategy for your static content.</p>\n"}},"tags":{"description":"#### Tags to apply to the files that match this filter.\n\n---\n\nTags help you categorize your objects and can be used to filter objects when using `lifecycleRules`.\n\nFor more details on object tagging, see the [AWS documentation](https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-tagging.html).\n\n> A single file (object) can have only one tag with the same key.","type":"array","items":{"$ref":"#/definitions/KeyValuePair"},"_MdxDesc":{"sd":"<p> Tags to apply to the files that match this filter.</p>\n","ld":"<p>Tags help you categorize your objects and can be used to filter objects when using <code>lifecycleRules</code>.</p>\n<p>For more details on object tagging, see the <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-tagging.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>A single file (object) can have only one tag with the same key.</p>\n</div>\n</div>"}}},"additionalProperties":false,"required":["includePattern"]},"KeyValuePair":{"type":"object","properties":{"key":{"description":"#### Key","type":"string","_MdxDesc":{"sd":"<p> Key</p>\n"}},"value":{"description":"#### Value","type":"string","_MdxDesc":{"sd":"<p> Value</p>\n"}}},"additionalProperties":false,"required":["key","value"]},"SupportedHeaderPreset":{"enum":["gatsby-static-website","single-page-app","static-website"],"type":"string"},"BucketAccessibility":{"type":"object","properties":{"accessibilityMode":{"description":"#### Configures pre-defined accessibility modes for the bucket.\n\n---\n\nThis allows you to easily configure the most common access patterns.\n\nAvailable modes:\n- `public-read-write`: Everyone can read from and write to the bucket.\n- `public-read`: Everyone can read from the bucket. Only compute resources and entities with sufficient IAM permissions can write to it.\n- `private` (default): Only compute resources and entities with sufficient IAM permissions can read from or write to the bucket.\n\nFor functions, batch jobs, and container workloads, you can grant the required IAM permissions using the `allowsAccessTo` or `iamRoleStatements` properties in their respective configurations.","default":"private","enum":["private","public-read","public-read-write"],"type":"string","_MdxDesc":{"sd":"<p> Configures pre-defined accessibility modes for the bucket.</p>\n","ld":"<p>This allows you to easily configure the most common access patterns.</p>\n<p>Available modes:</p>\n<ul>\n<li><code>public-read-write</code>: Everyone can read from and write to the bucket.</li>\n<li><code>public-read</code>: Everyone can read from the bucket. Only compute resources and entities with sufficient IAM permissions can write to it.</li>\n<li><code>private</code> (default): Only compute resources and entities with sufficient IAM permissions can read from or write to the bucket.</li>\n</ul>\n<p>For functions, batch jobs, and container workloads, you can grant the required IAM permissions using the <code>allowsAccessTo</code> or <code>iamRoleStatements</code> properties in their respective configurations.</p>\n"}},"accessPolicyStatements":{"description":"#### Advanced access configuration that leverages IAM policy statements.\n\n---\n\nThis gives you fine-grained access control over the bucket.","type":"array","items":{"$ref":"#/definitions/BucketPolicyIamRoleStatement"},"_MdxDesc":{"sd":"<p> Advanced access configuration that leverages IAM policy statements.</p>\n","ld":"<p>This gives you fine-grained access control over the bucket.</p>\n"}}},"additionalProperties":false,"required":["accessibilityMode"]},"BucketPolicyIamRoleStatement":{"type":"object","properties":{"Principal":{},"Sid":{"description":"#### Statement ID (Sid)\n\n---\n\nAn optional identifier for the statement. For more information, see the [AWS documentation](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies-introduction).","type":"string","_MdxDesc":{"sd":"<p> Statement ID (Sid)</p>\n","ld":"<p>An optional identifier for the statement. For more information, see the <a href=\"https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies-introduction\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"Effect":{"description":"#### Effect\n\n---\n\nSpecifies whether the statement results in an `Allow` or `Deny`. For more information, see the [AWS documentation](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies-introduction).","default":"Allow","type":"string","_MdxDesc":{"sd":"<p> Effect</p>\n","ld":"<p>Specifies whether the statement results in an <code>Allow</code> or <code>Deny</code>. For more information, see the <a href=\"https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies-introduction\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"Action":{"description":"#### Action\n\n---\n\nA list of actions that the statement allows or denies (e.g., `s3:GetObject`). For more information, see the [AWS documentation](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies-introduction).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Action</p>\n","ld":"<p>A list of actions that the statement allows or denies (e.g., <code>s3:GetObject</code>). For more information, see the <a href=\"https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies-introduction\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"Condition":{"description":"#### Condition\n\n---\n\nSpecifies the conditions under which the statement is in effect. For more information, see the [AWS documentation](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies-introduction)."},"Resource":{"description":"#### Resource\n\n---\n\nA list of resources to which the actions apply. For more information, see the [AWS documentation](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies-introduction).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Resource</p>\n","ld":"<p>A list of resources to which the actions apply. For more information, see the <a href=\"https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies-introduction\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["Principal","Resource"]},"BucketCorsConfig":{"type":"object","properties":{"enabled":{"description":"#### Enables CORS (Cross-Origin Resource Sharing) HTTP headers for the bucket.\n\n---\n\nIf you enable CORS without specifying any rules, a default rule with the following configuration is used:\n- `allowedMethods`: `GET`, `PUT`, `HEAD`, `POST`, `DELETE`\n- `allowedOrigins`: `*`\n- `allowedHeaders`: `Authorization`, `Content-Length`, `Content-Type`, `Content-MD5`, `Date`, `Expect`, `Host`, `x-amz-content-sha256`, `x-amz-date`, `x-amz-security-token`","type":"boolean","_MdxDesc":{"sd":"<p> Enables CORS (Cross-Origin Resource Sharing) HTTP headers for the bucket.</p>\n","ld":"<p>If you enable CORS without specifying any rules, a default rule with the following configuration is used:</p>\n<ul>\n<li><code>allowedMethods</code>: <code>GET</code>, <code>PUT</code>, <code>HEAD</code>, <code>POST</code>, <code>DELETE</code></li>\n<li><code>allowedOrigins</code>: <code>*</code></li>\n<li><code>allowedHeaders</code>: <code>Authorization</code>, <code>Content-Length</code>, <code>Content-Type</code>, <code>Content-MD5</code>, <code>Date</code>, <code>Expect</code>, <code>Host</code>, <code>x-amz-content-sha256</code>, <code>x-amz-date</code>, <code>x-amz-security-token</code></li>\n</ul>\n"}},"corsRules":{"description":"#### A list of CORS rules.\n\n---\n\nWhen the bucket receives a preflight request from a browser, it evaluates the CORS configuration and uses the first rule that matches the request to enable a cross-origin request.\nFor a rule to match, the following conditions must be met:\n\n- The request's `Origin` header must match one of the `allowedOrigins`.\n- The request method (e.g., `GET`, `PUT`) or the `Access-Control-Request-Method` header must be one of the `allowedMethods`.\n- Every header listed in the request's `Access-Control-Request-Headers` header must match one of the `allowedHeaders`.","type":"array","items":{"$ref":"#/definitions/BucketCorsRule"},"_MdxDesc":{"sd":"<p> A list of CORS rules.</p>\n","ld":"<p>When the bucket receives a preflight request from a browser, it evaluates the CORS configuration and uses the first rule that matches the request to enable a cross-origin request.\nFor a rule to match, the following conditions must be met:</p>\n<ul>\n<li>The request&#39;s <code>Origin</code> header must match one of the <code>allowedOrigins</code>.</li>\n<li>The request method (e.g., <code>GET</code>, <code>PUT</code>) or the <code>Access-Control-Request-Method</code> header must be one of the <code>allowedMethods</code>.</li>\n<li>Every header listed in the request&#39;s <code>Access-Control-Request-Headers</code> header must match one of the <code>allowedHeaders</code>.</li>\n</ul>\n"}}},"additionalProperties":false,"required":["enabled"]},"BucketCorsRule":{"type":"object","properties":{"allowedOrigins":{"description":"#### The origins to accept cross-domain requests from.\n\n---\n\nAn origin is a combination of a scheme (protocol), hostname (domain), and port.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> The origins to accept cross-domain requests from.</p>\n","ld":"<p>An origin is a combination of a scheme (protocol), hostname (domain), and port.</p>\n"}},"allowedHeaders":{"description":"#### The allowed HTTP headers.\n\n---\n\nEach header name in the `Access-Control-Request-Headers` header of a preflight request must match an entry in this list.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> The allowed HTTP headers.</p>\n","ld":"<p>Each header name in the <code>Access-Control-Request-Headers</code> header of a preflight request must match an entry in this list.</p>\n"}},"allowedMethods":{"description":"#### The allowed HTTP methods.","type":"array","items":{"enum":["*","DELETE","GET","HEAD","PATCH","POST","PUT"],"type":"string"},"_MdxDesc":{"sd":"<p> The allowed HTTP methods.</p>\n"}},"exposedResponseHeaders":{"description":"#### The response headers that should be made available to scripts running in the browser in response to a cross-origin request.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> The response headers that should be made available to scripts running in the browser in response to a cross-origin request.</p>\n"}},"maxAge":{"description":"#### The time (in seconds) that the browser can cache the response for a preflight request.","type":"number","_MdxDesc":{"sd":"<p> The time (in seconds) that the browser can cache the response for a preflight request.</p>\n"}}},"additionalProperties":false},"Expiration":{"type":"object","properties":{"type":{"type":"string","const":"expiration"},"properties":{"$ref":"#/definitions/ExpirationProps"}},"additionalProperties":false,"required":["properties","type"]},"ExpirationProps":{"type":"object","properties":{"daysAfterUpload":{"description":"#### The number of days after which an object is considered expired.\n\n---\n\nThis is relative to the date the object was uploaded.","type":"number","_MdxDesc":{"sd":"<p> The number of days after which an object is considered expired.</p>\n","ld":"<p>This is relative to the date the object was uploaded.</p>\n"}},"prefix":{"description":"#### The prefix of the objects to which the lifecycle rule is applied.","type":"string","_MdxDesc":{"sd":"<p> The prefix of the objects to which the lifecycle rule is applied.</p>\n"}},"tags":{"description":"#### The tags of the objects to which the lifecycle rule is applied.\n\n---\n\nFor more details on tagging objects, see the [AWS documentation](https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-tagging.html).","type":"array","items":{"$ref":"#/definitions/KeyValuePair"},"_MdxDesc":{"sd":"<p> The tags of the objects to which the lifecycle rule is applied.</p>\n","ld":"<p>For more details on tagging objects, see the <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-tagging.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["daysAfterUpload"]},"NonCurrentVersionExpiration":{"type":"object","properties":{"type":{"type":"string","const":"non-current-version-expiration"},"properties":{"$ref":"#/definitions/NonCurrentVersionExpirationProps"}},"additionalProperties":false,"required":["properties","type"]},"NonCurrentVersionExpirationProps":{"type":"object","properties":{"daysAfterVersioned":{"description":"#### The number of days after which a non-current version of an object becomes expired.\n\n---\n\nThis is relative to the date the object became a non-current version.\nThis rule is only effective if the bucket has versioning enabled.","type":"number","_MdxDesc":{"sd":"<p> The number of days after which a non-current version of an object becomes expired.</p>\n","ld":"<p>This is relative to the date the object became a non-current version.\nThis rule is only effective if the bucket has versioning enabled.</p>\n"}},"prefix":{"description":"#### The prefix of the objects to which the lifecycle rule is applied.","type":"string","_MdxDesc":{"sd":"<p> The prefix of the objects to which the lifecycle rule is applied.</p>\n"}},"tags":{"description":"#### The tags of the objects to which the lifecycle rule is applied.\n\n---\n\nFor more details on tagging objects, see the [AWS documentation](https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-tagging.html).","type":"array","items":{"$ref":"#/definitions/KeyValuePair"},"_MdxDesc":{"sd":"<p> The tags of the objects to which the lifecycle rule is applied.</p>\n","ld":"<p>For more details on tagging objects, see the <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-tagging.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["daysAfterVersioned"]},"ClassTransition":{"type":"object","properties":{"type":{"type":"string","const":"class-transition"},"properties":{"$ref":"#/definitions/ClassTransitionProps"}},"additionalProperties":false,"required":["properties","type"]},"ClassTransitionProps":{"type":"object","properties":{"daysAfterUpload":{"description":"#### The number of days after which an object is transitioned to another storage class.\n\n---\n\nThis is relative to the date the object was uploaded.\nDepending on how often you need to access your objects, transitioning them to another storage class can lead to significant cost savings.","type":"number","_MdxDesc":{"sd":"<p> The number of days after which an object is transitioned to another storage class.</p>\n","ld":"<p>This is relative to the date the object was uploaded.\nDepending on how often you need to access your objects, transitioning them to another storage class can lead to significant cost savings.</p>\n"}},"storageClass":{"description":"#### The storage class to which to transition the object.\n\n---\n\nBy default, all objects are in the `STANDARD` (general purpose) class.\nDepending on your access patterns, you can transition objects to a different storage class to save costs.\n\nFor more details on storage classes, see the [AWS documentation](https://aws.amazon.com/s3/storage-classes/).","enum":["DEEP_ARCHIVE","GLACIER","INTELLIGENT_TIERING","ONEZONE_IA","STANDARD_IA"],"type":"string","_MdxDesc":{"sd":"<p> The storage class to which to transition the object.</p>\n","ld":"<p>By default, all objects are in the <code>STANDARD</code> (general purpose) class.\nDepending on your access patterns, you can transition objects to a different storage class to save costs.</p>\n<p>For more details on storage classes, see the <a href=\"https://aws.amazon.com/s3/storage-classes/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"prefix":{"description":"#### The prefix of the objects to which the lifecycle rule is applied.","type":"string","_MdxDesc":{"sd":"<p> The prefix of the objects to which the lifecycle rule is applied.</p>\n"}},"tags":{"description":"#### The tags of the objects to which the lifecycle rule is applied.\n\n---\n\nFor more details on tagging objects, see the [AWS documentation](https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-tagging.html).","type":"array","items":{"$ref":"#/definitions/KeyValuePair"},"_MdxDesc":{"sd":"<p> The tags of the objects to which the lifecycle rule is applied.</p>\n","ld":"<p>For more details on tagging objects, see the <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-tagging.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["daysAfterUpload","storageClass"]},"NonCurrentVersionClassTransition":{"type":"object","properties":{"type":{"type":"string","const":"non-current-version-class-transition"},"properties":{"$ref":"#/definitions/NonCurrentVersionClassTransitionProps"}},"additionalProperties":false,"required":["properties","type"]},"NonCurrentVersionClassTransitionProps":{"type":"object","properties":{"daysAfterVersioned":{"description":"#### The number of days after which a non-current version of an object is transitioned to another storage class.\n\n---\n\nThis is relative to the date the object became a non-current version.\nDepending on how often you need to access your objects, transitioning them to another storage class can lead to significant cost savings.","type":"number","_MdxDesc":{"sd":"<p> The number of days after which a non-current version of an object is transitioned to another storage class.</p>\n","ld":"<p>This is relative to the date the object became a non-current version.\nDepending on how often you need to access your objects, transitioning them to another storage class can lead to significant cost savings.</p>\n"}},"storageClass":{"description":"#### The storage class to which to transition the object.\n\n---\n\nFor more details on storage classes and transitions, see the [AWS documentation](https://docs.aws.amazon.com/AmazonS3/latest/userguide/lifecycle-transition-general-considerations.html).","enum":["DEEP_ARCHIVE","GLACIER","INTELLIGENT_TIERING","ONEZONE_IA","STANDARD_IA"],"type":"string","_MdxDesc":{"sd":"<p> The storage class to which to transition the object.</p>\n","ld":"<p>For more details on storage classes and transitions, see the <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/lifecycle-transition-general-considerations.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"prefix":{"description":"#### The prefix of the objects to which the lifecycle rule is applied.","type":"string","_MdxDesc":{"sd":"<p> The prefix of the objects to which the lifecycle rule is applied.</p>\n"}},"tags":{"description":"#### The tags of the objects to which the lifecycle rule is applied.\n\n---\n\nFor more details on tagging objects, see the [AWS documentation](https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-tagging.html).","type":"array","items":{"$ref":"#/definitions/KeyValuePair"},"_MdxDesc":{"sd":"<p> The tags of the objects to which the lifecycle rule is applied.</p>\n","ld":"<p>For more details on tagging objects, see the <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-tagging.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["daysAfterVersioned","storageClass"]},"AbortIncompleteMultipartUpload":{"type":"object","properties":{"type":{"type":"string","const":"abort-incomplete-multipart-upload"},"properties":{"$ref":"#/definitions/AbortIncompleteMultipartUploadProps"}},"additionalProperties":false,"required":["properties","type"]},"AbortIncompleteMultipartUploadProps":{"type":"object","properties":{"daysAfterInitiation":{"description":"#### The number of days after which an incomplete multipart upload is aborted and its parts are deleted.\n\n---\n\nThis is relative to the start of the multipart upload.","type":"number","_MdxDesc":{"sd":"<p> The number of days after which an incomplete multipart upload is aborted and its parts are deleted.</p>\n","ld":"<p>This is relative to the start of the multipart upload.</p>\n"}},"prefix":{"description":"#### The prefix of the objects to which the lifecycle rule is applied.","type":"string","_MdxDesc":{"sd":"<p> The prefix of the objects to which the lifecycle rule is applied.</p>\n"}},"tags":{"description":"#### The tags of the objects to which the lifecycle rule is applied.\n\n---\n\nFor more details on tagging objects, see the [AWS documentation](https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-tagging.html).","type":"array","items":{"$ref":"#/definitions/KeyValuePair"},"_MdxDesc":{"sd":"<p> The tags of the objects to which the lifecycle rule is applied.</p>\n","ld":"<p>For more details on tagging objects, see the <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-tagging.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["daysAfterInitiation"]},"BucketCdnConfiguration":{"type":"object","properties":{"rewriteRoutesForSinglePageApp":{"description":"#### Rewrites incoming requests to work for a single-page application.\n\n---\n\nThe routing works as follows:\n- If the path has an extension (e.g., `.css`, `.js`, `.png`), the request is not rewritten, and the appropriate file is returned.\n- If the path does not have an extension, the request is routed to `index.html`.\n\nThis allows single-page applications to handle routing on the client side.","type":"boolean","_MdxDesc":{"sd":"<p> Rewrites incoming requests to work for a single-page application.</p>\n","ld":"<p>The routing works as follows:</p>\n<ul>\n<li>If the path has an extension (e.g., <code>.css</code>, <code>.js</code>, <code>.png</code>), the request is not rewritten, and the appropriate file is returned.</li>\n<li>If the path does not have an extension, the request is routed to <code>index.html</code>.</li>\n</ul>\n<p>This allows single-page applications to handle routing on the client side.</p>\n"}},"disableUrlNormalization":{"description":"#### Disables URL normalization.\n\n---\n\nURL normalization is enabled by default and is useful for serving HTML files from the bucket with clean URLs.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disables URL normalization.</p>\n","ld":"<p>URL normalization is enabled by default and is useful for serving HTML files from the bucket with clean URLs.</p>\n"}},"enabled":{"description":"#### Enables the CDN.\n\n---","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enables the CDN.</p>\n"}},"cachingOptions":{"$ref":"#/definitions/CdnCachingOptions","description":"#### Configures custom caching options.\n\n---\n\nThis property controls the caching behavior of your edge distribution, including what content is cached, for how long, and when it should be re-fetched from the origin.\n\nIf a response from the origin does not include `Cache-Control` or `Expires` headers, a default caching behavior is used:\n- **bucket**: Objects are cached for 6 months by default, or until the cache is invalidated.\n- **http-api-gateway** and **application-load-balancer**: Responses are not cached by default.","_MdxDesc":{"sd":"<p> Configures custom caching options.</p>\n","ld":"<p>This property controls the caching behavior of your edge distribution, including what content is cached, for how long, and when it should be re-fetched from the origin.</p>\n<p>If a response from the origin does not include <code>Cache-Control</code> or <code>Expires</code> headers, a default caching behavior is used:</p>\n<ul>\n<li><strong>bucket</strong>: Objects are cached for 6 months by default, or until the cache is invalidated.</li>\n<li><strong>http-api-gateway</strong> and <strong>application-load-balancer</strong>: Responses are not cached by default.</li>\n</ul>\n"}},"forwardingOptions":{"$ref":"#/definitions/CdnForwardingOptions","description":"#### Configures which parts of the request are forwarded to the origin.\n\n---\n\nThis includes headers, query parameters, and cookies.","_MdxDesc":{"sd":"<p> Configures which parts of the request are forwarded to the origin.</p>\n","ld":"<p>This includes headers, query parameters, and cookies.</p>\n"}},"routeRewrites":{"description":"#### Redirects specific requests to a different origin.\n\n---\n\nEach incoming request to the CDN is evaluated against a list of route rewrites. If the request path matches a rewrite's path pattern, it is sent to the configured route.\n\nRoute rewrites are evaluated in order, and the first match determines where the request will be sent.\nIf no match is found, the request is sent to the default origin (the resource the CDN is attached to).\n\n**Example Use Cases:**\n- Serving static content from a bucket while routing dynamic paths to a Lambda function.\n- Caching `.jpg` files for a longer duration than other file types.","type":"array","items":{"$ref":"#/definitions/CdnRouteRewrite"},"_MdxDesc":{"sd":"<p> Redirects specific requests to a different origin.</p>\n","ld":"<p>Each incoming request to the CDN is evaluated against a list of route rewrites. If the request path matches a rewrite&#39;s path pattern, it is sent to the configured route.</p>\n<p>Route rewrites are evaluated in order, and the first match determines where the request will be sent.\nIf no match is found, the request is sent to the default origin (the resource the CDN is attached to).</p>\n<p><strong>Example Use Cases:</strong></p>\n<ul>\n<li>Serving static content from a bucket while routing dynamic paths to a Lambda function.</li>\n<li>Caching <code>.jpg</code> files for a longer duration than other file types.</li>\n</ul>\n"}},"customDomains":{"description":"#### Attaches custom domains to this CDN.\n\n---\n\nWhen you connect a custom domain, Stacktape automatically:\n\n- **Creates DNS records:** A DNS record is created to point your domain name to the resource.\n- **Adds TLS certificates:** If the resource uses HTTPS, Stacktape issues and attaches a free, AWS-managed TLS certificate, handling TLS termination for you.\n\n> To manage a custom domain, it first needs to be added to your AWS account.\n> This means that a [hosted zone](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html)\n> (collection of records managed together for a given domain)\n> for your domain exists in your AWS account and your domain registrar's name servers are pointing to it.\n> To learn more, refer to [Adding a domain guide](https://docs.stacktape.com/other-resources/domains-and-certificates/#adding-domain).","type":"array","items":{"$ref":"#/definitions/DomainConfiguration"},"_MdxDesc":{"sd":"<p> Attaches custom domains to this CDN.</p>\n","ld":"<p>When you connect a custom domain, Stacktape automatically:</p>\n<ul>\n<li><strong>Creates DNS records:</strong> A DNS record is created to point your domain name to the resource.</li>\n<li><strong>Adds TLS certificates:</strong> If the resource uses HTTPS, Stacktape issues and attaches a free, AWS-managed TLS certificate, handling TLS termination for you.</li>\n</ul>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>To manage a custom domain, it first needs to be added to your AWS account.\nThis means that a <a href=\"https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">hosted zone</a>\n(collection of records managed together for a given domain)\nfor your domain exists in your AWS account and your domain registrar&#39;s name servers are pointing to it.\nTo learn more, refer to <a href=\"/other-resources/domains-and-certificates/#adding-domain\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Adding a domain guide</a>.</p>\n</div>\n</div>"}},"edgeFunctions":{"$ref":"#/definitions/EdgeFunctionsConfig","description":"#### Configures Edge function triggers.\n\n---\n\nYou can associate an `edge-lambda-function` with the CDN to be executed at different stages:\n\n- `onRequest`: Executed when the CDN receives a request from a client, before checking the cache.\n- `onResponse`: Executed before returning a response to the client.\n\n**Potential Use Cases:**\n- Generating an immediate HTTP response without checking the cache or forwarding to the origin.\n- Modifying the request (e.g., rewriting the URL or headers) before forwarding to the origin.\n- Inspecting cookies or validating authorization headers and tokens.","_MdxDesc":{"sd":"<p> Configures Edge function triggers.</p>\n","ld":"<p>You can associate an <code>edge-lambda-function</code> with the CDN to be executed at different stages:</p>\n<ul>\n<li><code>onRequest</code>: Executed when the CDN receives a request from a client, before checking the cache.</li>\n<li><code>onResponse</code>: Executed before returning a response to the client.</li>\n</ul>\n<p><strong>Potential Use Cases:</strong></p>\n<ul>\n<li>Generating an immediate HTTP response without checking the cache or forwarding to the origin.</li>\n<li>Modifying the request (e.g., rewriting the URL or headers) before forwarding to the origin.</li>\n<li>Inspecting cookies or validating authorization headers and tokens.</li>\n</ul>\n"}},"cloudfrontPriceClass":{"description":"#### Configures the locations from which the CDN serves traffic.\n\n---\n\nA higher price class results in more edge locations serving your traffic, which can improve performance in some regions but is more costly.\n\nFor example, if your users are primarily located in the US and Europe, you can save money by using `PriceClass_100`.\n\nFor more details, see the [AWS documentation on price classes](https://aws.amazon.com/cloudfront/pricing/).","default":"PriceClass_All","enum":["PriceClass_100","PriceClass_200","PriceClass_All"],"type":"string","_MdxDesc":{"sd":"<p> Configures the locations from which the CDN serves traffic.</p>\n","ld":"<p>A higher price class results in more edge locations serving your traffic, which can improve performance in some regions but is more costly.</p>\n<p>For example, if your users are primarily located in the US and Europe, you can save money by using <code>PriceClass_100</code>.</p>\n<p>For more details, see the <a href=\"https://aws.amazon.com/cloudfront/pricing/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on price classes</a>.</p>\n"}},"defaultRoutePrefix":{"description":"#### Prefixes requests to the origin with a specified path.\n\n---\n\nIncoming requests will be prefixed with `defaultRoutePrefix` before being forwarded to the origin.\nFor example, if the CDN receives a request for `/my/resource/url`, the request will be sent to the origin as `/your_prefix/my/resource/url`.","type":"string","_MdxDesc":{"sd":"<p> Prefixes requests to the origin with a specified path.</p>\n","ld":"<p>Incoming requests will be prefixed with <code>defaultRoutePrefix</code> before being forwarded to the origin.\nFor example, if the CDN receives a request for <code>/my/resource/url</code>, the request will be sent to the origin as <code>/your_prefix/my/resource/url</code>.</p>\n"}},"errorDocument":{"description":"#### The custom error document URL.\n\n---\n\nThis document is requested by the CDN if the original request to the origin returns a `404` error code.\n\nExample: `/error.html`","default":"/404.html","type":"string","_MdxDesc":{"sd":"<p> The custom error document URL.</p>\n","ld":"<p>This document is requested by the CDN if the original request to the origin returns a <code>404</code> error code.</p>\n<p>Example: <code>/error.html</code></p>\n"}},"indexDocument":{"description":"#### The custom index document served for requests to the root path (`/`).\n\n---","default":"/index.html","type":"string","_MdxDesc":{"sd":"<p> The custom index document served for requests to the root path (<code>/</code>).</p>\n"}},"disableInvalidationAfterDeploy":{"description":"#### Disables invalidation of the CDN cache after each deployment.\n\n---\n\nBy default, the cache is invalidated after every deployment to prevent serving outdated content.\nWhen the cache is invalidated, the CDN flushes all cached content, and new requests are sent directly to the origin.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disables invalidation of the CDN cache after each deployment.</p>\n","ld":"<p>By default, the cache is invalidated after every deployment to prevent serving outdated content.\nWhen the cache is invalidated, the CDN flushes all cached content, and new requests are sent directly to the origin.</p>\n"}},"useFirewall":{"description":"#### The name of the `web-app-firewall` resource to use with your CDN.\n\n---\n\nA `web-app-firewall` can protect your resources from common web exploits that could affect availability, compromise security, or consume excessive resources.\nThe firewall works by filtering malicious requests before they reach your application.\n\nFor more information, see the [firewall documentation](https://docs.stacktape.com/security-resources/web-app-firewalls/).","type":"string","_MdxDesc":{"sd":"<p> The name of the <code>web-app-firewall</code> resource to use with your CDN.</p>\n","ld":"<p>A <code>web-app-firewall</code> can protect your resources from common web exploits that could affect availability, compromise security, or consume excessive resources.\nThe firewall works by filtering malicious requests before they reach your application.</p>\n<p>For more information, see the <a href=\"/security-resources/web-app-firewalls/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">firewall documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["enabled"]},"UserAuthPool":{"description":"#### A resource for managing user authentication and authorization.\n\n---\n\nA user pool is a fully managed identity provider that handles user sign-up, sign-in, and access control.\nIt provides a secure and scalable way to manage user identities for your applications.","type":"object","properties":{"type":{"type":"string","const":"user-auth-pool"},"properties":{"$ref":"#/definitions/UserAuthPoolProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["type"],"_MdxDesc":{"sd":"<p> A resource for managing user authentication and authorization.</p>\n","ld":"<p>A user pool is a fully managed identity provider that handles user sign-up, sign-in, and access control.\nIt provides a secure and scalable way to manage user identities for your applications.</p>\n"}},"UserAuthPoolProps":{"type":"object","properties":{"allowOnlyAdminsToCreateAccount":{"description":"#### Restrict account creation to administrators\n\n---\n\nIf enabled, new users can't sign up themselves. Accounts must be created through an admin flow (for example from an internal admin tool or script),\nwhich helps prevent unwanted self-registrations.\n\nInternally this controls `AdminCreateUserConfig.AllowAdminCreateUserOnly` on the Cognito user pool\n([AWS::Cognito::UserPool](https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-cognito-userpool)).","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Restrict account creation to administrators</p>\n","ld":"<p>If enabled, new users can&#39;t sign up themselves. Accounts must be created through an admin flow (for example from an internal admin tool or script),\nwhich helps prevent unwanted self-registrations.</p>\n<p>Internally this controls <code>AdminCreateUserConfig.AllowAdminCreateUserOnly</code> on the Cognito user pool\n(<a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-cognito-userpool\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS::Cognito::UserPool</a>).</p>\n"}},"unusedAccountValidityDays":{"description":"#### Expire unused admin-created accounts\n\n---\n\nWhen an admin creates a user account, Cognito issues a temporary password. This setting controls how many days that temporary password\n(and the corresponding account) stays valid if the user never signs in.\n\nInternally this maps to `AdminCreateUserConfig.UnusedAccountValidityDays`.","default":31,"type":"number","_MdxDesc":{"sd":"<p> Expire unused admin-created accounts</p>\n","ld":"<p>When an admin creates a user account, Cognito issues a temporary password. This setting controls how many days that temporary password\n(and the corresponding account) stays valid if the user never signs in.</p>\n<p>Internally this maps to <code>AdminCreateUserConfig.UnusedAccountValidityDays</code>.</p>\n"}},"requireEmailVerification":{"description":"#### (Reserved) Require verified emails\n\n---\n\nPresent for forward compatibility. Stacktape currently derives email / phone verification behavior from `userVerificationType`,\nnot from this flag directly.\n\nTo require email-based verification today, use `userVerificationType: 'email-link' | 'email-code'` instead.","type":"boolean","_MdxDesc":{"sd":"<p> (Reserved) Require verified emails</p>\n","ld":"<p>Present for forward compatibility. Stacktape currently derives email / phone verification behavior from <code>userVerificationType</code>,\nnot from this flag directly.</p>\n<p>To require email-based verification today, use <code>userVerificationType: 'email-link' | 'email-code'</code> instead.</p>\n"}},"requirePhoneNumberVerification":{"description":"#### (Reserved) Require verified phone numbers\n\n---\n\nPresent for forward compatibility. Stacktape currently derives email / phone verification behavior from `userVerificationType`,\nnot from this flag directly.\n\nTo require SMS-based verification today, use `userVerificationType: 'sms'`.","type":"boolean","_MdxDesc":{"sd":"<p> (Reserved) Require verified phone numbers</p>\n","ld":"<p>Present for forward compatibility. Stacktape currently derives email / phone verification behavior from <code>userVerificationType</code>,\nnot from this flag directly.</p>\n<p>To require SMS-based verification today, use <code>userVerificationType: 'sms'</code>.</p>\n"}},"enableHostedUi":{"description":"#### Enable the Cognito Hosted UI\n\n---\n\nTurns on Cognito's Hosted UI  a pre-built, hosted login and registration page  so you don't have to build your own auth screens.\nThis is useful when you want to get started quickly or keep authentication logic outside of your main app.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enable the Cognito Hosted UI</p>\n","ld":"<p>Turns on Cognito&#39;s Hosted UI  a pre-built, hosted login and registration page  so you don&#39;t have to build your own auth screens.\nThis is useful when you want to get started quickly or keep authentication logic outside of your main app.</p>\n"}},"hostedUiDomainPrefix":{"description":"#### Hosted UI domain prefix\n\n---\n\nSets the first part of your Hosted UI URL: `https://<prefix>.auth.<region>.amazoncognito.com`.\nPick something that matches your project or company name.","type":"string","_MdxDesc":{"sd":"<p> Hosted UI domain prefix</p>\n","ld":"<p>Sets the first part of your Hosted UI URL: <code>https://<prefix>.auth.<region>.amazoncognito.com</code>.\nPick something that matches your project or company name.</p>\n"}},"hostedUiCSS":{"description":"#### Custom CSS for the Hosted UI\n\n---\n\nLets you override the default Cognito Hosted UI styling with your own CSS (colors, fonts, layouts, etc.),\nso the login experience matches the rest of your application.\n\nBehind the scenes this is applied using the `AWS::Cognito::UserPoolUICustomizationAttachment` resource.","type":"string","_MdxDesc":{"sd":"<p> Custom CSS for the Hosted UI</p>\n","ld":"<p>Lets you override the default Cognito Hosted UI styling with your own CSS (colors, fonts, layouts, etc.),\nso the login experience matches the rest of your application.</p>\n<p>Behind the scenes this is applied using the <code>AWS::Cognito::UserPoolUICustomizationAttachment</code> resource.</p>\n"}},"hooks":{"$ref":"#/definitions/UserPoolHooks","description":"#### Lambda triggers for the user pool\n\n---\n\nConnects AWS Lambda functions to Cognito \"hooks\" (triggers) such as pre-sign-up, post-confirmation, or token generation.\nYou can use these to enforce additional validation, enrich user profiles, migrate users from another system, and more.\n\nInternally this maps to the Cognito user pool `LambdaConfig`.","_MdxDesc":{"sd":"<p> Lambda triggers for the user pool</p>\n","ld":"<p>Connects AWS Lambda functions to Cognito &quot;hooks&quot; (triggers) such as pre-sign-up, post-confirmation, or token generation.\nYou can use these to enforce additional validation, enrich user profiles, migrate users from another system, and more.</p>\n<p>Internally this maps to the Cognito user pool <code>LambdaConfig</code>.</p>\n"}},"emailConfiguration":{"$ref":"#/definitions/EmailConfiguration","description":"#### Email delivery settings\n\n---\n\nControls how Cognito sends emails (verification messages, password reset codes, admin invitations, etc.).\nYou can either use Cognito's built-in email service or plug in your own SES identity for full control over the sender.\n\nThis config is used to build the Cognito `EmailConfiguration` block\n([AWS docs](https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-cognito-userpool)).","_MdxDesc":{"sd":"<p> Email delivery settings</p>\n","ld":"<p>Controls how Cognito sends emails (verification messages, password reset codes, admin invitations, etc.).\nYou can either use Cognito&#39;s built-in email service or plug in your own SES identity for full control over the sender.</p>\n<p>This config is used to build the Cognito <code>EmailConfiguration</code> block\n(<a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-cognito-userpool\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS docs</a>).</p>\n"}},"inviteMessageConfig":{"$ref":"#/definitions/InviteMessageConfig","description":"#### Invite message overrides\n\n---\n\nCustomizes the contents of the \"invitation\" message that users receive when an administrator creates their account\n(for example, when sending a temporary password and sign-in instructions).\n\nIf you want to send custom emails through SES, you must also configure `emailConfiguration.sesAddressArn`.","_MdxDesc":{"sd":"<p> Invite message overrides</p>\n","ld":"<p>Customizes the contents of the &quot;invitation&quot; message that users receive when an administrator creates their account\n(for example, when sending a temporary password and sign-in instructions).</p>\n<p>If you want to send custom emails through SES, you must also configure <code>emailConfiguration.sesAddressArn</code>.</p>\n"}},"userVerificationType":{"$ref":"#/definitions/UserVerificationType","description":"#### Verification strategy\n\n---\n\nChooses how new users prove that they own their contact information:\n\n- `email-link`: Cognito emails a clickable link.\n- `email-code`: Cognito emails a short numeric code.\n- `sms`: Cognito sends a code via SMS to the user's phone number.\n- `none`: Users aren't required to verify email or phone during sign-up.\n\nStacktape uses this value to configure `AutoVerifiedAttributes` and `VerificationMessageTemplate`\non the underlying Cognito user pool.","_MdxDesc":{"sd":"<p> Verification strategy</p>\n","ld":"<p>Chooses how new users prove that they own their contact information:</p>\n<ul>\n<li><code>email-link</code>: Cognito emails a clickable link.</li>\n<li><code>email-code</code>: Cognito emails a short numeric code.</li>\n<li><code>sms</code>: Cognito sends a code via SMS to the user&#39;s phone number.</li>\n<li><code>none</code>: Users aren&#39;t required to verify email or phone during sign-up.</li>\n</ul>\n<p>Stacktape uses this value to configure <code>AutoVerifiedAttributes</code> and <code>VerificationMessageTemplate</code>\non the underlying Cognito user pool.</p>\n"}},"userVerificationMessageConfig":{"$ref":"#/definitions/UserVerificationMessageConfig","description":"#### Verification message text\n\n---\n\nLets you customize the exact email and SMS texts that Cognito sends when asking users to verify their email / phone.\nFor example, you can change subjects, body text, or the message that contains the `{####}` verification code.","_MdxDesc":{"sd":"<p> Verification message text</p>\n","ld":"<p>Lets you customize the exact email and SMS texts that Cognito sends when asking users to verify their email / phone.\nFor example, you can change subjects, body text, or the message that contains the <code>{####}</code> verification code.</p>\n"}},"mfaConfiguration":{"$ref":"#/definitions/MfaConfiguration","description":"#### Multi-factor authentication\n\n---\n\nControls whether you use MultiFactor Authentication (MFA) and which second factors are allowed.\nMFA makes it much harder for attackers to access accounts even if they know a user's password.\n\nUnder the hood this config drives both the `MfaConfiguration` and `EnabledMfas` properties in Cognito\n(see \"MFA configuration\" in the\n[AWS::Cognito::UserPool docs](https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-cognito-userpool)).","_MdxDesc":{"sd":"<p> Multi-factor authentication</p>\n","ld":"<p>Controls whether you use MultiFactor Authentication (MFA) and which second factors are allowed.\nMFA makes it much harder for attackers to access accounts even if they know a user&#39;s password.</p>\n<p>Under the hood this config drives both the <code>MfaConfiguration</code> and <code>EnabledMfas</code> properties in Cognito\n(see &quot;MFA configuration&quot; in the\n<a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-cognito-userpool\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS::Cognito::UserPool docs</a>).</p>\n"}},"passwordPolicy":{"$ref":"#/definitions/PasswordPolicy","description":"#### Password strength rules\n\n---\n\nDefines how strong user passwords must be  minimum length and whether they must include lowercase, uppercase,\nnumbers, and/or symbols  plus how long temporary passwords issued to new users remain valid.\n\nThis is applied to the Cognito `Policies.PasswordPolicy` block.","_MdxDesc":{"sd":"<p> Password strength rules</p>\n","ld":"<p>Defines how strong user passwords must be  minimum length and whether they must include lowercase, uppercase,\nnumbers, and/or symbols  plus how long temporary passwords issued to new users remain valid.</p>\n<p>This is applied to the Cognito <code>Policies.PasswordPolicy</code> block.</p>\n"}},"schema":{"description":"#### Custom attributes schema\n\n---\n\nLets you define additional attributes (like `role`, `plan`, `companyId`, etc.) that are stored on each user,\nincluding their data type and validation constraints.\n\nThese translate into the Cognito user pool `Schema` entries\n([schema docs](https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-cognito-userpool)).","type":"array","items":{"$ref":"#/definitions/AttributeSchema"},"_MdxDesc":{"sd":"<p> Custom attributes schema</p>\n","ld":"<p>Lets you define additional attributes (like <code>role</code>, <code>plan</code>, <code>companyId</code>, etc.) that are stored on each user,\nincluding their data type and validation constraints.</p>\n<p>These translate into the Cognito user pool <code>Schema</code> entries\n(<a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-cognito-userpool\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">schema docs</a>).</p>\n"}},"allowPhoneNumberAsUserName":{"description":"#### Allow phone numbers as usernames\n\n---\n\nIf enabled (the default), users can sign in using their phone number in addition to any traditional username.\nTurning this off means phone numbers can still be stored, but can't be used to log in.\n\nThis is implemented via Cognito's `UsernameAttributes` configuration.","default":true,"type":"boolean","_MdxDesc":{"sd":"<p> Allow phone numbers as usernames</p>\n","ld":"<p>If enabled (the default), users can sign in using their phone number in addition to any traditional username.\nTurning this off means phone numbers can still be stored, but can&#39;t be used to log in.</p>\n<p>This is implemented via Cognito&#39;s <code>UsernameAttributes</code> configuration.</p>\n"}},"allowEmailAsUserName":{"description":"#### Allow email addresses as usernames\n\n---\n\nIf enabled (the default), users can sign in using their email address instead of a dedicated username.\nTurning this off means emails can still be stored, but can't be used to log in directly.\n\nThis is also controlled through Cognito `UsernameAttributes`.","default":true,"type":"boolean","_MdxDesc":{"sd":"<p> Allow email addresses as usernames</p>\n","ld":"<p>If enabled (the default), users can sign in using their email address instead of a dedicated username.\nTurning this off means emails can still be stored, but can&#39;t be used to log in directly.</p>\n<p>This is also controlled through Cognito <code>UsernameAttributes</code>.</p>\n"}},"accessTokenValiditySeconds":{"description":"#### Access token lifetime\n\n---\n\nControls how long an access token issued by Cognito stays valid after login. Shorter lifetimes reduce the window\nin which a stolen token can be abused, at the cost of more frequent refreshes.\n\nThis value is passed to the user pool client as `AccessTokenValidity`.","type":"number","_MdxDesc":{"sd":"<p> Access token lifetime</p>\n","ld":"<p>Controls how long an access token issued by Cognito stays valid after login. Shorter lifetimes reduce the window\nin which a stolen token can be abused, at the cost of more frequent refreshes.</p>\n<p>This value is passed to the user pool client as <code>AccessTokenValidity</code>.</p>\n"}},"idTokenValiditySeconds":{"description":"#### ID token lifetime\n\n---\n\nControls how long an ID token (which contains user profile and claims) is accepted before clients must obtain a new one.\n\nThis is set on the user pool client as `IdTokenValidity`.","type":"number","_MdxDesc":{"sd":"<p> ID token lifetime</p>\n","ld":"<p>Controls how long an ID token (which contains user profile and claims) is accepted before clients must obtain a new one.</p>\n<p>This is set on the user pool client as <code>IdTokenValidity</code>.</p>\n"}},"refreshTokenValidityDays":{"description":"#### Refresh token lifetime\n\n---\n\nSets for how many days a refresh token can be used to obtain new access / ID tokens without requiring the user to sign in again.\nLonger lifetimes mean fewer re-authentications, but keep sessions alive for longer.\n\nThis value is used as `RefreshTokenValidity` on the Cognito user pool client.","type":"number","_MdxDesc":{"sd":"<p> Refresh token lifetime</p>\n","ld":"<p>Sets for how many days a refresh token can be used to obtain new access / ID tokens without requiring the user to sign in again.\nLonger lifetimes mean fewer re-authentications, but keep sessions alive for longer.</p>\n<p>This value is used as <code>RefreshTokenValidity</code> on the Cognito user pool client.</p>\n"}},"allowedOAuthFlows":{"description":"#### OAuth flows\n\n---\n\nSpecifies which OAuth 2.0 flows the user pool client is allowed to use:\n\n- `code`: Authorization Code flow (recommended for web apps and backends).\n- `implicit`: Implicit flow (legacy browser-only flow).\n- `client_credentials`: Servertoserver (no end user) machine credentials.\n\nThese values populate `AllowedOAuthFlows` on the Cognito user pool client\n([AWS::Cognito::UserPoolClient](https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-cognito-userpoolclient)).","type":"array","items":{"$ref":"#/definitions/AllowedOauthFlow"},"_MdxDesc":{"sd":"<p> OAuth flows</p>\n","ld":"<p>Specifies which OAuth 2.0 flows the user pool client is allowed to use:</p>\n<ul>\n<li><code>code</code>: Authorization Code flow (recommended for web apps and backends).</li>\n<li><code>implicit</code>: Implicit flow (legacy browser-only flow).</li>\n<li><code>client_credentials</code>: Servertoserver (no end user) machine credentials.</li>\n</ul>\n<p>These values populate <code>AllowedOAuthFlows</code> on the Cognito user pool client\n(<a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-cognito-userpoolclient\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS::Cognito::UserPoolClient</a>).</p>\n"}},"allowedOAuthScopes":{"description":"#### OAuth scopes\n\n---\n\nLists which scopes clients can request when using OAuth (for example `email`, `openid`, `profile`).\nScopes control which user information and permissions your app receives in tokens.\n\nThese values are passed to the user pool client as `AllowedOAuthScopes`.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> OAuth scopes</p>\n","ld":"<p>Lists which scopes clients can request when using OAuth (for example <code>email</code>, <code>openid</code>, <code>profile</code>).\nScopes control which user information and permissions your app receives in tokens.</p>\n<p>These values are passed to the user pool client as <code>AllowedOAuthScopes</code>.</p>\n"}},"callbackURLs":{"description":"#### OAuth callback URLs\n\n---\n\nThe allowed URLs where Cognito is permitted to redirect users after successful authentication.\nThese must exactly match the URLs registered with your frontend / backend, otherwise the redirect will fail.\n\nMapped into `CallbackURLs` and `DefaultRedirectURI` on the user pool client.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> OAuth callback URLs</p>\n","ld":"<p>The allowed URLs where Cognito is permitted to redirect users after successful authentication.\nThese must exactly match the URLs registered with your frontend / backend, otherwise the redirect will fail.</p>\n<p>Mapped into <code>CallbackURLs</code> and <code>DefaultRedirectURI</code> on the user pool client.</p>\n"}},"logoutURLs":{"description":"#### OAuth logout URLs\n\n---\n\nThe URLs Cognito can redirect users to after they log out of the Hosted UI or end their session.\nMust also be explicitly configured so that sign-out redirects don't fail.\n\nThese populate the `LogoutURLs` list on the user pool client.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> OAuth logout URLs</p>\n","ld":"<p>The URLs Cognito can redirect users to after they log out of the Hosted UI or end their session.\nMust also be explicitly configured so that sign-out redirects don&#39;t fail.</p>\n<p>These populate the <code>LogoutURLs</code> list on the user pool client.</p>\n"}},"identityProviders":{"description":"#### External identity providers\n\n---\n\nAllows users to sign in with thirdparty identity providers like Google, Facebook, Login with Amazon, OIDC, SAML, or Sign in with Apple.\nEach entry configures one external provider (client ID/secret, attribute mapping, requested scopes, and advanced providerspecific options).\n\nUnder the hood Stacktape creates separate `AWS::Cognito::UserPoolIdentityProvider` resources and registers them\nin the user pool client's `SupportedIdentityProviders`.","type":"array","items":{"$ref":"#/definitions/IdentityProvider"},"_MdxDesc":{"sd":"<p> External identity providers</p>\n","ld":"<p>Allows users to sign in with thirdparty identity providers like Google, Facebook, Login with Amazon, OIDC, SAML, or Sign in with Apple.\nEach entry configures one external provider (client ID/secret, attribute mapping, requested scopes, and advanced providerspecific options).</p>\n<p>Under the hood Stacktape creates separate <code>AWS::Cognito::UserPoolIdentityProvider</code> resources and registers them\nin the user pool client&#39;s <code>SupportedIdentityProviders</code>.</p>\n"}},"useFirewall":{"description":"#### Associate a WAF\n\n---\n\nLinks the user pool to a `web-app-firewall` resource, so requests to the Hosted UI and token endpoints are inspected\nby AWS WAF rules you configure in Stacktape.\n\nStacktape does this by creating a `WebACLAssociation` between the user pool and the referenced firewall.","type":"string","_MdxDesc":{"sd":"<p> Associate a WAF</p>\n","ld":"<p>Links the user pool to a <code>web-app-firewall</code> resource, so requests to the Hosted UI and token endpoints are inspected\nby AWS WAF rules you configure in Stacktape.</p>\n<p>Stacktape does this by creating a <code>WebACLAssociation</code> between the user pool and the referenced firewall.</p>\n"}},"generateClientSecret":{"description":"#### Generate a client secret\n\n---\n\nAsks Cognito to generate a secret for the user pool client. Use this when you have trusted backends (like APIs or serverside apps)\nthat can safely store a client secret and use confidential OAuth flows.\n\nThis flag controls the `GenerateSecret` property on the user pool client.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Generate a client secret</p>\n","ld":"<p>Asks Cognito to generate a secret for the user pool client. Use this when you have trusted backends (like APIs or serverside apps)\nthat can safely store a client secret and use confidential OAuth flows.</p>\n<p>This flag controls the <code>GenerateSecret</code> property on the user pool client.</p>\n"}},"allowOnlyExternalIdentityProviders":{"description":"#### Force external identity providers\n\n---\n\nIf `true`, users can't sign in with a username/password against the Cognito user directory at all.\nInstead, they must always use one of the configured external identity providers (Google, SAML, etc.).\n\nInternally this removes `COGNITO` from `SupportedIdentityProviders` on the user pool client.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Force external identity providers</p>\n","ld":"<p>If <code>true</code>, users can&#39;t sign in with a username/password against the Cognito user directory at all.\nInstead, they must always use one of the configured external identity providers (Google, SAML, etc.).</p>\n<p>Internally this removes <code>COGNITO</code> from <code>SupportedIdentityProviders</code> on the user pool client.</p>\n"}}},"additionalProperties":false},"UserPoolHooks":{"type":"object","properties":{"customMessage":{"description":"#### Custom message hook\n\nTriggered whenever Cognito is about to send an email or SMS (signup, verification, password reset, etc.).\nLets you fully customize message contents or dynamically choose language/branding.\n\nValue must be the ARN of a Lambda function configured to handle the \"Custom Message\" trigger.","type":"string","_MdxDesc":{"sd":"<p> Custom message hook</p>\n<p>Triggered whenever Cognito is about to send an email or SMS (signup, verification, password reset, etc.).\nLets you fully customize message contents or dynamically choose language/branding.</p>\n<p>Value must be the ARN of a Lambda function configured to handle the &quot;Custom Message&quot; trigger.</p>\n"}},"postAuthentication":{"description":"#### Post-authentication hook\n\nRuns after a user has successfully authenticated. You can use this to record analytics, update lastlogin timestamps,\nor block access based on additional checks.","type":"string","_MdxDesc":{"sd":"<p> Post-authentication hook</p>\n<p>Runs after a user has successfully authenticated. You can use this to record analytics, update lastlogin timestamps,\nor block access based on additional checks.</p>\n"}},"postConfirmation":{"description":"#### Post-confirmation hook\n\nRuns right after a user confirms their account (for example via email link or admin confirmation).\nThis is often used to create user records in your own database or to provision resources.","type":"string","_MdxDesc":{"sd":"<p> Post-confirmation hook</p>\n<p>Runs right after a user confirms their account (for example via email link or admin confirmation).\nThis is often used to create user records in your own database or to provision resources.</p>\n"}},"preAuthentication":{"description":"#### Pre-authentication hook\n\nInvoked just before Cognito validates a user's credentials. You can use this to block signin attempts\nbased on IP, device, or user state (for example, softdeleting an account).","type":"string","_MdxDesc":{"sd":"<p> Pre-authentication hook</p>\n<p>Invoked just before Cognito validates a user&#39;s credentials. You can use this to block signin attempts\nbased on IP, device, or user state (for example, softdeleting an account).</p>\n"}},"preSignUp":{"description":"#### Pre-sign-up hook\n\nCalled before a new user is created. Useful for validating input, autoconfirming trusted users,\nor blocking signups that don't meet your business rules.","type":"string","_MdxDesc":{"sd":"<p> Pre-sign-up hook</p>\n<p>Called before a new user is created. Useful for validating input, autoconfirming trusted users,\nor blocking signups that don&#39;t meet your business rules.</p>\n"}},"preTokenGeneration":{"description":"#### Pre-token-generation hook\n\nRuns right before Cognito issues tokens. Lets you customize token claims (for example, adding roles or flags)\nbased on external systems or additional logic.","type":"string","_MdxDesc":{"sd":"<p> Pre-token-generation hook</p>\n<p>Runs right before Cognito issues tokens. Lets you customize token claims (for example, adding roles or flags)\nbased on external systems or additional logic.</p>\n"}},"userMigration":{"description":"#### User migration hook\n\nLets you migrate users onthefly from another user store. When someone tries to sign in but doesn't exist in Cognito,\nthis trigger can look them up elsewhere, import them, and let the signin continue.","type":"string","_MdxDesc":{"sd":"<p> User migration hook</p>\n<p>Lets you migrate users onthefly from another user store. When someone tries to sign in but doesn&#39;t exist in Cognito,\nthis trigger can look them up elsewhere, import them, and let the signin continue.</p>\n"}},"createAuthChallenge":{"description":"#### Create auth challenge hook\n\nPart of Cognito's custom auth flow. This trigger is used to generate a challenge (for example sending a custom OTP)\nafter `DefineAuthChallenge` decides a challenge is needed.","type":"string","_MdxDesc":{"sd":"<p> Create auth challenge hook</p>\n<p>Part of Cognito&#39;s custom auth flow. This trigger is used to generate a challenge (for example sending a custom OTP)\nafter <code>DefineAuthChallenge</code> decides a challenge is needed.</p>\n"}},"defineAuthChallenge":{"description":"#### Define auth challenge hook\n\nAlso part of the custom auth flow. It decides whether a user needs another challenge, has passed, or has failed,\nbased on previous challenges and responses.","type":"string","_MdxDesc":{"sd":"<p> Define auth challenge hook</p>\n<p>Also part of the custom auth flow. It decides whether a user needs another challenge, has passed, or has failed,\nbased on previous challenges and responses.</p>\n"}},"verifyAuthChallengeResponse":{"description":"#### Verify auth challenge response hook\n\nValidates the user's response to a custom challenge (for example, checking an OTP the user provides).","type":"string","_MdxDesc":{"sd":"<p> Verify auth challenge response hook</p>\n<p>Validates the user&#39;s response to a custom challenge (for example, checking an OTP the user provides).</p>\n"}}},"additionalProperties":false},"EmailConfiguration":{"type":"object","properties":{"sesAddressArn":{"description":"#### SES identity to send emails from\n\n---\n\nARN of an SES verified identity (email address or domain) that Cognito should use when sending emails.\nRequired when you want full control over sending (for example for MFA via `EMAIL_OTP`), because Cognito\nmust switch into `DEVELOPER` email sending mode.","type":"string","_MdxDesc":{"sd":"<p> SES identity to send emails from</p>\n","ld":"<p>ARN of an SES verified identity (email address or domain) that Cognito should use when sending emails.\nRequired when you want full control over sending (for example for MFA via <code>EMAIL_OTP</code>), because Cognito\nmust switch into <code>DEVELOPER</code> email sending mode.</p>\n"}},"from":{"description":"#### From address\n\n---\n\nThe email address that appears in the \"From\" field of messages sent by Cognito (if you're using SES).\nThis address must be verified in SES if you're sending through your own identity.","type":"string","_MdxDesc":{"sd":"<p> From address</p>\n","ld":"<p>The email address that appears in the &quot;From&quot; field of messages sent by Cognito (if you&#39;re using SES).\nThis address must be verified in SES if you&#39;re sending through your own identity.</p>\n"}},"replyToEmailAddress":{"description":"#### Reply-to address\n\n---\n\nOptional address where replies to Cognito emails should be delivered.\nIf not set, replies go to the `from` address (or the default Cognito sender).","type":"string","_MdxDesc":{"sd":"<p> Reply-to address</p>\n","ld":"<p>Optional address where replies to Cognito emails should be delivered.\nIf not set, replies go to the <code>from</code> address (or the default Cognito sender).</p>\n"}}},"additionalProperties":false},"InviteMessageConfig":{"type":"object","properties":{"emailMessage":{"description":"#### Invitation email body\n\n---\n\nThe text of the email sent when an administrator creates a new user.\nYou can reference placeholders like `{username}` and `{####}` (temporary password or code) in the message.","type":"string","_MdxDesc":{"sd":"<p> Invitation email body</p>\n","ld":"<p>The text of the email sent when an administrator creates a new user.\nYou can reference placeholders like <code>{username}</code> and <code>{####}</code> (temporary password or code) in the message.</p>\n"}},"emailSubject":{"description":"#### Invitation email subject","type":"string","_MdxDesc":{"sd":"<p> Invitation email subject</p>\n"}},"smsMessage":{"description":"#### Invitation SMS body\n\n---\n\nThe content of the SMS message sent when new users are created with a phone number.\nAs with email, you can include placeholders such as `{username}` and `{####}`.","type":"string","_MdxDesc":{"sd":"<p> Invitation SMS body</p>\n","ld":"<p>The content of the SMS message sent when new users are created with a phone number.\nAs with email, you can include placeholders such as <code>{username}</code> and <code>{####}</code>.</p>\n"}}},"additionalProperties":false},"UserVerificationType":{"enum":["email-code","email-link","none","sms"],"type":"string"},"UserVerificationMessageConfig":{"type":"object","properties":{"emailMessageUsingCode":{"description":"#### Email body when verifying with a code\n\nUsed when `userVerificationType` is `email-code`. The message typically contains a `{####}` placeholder\nthat Cognito replaces with a onetime verification code.","type":"string","_MdxDesc":{"sd":"<p> Email body when verifying with a code</p>\n<p>Used when <code>userVerificationType</code> is <code>email-code</code>. The message typically contains a <code>{####}</code> placeholder\nthat Cognito replaces with a onetime verification code.</p>\n"}},"emailMessageUsingLink":{"description":"#### Email body when verifying with a link\n\nUsed when `userVerificationType` is `email-link`. Cognito replaces special markers like `{##verify your email##}`\nwith a clickable URL.","type":"string","_MdxDesc":{"sd":"<p> Email body when verifying with a link</p>\n<p>Used when <code>userVerificationType</code> is <code>email-link</code>. Cognito replaces special markers like <code>{##verify your email##}</code>\nwith a clickable URL.</p>\n"}},"emailSubjectUsingCode":{"description":"#### Email subject when verifying with a code","type":"string","_MdxDesc":{"sd":"<p> Email subject when verifying with a code</p>\n"}},"emailSubjectUsingLink":{"description":"#### Email subject when verifying with a link","type":"string","_MdxDesc":{"sd":"<p> Email subject when verifying with a link</p>\n"}},"smsMessage":{"description":"#### SMS verification message\n\n---\n\nText of the SMS Cognito sends when verifying a phone number (for example containing `{####}`).","type":"string","_MdxDesc":{"sd":"<p> SMS verification message</p>\n","ld":"<p>Text of the SMS Cognito sends when verifying a phone number (for example containing <code>{####}</code>).</p>\n"}}},"additionalProperties":false},"MfaConfiguration":{"type":"object","properties":{"status":{"description":"#### MFA requirement\n\n- `OFF`: MFA is completely disabled.\n- `ON`: All users must complete MFA during signin.\n- `OPTIONAL`: Users can opt in to MFA; it's recommended but not strictly required.\n\nThis value configures the Cognito `MfaConfiguration` property.","enum":["OFF","ON","OPTIONAL"],"type":"string","_MdxDesc":{"sd":"<p> MFA requirement</p>\n<ul>\n<li><code>OFF</code>: MFA is completely disabled.</li>\n<li><code>ON</code>: All users must complete MFA during signin.</li>\n<li><code>OPTIONAL</code>: Users can opt in to MFA; it&#39;s recommended but not strictly required.</li>\n</ul>\n<p>This value configures the Cognito <code>MfaConfiguration</code> property.</p>\n"}},"enabledTypes":{"description":"#### Enabled MFA factor types\n\n---\n\nChooses which MFA methods users can use:\n\n- `SMS`: Onetime codes are sent via text message. Requires an SNS role so Cognito can send SMS.\n- `SOFTWARE_TOKEN`: Timebased onetime codes from an authenticator app.\n- `EMAIL_OTP`: Codes are sent by email. AWS requires that you configure a developer email sending identity\n  (which Stacktape does when you provide `emailConfiguration.sesAddressArn`).\n\nThese values are mapped to Cognito's `EnabledMfas` setting (`SMS_MFA`, `SOFTWARE_TOKEN_MFA`, `EMAIL_OTP`),\nwhose behavior is described in\n[EnabledMfas in the AWS::Cognito::UserPool docs](https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-cognito-userpool).","type":"array","items":{"enum":["EMAIL_OTP","SMS","SOFTWARE_TOKEN"],"type":"string"},"_MdxDesc":{"sd":"<p> Enabled MFA factor types</p>\n","ld":"<p>Chooses which MFA methods users can use:</p>\n<ul>\n<li><code>SMS</code>: Onetime codes are sent via text message. Requires an SNS role so Cognito can send SMS.</li>\n<li><code>SOFTWARE_TOKEN</code>: Timebased onetime codes from an authenticator app.</li>\n<li><code>EMAIL_OTP</code>: Codes are sent by email. AWS requires that you configure a developer email sending identity\n(which Stacktape does when you provide <code>emailConfiguration.sesAddressArn</code>).</li>\n</ul>\n<p>These values are mapped to Cognito&#39;s <code>EnabledMfas</code> setting (<code>SMS_MFA</code>, <code>SOFTWARE_TOKEN_MFA</code>, <code>EMAIL_OTP</code>),\nwhose behavior is described in\n<a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-cognito-userpool\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">EnabledMfas in the AWS::Cognito::UserPool docs</a>.</p>\n"}}},"additionalProperties":false},"PasswordPolicy":{"type":"object","properties":{"minimumLength":{"description":"#### Minimum password length\n\nThe fewest characters a password can have. Longer passwords are generally more secure.","type":"number","_MdxDesc":{"sd":"<p> Minimum password length</p>\n<p>The fewest characters a password can have. Longer passwords are generally more secure.</p>\n"}},"requireLowercase":{"description":"#### Require at least one lowercase letter","type":"boolean","_MdxDesc":{"sd":"<p> Require at least one lowercase letter</p>\n"}},"requireNumbers":{"description":"#### Require at least one number","type":"boolean","_MdxDesc":{"sd":"<p> Require at least one number</p>\n"}},"requireSymbols":{"description":"#### Require at least one symbol\n\nSymbols are nonalphanumeric characters such as `!`, `@`, or `#`.","type":"boolean","_MdxDesc":{"sd":"<p> Require at least one symbol</p>\n<p>Symbols are nonalphanumeric characters such as <code>!</code>, <code>@</code>, or <code>#</code>.</p>\n"}},"requireUppercase":{"description":"#### Require at least one uppercase letter","type":"boolean","_MdxDesc":{"sd":"<p> Require at least one uppercase letter</p>\n"}},"temporaryPasswordValidityDays":{"description":"#### Temporary password validity (days)\n\nHow long a temporary password issued to a new user is valid before it must be changed on first signin.","type":"number","_MdxDesc":{"sd":"<p> Temporary password validity (days)</p>\n<p>How long a temporary password issued to a new user is valid before it must be changed on first signin.</p>\n"}}},"additionalProperties":false},"AttributeSchema":{"type":"object","properties":{"name":{"description":"#### Attribute name\n\nThe logical name of the attribute as it appears on the user (for example `given_name`, `plan`, or `tenantId`).","type":"string","_MdxDesc":{"sd":"<p> Attribute name</p>\n<p>The logical name of the attribute as it appears on the user (for example <code>given_name</code>, <code>plan</code>, or <code>tenantId</code>).</p>\n"}},"attributeDataType":{"description":"#### Attribute data type\n\nThe value type stored for this attribute (`String`, `Number`, etc.).\nThis is passed to Cognito's `AttributeDataType`.","type":"string","_MdxDesc":{"sd":"<p> Attribute data type</p>\n<p>The value type stored for this attribute (<code>String</code>, <code>Number</code>, etc.).\nThis is passed to Cognito&#39;s <code>AttributeDataType</code>.</p>\n"}},"developerOnlyAttribute":{"description":"#### Developer-only attribute\n\nIf true, the attribute is only readable/writable by privileged backend code and not exposed to end users directly.","type":"boolean","_MdxDesc":{"sd":"<p> Developer-only attribute</p>\n<p>If true, the attribute is only readable/writable by privileged backend code and not exposed to end users directly.</p>\n"}},"mutable":{"description":"#### Mutable after sign-up\n\nControls whether the attribute can be changed after it has been initially set.","type":"boolean","_MdxDesc":{"sd":"<p> Mutable after sign-up</p>\n<p>Controls whether the attribute can be changed after it has been initially set.</p>\n"}},"required":{"description":"#### Required at sign-up\n\nIf true, users must supply this attribute when creating an account.","type":"boolean","_MdxDesc":{"sd":"<p> Required at sign-up</p>\n<p>If true, users must supply this attribute when creating an account.</p>\n"}},"numberMaxValue":{"description":"#### Maximum numeric value","type":"number","_MdxDesc":{"sd":"<p> Maximum numeric value</p>\n"}},"numberMinValue":{"description":"#### Minimum numeric value","type":"number","_MdxDesc":{"sd":"<p> Minimum numeric value</p>\n"}},"stringMaxLength":{"description":"#### Maximum string length","type":"number","_MdxDesc":{"sd":"<p> Maximum string length</p>\n"}},"stringMinLength":{"description":"#### Minimum string length","type":"number","_MdxDesc":{"sd":"<p> Minimum string length</p>\n"}}},"additionalProperties":false},"AllowedOauthFlow":{"enum":["client_credentials","code","implicit"],"type":"string"},"IdentityProvider":{"type":"object","properties":{"type":{"description":"#### Provider type\n\n---\n\nThe kind of external identity provider you want to integrate:\n\n- `Facebook`, `Google`, `LoginWithAmazon`, `SignInWithApple`: social identity providers.\n- `OIDC`: a generic OpenID Connect provider.\n- `SAML`: a SAML 2.0 identity provider (often used for enterprise SSO).","enum":["Facebook","Google","LoginWithAmazon","OIDC","SAML","SignInWithApple"],"type":"string","_MdxDesc":{"sd":"<p> Provider type</p>\n","ld":"<p>The kind of external identity provider you want to integrate:</p>\n<ul>\n<li><code>Facebook</code>, <code>Google</code>, <code>LoginWithAmazon</code>, <code>SignInWithApple</code>: social identity providers.</li>\n<li><code>OIDC</code>: a generic OpenID Connect provider.</li>\n<li><code>SAML</code>: a SAML 2.0 identity provider (often used for enterprise SSO).</li>\n</ul>\n"}},"clientId":{"description":"#### OAuth / OIDC client ID\n\n---\n\nThe client ID (sometimes called app ID) that you obtained from the external provider's console.\nCognito presents this ID when redirecting users to the provider.","type":"string","_MdxDesc":{"sd":"<p> OAuth / OIDC client ID</p>\n","ld":"<p>The client ID (sometimes called app ID) that you obtained from the external provider&#39;s console.\nCognito presents this ID when redirecting users to the provider.</p>\n"}},"clientSecret":{"description":"#### OAuth / OIDC client secret\n\n---\n\nThe client secret associated with the `clientId`, used by Cognito when exchanging authorization codes for tokens.\nThis value should be kept confidential and only configured from secure sources.","type":"string","_MdxDesc":{"sd":"<p> OAuth / OIDC client secret</p>\n","ld":"<p>The client secret associated with the <code>clientId</code>, used by Cognito when exchanging authorization codes for tokens.\nThis value should be kept confidential and only configured from secure sources.</p>\n"}},"attributeMapping":{"description":"#### Attribute mapping\n\n---\n\nMaps attributes from the external provider (for example `email`, `given_name`) to Cognito user pool attributes.\nKeys are Cognito attribute names, values are attribute names from the identity provider.\n\nIf not provided, Stacktape defaults to mapping `email -> email`.","type":"object","additionalProperties":{"type":"string"},"_MdxDesc":{"sd":"<p> Attribute mapping</p>\n","ld":"<p>Maps attributes from the external provider (for example <code>email</code>, <code>given_name</code>) to Cognito user pool attributes.\nKeys are Cognito attribute names, values are attribute names from the identity provider.</p>\n<p>If not provided, Stacktape defaults to mapping <code>email -> email</code>.</p>\n"}},"authorizeScopes":{"description":"#### Requested scopes\n\n---\n\nAdditional OAuth scopes to request from the identity provider (for example `openid`, `email`, `profile`).\nThese control which pieces of user information and permissions your app receives in the provider's tokens.\n\nIf omitted, Stacktape uses a reasonable default per provider (see\n[AWS::Cognito::UserPoolIdentityProvider](https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-cognito-userpoolidentityprovider)).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Requested scopes</p>\n","ld":"<p>Additional OAuth scopes to request from the identity provider (for example <code>openid</code>, <code>email</code>, <code>profile</code>).\nThese control which pieces of user information and permissions your app receives in the provider&#39;s tokens.</p>\n<p>If omitted, Stacktape uses a reasonable default per provider (see\n<a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-cognito-userpoolidentityprovider\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS::Cognito::UserPoolIdentityProvider</a>).</p>\n"}},"providerDetails":{"$ref":"#/definitions/Record<string,any>","description":"#### Advanced provider options\n\n---\n\nLowlevel configuration passed directly into Cognito's `ProviderDetails` map.\nYou can use this to override endpoints or supply providerspecific keys as documented by AWS,\nfor example `authorize_url`, `token_url`, `attributes_request_method`, `oidc_issuer`, and others.\n\nIn most cases you don't need to set this  Stacktape configures sensible defaults for common providers.","_MdxDesc":{"sd":"<p> Advanced provider options</p>\n","ld":"<p>Lowlevel configuration passed directly into Cognito&#39;s <code>ProviderDetails</code> map.\nYou can use this to override endpoints or supply providerspecific keys as documented by AWS,\nfor example <code>authorize_url</code>, <code>token_url</code>, <code>attributes_request_method</code>, <code>oidc_issuer</code>, and others.</p>\n<p>In most cases you don&#39;t need to set this  Stacktape configures sensible defaults for common providers.</p>\n"}}},"additionalProperties":false,"required":["clientId","clientSecret","type"]},"Record<string,any>":{"type":"object","additionalProperties":false},"EventBus":{"description":"#### Event Bus\n\n---\n\nAn event bus that receives events from your applications. Other services can be configured to react to events on the bus. It simplifies building event-driven architectures by decoupling event producers and consumers.\n\nFor more information, see the [AWS documentation on Amazon EventBridge](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-buses.html).","type":"object","properties":{"type":{"type":"string","const":"event-bus"},"properties":{"$ref":"#/definitions/EventBusProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["type"],"_MdxDesc":{"sd":"<p> Event Bus</p>\n","ld":"<p>An event bus that receives events from your applications. Other services can be configured to react to events on the bus. It simplifies building event-driven architectures by decoupling event producers and consumers.</p>\n<p>For more information, see the <a href=\"https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-buses.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on Amazon EventBridge</a>.</p>\n"}},"EventBusProps":{"type":"object","properties":{"eventSourceName":{"description":"#### Partner Event Source\n\n---\n\nThe name of the partner event source to associate with this event bus. This is only required if you are creating a partner event bus to receive events from a third-party SaaS partner.\n\nFor more details, refer to the [AWS documentation on partner event buses](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-partner-event-buses.html).","type":"string","_MdxDesc":{"sd":"<p> Partner Event Source</p>\n","ld":"<p>The name of the partner event source to associate with this event bus. This is only required if you are creating a partner event bus to receive events from a third-party SaaS partner.</p>\n<p>For more details, refer to the <a href=\"https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-partner-event-buses.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on partner event buses</a>.</p>\n"}},"archivation":{"$ref":"#/definitions/EventBusArchivation","description":"#### Event Archiving\n\n---\n\nConfigures event archiving, allowing you to store and replay past events. This is useful for testing, debugging, or recovering from errors.","_MdxDesc":{"sd":"<p> Event Archiving</p>\n","ld":"<p>Configures event archiving, allowing you to store and replay past events. This is useful for testing, debugging, or recovering from errors.</p>\n"}}},"additionalProperties":false},"EventBusArchivation":{"type":"object","properties":{"enabled":{"description":"#### Enable Archiving\n\n---\n\nIf `true`, events sent to this event bus will be archived.\n\nNote: Disabling the archive will result in its deletion.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enable Archiving</p>\n","ld":"<p>If <code>true</code>, events sent to this event bus will be archived.</p>\n<p>Note: Disabling the archive will result in its deletion.</p>\n"}},"retentionDays":{"description":"#### Retention Period\n\n---\n\nThe number of days to retain archived events.","default":"indefinitely","type":"number","_MdxDesc":{"sd":"<p> Retention Period</p>\n","ld":"<p>The number of days to retain archived events.</p>\n"}}},"additionalProperties":false,"required":["enabled"]},"Bastion":{"description":"#### Bastion Host\n\n---\n\nA bastion host instance that helps you access resources in your stack that are protected within a private network.\nIt leverages keyless SSH connections and tunnels for maximum security.","type":"object","properties":{"type":{"type":"string","const":"bastion"},"properties":{"$ref":"#/definitions/BastionProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["type"],"_MdxDesc":{"sd":"<p> Bastion Host</p>\n","ld":"<p>A bastion host instance that helps you access resources in your stack that are protected within a private network.\nIt leverages keyless SSH connections and tunnels for maximum security.</p>\n"}},"BastionProps":{"type":"object","properties":{"instanceSize":{"description":"#### The instance size for the bastion host.\n\n---","default":"t3.micro","type":"string","_MdxDesc":{"sd":"<p> The instance size for the bastion host.</p>\n"}},"runCommandsAtLaunch":{"description":"#### Commands to be run on the launch of the bastion instance.\n\n---\n\n- Commands are run as the `root` user (do not use `sudo`).\n- Modifying this list after the bastion host has been created will force a replacement of the instance, meaning any manually created data on the old instance will be lost.\n- Use this to install dependencies and packages that may be required for your bastion scripts.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Commands to be run on the launch of the bastion instance.</p>\n","ld":"<ul>\n<li>Commands are run as the <code>root</code> user (do not use <code>sudo</code>).</li>\n<li>Modifying this list after the bastion host has been created will force a replacement of the instance, meaning any manually created data on the old instance will be lost.</li>\n<li>Use this to install dependencies and packages that may be required for your bastion scripts.</li>\n</ul>\n"}},"logging":{"$ref":"#/definitions/BastionLoggingConfig","description":"#### Configures logging for the bastion host.\n\n---\n\nMultiple log types are collected from the bastion host, and you can specify the logging behavior for each type.","_MdxDesc":{"sd":"<p> Configures logging for the bastion host.</p>\n","ld":"<p>Multiple log types are collected from the bastion host, and you can specify the logging behavior for each type.</p>\n"}}},"additionalProperties":false},"BastionLoggingConfig":{"type":"object","properties":{"messages":{"$ref":"#/definitions/BastionLogging","description":"#### Configures logging for `/var/log/messages`.\n\n---\n\nThis log group collects global system messages, including those logged during system startup.\nBy default, these logs are retained for 30 days.","_MdxDesc":{"sd":"<p> Configures logging for <code>/var/log/messages</code>.</p>\n","ld":"<p>This log group collects global system messages, including those logged during system startup.\nBy default, these logs are retained for 30 days.</p>\n"}},"secure":{"$ref":"#/definitions/BastionLogging","description":"#### Configures logging for `/var/log/secure`.\n\n---\n\nThis log group collects information related to authentication and authorization, such as SSH login attempts.\nBy default, these logs are retained for 180 days.","_MdxDesc":{"sd":"<p> Configures logging for <code>/var/log/secure</code>.</p>\n","ld":"<p>This log group collects information related to authentication and authorization, such as SSH login attempts.\nBy default, these logs are retained for 180 days.</p>\n"}},"audit":{"$ref":"#/definitions/BastionLogging","description":"#### Configures logging for `/var/log/audit/audit.log`.\n\n---\n\nThis log group contains a detailed record of security-related events generated by the Linux audit system.\nBy default, these logs are retained for 365 days.","_MdxDesc":{"sd":"<p> Configures logging for <code>/var/log/audit/audit.log</code>.</p>\n","ld":"<p>This log group contains a detailed record of security-related events generated by the Linux audit system.\nBy default, these logs are retained for 365 days.</p>\n"}}},"additionalProperties":false},"BastionLogging":{"type":"object","properties":{"disabled":{"description":"#### Disables the collection of logs to CloudWatch.\n\n---","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disables the collection of logs to CloudWatch.</p>\n"}},"retentionDays":{"description":"#### The number of days to retain logs in the CloudWatch log group.","enum":[1,120,14,150,180,1827,3,30,365,3653,400,5,545,60,7,731,90],"type":"number","_MdxDesc":{"sd":"<p> The number of days to retain logs in the CloudWatch log group.</p>\n"}},"logForwarding":{"description":"#### Log Forwarding\n\n---\n\nForwards logs to a specified destination for monitoring, analysis, or long-term storage.\n\nLog forwarding is handled by an [Amazon Kinesis Data Firehose](https://aws.amazon.com/kinesis/data-firehose/) delivery stream. You will incur costs based on the volume of data transferred (approximately $0.03 per GB). For detailed pricing, see the [AWS Kinesis Firehose Pricing](https://aws.amazon.com/kinesis/data-firehose/pricing/) page.\n\nSupported destinations:\n- `http-endpoint`: Delivers logs to any HTTP endpoint that complies with [Firehose request and response specifications](https://docs.aws.amazon.com/firehose/latest/dev/httpdeliveryrequestresponse.html). Many third-party logging services are compatible out-of-the-box.\n- `datadog`: Delivers logs to [Datadog](https://www.datadoghq.com/).\n- `highlight`: Delivers logs to a [Highlight.io](https://www.highlight.io/) project.\n\nFor more information, refer to the [Stacktape documentation on log forwarding](https://docs.stacktape.com/configuration/log-forwarding/).\n\n> If logs fail to be delivered after multiple retries, they are stored in a backup S3 bucket named `{stackName}-{resourceName}-logs-{generatedHash}`. The retry duration can be configured.","anyOf":[{"$ref":"#/definitions/HttpEndpointLogForwarding"},{"$ref":"#/definitions/HighlightLogForwarding"},{"$ref":"#/definitions/DatadogLogForwarding"}],"_MdxDesc":{"sd":"<p> Log Forwarding</p>\n","ld":"<p>Forwards logs to a specified destination for monitoring, analysis, or long-term storage.</p>\n<p>Log forwarding is handled by an <a href=\"https://aws.amazon.com/kinesis/data-firehose/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Amazon Kinesis Data Firehose</a> delivery stream. You will incur costs based on the volume of data transferred (approximately $0.03 per GB). For detailed pricing, see the <a href=\"https://aws.amazon.com/kinesis/data-firehose/pricing/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS Kinesis Firehose Pricing</a> page.</p>\n<p>Supported destinations:</p>\n<ul>\n<li><code>http-endpoint</code>: Delivers logs to any HTTP endpoint that complies with <a href=\"https://docs.aws.amazon.com/firehose/latest/dev/httpdeliveryrequestresponse.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Firehose request and response specifications</a>. Many third-party logging services are compatible out-of-the-box.</li>\n<li><code>datadog</code>: Delivers logs to <a href=\"https://www.datadoghq.com/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Datadog</a>.</li>\n<li><code>highlight</code>: Delivers logs to a <a href=\"https://www.highlight.io/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Highlight.io</a> project.</li>\n</ul>\n<p>For more information, refer to the <a href=\"/configuration/log-forwarding/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape documentation on log forwarding</a>.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>If logs fail to be delivered after multiple retries, they are stored in a backup S3 bucket named <code>{stackName}-{resourceName}-logs-{generatedHash}</code>. The retry duration can be configured.</p>\n</div>\n</div>"}}},"additionalProperties":false},"DynamoDbTable":{"description":"#### DynamoDB Table\n\n---\n\nA fully managed, serverless, and highly available key-value and document database that delivers single-digit millisecond performance at any scale.","type":"object","properties":{"type":{"type":"string","const":"dynamo-db-table"},"properties":{"$ref":"#/definitions/DynamoDbTableProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> DynamoDB Table</p>\n","ld":"<p>A fully managed, serverless, and highly available key-value and document database that delivers single-digit millisecond performance at any scale.</p>\n"}},"DynamoDbTableProps":{"type":"object","properties":{"primaryKey":{"$ref":"#/definitions/DynamoDbTablePrimaryKey","description":"#### Configures the primary key for the table.\n\n---\n\nThe primary key uniquely identifies each item in the table. Two types of primary keys are supported:\n\n- **Simple primary key**: Composed of one attribute, the `partitionKey`.\n- **Composite primary key**: Composed of two attributes, the `partitionKey` and the `sortKey`.\n\nThe primary key cannot be modified after the table is created, and each item in the table must include the primary key attribute(s).\n\nFor more details, see the [AWS documentation on primary keys](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.CoreComponents.html#HowItWorks.CoreComponents.PrimaryKey).","_MdxDesc":{"sd":"<p> Configures the primary key for the table.</p>\n","ld":"<p>The primary key uniquely identifies each item in the table. Two types of primary keys are supported:</p>\n<ul>\n<li><strong>Simple primary key</strong>: Composed of one attribute, the <code>partitionKey</code>.</li>\n<li><strong>Composite primary key</strong>: Composed of two attributes, the <code>partitionKey</code> and the <code>sortKey</code>.</li>\n</ul>\n<p>The primary key cannot be modified after the table is created, and each item in the table must include the primary key attribute(s).</p>\n<p>For more details, see the <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.CoreComponents.html#HowItWorks.CoreComponents.PrimaryKey\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on primary keys</a>.</p>\n"}},"provisionedThroughput":{"$ref":"#/definitions/DynamoDbProvisionedThroughput","description":"#### Configures the read and write throughput capabilities of the table.\n\n---\n\n- **Provisioned mode**: If you specify `provisionedThroughput`, you must set the read and write capacity for your table. This can provide cost predictability but may not handle unpredictable loads.\n- **On-demand mode**: If `provisionedThroughput` is not configured, the table runs in on-demand mode, and you pay only for what you use.\n\nFor more details on the differences between these modes, see the [AWS documentation](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.ReadWriteCapacityMode.html).","_MdxDesc":{"sd":"<p> Configures the read and write throughput capabilities of the table.</p>\n","ld":"<ul>\n<li><strong>Provisioned mode</strong>: If you specify <code>provisionedThroughput</code>, you must set the read and write capacity for your table. This can provide cost predictability but may not handle unpredictable loads.</li>\n<li><strong>On-demand mode</strong>: If <code>provisionedThroughput</code> is not configured, the table runs in on-demand mode, and you pay only for what you use.</li>\n</ul>\n<p>For more details on the differences between these modes, see the <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.ReadWriteCapacityMode.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"enablePointInTimeRecovery":{"description":"#### Enables continuous backups with point-in-time recovery.\n\n---\n\nPoint-in-time recovery allows you to restore a table to any point in time within the last 35 days.\nThe recovery process always restores the data to a new table.\n\nEnabling this feature may result in additional charges. For more details, see the [AWS DynamoDB pricing page](https://aws.amazon.com/dynamodb/pricing/on-demand/#DynamoDB_detailed_feature_pricing).","type":"boolean","_MdxDesc":{"sd":"<p> Enables continuous backups with point-in-time recovery.</p>\n","ld":"<p>Point-in-time recovery allows you to restore a table to any point in time within the last 35 days.\nThe recovery process always restores the data to a new table.</p>\n<p>Enabling this feature may result in additional charges. For more details, see the <a href=\"https://aws.amazon.com/dynamodb/pricing/on-demand/#DynamoDB_detailed_feature_pricing\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS DynamoDB pricing page</a>.</p>\n"}},"streamType":{"description":"#### Enables streaming of item changes and configures the stream type.\n\n---\n\nThe stream type determines what information is written to the stream when an item in the table is modified.\nStreams can be consumed by [functions](https://docs.stacktape.com/compute-resources/lambda-functions/#dynamo-db-stream-event) and [batch jobs](https://docs.stacktape.com/compute-resources/batch-jobs/#dynamo-db-event).\n\nAllowed values are:\n- `KEYS_ONLY`: Only the key attributes of the modified item are written to the stream.\n- `NEW_IMAGE`: The entire item, as it appears after it was modified, is written to the stream.\n- `OLD_IMAGE`: The entire item, as it appeared before it was modified, is written to the stream.\n- `NEW_AND_OLD_IMAGES`: Both the new and old images of the item are written to the stream.","enum":["KEYS_ONLY","NEW_AND_OLD_IMAGES","NEW_IMAGE","OLD_IMAGE"],"type":"string","_MdxDesc":{"sd":"<p> Enables streaming of item changes and configures the stream type.</p>\n","ld":"<p>The stream type determines what information is written to the stream when an item in the table is modified.\nStreams can be consumed by <a href=\"/compute-resources/lambda-functions/#dynamo-db-stream-event\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">functions</a> and <a href=\"/compute-resources/batch-jobs/#dynamo-db-event\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">batch jobs</a>.</p>\n<p>Allowed values are:</p>\n<ul>\n<li><code>KEYS_ONLY</code>: Only the key attributes of the modified item are written to the stream.</li>\n<li><code>NEW_IMAGE</code>: The entire item, as it appears after it was modified, is written to the stream.</li>\n<li><code>OLD_IMAGE</code>: The entire item, as it appeared before it was modified, is written to the stream.</li>\n<li><code>NEW_AND_OLD_IMAGES</code>: Both the new and old images of the item are written to the stream.</li>\n</ul>\n"}},"secondaryIndexes":{"description":"#### A list of global secondary indexes for this table.\n\n---\n\nBy default, you can only query items in a DynamoDB table based on primary key attributes.\nGlobal secondary indexes allow you to perform queries using a variety of different attributes.\n\nFor more details, see the [AWS documentation on secondary indexes](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/GSI.html).","type":"array","items":{"$ref":"#/definitions/DynamoDbTableGlobalSecondaryIndex"},"_MdxDesc":{"sd":"<p> A list of global secondary indexes for this table.</p>\n","ld":"<p>By default, you can only query items in a DynamoDB table based on primary key attributes.\nGlobal secondary indexes allow you to perform queries using a variety of different attributes.</p>\n<p>For more details, see the <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/GSI.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on secondary indexes</a>.</p>\n"}}},"additionalProperties":false,"required":["primaryKey"]},"DynamoDbTablePrimaryKey":{"type":"object","properties":{"partitionKey":{"$ref":"#/definitions/DynamoDbAttribute","description":"#### Specifies the partition key for the table.\n\n---\n\nIf a table has only a `partitionKey` and no `sortKey`, no two items can have the same partition key.\nDynamoDB uses the partition key's value as input to an internal hash function, which determines the partition (physical storage) where the item is stored.","_MdxDesc":{"sd":"<p> Specifies the partition key for the table.</p>\n","ld":"<p>If a table has only a <code>partitionKey</code> and no <code>sortKey</code>, no two items can have the same partition key.\nDynamoDB uses the partition key&#39;s value as input to an internal hash function, which determines the partition (physical storage) where the item is stored.</p>\n"}},"sortKey":{"$ref":"#/definitions/DynamoDbAttribute","description":"#### Specifies the sort key for the table.\n\n---\n\nUsing a `sortKey` provides additional flexibility when querying data.\nIn a table with a `partitionKey` and a `sortKey`, multiple items can have the same partition key, but they must have different sort key values.\nAll items with the same partition key are stored together, sorted by the sort key value.","_MdxDesc":{"sd":"<p> Specifies the sort key for the table.</p>\n","ld":"<p>Using a <code>sortKey</code> provides additional flexibility when querying data.\nIn a table with a <code>partitionKey</code> and a <code>sortKey</code>, multiple items can have the same partition key, but they must have different sort key values.\nAll items with the same partition key are stored together, sorted by the sort key value.</p>\n"}}},"additionalProperties":false,"required":["partitionKey"]},"DynamoDbAttribute":{"type":"object","properties":{"name":{"description":"#### The name of the attribute that will be used as a key.","type":"string","_MdxDesc":{"sd":"<p> The name of the attribute that will be used as a key.</p>\n"}},"type":{"description":"#### The type of the attribute that will be used as a key.","enum":["binary","number","string"],"type":"string","_MdxDesc":{"sd":"<p> The type of the attribute that will be used as a key.</p>\n"}}},"additionalProperties":false,"required":["name","type"]},"DynamoDbProvisionedThroughput":{"type":"object","properties":{"readUnits":{"description":"#### The number of read units available per second.\n\n---\n\nEach read unit represents either:\n- One strongly consistent read\n- Two eventually consistent reads\n\nThis applies to items up to 4 KB in size. Reading larger items will consume additional read capacity units.\nIf you exceed the provisioned read capacity, you will receive a `ThrottlingException`.","type":"number","_MdxDesc":{"sd":"<p> The number of read units available per second.</p>\n","ld":"<p>Each read unit represents either:</p>\n<ul>\n<li>One strongly consistent read</li>\n<li>Two eventually consistent reads</li>\n</ul>\n<p>This applies to items up to 4 KB in size. Reading larger items will consume additional read capacity units.\nIf you exceed the provisioned read capacity, you will receive a <code>ThrottlingException</code>.</p>\n"}},"writeUnits":{"description":"#### The number of write units available per second.\n\n---\n\nOne write unit represents one write per second for an item up to 1 KB in size.\nWriting larger items will consume additional write capacity units.\nIf you exceed the provisioned write capacity, you will receive a `ThrottlingException`.","type":"number","_MdxDesc":{"sd":"<p> The number of write units available per second.</p>\n","ld":"<p>One write unit represents one write per second for an item up to 1 KB in size.\nWriting larger items will consume additional write capacity units.\nIf you exceed the provisioned write capacity, you will receive a <code>ThrottlingException</code>.</p>\n"}},"writeScaling":{"$ref":"#/definitions/DynamoDbWriteScaling","description":"#### Auto-scaling configuration for write units.\n\n---\n\nEven in provisioned mode, you can configure throughput to scale based on load.\nThe table throughput scales up or down once the specified thresholds are met.\n\nFor more details, see [this detailed AWS article](https://aws.amazon.com/blogs/database/amazon-dynamodb-auto-scaling-performance-and-cost-optimization-at-any-scale/).","_MdxDesc":{"sd":"<p> Auto-scaling configuration for write units.</p>\n","ld":"<p>Even in provisioned mode, you can configure throughput to scale based on load.\nThe table throughput scales up or down once the specified thresholds are met.</p>\n<p>For more details, see <a href=\"https://aws.amazon.com/blogs/database/amazon-dynamodb-auto-scaling-performance-and-cost-optimization-at-any-scale/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">this detailed AWS article</a>.</p>\n"}},"readScaling":{"$ref":"#/definitions/DynamoDbReadScaling","description":"#### Auto-scaling configuration for read units.\n\n---\n\nEven in provisioned mode, you can configure throughput to scale based on load.\nThe table throughput scales up or down once the specified thresholds are met.\n\nFor more details, see [this detailed AWS article](https://aws.amazon.com/blogs/database/amazon-dynamodb-auto-scaling-performance-and-cost-optimization-at-any-scale/).","_MdxDesc":{"sd":"<p> Auto-scaling configuration for read units.</p>\n","ld":"<p>Even in provisioned mode, you can configure throughput to scale based on load.\nThe table throughput scales up or down once the specified thresholds are met.</p>\n<p>For more details, see <a href=\"https://aws.amazon.com/blogs/database/amazon-dynamodb-auto-scaling-performance-and-cost-optimization-at-any-scale/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">this detailed AWS article</a>.</p>\n"}}},"additionalProperties":false,"required":["readUnits","writeUnits"]},"DynamoDbWriteScaling":{"type":"object","properties":{"minUnits":{"description":"#### The minimum number of provisioned write units per second.\n\n---\n\nThe available write units will never scale down below this threshold.","type":"number","_MdxDesc":{"sd":"<p> The minimum number of provisioned write units per second.</p>\n","ld":"<p>The available write units will never scale down below this threshold.</p>\n"}},"maxUnits":{"description":"#### The maximum number of provisioned write units per second that the table can scale up to.\n\n---\n\nThe available write units will never scale up above this threshold.","type":"number","_MdxDesc":{"sd":"<p> The maximum number of provisioned write units per second that the table can scale up to.</p>\n","ld":"<p>The available write units will never scale up above this threshold.</p>\n"}},"keepUtilizationUnder":{"description":"#### The target utilization percentage for scaling.\n\n---\n\nIf the table's consumed write capacity exceeds (or falls below) your target utilization for a sustained period, the provisioned capacity will be increased (or decreased).","type":"number","_MdxDesc":{"sd":"<p> The target utilization percentage for scaling.</p>\n","ld":"<p>If the table&#39;s consumed write capacity exceeds (or falls below) your target utilization for a sustained period, the provisioned capacity will be increased (or decreased).</p>\n"}}},"additionalProperties":false,"required":["keepUtilizationUnder","maxUnits","minUnits"]},"DynamoDbReadScaling":{"type":"object","properties":{"minUnits":{"description":"#### The minimum number of provisioned read units per second.\n\n---\n\nThe available read units will never scale down below this threshold.","type":"number","_MdxDesc":{"sd":"<p> The minimum number of provisioned read units per second.</p>\n","ld":"<p>The available read units will never scale down below this threshold.</p>\n"}},"maxUnits":{"description":"#### The maximum number of provisioned read units per second that the table can scale up to.\n\n---\n\nThe available read units will never scale up above this threshold.","type":"number","_MdxDesc":{"sd":"<p> The maximum number of provisioned read units per second that the table can scale up to.</p>\n","ld":"<p>The available read units will never scale up above this threshold.</p>\n"}},"keepUtilizationUnder":{"description":"#### The target utilization percentage for scaling.\n\n---\n\nIf the table's consumed read capacity exceeds (or falls below) your target utilization for a sustained period, the provisioned capacity will be increased (or decreased).","type":"number","_MdxDesc":{"sd":"<p> The target utilization percentage for scaling.</p>\n","ld":"<p>If the table&#39;s consumed read capacity exceeds (or falls below) your target utilization for a sustained period, the provisioned capacity will be increased (or decreased).</p>\n"}}},"additionalProperties":false,"required":["keepUtilizationUnder","maxUnits","minUnits"]},"DynamoDbTableGlobalSecondaryIndex":{"type":"object","properties":{"name":{"description":"#### The name of the index.","type":"string","_MdxDesc":{"sd":"<p> The name of the index.</p>\n"}},"partitionKey":{"$ref":"#/definitions/DynamoDbAttribute","description":"#### Specifies the partition key for the index.\n\n---\n\nDynamoDB uses the partition key's value as input to an internal hash function, which determines the partition where the item is stored.","_MdxDesc":{"sd":"<p> Specifies the partition key for the index.</p>\n","ld":"<p>DynamoDB uses the partition key&#39;s value as input to an internal hash function, which determines the partition where the item is stored.</p>\n"}},"sortKey":{"$ref":"#/definitions/DynamoDbAttribute","description":"#### Specifies the sort key for the index.\n\n---\n\nUsing a `sortKey` provides additional flexibility when querying data.\nIn an index with a `partitionKey` and a `sortKey`, multiple items can have the same partition key, but they must have different sort key values.","_MdxDesc":{"sd":"<p> Specifies the sort key for the index.</p>\n","ld":"<p>Using a <code>sortKey</code> provides additional flexibility when querying data.\nIn an index with a <code>partitionKey</code> and a <code>sortKey</code>, multiple items can have the same partition key, but they must have different sort key values.</p>\n"}},"projections":{"description":"#### A list of attributes that are copied from the table into the global secondary index.\n\n---\n\nWhen querying a secondary index, you can only access attributes that are projected into it.\nBy default, the table's primary key (partition key and sort key) is projected into the index.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of attributes that are copied from the table into the global secondary index.</p>\n","ld":"<p>When querying a secondary index, you can only access attributes that are projected into it.\nBy default, the table&#39;s primary key (partition key and sort key) is projected into the index.</p>\n"}}},"additionalProperties":false,"required":["name","partitionKey"]},"StateMachine":{"description":"#### State Machine\n\n---\n\nA state machine allows you to orchestrate and coordinate multiple compute resources to create complex workflows.\nIt is defined using the [Amazon States Language](https://states-language.net/spec.html).","type":"object","properties":{"type":{"type":"string","const":"state-machine"},"properties":{"$ref":"#/definitions/StateMachineProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> State Machine</p>\n","ld":"<p>A state machine allows you to orchestrate and coordinate multiple compute resources to create complex workflows.\nIt is defined using the <a href=\"https://states-language.net/spec.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Amazon States Language</a>.</p>\n"}},"StateMachineProps":{"type":"object","properties":{"definition":{"$ref":"#/definitions/StateMachineDefinition","description":"#### The definition of the state machine.\n\n---\n\nThis is written in the [Amazon States Language](https://states-language.net/spec.html).","_MdxDesc":{"sd":"<p> The definition of the state machine.</p>\n","ld":"<p>This is written in the <a href=\"https://states-language.net/spec.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Amazon States Language</a>.</p>\n"}}},"additionalProperties":false,"required":["definition"]},"StateMachineDefinition":{"type":"object","properties":{"Comment":{"description":"#### A human-readable description of the state machine.","type":"string","_MdxDesc":{"sd":"<p> A human-readable description of the state machine.</p>\n"}},"StartAt":{"description":"#### The name of the state to start the execution at.","type":"string","_MdxDesc":{"sd":"<p> The name of the state to start the execution at.</p>\n"}},"States":{"description":"#### An object containing the states of the state machine.","type":"object","additionalProperties":{"$ref":"#/definitions/State"},"_MdxDesc":{"sd":"<p> An object containing the states of the state machine.</p>\n"}},"Version":{"description":"#### The version of the Amazon States Language.","type":"string","_MdxDesc":{"sd":"<p> The version of the Amazon States Language.</p>\n"}},"TimeoutSeconds":{"description":"#### The maximum time, in seconds, that a state machine can run.","type":"number","_MdxDesc":{"sd":"<p> The maximum time, in seconds, that a state machine can run.</p>\n"}}},"additionalProperties":false,"required":["StartAt","States"]},"State":{"anyOf":[{"$ref":"#/definitions/Choice"},{"$ref":"#/definitions/Fail"},{"$ref":"#/definitions/StateMachineMap"},{"$ref":"#/definitions/Parallel"},{"$ref":"#/definitions/Pass"},{"$ref":"#/definitions/Succeed"},{"$ref":"#/definitions/Task"},{"$ref":"#/definitions/Wait"}]},"Choice":{"type":"object","properties":{"Type":{"type":"string"},"Next":{"type":"string"},"End":{"type":"boolean","const":true},"Comment":{"type":"string"},"OutputPath":{"type":"string"},"InputPath":{"type":"string"},"Choices":{"type":"array","items":{"$ref":"#/definitions/Operator"}},"Default":{"type":"string"}},"additionalProperties":false,"required":["Choices","Type"]},"Operator":{"type":"object","additionalProperties":{},"properties":{"Variable":{"type":"string"},"Next":{"type":"string"},"And":{"type":"array","items":{"$ref":"#/definitions/Operator"}},"Or":{"type":"array","items":{"$ref":"#/definitions/Operator"}},"Not":{"$ref":"#/definitions/Operator"},"BooleanEquals":{"type":"boolean"},"NumericEquals":{"type":"number"},"NumericGreaterThan":{"type":"number"},"NumericGreaterThanEquals":{"type":"number"},"NumericLessThan":{"type":"number"},"NumericLessThanEquals":{"type":"number"},"StringEquals":{"type":"string"},"StringGreaterThan":{"type":"string"},"StringGreaterThanEquals":{"type":"string"},"StringLessThan":{"type":"string"},"StringLessThanEquals":{"type":"string"},"TimestampEquals":{"type":"string"},"TimestampGreaterThan":{"type":"string"},"TimestampGreaterThanEquals":{"type":"string"},"TimestampLessThan":{"type":"string"},"TimestampLessThanEquals":{"type":"string"}}},"Fail":{"type":"object","properties":{"Type":{"type":"string"},"Comment":{"type":"string"},"OutputPath":{"type":"string"},"InputPath":{"type":"string"},"Cause":{"type":"string"},"Error":{"type":"string"}},"additionalProperties":false,"required":["Type"]},"StateMachineMap":{"type":"object","properties":{"Type":{"type":"string"},"Next":{"type":"string"},"End":{"type":"boolean","const":true},"Comment":{"type":"string"},"OutputPath":{"type":"string"},"InputPath":{"type":"string"},"ResultPath":{"type":"string"},"ItemsPath":{"type":"string"},"MaxConcurrency":{"type":"number"},"Iterator":{"$ref":"#/definitions/StpStateMachine"},"Parameters":{"type":"object","additionalProperties":{}},"Retry":{"type":"array","items":{"type":"object","additionalProperties":{},"properties":{"ErrorEquals":{"type":"array","items":{"type":"string"}},"IntervalSeconds":{"type":"number"},"MaxAttempts":{"type":"number"},"BackoffRate":{"type":"number"}},"required":["ErrorEquals"]}},"Catch":{"type":"array","items":{"type":"object","additionalProperties":{},"properties":{"ErrorEquals":{"type":"array","items":{"type":"string"}},"Next":{"type":"string"}},"required":["ErrorEquals","Next"]}}},"additionalProperties":false,"required":["Iterator","Type"]},"StpStateMachine":{"additionalProperties":false,"type":"object","properties":{"name":{"type":"string"},"type":{"type":"string","const":"state-machine"},"configParentResourceType":{"type":"string","const":"state-machine"},"nameChain":{"type":"array","items":{"type":"string"}}},"required":["configParentResourceType","name","nameChain","type"]},"Parallel":{"type":"object","properties":{"Type":{"type":"string"},"Next":{"type":"string"},"End":{"type":"boolean","const":true},"Comment":{"type":"string"},"OutputPath":{"type":"string"},"InputPath":{"type":"string"},"ResultPath":{"type":"string"},"Branches":{"type":"array","items":{"$ref":"#/definitions/StpStateMachine"}},"Retry":{"type":"array","items":{"type":"object","additionalProperties":{},"properties":{"ErrorEquals":{"type":"array","items":{"type":"string"}},"IntervalSeconds":{"type":"number"},"MaxAttempts":{"type":"number"},"BackoffRate":{"type":"number"}},"required":["ErrorEquals"]}},"Catch":{"type":"array","items":{"type":"object","additionalProperties":{},"properties":{"ErrorEquals":{"type":"array","items":{"type":"string"}},"Next":{"type":"string"}},"required":["ErrorEquals","Next"]}}},"additionalProperties":false,"required":["Branches","Type"]},"Pass":{"type":"object","properties":{"Type":{"type":"string"},"Next":{"type":"string"},"End":{"type":"boolean","const":true},"Comment":{"type":"string"},"OutputPath":{"type":"string"},"InputPath":{"type":"string"},"ResultPath":{"type":"string"},"Parameters":{"type":"object","additionalProperties":{}},"Result":{}},"additionalProperties":false,"required":["Type"]},"Succeed":{"type":"object","properties":{"Type":{"type":"string"},"Comment":{"type":"string"}},"additionalProperties":false,"required":["Type"]},"Task":{"type":"object","properties":{"Type":{"type":"string"},"Next":{"type":"string"},"End":{"type":"boolean","const":true},"Comment":{"type":"string"},"OutputPath":{"type":"string"},"InputPath":{"type":"string"},"Resource":{"anyOf":[{"type":"object","additionalProperties":{}},{"type":"string"}]},"ResultPath":{"type":"string"},"Retry":{"type":"array","items":{"type":"object","additionalProperties":{},"properties":{"ErrorEquals":{"type":"array","items":{"type":"string"}},"IntervalSeconds":{"type":"number"},"MaxAttempts":{"type":"number"},"BackoffRate":{"type":"number"}},"required":["ErrorEquals"]}},"Catch":{"type":"array","items":{"type":"object","additionalProperties":{},"properties":{"ErrorEquals":{"type":"array","items":{"type":"string"}},"Next":{"type":"string"}},"required":["ErrorEquals","Next"]}},"TimeoutSeconds":{"type":"number"},"HeartbeatSeconds":{"type":"number"},"Parameters":{"type":"object","additionalProperties":{}}},"additionalProperties":false,"required":["Resource","Type"]},"Wait":{"type":"object","properties":{"Type":{"type":"string"},"Next":{"type":"string"},"End":{"type":"boolean","const":true},"Comment":{"type":"string"},"OutputPath":{"type":"string"},"InputPath":{"type":"string"},"Seconds":{"type":"number"},"Timestamp":{"type":"string"},"SecondsPath":{"type":"string"},"TimestampPath":{"type":"string"}},"additionalProperties":false,"required":["Type"]},"MongoDbAtlasCluster":{"description":"#### MongoDB Atlas Cluster\n\n---\n\nA fully managed MongoDB Atlas cluster that is automatically deployed to your AWS account and managed within your stack.","type":"object","properties":{"type":{"type":"string","const":"mongo-db-atlas-cluster"},"properties":{"$ref":"#/definitions/MongoDbAtlasClusterProps"}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> MongoDB Atlas Cluster</p>\n","ld":"<p>A fully managed MongoDB Atlas cluster that is automatically deployed to your AWS account and managed within your stack.</p>\n"}},"MongoDbAtlasClusterProps":{"type":"object","properties":{"diskSizeGB":{"description":"#### The size of the disk, in GB.\n\n---\n\nBy default, all M10+ clusters automatically scale their storage. You can disable this behavior by configuring the `autoScaling` properties.\n\n> This property is not available for shared clusters (M2 and M5). For M10+ clusters, the default disk size depends on the instance size.\n> For more details, see the [MongoDB Atlas documentation](https://docs.atlas.mongodb.com/reference/faq/storage/).","type":"number","_MdxDesc":{"sd":"<p> The size of the disk, in GB.</p>\n","ld":"<p>By default, all M10+ clusters automatically scale their storage. You can disable this behavior by configuring the <code>autoScaling</code> properties.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>This property is not available for shared clusters (M2 and M5). For M10+ clusters, the default disk size depends on the instance size.\nFor more details, see the <a href=\"https://docs.atlas.mongodb.com/reference/faq/storage/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">MongoDB Atlas documentation</a>.</p>\n</div>\n</div>"}},"clusterTier":{"description":"#### Configures the resources for each data-bearing node in the cluster.\n\n---\n\nThis includes memory, default storage, and IOPS specifications.\nFor a list of available cluster tiers, see the [MongoDB Atlas documentation](https://docs.atlas.mongodb.com/reference/amazon-aws/#cluster-configuration-options).","enum":["M10","M100","M140","M2","M20","M200","M200 Low-CPU (R200)","M200_NVME","M30","M300","M300 Low-CPU (R300)","M40","M40 Low-CPU (R40)","M400","M400 Low-CPU (R400)","M400_NVME","M40_NVME","M5","M50","M50 Low-CPU (R50)","M50_NVME","M60","M60 Low-CPU (R60)","M60_NVME","M700","M700 Low-CPU (R700)","M80","M80 Low-CPU (R80)","M80_NVME"],"type":"string","_MdxDesc":{"sd":"<p> Configures the resources for each data-bearing node in the cluster.</p>\n","ld":"<p>This includes memory, default storage, and IOPS specifications.\nFor a list of available cluster tiers, see the <a href=\"https://docs.atlas.mongodb.com/reference/amazon-aws/#cluster-configuration-options\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">MongoDB Atlas documentation</a>.</p>\n"}},"version":{"description":"#### The major version of the MongoDB engine.\n\n---\n\nAvailable versions are `5.0`, `6.0`, and `7.0`.","default":7,"enum":["5.0","6.0","7.0"],"type":"string","_MdxDesc":{"sd":"<p> The major version of the MongoDB engine.</p>\n","ld":"<p>Available versions are <code>5.0</code>, <code>6.0</code>, and <code>7.0</code>.</p>\n"}},"numShards":{"description":"#### The number of shards for the cluster.\n\n---\n\nIf you configure more than one shard, the cluster will run in sharded mode, which distributes data across multiple machines to enable horizontal scaling.\nSharded mode is only available for cluster tiers M30 and higher.\n\nFor more details on sharding, see the [MongoDB documentation](https://www.mongodb.com/basics/sharding).","default":1,"type":"number","_MdxDesc":{"sd":"<p> The number of shards for the cluster.</p>\n","ld":"<p>If you configure more than one shard, the cluster will run in sharded mode, which distributes data across multiple machines to enable horizontal scaling.\nSharded mode is only available for cluster tiers M30 and higher.</p>\n<p>For more details on sharding, see the <a href=\"https://www.mongodb.com/basics/sharding\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">MongoDB documentation</a>.</p>\n"}},"replication":{"$ref":"#/definitions/MongoDbReplication","description":"#### Configures additional nodes for your cluster.\n\n---\n\nIncreasing the number of nodes can lead to better redundancy and performance.\nBy default, each cluster has three data-bearing nodes that are electable to become the primary.","_MdxDesc":{"sd":"<p> Configures additional nodes for your cluster.</p>\n","ld":"<p>Increasing the number of nodes can lead to better redundancy and performance.\nBy default, each cluster has three data-bearing nodes that are electable to become the primary.</p>\n"}},"enableBackups":{"description":"#### Enables backups for the cluster.\n\n---\n\nBackups are copies of your data that provide a safety measure in the event of data loss.\nThe default snapshot time is every day at 18:00 UTC.\nThis feature is only available for M10+ clusters.\n\nSnapshots are also automatically taken for M2/M5 clusters but have different properties. For more details, see the [M2 and M5 backup documentation](https://docs.atlas.mongodb.com/backup-restore-cluster/#m2---m5-snapshots).\n\nMongoDB Cloud Backup incurs additional charges. For more details, see the [MongoDB Cloud Backup pricing documentation](https://docs.atlas.mongodb.com/billing/cluster-configuration-costs/#cloud-backups).","type":"boolean","_MdxDesc":{"sd":"<p> Enables backups for the cluster.</p>\n","ld":"<p>Backups are copies of your data that provide a safety measure in the event of data loss.\nThe default snapshot time is every day at 18:00 UTC.\nThis feature is only available for M10+ clusters.</p>\n<p>Snapshots are also automatically taken for M2/M5 clusters but have different properties. For more details, see the [M2 and M5 backup documentation](<a href=\"https://docs.atlas.mongodb.com/backup-restore-cluster/#m2\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">https://docs.atlas.mongodb.com/backup-restore-cluster/#m2</a></p>\n"}},"enablePointInTimeRecovery":{"description":"#### Enables point-in-time recovery.\n\n---\n\nThis feature enables Continuous Cloud Backups, which replay the oplog (a history of ordered logical writes) to allow you to restore a cluster to a specific point in time within the last 7 days.\nIt is only available for M10+ clusters and requires `enableBackups` to be `true`.\n\nContinuous Cloud Backup incurs additional charges. For more details, see the [MongoDB Continuous Cloud Backup pricing documentation](https://docs.atlas.mongodb.com/billing/cluster-configuration-costs/#continuous-cloud-backups).","type":"boolean","_MdxDesc":{"sd":"<p> Enables point-in-time recovery.</p>\n","ld":"<p>This feature enables Continuous Cloud Backups, which replay the oplog (a history of ordered logical writes) to allow you to restore a cluster to a specific point in time within the last 7 days.\nIt is only available for M10+ clusters and requires <code>enableBackups</code> to be <code>true</code>.</p>\n<p>Continuous Cloud Backup incurs additional charges. For more details, see the <a href=\"https://docs.atlas.mongodb.com/billing/cluster-configuration-costs/#continuous-cloud-backups\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">MongoDB Continuous Cloud Backup pricing documentation</a>.</p>\n"}},"biConnector":{"$ref":"#/definitions/MongoDbBiConnector","description":"#### Configures the BI (Business Intelligence) Connector.\n\n---\n\nThe BI Connector allows SQL-based access to your data but can be CPU and memory-intensive.\nEnabling the BI Connector on `M10` and `M20` cluster tiers may cause performance degradation.","_MdxDesc":{"sd":"<p> Configures the BI (Business Intelligence) Connector.</p>\n","ld":"<p>The BI Connector allows SQL-based access to your data but can be CPU and memory-intensive.\nEnabling the BI Connector on <code>M10</code> and <code>M20</code> cluster tiers may cause performance degradation.</p>\n"}},"autoScaling":{"$ref":"#/definitions/MongoDbAutoScaling","description":"#### Configures the scaling behavior of the cluster.\n\n---\n\nYou can configure your cluster to automatically scale its tier, storage capacity, or both, based on usage.\nTo control costs, you can select a range of cluster tiers to which your cluster can scale.\n\nA cluster is scaled **up** (to the next tier) if:\n- Average CPU utilization has exceeded 75% for the past hour.\n- Memory utilization has exceeded 75% for the past hour.\n\nA cluster is scaled **down** (to a lower tier) if:\n- The average CPU and memory utilization over the past 24 hours is below 50%.\n- The cluster has not been scaled down (manually or automatically) in the past 24 hours.","_MdxDesc":{"sd":"<p> Configures the scaling behavior of the cluster.</p>\n","ld":"<p>You can configure your cluster to automatically scale its tier, storage capacity, or both, based on usage.\nTo control costs, you can select a range of cluster tiers to which your cluster can scale.</p>\n<p>A cluster is scaled <strong>up</strong> (to the next tier) if:</p>\n<ul>\n<li>Average CPU utilization has exceeded 75% for the past hour.</li>\n<li>Memory utilization has exceeded 75% for the past hour.</li>\n</ul>\n<p>A cluster is scaled <strong>down</strong> (to a lower tier) if:</p>\n<ul>\n<li>The average CPU and memory utilization over the past 24 hours is below 50%.</li>\n<li>The cluster has not been scaled down (manually or automatically) in the past 24 hours.</li>\n</ul>\n"}},"adminUserCredentials":{"$ref":"#/definitions/MongoDbAdminUserCredentials","description":"#### Creates and configures a MongoDB Atlas `atlasAdmin` user.\n\n---\n\nThis allows you to create an admin user with [administrative access privileges](https://docs.atlas.mongodb.com/security-add-mongodb-users/#mongodb-atlasrole-Atlas-admin).\n\nWhile not required for accessing the cluster from your compute resources, creating an admin user is useful for performing administrative tasks or connecting to the cluster from a local machine.","_MdxDesc":{"sd":"<p> Creates and configures a MongoDB Atlas <code>atlasAdmin</code> user.</p>\n","ld":"<p>This allows you to create an admin user with <a href=\"https://docs.atlas.mongodb.com/security-add-mongodb-users/#mongodb-atlasrole-Atlas-admin\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">administrative access privileges</a>.</p>\n<p>While not required for accessing the cluster from your compute resources, creating an admin user is useful for performing administrative tasks or connecting to the cluster from a local machine.</p>\n"}}},"additionalProperties":false,"required":["clusterTier"]},"MongoDbReplication":{"type":"object","properties":{"numAnalyticsNodes":{"description":"#### The number of analytics nodes.\n\n---\n\nAnalytics nodes are read-only nodes designed for long-running queries.\nUsing analytics nodes avoids impacting the performance of your operational compute resources.\nThey work well with the `biConnector` when the read preference is set to `analytics`.","type":"number","_MdxDesc":{"sd":"<p> The number of analytics nodes.</p>\n","ld":"<p>Analytics nodes are read-only nodes designed for long-running queries.\nUsing analytics nodes avoids impacting the performance of your operational compute resources.\nThey work well with the <code>biConnector</code> when the read preference is set to <code>analytics</code>.</p>\n"}},"numElectableNodes":{"description":"#### The number of electable nodes.\n\n---\n\nElectable nodes can become the primary node, and adding more improves the redundancy and availability of the cluster.","default":3,"enum":[3,5,7],"type":"number","_MdxDesc":{"sd":"<p> The number of electable nodes.</p>\n","ld":"<p>Electable nodes can become the primary node, and adding more improves the redundancy and availability of the cluster.</p>\n"}},"numReadOnlyNodes":{"description":"#### The number of read-only nodes.","type":"number","_MdxDesc":{"sd":"<p> The number of read-only nodes.</p>\n"}}},"additionalProperties":false},"MongoDbBiConnector":{"type":"object","properties":{"readPreference":{"description":"#### Configures the type of node to which the BI Connector will connect.","enum":["analytics","primary","secondary"],"type":"string","_MdxDesc":{"sd":"<p> Configures the type of node to which the BI Connector will connect.</p>\n"}},"enabled":{"description":"#### Enables the BI Connector.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enables the BI Connector.</p>\n"}}},"additionalProperties":false,"required":["enabled"]},"MongoDbAutoScaling":{"type":"object","properties":{"minClusterTier":{"description":"#### The minimum cluster tier to scale down to.","enum":["M10","M100","M140","M20","M200","M200 Low-CPU (R200)","M200_NVME","M30","M300","M300 Low-CPU (R300)","M40","M40 Low-CPU (R40)","M400 Low-CPU (R400)","M400_NVME","M40_NVME","M50","M50 Low-CPU (R50)","M50_NVME","M60","M60 Low-CPU (R60)","M60_NVME","M700 Low-CPU (R700)","M80","M80 Low-CPU (R80)","M80_NVME"],"type":"string","_MdxDesc":{"sd":"<p> The minimum cluster tier to scale down to.</p>\n"}},"maxClusterTier":{"description":"#### The maximum cluster tier to scale up to.","enum":["M10","M100","M140","M20","M200","M200 Low-CPU (R200)","M200_NVME","M30","M300","M300 Low-CPU (R300)","M40","M40 Low-CPU (R40)","M400 Low-CPU (R400)","M400_NVME","M40_NVME","M50","M50 Low-CPU (R50)","M50_NVME","M60","M60 Low-CPU (R60)","M60_NVME","M700 Low-CPU (R700)","M80","M80 Low-CPU (R80)","M80_NVME"],"type":"string","_MdxDesc":{"sd":"<p> The maximum cluster tier to scale up to.</p>\n"}},"disableDiskScaling":{"description":"#### Disables disk size scaling.\n\n---\n\nWhen disk scaling is enabled, cluster storage automatically increases when disk space usage reaches 90%, aiming for 70% disk utilization.\nCluster storage is never automatically scaled down.","type":"boolean","_MdxDesc":{"sd":"<p> Disables disk size scaling.</p>\n","ld":"<p>When disk scaling is enabled, cluster storage automatically increases when disk space usage reaches 90%, aiming for 70% disk utilization.\nCluster storage is never automatically scaled down.</p>\n"}},"disableScaleDown":{"description":"#### Disables the scale-down of the cluster tier.\n\n---\n\nWhen scale-down is disabled, the cluster can only scale up to a higher tier.","type":"boolean","_MdxDesc":{"sd":"<p> Disables the scale-down of the cluster tier.</p>\n","ld":"<p>When scale-down is disabled, the cluster can only scale up to a higher tier.</p>\n"}}},"additionalProperties":false},"MongoDbAdminUserCredentials":{"type":"object","properties":{"userName":{"description":"#### Name of the admin user","type":"string","_MdxDesc":{"sd":"<p> Name of the admin user</p>\n"}},"password":{"description":"#### Password for the admin user","type":"string","_MdxDesc":{"sd":"<p> Password for the admin user</p>\n"}}},"additionalProperties":false,"required":["password","userName"]},"RedisCluster":{"description":"#### Redis cluster\n\n---\n\nA fully managed, Redis-compatible in-memory data store with sub-millisecond latency.","type":"object","properties":{"type":{"type":"string","const":"redis-cluster"},"properties":{"$ref":"#/definitions/RedisClusterProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Redis cluster</p>\n","ld":"<p>A fully managed, Redis-compatible in-memory data store with sub-millisecond latency.</p>\n"}},"RedisClusterProps":{"type":"object","properties":{"enableSharding":{"description":"#### Enables sharding for the cluster.\n\n---\n\nSharding allows you to scale your Redis cluster horizontally by splitting the data across multiple shards.\nEach shard is managed by its own cluster, which includes a primary instance and a specified number of replicas.\nYou can increase or decrease the number of shards without interrupting the cluster.\nRouting and re-balancing are handled automatically by AWS.\n\n> **Limitations:**\n> - Sharding can only be enabled when the cluster is first created.\n> - You cannot change the number of replica nodes (`numReplicaNodes`) after a sharded cluster has been created.\n> - `numReplicaNodes` must be at least `1` for sharded clusters.\n\nFor more details, see the [AWS documentation](https://docs.stacktape.com/resources/redis-clusters/#sharded-cluster).","type":"boolean","_MdxDesc":{"sd":"<p> Enables sharding for the cluster.</p>\n","ld":"<p>Sharding allows you to scale your Redis cluster horizontally by splitting the data across multiple shards.\nEach shard is managed by its own cluster, which includes a primary instance and a specified number of replicas.\nYou can increase or decrease the number of shards without interrupting the cluster.\nRouting and re-balancing are handled automatically by AWS.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Limitations:</strong></p>\n<ul>\n<li>Sharding can only be enabled when the cluster is first created.</li>\n<li>You cannot change the number of replica nodes (<code>numReplicaNodes</code>) after a sharded cluster has been created.</li>\n<li><code>numReplicaNodes</code> must be at least <code>1</code> for sharded clusters.</li>\n</ul>\n</div>\n</div><p>For more details, see the <a href=\"/resources/redis-clusters/#sharded-cluster\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"numShards":{"description":"#### The number of shards for the cluster.\n\n---\n\nThis property is only effective when `enableSharding` is `true`.","default":1,"type":"number","_MdxDesc":{"sd":"<p> The number of shards for the cluster.</p>\n","ld":"<p>This property is only effective when <code>enableSharding</code> is <code>true</code>.</p>\n"}},"numReplicaNodes":{"description":"#### The number of replica nodes in the cluster.\n\n---\n\nAdding replica nodes (read replicas) provides two main benefits:\n1.  **Increased read throughput:** Read requests are distributed across the replicas.\n2.  **Increased availability:** If the primary node fails, a replica can be promoted to take its place.\n\nLoad balancing between replicas is handled automatically by AWS.\nFor sharded clusters, this property specifies the number of replicas for each shard.\n\n> **Note:** You cannot change this value for a sharded cluster after it has been created.","default":0,"type":"number","_MdxDesc":{"sd":"<p> The number of replica nodes in the cluster.</p>\n","ld":"<p>Adding replica nodes (read replicas) provides two main benefits:</p>\n<ol>\n<li><strong>Increased read throughput:</strong> Read requests are distributed across the replicas.</li>\n<li><strong>Increased availability:</strong> If the primary node fails, a replica can be promoted to take its place.</li>\n</ol>\n<p>Load balancing between replicas is handled automatically by AWS.\nFor sharded clusters, this property specifies the number of replicas for each shard.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> You cannot change this value for a sharded cluster after it has been created.</p>\n</div>\n</div>"}},"enableAutomaticFailover":{"description":"#### Enables automatic failover of the cluster's primary instance.\n\n---\n\nWhen enabled, a replica will automatically be promoted to primary if the original primary node fails.\n`numReplicaNodes` must be at least `1` to use this feature.\nOn sharded clusters, automatic failover is always enabled and cannot be disabled.\n\n> **Important:** If you want to enable automatic failover, you must first deploy the cluster with at least one replica, and then enable failover in a subsequent deployment.\n> Similarly, to disable automatic failover, you must first disable it and then remove the replicas in a separate deployment.","type":"boolean","_MdxDesc":{"sd":"<p> Enables automatic failover of the cluster&#39;s primary instance.</p>\n","ld":"<p>When enabled, a replica will automatically be promoted to primary if the original primary node fails.\n<code>numReplicaNodes</code> must be at least <code>1</code> to use this feature.\nOn sharded clusters, automatic failover is always enabled and cannot be disabled.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Important:</strong> If you want to enable automatic failover, you must first deploy the cluster with at least one replica, and then enable failover in a subsequent deployment.\nSimilarly, to disable automatic failover, you must first disable it and then remove the replicas in a separate deployment.</p>\n</div>\n</div>"}},"instanceSize":{"description":"#### The instance size for every node in the cluster.\n\n---\n\nThis applies to both primary and replica nodes.\nDifferent instance sizes offer varying amounts of memory and network performance.\nYou can change the instance size without interrupting the cluster or losing data.\n\nFor a detailed list of available instance types, see the [AWS pricing page](https://aws.amazon.com/elasticache/pricing/).","enum":["cache.m4.10xlarge","cache.m4.2xlarge","cache.m4.4xlarge","cache.m4.large","cache.m4.xlarge","cache.m5.12xlarge","cache.m5.24xlarge","cache.m5.2xlarge","cache.m5.4xlarge","cache.m5.large","cache.m5.xlarge","cache.m6g.12xlarge","cache.m6g.16xlarge","cache.m6g.2xlarge","cache.m6g.4xlarge","cache.m6g.8xlarge","cache.m6g.large","cache.m6g.xlarge","cache.m7g.12xlarge","cache.m7g.16xlarge","cache.m7g.2xlarge","cache.m7g.4xlarge","cache.m7g.8xlarge","cache.m7g.large","cache.m7g.xlarge","cache.r4.16xlarge","cache.r4.2xlarge","cache.r4.4xlarge","cache.r4.8xlarge","cache.r4.large","cache.r4.xlarge","cache.r5.12xlarge","cache.r5.24xlarge","cache.r5.2xlarge","cache.r5.4xlarge","cache.r5.large","cache.r5.xlarge","cache.r6g.12xlarge","cache.r6g.16xlarge","cache.r6g.2xlarge","cache.r6g.4xlarge","cache.r6g.8xlarge","cache.r6g.large","cache.r6g.xlarge","cache.r7g.12xlarge","cache.r7g.16xlarge","cache.r7g.2xlarge","cache.r7g.4xlarge","cache.r7g.8xlarge","cache.r7g.large","cache.r7g.xlarge","cache.t2.medium","cache.t2.micro","cache.t2.small","cache.t3.medium","cache.t3.micro","cache.t3.small","cache.t4g.medium","cache.t4g.micro","cache.t4g.small"],"type":"string","_MdxDesc":{"sd":"<p> The instance size for every node in the cluster.</p>\n","ld":"<p>This applies to both primary and replica nodes.\nDifferent instance sizes offer varying amounts of memory and network performance.\nYou can change the instance size without interrupting the cluster or losing data.</p>\n<p>For a detailed list of available instance types, see the <a href=\"https://aws.amazon.com/elasticache/pricing/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS pricing page</a>.</p>\n"}},"logging":{"$ref":"#/definitions/RedisLogging","description":"#### Configures the logging behavior and format.\n\n---\n\nThe [slow log](https://redis.io/commands/slowlog) is sent to a dedicated CloudWatch log group.\nBy default, logs are retained for 180 days.\n\nYou can access your logs in two ways:\n1.  **AWS CloudWatch Console:** Use the `stacktape stack-info` command to get a direct link to the log group.\n2.  **Stacktape CLI:** Use the [`stacktape logs` command](https://docs.stacktape.com/cli/commands/logs/) to view logs in your terminal.","_MdxDesc":{"sd":"<p> Configures the logging behavior and format.</p>\n","ld":"<p>The <a href=\"https://redis.io/commands/slowlog\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">slow log</a> is sent to a dedicated CloudWatch log group.\nBy default, logs are retained for 180 days.</p>\n<p>You can access your logs in two ways:</p>\n<ol>\n<li><strong>AWS CloudWatch Console:</strong> Use the <code>stacktape stack-info</code> command to get a direct link to the log group.</li>\n<li><strong>Stacktape CLI:</strong> Use the <a href=\"/cli/commands/logs/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">`stacktape logs` command</a> to view logs in your terminal.</li>\n</ol>\n"}},"automatedBackupRetentionDays":{"description":"#### The retention period for automated backups, in days.\n\n---\n\n- When set to `0`, automatic backups are disabled.\n- This retention period does not apply to manual backups created in the AWS console or via the API.","default":0,"type":"number","_MdxDesc":{"sd":"<p> The retention period for automated backups, in days.</p>\n","ld":"<ul>\n<li>When set to <code>0</code>, automatic backups are disabled.</li>\n<li>This retention period does not apply to manual backups created in the AWS console or via the API.</li>\n</ul>\n"}},"port":{"description":"#### The port on which the Redis cluster will listen for connections.","default":6379,"type":"number","_MdxDesc":{"sd":"<p> The port on which the Redis cluster will listen for connections.</p>\n"}},"defaultUserPassword":{"description":"#### The password for the default cluster user.\n\n---\n\nRedis clusters are password-protected, and all communication is encrypted in transit.\nIt is recommended to use [secrets](/resources/secrets/) to manage this password instead of hardcoding it.\n\n**Password Constraints:**\n- Must contain only printable ASCII characters.\n- Must be between 16 and 128 characters long.\n- Cannot contain the following characters: `/`, `\"`, or `@`.","type":"string","_MdxDesc":{"sd":"<p> The password for the default cluster user.</p>\n","ld":"<p>Redis clusters are password-protected, and all communication is encrypted in transit.\nIt is recommended to use <a href=\"/resources/secrets/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">secrets</a> to manage this password instead of hardcoding it.</p>\n<p><strong>Password Constraints:</strong></p>\n<ul>\n<li>Must contain only printable ASCII characters.</li>\n<li>Must be between 16 and 128 characters long.</li>\n<li>Cannot contain the following characters: <code>/</code>, <code>\"</code>, or <code>@</code>.</li>\n</ul>\n"}},"accessibility":{"$ref":"#/definitions/RedisAccessibility","description":"#### Configures which resources and hosts can access your cluster.","_MdxDesc":{"sd":"<p> Configures which resources and hosts can access your cluster.</p>\n"}},"engineVersion":{"description":"#### The Redis engine version to use.\n\n---","default":6.2,"enum":["6.0","6.2","7.0","7.1"],"type":"string","_MdxDesc":{"sd":"<p> The Redis engine version to use.</p>\n"}}},"additionalProperties":false,"required":["defaultUserPassword","instanceSize"]},"RedisLogging":{"type":"object","properties":{"disabled":{"description":"#### Disables the collection of [slow logs](https://redis.io/commands/slowlog-get) to CloudWatch.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disables the collection of <a href=\"https://redis.io/commands/slowlog-get\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">slow logs</a> to CloudWatch.</p>\n"}},"format":{"description":"#### The format for the logs.","default":"json","enum":["json","text"],"type":"string","_MdxDesc":{"sd":"<p> The format for the logs.</p>\n"}},"retentionDays":{"description":"#### The number of days to retain logs in the CloudWatch log group.","default":90,"enum":[1,120,14,150,180,1827,3,30,365,3653,400,5,545,60,7,731,90],"type":"number","_MdxDesc":{"sd":"<p> The number of days to retain logs in the CloudWatch log group.</p>\n"}},"logForwarding":{"description":"#### Log Forwarding\n\n---\n\nForwards logs to a specified destination for monitoring, analysis, or long-term storage.\n\nLog forwarding is handled by an [Amazon Kinesis Data Firehose](https://aws.amazon.com/kinesis/data-firehose/) delivery stream. You will incur costs based on the volume of data transferred (approximately $0.03 per GB). For detailed pricing, see the [AWS Kinesis Firehose Pricing](https://aws.amazon.com/kinesis/data-firehose/pricing/) page.\n\nSupported destinations:\n- `http-endpoint`: Delivers logs to any HTTP endpoint that complies with [Firehose request and response specifications](https://docs.aws.amazon.com/firehose/latest/dev/httpdeliveryrequestresponse.html). Many third-party logging services are compatible out-of-the-box.\n- `datadog`: Delivers logs to [Datadog](https://www.datadoghq.com/).\n- `highlight`: Delivers logs to a [Highlight.io](https://www.highlight.io/) project.\n\nFor more information, refer to the [Stacktape documentation on log forwarding](https://docs.stacktape.com/configuration/log-forwarding/).\n\n> If logs fail to be delivered after multiple retries, they are stored in a backup S3 bucket named `{stackName}-{resourceName}-logs-{generatedHash}`. The retry duration can be configured.","anyOf":[{"$ref":"#/definitions/HttpEndpointLogForwarding"},{"$ref":"#/definitions/HighlightLogForwarding"},{"$ref":"#/definitions/DatadogLogForwarding"}],"_MdxDesc":{"sd":"<p> Log Forwarding</p>\n","ld":"<p>Forwards logs to a specified destination for monitoring, analysis, or long-term storage.</p>\n<p>Log forwarding is handled by an <a href=\"https://aws.amazon.com/kinesis/data-firehose/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Amazon Kinesis Data Firehose</a> delivery stream. You will incur costs based on the volume of data transferred (approximately $0.03 per GB). For detailed pricing, see the <a href=\"https://aws.amazon.com/kinesis/data-firehose/pricing/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS Kinesis Firehose Pricing</a> page.</p>\n<p>Supported destinations:</p>\n<ul>\n<li><code>http-endpoint</code>: Delivers logs to any HTTP endpoint that complies with <a href=\"https://docs.aws.amazon.com/firehose/latest/dev/httpdeliveryrequestresponse.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Firehose request and response specifications</a>. Many third-party logging services are compatible out-of-the-box.</li>\n<li><code>datadog</code>: Delivers logs to <a href=\"https://www.datadoghq.com/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Datadog</a>.</li>\n<li><code>highlight</code>: Delivers logs to a <a href=\"https://www.highlight.io/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Highlight.io</a> project.</li>\n</ul>\n<p>For more information, refer to the <a href=\"/configuration/log-forwarding/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape documentation on log forwarding</a>.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>If logs fail to be delivered after multiple retries, they are stored in a backup S3 bucket named <code>{stackName}-{resourceName}-logs-{generatedHash}</code>. The retry duration can be configured.</p>\n</div>\n</div>"}}},"additionalProperties":false},"RedisAccessibility":{"type":"object","properties":{"accessibilityMode":{"description":"#### The accessibility mode for this cluster.\n\n---\n\nThe following modes are supported:\n\n- **`vpc`**: The cluster can only be accessed from resources within your VPC. This includes any [function](https://docs.stacktape.com/compute-resources/lambda-functions) (with `joinDefaultVpc: true`), [batch job](https://docs.stacktape.com/compute-resources/batch-jobs), or [container workload](https://docs.stacktape.com/compute-resources/multi-container-workloads) in your stack.\n\n- **`scoping-workloads-in-vpc`**: Similar to `vpc` mode, but more restrictive. In addition to being in the same VPC, resources must have the necessary security group permissions to access the cluster. For functions, batch jobs, and container services, these permissions can be granted using the `connectTo` property in their respective configurations.\n\nRedis clusters do not support public IP addresses, so you cannot connect to them directly from your local machine.\nYou can use a bastion host to access the cluster, and native support for bastion hosts will be available in Stacktape soon.\n\nTo learn more about VPCs, see the [VPC documentation](https://docs.stacktape.com/user-guides/vpcs/).","default":"vpc","enum":["scoping-workloads-in-vpc","vpc"],"type":"string","_MdxDesc":{"sd":"<p> The accessibility mode for this cluster.</p>\n","ld":"<p>The following modes are supported:</p>\n<ul>\n<li><p><strong><code>vpc</code></strong>: The cluster can only be accessed from resources within your VPC. This includes any <a href=\"/compute-resources/lambda-functions/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">function</a> (with <code>joinDefaultVpc: true</code>), <a href=\"/compute-resources/batch-jobs/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">batch job</a>, or <a href=\"/compute-resources/multi-container-workloads/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">container workload</a> in your stack.</p>\n</li>\n<li><p><strong><code>scoping-workloads-in-vpc</code></strong>: Similar to <code>vpc</code> mode, but more restrictive. In addition to being in the same VPC, resources must have the necessary security group permissions to access the cluster. For functions, batch jobs, and container services, these permissions can be granted using the <code>connectTo</code> property in their respective configurations.</p>\n</li>\n</ul>\n<p>Redis clusters do not support public IP addresses, so you cannot connect to them directly from your local machine.\nYou can use a bastion host to access the cluster, and native support for bastion hosts will be available in Stacktape soon.</p>\n<p>To learn more about VPCs, see the <a href=\"/user-guides/vpcs/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">VPC documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["accessibilityMode"]},"CustomResourceInstance":{"description":"#### Custom resource instance\n\n---\n\nCreates an instance of a `custom-resource-definition`.\nThis is useful for creating resources that are not natively supported by AWS CloudFormation or for provisioning services from other providers.","type":"object","properties":{"type":{"type":"string","const":"custom-resource-instance"},"properties":{"$ref":"#/definitions/CustomResourceInstanceProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Custom resource instance</p>\n","ld":"<p>Creates an instance of a <code>custom-resource-definition</code>.\nThis is useful for creating resources that are not natively supported by AWS CloudFormation or for provisioning services from other providers.</p>\n"}},"CustomResourceInstanceProps":{"type":"object","properties":{"definitionName":{"description":"#### The name of the `custom-resource-definition` to use.","type":"string","_MdxDesc":{"sd":"<p> The name of the <code>custom-resource-definition</code> to use.</p>\n"}},"resourceProperties":{"description":"#### Properties passed to the custom resource instance.\n\n---\n\nThese properties will be accessible to the custom resource Lambda function during execution.","type":"object","additionalProperties":{},"_MdxDesc":{"sd":"<p> Properties passed to the custom resource instance.</p>\n","ld":"<p>These properties will be accessible to the custom resource Lambda function during execution.</p>\n"}}},"additionalProperties":false,"required":["definitionName","resourceProperties"]},"CustomResourceDefinition":{"description":"#### Custom resource definition\n\n---\n\nDefines the provisioning logic for a custom resource.\nThis allows you to create resources that are not natively supported by AWS CloudFormation or to provision services from other cloud providers.\nThe logic is implemented in an AWS Lambda function that is executed during `create`, `update`, and `delete` events.","type":"object","properties":{"type":{"type":"string","const":"custom-resource-definition"},"properties":{"$ref":"#/definitions/CustomResourceDefinitionProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Custom resource definition</p>\n","ld":"<p>Defines the provisioning logic for a custom resource.\nThis allows you to create resources that are not natively supported by AWS CloudFormation or to provision services from other cloud providers.\nThe logic is implemented in an AWS Lambda function that is executed during <code>create</code>, <code>update</code>, and <code>delete</code> events.</p>\n"}},"CustomResourceDefinitionProps":{"type":"object","properties":{"packaging":{"$ref":"#/definitions/LambdaPackaging","description":"#### The deployment package for the custom resource's Lambda function.\n\n---\n\nCustom resources are managed by a Lambda function that is executed during `create`, `update`, and `delete` events.\nThis property configures the code and dependencies for that function.","_MdxDesc":{"sd":"<p> The deployment package for the custom resource&#39;s Lambda function.</p>\n","ld":"<p>Custom resources are managed by a Lambda function that is executed during <code>create</code>, <code>update</code>, and <code>delete</code> events.\nThis property configures the code and dependencies for that function.</p>\n"}},"environment":{"description":"#### Environment variables for the custom resource's Lambda function.\n\n---\n\nThese variables are injected into the function's runtime environment.\nThey are often used to provide information about other parts of your infrastructure, such as database connection strings or API keys.","type":"array","items":{"$ref":"#/definitions/EnvironmentVar"},"_MdxDesc":{"sd":"<p> Environment variables for the custom resource&#39;s Lambda function.</p>\n","ld":"<p>These variables are injected into the function&#39;s runtime environment.\nThey are often used to provide information about other parts of your infrastructure, such as database connection strings or API keys.</p>\n"}},"runtime":{"$ref":"#/definitions/LambdaRuntime","description":"#### The runtime environment for the custom resource's Lambda function.\n\n---\n\nStacktape automatically detects the function's language and uses the latest corresponding runtime.\nFor example, it will use `nodejs22.x` for `.js` and `.ts` files.\nFor a list of available runtimes, see the [AWS Lambda runtimes documentation](https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html).","_MdxDesc":{"sd":"<p> The runtime environment for the custom resource&#39;s Lambda function.</p>\n","ld":"<p>Stacktape automatically detects the function&#39;s language and uses the latest corresponding runtime.\nFor example, it will use <code>nodejs22.x</code> for <code>.js</code> and <code>.ts</code> files.\nFor a list of available runtimes, see the <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS Lambda runtimes documentation</a>.</p>\n"}},"timeout":{"description":"#### The maximum execution time for the custom resource's Lambda function, in seconds.\n\n---\n\nThe maximum allowed time is 900 seconds.","default":10,"type":"number","_MdxDesc":{"sd":"<p> The maximum execution time for the custom resource&#39;s Lambda function, in seconds.</p>\n","ld":"<p>The maximum allowed time is 900 seconds.</p>\n"}},"memory":{"description":"#### The amount of memory available to the custom resource's Lambda function, in MB.\n\n---\n\n- Must be between 128 MB and 10,240 MB, in 1-MB increments.\n- The amount of available CPU power is proportional to the memory.\n- A function with 1,797 MB of memory has the equivalent of 1 vCPU.\n- The maximum number of vCPUs is 6 (at 10,240 MB of memory).","type":"number","_MdxDesc":{"sd":"<p> The amount of memory available to the custom resource&#39;s Lambda function, in MB.</p>\n","ld":"<ul>\n<li>Must be between 128 MB and 10,240 MB, in 1-MB increments.</li>\n<li>The amount of available CPU power is proportional to the memory.</li>\n<li>A function with 1,797 MB of memory has the equivalent of 1 vCPU.</li>\n<li>The maximum number of vCPUs is 6 (at 10,240 MB of memory).</li>\n</ul>\n"}},"connectTo":{"description":"#### Connect To\n\n---\n\nConfigures access to other resources in your stack and AWS services. By specifying resources here, Stacktape automatically:\n- Configures IAM role permissions.\n- Sets up security group rules to allow network traffic.\n- Injects environment variables with connection details into the compute resource.\n\nEnvironment variables are named `STP_[RESOURCE_NAME]_[VARIABLE_NAME]` (e.g., `STP_MY_DATABASE_CONNECTION_STRING`).\n\n---\n\n#### Granted Permissions and Injected Variables:\n\n**`Bucket`**\n- **Permissions:** List, create, get, delete, and tag objects.\n- **Variables:** `NAME`, `ARN`\n\n**`DynamoDbTable`**\n- **Permissions:** Get, put, update, delete, scan, and query items; describe table stream.\n- **Variables:** `NAME`, `ARN`, `STREAM_ARN`\n\n**`MongoDbAtlasCluster`**\n- **Permissions:** Allows connection to clusters with `accessibilityMode` set to `scoping-workloads-in-vpc`. Creates a temporary user for secure, credential-less access.\n- **Variables:** `CONNECTION_STRING`\n\n**`RelationalDatabase`**\n- **Permissions:** Allows connection to databases with `accessibilityMode` set to `scoping-workloads-in-vpc`.\n- **Variables:** `CONNECTION_STRING`, `JDBC_CONNECTION_STRING`, `HOST`, `PORT`. For Aurora clusters, `READER_CONNECTION_STRING`, `READER_JDBC_CONNECTION_STRING`, and `READER_HOST` are also included.\n\n**`RedisCluster`**\n- **Permissions:** Allows connection to clusters with `accessibilityMode` set to `scoping-workloads-in-vpc`.\n- **Variables:** `HOST`, `READER_HOST`, `PORT`\n\n**`EventBus`**\n- **Permissions:** Publish events.\n- **Variables:** `ARN`\n\n**`Function`**\n- **Permissions:** Invoke the function, including via its URL if enabled.\n- **Variables:** `ARN`\n\n**`BatchJob`**\n- **Permissions:** Submit, list, describe, and terminate jobs; manage state machine executions.\n- **Variables:** `JOB_DEFINITION_ARN`, `STATE_MACHINE_ARN`\n\n**`UserAuthPool`**\n- **Permissions:** Full control over the user pool (`cognito-idp:*`).\n- **Variables:** `ID`, `CLIENT_ID`, `ARN`\n\n**`SnsTopic`**\n- **Permissions:** Confirm, list, publish, and manage subscriptions.\n- **Variables:** `ARN`, `NAME`\n\n**`SqsQueue`**\n- **Permissions:** Send, receive, delete, and purge messages.\n- **Variables:** `ARN`, `NAME`, `URL`\n\n**`UpstashKafkaTopic`**\n- **Variables:** `TOPIC_NAME`, `TOPIC_ID`, `USERNAME`, `PASSWORD`, `TCP_ENDPOINT`, `REST_URL`\n\n**`UpstashRedis`**\n- **Variables:** `HOST`, `PORT`, `PASSWORD`, `REST_TOKEN`, `REST_URL`, `REDIS_URL`\n\n**`PrivateService`**\n- **Variables:** `ADDRESS`\n\n**`aws:ses` (Macro)**\n- **Permissions:** Full permissions for AWS SES (`ses:*`).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Connect To</p>\n","ld":"<p>Configures access to other resources in your stack and AWS services. By specifying resources here, Stacktape automatically:</p>\n<ul>\n<li>Configures IAM role permissions.</li>\n<li>Sets up security group rules to allow network traffic.</li>\n<li>Injects environment variables with connection details into the compute resource.</li>\n</ul>\n<p>Environment variables are named <code>STP_[RESOURCE_NAME]_[VARIABLE_NAME]</code> (e.g., <code>STP_MY_DATABASE_CONNECTION_STRING</code>).</p>\n"}},"iamRoleStatements":{"description":"#### Custom IAM Role Statements\n\n---\n\nA list of raw AWS IAM role statements to append to the resource's role, allowing for fine-grained permission control.","type":"array","items":{"$ref":"#/definitions/StpIamRoleStatement"},"_MdxDesc":{"sd":"<p> Custom IAM Role Statements</p>\n","ld":"<p>A list of raw AWS IAM role statements to append to the resource&#39;s role, allowing for fine-grained permission control.</p>\n"}}},"additionalProperties":false,"required":["packaging"]},"LambdaPackaging":{"anyOf":[{"$ref":"#/definitions/StpBuildpackLambdaPackaging"},{"$ref":"#/definitions/CustomArtifactLambdaPackaging"}]},"StpBuildpackLambdaPackaging":{"description":"#### A zero-config buildpack that packages your code for AWS Lambda.\n\n---\n\nThe `stacktape-lambda-buildpack` automatically bundles your code and dependencies into an optimized Lambda deployment package.\n\n**Supported languages:** JavaScript, TypeScript, Python, Java, and Go.\n\nFor JS/TS, your code is bundled into a single file using esbuild. Source maps are automatically generated.\nPackages are cached based on a checksum, so unchanged code is not re-packaged.","type":"object","properties":{"type":{"type":"string","const":"stacktape-lambda-buildpack"},"properties":{"$ref":"#/definitions/StpBuildpackLambdaPackagingProps"}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> A zero-config buildpack that packages your code for AWS Lambda.</p>\n","ld":"<p>The <code>stacktape-lambda-buildpack</code> automatically bundles your code and dependencies into an optimized Lambda deployment package.</p>\n<p><strong>Supported languages:</strong> JavaScript, TypeScript, Python, Java, and Go.</p>\n<p>For JS/TS, your code is bundled into a single file using esbuild. Source maps are automatically generated.\nPackages are cached based on a checksum, so unchanged code is not re-packaged.</p>\n"}},"StpBuildpackLambdaPackagingProps":{"type":"object","properties":{"handlerFunction":{"description":"#### The name of the handler function to be executed when the Lambda is invoked.","type":"string","_MdxDesc":{"sd":"<p> The name of the handler function to be executed when the Lambda is invoked.</p>\n"}},"entryfilePath":{"description":"#### The path to the entry point of your application, relative to your Stacktape configuration file.\n\n---\n\nStacktape will attempt to bundle your code and its dependencies into a single file.\nIf a dependency cannot be bundled (e.g., it relies on binary executables), it will be installed and included in the deployment package separately.","type":"string","_MdxDesc":{"sd":"<p> The path to the entry point of your application, relative to your Stacktape configuration file.</p>\n","ld":"<p>Stacktape will attempt to bundle your code and its dependencies into a single file.\nIf a dependency cannot be bundled (e.g., it relies on binary executables), it will be installed and included in the deployment package separately.</p>\n"}},"includeFiles":{"description":"#### A glob pattern of files to explicitly include in the deployment package.\n\n---\n\nThe path is relative to your Stacktape configuration file.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A glob pattern of files to explicitly include in the deployment package.</p>\n","ld":"<p>The path is relative to your Stacktape configuration file.</p>\n"}},"excludeFiles":{"description":"#### A glob pattern of files to explicitly exclude from the deployment package.\n\n---","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A glob pattern of files to explicitly exclude from the deployment package.</p>\n"}},"excludeDependencies":{"description":"#### A list of dependencies to exclude from the deployment package.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of dependencies to exclude from the deployment package.</p>\n"}},"languageSpecificConfig":{"description":"#### Language-specific packaging configuration.","anyOf":[{"$ref":"#/definitions/EsLanguageSpecificConfig"},{"$ref":"#/definitions/PyLanguageSpecificConfig"},{"$ref":"#/definitions/JavaLanguageSpecificConfig"},{"$ref":"#/definitions/GoLanguageSpecificConfig"}],"_MdxDesc":{"sd":"<p> Language-specific packaging configuration.</p>\n"}}},"additionalProperties":false,"required":["entryfilePath"]},"CustomArtifactLambdaPackaging":{"description":"#### Uses a pre-built artifact for Lambda deployment.\n\n---\n\nWith `custom-artifact`, you provide a path to your own pre-built deployment package.\nIf the specified path is a directory or an unzipped file, Stacktape will automatically zip it.\n\nThis is useful when you have custom build processes or need full control over the packaging.","type":"object","properties":{"type":{"type":"string","const":"custom-artifact"},"properties":{"$ref":"#/definitions/CustomArtifactLambdaPackagingProps"}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Uses a pre-built artifact for Lambda deployment.</p>\n","ld":"<p>With <code>custom-artifact</code>, you provide a path to your own pre-built deployment package.\nIf the specified path is a directory or an unzipped file, Stacktape will automatically zip it.</p>\n<p>This is useful when you have custom build processes or need full control over the packaging.</p>\n"}},"CustomArtifactLambdaPackagingProps":{"type":"object","properties":{"packagePath":{"description":"#### The path to a pre-built deployment package.\n\n---\n\nIf the path points to a directory or a non-zip file, Stacktape will automatically zip it for you.","type":"string","_MdxDesc":{"sd":"<p> The path to a pre-built deployment package.</p>\n","ld":"<p>If the path points to a directory or a non-zip file, Stacktape will automatically zip it for you.</p>\n"}},"handler":{"description":"#### The handler function to be executed when the Lambda is invoked.\n\n---\n\nThe syntax is `{{filepath}}:{{functionName}}`.\n\nExample: `my-lambda/index.js:default`","type":"string","_MdxDesc":{"sd":"<p> The handler function to be executed when the Lambda is invoked.</p>\n","ld":"<p>The syntax is <code>{{filepath}}:{{functionName}}</code>.</p>\n<p>Example: <code>my-lambda/index.js:default</code></p>\n"}}},"additionalProperties":false,"required":["packagePath"]},"LambdaRuntime":{"enum":["dotnet6","dotnet7","java11","java17","java8","java8.al2","nodejs18.x","nodejs20.x","nodejs22.x","nodejs24.x","provided.al2","provided.al2023","python3.10","python3.11","python3.12","python3.13","python3.8","python3.9","ruby3.2"],"type":"string"},"UpstashRedis":{"description":"#### A serverless Redis database from Upstash.\n\n---\n\nUpstash Redis is designed for low-latency data storage and caching at the edge, making it ideal for serverless and globally distributed applications.","type":"object","properties":{"type":{"type":"string","const":"upstash-redis"},"properties":{"$ref":"#/definitions/UpstashRedisProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["type"],"_MdxDesc":{"sd":"<p> A serverless Redis database from Upstash.</p>\n","ld":"<p>Upstash Redis is designed for low-latency data storage and caching at the edge, making it ideal for serverless and globally distributed applications.</p>\n"}},"UpstashRedisProps":{"type":"object","properties":{"enableEviction":{"description":"#### Enables automatic eviction of keys when the memory limit is reached.\n\n---\n\nWhen enabled, Redis will remove keys to free up memory for new data.\nIt uses an eviction policy that prioritizes removing keys with an expiration set.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enables automatic eviction of keys when the memory limit is reached.</p>\n","ld":"<p>When enabled, Redis will remove keys to free up memory for new data.\nIt uses an eviction policy that prioritizes removing keys with an expiration set.</p>\n"}}},"additionalProperties":false},"DeploymentScript":{"description":"#### A resource that executes a script as part of your deployment process.\n\n---\n\nThe script is executed in a Lambda function during a `deploy` or `delete` operation.\nThis is useful for tasks like database migrations, seeding data, or other setup or teardown operations.","type":"object","properties":{"type":{"type":"string","const":"deployment-script"},"properties":{"$ref":"#/definitions/DeploymentScriptProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> A resource that executes a script as part of your deployment process.</p>\n","ld":"<p>The script is executed in a Lambda function during a <code>deploy</code> or <code>delete</code> operation.\nThis is useful for tasks like database migrations, seeding data, or other setup or teardown operations.</p>\n"}},"DeploymentScriptProps":{"type":"object","properties":{"trigger":{"description":"#### Configures when the script is triggered.\n\n---\n\n- `after:deploy`: Executes after all resources in the stack have been successfully deployed. If the script fails, the entire deployment will be rolled back.\n- `before:delete`: Executes before the stack's resources begin to be deleted. If the script fails, the deletion process will still proceed.\n\nYou can also trigger the script manually using the `stacktape deployment-script:run` command.","enum":["after:deploy","before:delete"],"type":"string","_MdxDesc":{"sd":"<p> Configures when the script is triggered.</p>\n","ld":"<ul>\n<li><code>after:deploy</code>: Executes after all resources in the stack have been successfully deployed. If the script fails, the entire deployment will be rolled back.</li>\n<li><code>before:delete</code>: Executes before the stack&#39;s resources begin to be deleted. If the script fails, the deletion process will still proceed.</li>\n</ul>\n<p>You can also trigger the script manually using the <code>stacktape deployment-script:run</code> command.</p>\n"}},"packaging":{"$ref":"#/definitions/LambdaPackaging","description":"#### Configures how your script is packaged and deployed.\n\n---\n\nStacktape supports two packaging methods:\n- `stacktape-lambda-buildpack`: Stacktape automatically builds and packages your code from a specified source file. This is the recommended and simplest approach.\n- `custom-artifact`: You provide a path to a pre-built deployment package (e.g., a zip file). Stacktape will handle the upload.\n\nYour deployment packages are stored in an S3 bucket managed by Stacktape.","_MdxDesc":{"sd":"<p> Configures how your script is packaged and deployed.</p>\n","ld":"<p>Stacktape supports two packaging methods:</p>\n<ul>\n<li><code>stacktape-lambda-buildpack</code>: Stacktape automatically builds and packages your code from a specified source file. This is the recommended and simplest approach.</li>\n<li><code>custom-artifact</code>: You provide a path to a pre-built deployment package (e.g., a zip file). Stacktape will handle the upload.</li>\n</ul>\n<p>Your deployment packages are stored in an S3 bucket managed by Stacktape.</p>\n"}},"runtime":{"$ref":"#/definitions/LambdaRuntime","description":"#### The runtime environment for the script's Lambda function.\n\n---\n\nStacktape automatically detects the programming language and selects the latest appropriate runtime. For example, `.ts` and `.js` files will use a recent Node.js runtime.\nFor a full list of available runtimes, see the [AWS Lambda runtimes documentation](https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html).","_MdxDesc":{"sd":"<p> The runtime environment for the script&#39;s Lambda function.</p>\n","ld":"<p>Stacktape automatically detects the programming language and selects the latest appropriate runtime. For example, <code>.ts</code> and <code>.js</code> files will use a recent Node.js runtime.\nFor a full list of available runtimes, see the <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS Lambda runtimes documentation</a>.</p>\n"}},"environment":{"description":"#### A list of environment variables to inject into the script's execution environment.\n\n---\n\nThis is useful for providing configuration details, such as database connection strings or secrets.","type":"array","items":{"$ref":"#/definitions/EnvironmentVar"},"_MdxDesc":{"sd":"<p> A list of environment variables to inject into the script&#39;s execution environment.</p>\n","ld":"<p>This is useful for providing configuration details, such as database connection strings or secrets.</p>\n"}},"parameters":{"description":"#### A map of parameters to pass to the script's handler function.\n\n---\n\nThis allows you to pass structured data to your script.\n\n> **Note:** You cannot pass secrets using this property. Use `environment` variables for secrets.","type":"object","additionalProperties":{},"_MdxDesc":{"sd":"<p> A map of parameters to pass to the script&#39;s handler function.</p>\n","ld":"<p>This allows you to pass structured data to your script.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> You cannot pass secrets using this property. Use <code>environment</code> variables for secrets.</p>\n</div>\n</div>"}},"memory":{"description":"#### The amount of memory (in MB) to allocate to the script's Lambda function.\n\n---\n\nThis setting also influences the amount of CPU power the function receives.\nThe value must be between 128 MB and 10,240 MB.","type":"number","_MdxDesc":{"sd":"<p> The amount of memory (in MB) to allocate to the script&#39;s Lambda function.</p>\n","ld":"<p>This setting also influences the amount of CPU power the function receives.\nThe value must be between 128 MB and 10,240 MB.</p>\n"}},"timeout":{"description":"#### The maximum execution time for the script, in seconds.\n\n---\n\nIf the script runs longer than this, it will be terminated. The maximum allowed timeout is 900 seconds (15 minutes).","default":10,"type":"number","_MdxDesc":{"sd":"<p> The maximum execution time for the script, in seconds.</p>\n","ld":"<p>If the script runs longer than this, it will be terminated. The maximum allowed timeout is 900 seconds (15 minutes).</p>\n"}},"joinDefaultVpc":{"description":"#### Connects the script's Lambda function to your stack's default Virtual Private Cloud (VPC).\n\n---\n\nThis is necessary to access resources within the VPC, such as relational databases.\n\n> **Important:** When a function joins a VPC, it loses direct internet access.\n\nFor more details, see the [Stacktape VPCs documentation](https://docs.stacktape.com/user-guides/vpcs/).","type":"boolean","_MdxDesc":{"sd":"<p> Connects the script&#39;s Lambda function to your stack&#39;s default Virtual Private Cloud (VPC).</p>\n","ld":"<p>This is necessary to access resources within the VPC, such as relational databases.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Important:</strong> When a function joins a VPC, it loses direct internet access.</p>\n</div>\n</div><p>For more details, see the <a href=\"/user-guides/vpcs/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape VPCs documentation</a>.</p>\n"}},"storage":{"description":"#### The size (in MB) of the function's `/tmp` directory.\n\n---\n\nThis provides ephemeral storage for your function. The size can be between 512 MB and 10,240 MB.","default":512,"type":"number","_MdxDesc":{"sd":"<p> The size (in MB) of the function&#39;s <code>/tmp</code> directory.</p>\n","ld":"<p>This provides ephemeral storage for your function. The size can be between 512 MB and 10,240 MB.</p>\n"}},"connectTo":{"description":"#### Connect To\n\n---\n\nConfigures access to other resources in your stack and AWS services. By specifying resources here, Stacktape automatically:\n- Configures IAM role permissions.\n- Sets up security group rules to allow network traffic.\n- Injects environment variables with connection details into the compute resource.\n\nEnvironment variables are named `STP_[RESOURCE_NAME]_[VARIABLE_NAME]` (e.g., `STP_MY_DATABASE_CONNECTION_STRING`).\n\n---\n\n#### Granted Permissions and Injected Variables:\n\n**`Bucket`**\n- **Permissions:** List, create, get, delete, and tag objects.\n- **Variables:** `NAME`, `ARN`\n\n**`DynamoDbTable`**\n- **Permissions:** Get, put, update, delete, scan, and query items; describe table stream.\n- **Variables:** `NAME`, `ARN`, `STREAM_ARN`\n\n**`MongoDbAtlasCluster`**\n- **Permissions:** Allows connection to clusters with `accessibilityMode` set to `scoping-workloads-in-vpc`. Creates a temporary user for secure, credential-less access.\n- **Variables:** `CONNECTION_STRING`\n\n**`RelationalDatabase`**\n- **Permissions:** Allows connection to databases with `accessibilityMode` set to `scoping-workloads-in-vpc`.\n- **Variables:** `CONNECTION_STRING`, `JDBC_CONNECTION_STRING`, `HOST`, `PORT`. For Aurora clusters, `READER_CONNECTION_STRING`, `READER_JDBC_CONNECTION_STRING`, and `READER_HOST` are also included.\n\n**`RedisCluster`**\n- **Permissions:** Allows connection to clusters with `accessibilityMode` set to `scoping-workloads-in-vpc`.\n- **Variables:** `HOST`, `READER_HOST`, `PORT`\n\n**`EventBus`**\n- **Permissions:** Publish events.\n- **Variables:** `ARN`\n\n**`Function`**\n- **Permissions:** Invoke the function, including via its URL if enabled.\n- **Variables:** `ARN`\n\n**`BatchJob`**\n- **Permissions:** Submit, list, describe, and terminate jobs; manage state machine executions.\n- **Variables:** `JOB_DEFINITION_ARN`, `STATE_MACHINE_ARN`\n\n**`UserAuthPool`**\n- **Permissions:** Full control over the user pool (`cognito-idp:*`).\n- **Variables:** `ID`, `CLIENT_ID`, `ARN`\n\n**`SnsTopic`**\n- **Permissions:** Confirm, list, publish, and manage subscriptions.\n- **Variables:** `ARN`, `NAME`\n\n**`SqsQueue`**\n- **Permissions:** Send, receive, delete, and purge messages.\n- **Variables:** `ARN`, `NAME`, `URL`\n\n**`UpstashKafkaTopic`**\n- **Variables:** `TOPIC_NAME`, `TOPIC_ID`, `USERNAME`, `PASSWORD`, `TCP_ENDPOINT`, `REST_URL`\n\n**`UpstashRedis`**\n- **Variables:** `HOST`, `PORT`, `PASSWORD`, `REST_TOKEN`, `REST_URL`, `REDIS_URL`\n\n**`PrivateService`**\n- **Variables:** `ADDRESS`\n\n**`aws:ses` (Macro)**\n- **Permissions:** Full permissions for AWS SES (`ses:*`).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Connect To</p>\n","ld":"<p>Configures access to other resources in your stack and AWS services. By specifying resources here, Stacktape automatically:</p>\n<ul>\n<li>Configures IAM role permissions.</li>\n<li>Sets up security group rules to allow network traffic.</li>\n<li>Injects environment variables with connection details into the compute resource.</li>\n</ul>\n<p>Environment variables are named <code>STP_[RESOURCE_NAME]_[VARIABLE_NAME]</code> (e.g., <code>STP_MY_DATABASE_CONNECTION_STRING</code>).</p>\n"}},"iamRoleStatements":{"description":"#### Custom IAM Role Statements\n\n---\n\nA list of raw AWS IAM role statements to append to the resource's role, allowing for fine-grained permission control.","type":"array","items":{"$ref":"#/definitions/StpIamRoleStatement"},"_MdxDesc":{"sd":"<p> Custom IAM Role Statements</p>\n","ld":"<p>A list of raw AWS IAM role statements to append to the resource&#39;s role, allowing for fine-grained permission control.</p>\n"}}},"additionalProperties":false,"required":["packaging","trigger"]},"AwsCdkConstruct":{"description":"#### AWS CDK Construct\n\n---\n\nAllows you to deploy a custom AWS CDK construct as part of your Stacktape stack. This is useful for integrating existing CDK code or for resources not yet supported by Stacktape.\n\nFor more information on AWS CDK, refer to the [official AWS CDK documentation](https://docs.aws.amazon.com/cdk/v2/guide/home.html).","type":"object","properties":{"type":{"type":"string","const":"aws-cdk-construct"},"properties":{"$ref":"#/definitions/AwsCdkConstructProps"}},"additionalProperties":false,"required":["type"],"_MdxDesc":{"sd":"<p> AWS CDK Construct</p>\n","ld":"<p>Allows you to deploy a custom AWS CDK construct as part of your Stacktape stack. This is useful for integrating existing CDK code or for resources not yet supported by Stacktape.</p>\n<p>For more information on AWS CDK, refer to the <a href=\"https://docs.aws.amazon.com/cdk/v2/guide/home.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">official AWS CDK documentation</a>.</p>\n"}},"AwsCdkConstructProps":{"type":"object","properties":{"entryfilePath":{"description":"#### Entry File Path\n\n---\n\nThe path to the file containing the CDK construct.\n\nSupported file extensions are `.js` and `.ts`.","type":"string","_MdxDesc":{"sd":"<p> Entry File Path</p>\n","ld":"<p>The path to the file containing the CDK construct.</p>\n<p>Supported file extensions are <code>.js</code> and <code>.ts</code>.</p>\n"}},"exportName":{"description":"#### Export Name\n\n---\n\nThe name of the exported construct class from the `entryfilePath`.\n\nIf not provided, Stacktape will use the `default` export.","default":"default","type":"string","_MdxDesc":{"sd":"<p> Export Name</p>\n","ld":"<p>The name of the exported construct class from the <code>entryfilePath</code>.</p>\n<p>If not provided, Stacktape will use the <code>default</code> export.</p>\n"}},"constructProperties":{"description":"#### Construct Properties\n\n---\n\nAn object passed as props to the construct's constructor. This allows you to configure the construct with custom values."}},"additionalProperties":false,"required":["entryfilePath"]},"SqsQueue":{"description":"#### SQS Queue\n\n---\n\nA fully managed message queuing service that enables you to decouple and scale microservices, distributed systems, and serverless applications.","type":"object","properties":{"type":{"type":"string","const":"sqs-queue"},"properties":{"$ref":"#/definitions/SqsQueueProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["type"],"_MdxDesc":{"sd":"<p> SQS Queue</p>\n","ld":"<p>A fully managed message queuing service that enables you to decouple and scale microservices, distributed systems, and serverless applications.</p>\n"}},"SqsQueueProps":{"type":"object","properties":{"delayMessagesSecond":{"description":"#### The amount of time that each message delivery is delayed.\n\n---\n\nSpecifies the time in seconds (0-900) for which the delivery of all messages in the queue is delayed.","default":0,"type":"number","_MdxDesc":{"sd":"<p> The amount of time that each message delivery is delayed.</p>\n","ld":"<p>Specifies the time in seconds (0-900) for which the delivery of all messages in the queue is delayed.</p>\n"}},"maxMessageSizeBytes":{"description":"#### The maximum size of a message, in bytes.\n\n---\n\nYou can specify an integer value from 1,024 bytes (1 KiB) to 262,144 bytes (256 KiB).","default":262144,"type":"number","_MdxDesc":{"sd":"<p> The maximum size of a message, in bytes.</p>\n","ld":"<p>You can specify an integer value from 1,024 bytes (1 KiB) to 262,144 bytes (256 KiB).</p>\n"}},"messageRetentionPeriodSeconds":{"description":"#### The number of seconds that the queue retains a message.\n\n---\n\nYou can specify an integer value from 60 seconds (1 minute) to 1,209,600 seconds (14 days).","default":345600,"type":"number","_MdxDesc":{"sd":"<p> The number of seconds that the queue retains a message.</p>\n","ld":"<p>You can specify an integer value from 60 seconds (1 minute) to 1,209,600 seconds (14 days).</p>\n"}},"longPollingSeconds":{"description":"#### Enables long polling for receiving messages from the queue.\n\n---\n\nLong polling reduces the number of empty responses by allowing Amazon SQS to wait until a message is available in the queue before sending a response.\nThis can help reduce the cost of using SQS by minimizing the number of `ReceiveMessage` API calls.\n\nThis value specifies the duration (in seconds) that the `ReceiveMessage` call waits for a message to arrive.\nIf set to `0` (the default), short polling is used.\n\nFor more details on the differences between short and long polling, see the [AWS documentation](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-short-and-long-polling.html#sqs-short-long-polling-differences).","default":0,"type":"number","_MdxDesc":{"sd":"<p> Enables long polling for receiving messages from the queue.</p>\n","ld":"<p>Long polling reduces the number of empty responses by allowing Amazon SQS to wait until a message is available in the queue before sending a response.\nThis can help reduce the cost of using SQS by minimizing the number of <code>ReceiveMessage</code> API calls.</p>\n<p>This value specifies the duration (in seconds) that the <code>ReceiveMessage</code> call waits for a message to arrive.\nIf set to <code>0</code> (the default), short polling is used.</p>\n<p>For more details on the differences between short and long polling, see the <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-short-and-long-polling.html#sqs-short-long-polling-differences\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"visibilityTimeoutSeconds":{"description":"#### The length of time that a message will be unavailable after it is delivered from the queue.\n\n---\n\nWhen a consumer receives a message, it remains in the queue but is made invisible to other consumers for the duration of the visibility timeout.\nThis prevents the message from being processed multiple times. The consumer is responsible for deleting the message from the queue after it has been successfully processed.\n\nThe visibility timeout can be set from 0 to 43,200 seconds (12 hours).\n\nFor more information, see the [AWS documentation on visibility timeout](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-visibility-timeout.html).","default":30,"type":"number","_MdxDesc":{"sd":"<p> The length of time that a message will be unavailable after it is delivered from the queue.</p>\n","ld":"<p>When a consumer receives a message, it remains in the queue but is made invisible to other consumers for the duration of the visibility timeout.\nThis prevents the message from being processed multiple times. The consumer is responsible for deleting the message from the queue after it has been successfully processed.</p>\n<p>The visibility timeout can be set from 0 to 43,200 seconds (12 hours).</p>\n<p>For more information, see the <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-visibility-timeout.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on visibility timeout</a>.</p>\n"}},"fifoEnabled":{"description":"#### If `true`, creates a FIFO (First-In-First-Out) queue.\n\n---\n\nFIFO queues are designed for applications where the order of operations and events is critical and duplicates cannot be tolerated.\n\nWhen using a FIFO queue, each message must have a `MessageDeduplicationId`, or `contentBasedDeduplication` must be enabled.\n\nFor more information, see the [AWS documentation on FIFO queues](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/FIFO-queues.html).","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> If <code>true</code>, creates a FIFO (First-In-First-Out) queue.</p>\n","ld":"<p>FIFO queues are designed for applications where the order of operations and events is critical and duplicates cannot be tolerated.</p>\n<p>When using a FIFO queue, each message must have a <code>MessageDeduplicationId</code>, or <code>contentBasedDeduplication</code> must be enabled.</p>\n<p>For more information, see the <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/FIFO-queues.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on FIFO queues</a>.</p>\n"}},"fifoHighThroughput":{"description":"#### If `true`, enables high-throughput mode for the FIFO queue.\n\n---\n\nHigh throughput is achieved by partitioning messages based on their `MessageGroupId`.\nMessages with the same `MessageGroupId` are always processed in order.\n\n`fifoEnabled` must be `true` to use this feature.\n\nFor more information, see the [AWS documentation on high-throughput FIFO queues](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/high-throughput-fifo.html).","type":"boolean","_MdxDesc":{"sd":"<p> If <code>true</code>, enables high-throughput mode for the FIFO queue.</p>\n","ld":"<p>High throughput is achieved by partitioning messages based on their <code>MessageGroupId</code>.\nMessages with the same <code>MessageGroupId</code> are always processed in order.</p>\n<p><code>fifoEnabled</code> must be <code>true</code> to use this feature.</p>\n<p>For more information, see the <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/high-throughput-fifo.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on high-throughput FIFO queues</a>.</p>\n"}},"contentBasedDeduplication":{"description":"#### If `true`, enables content-based deduplication for the FIFO queue.\n\n---\n\nDuring the deduplication interval, the queue treats messages with the same content as duplicates and delivers only one copy.\nDeduplication is based on the `MessageDeduplicationId`. If you do not provide one, Amazon SQS will generate a SHA-256 hash of the message body to use as the `MessageDeduplicationId`.\n\n`fifoEnabled` must be `true` to use this feature.","type":"boolean","_MdxDesc":{"sd":"<p> If <code>true</code>, enables content-based deduplication for the FIFO queue.</p>\n","ld":"<p>During the deduplication interval, the queue treats messages with the same content as duplicates and delivers only one copy.\nDeduplication is based on the <code>MessageDeduplicationId</code>. If you do not provide one, Amazon SQS will generate a SHA-256 hash of the message body to use as the <code>MessageDeduplicationId</code>.</p>\n<p><code>fifoEnabled</code> must be <code>true</code> to use this feature.</p>\n"}},"redrivePolicy":{"$ref":"#/definitions/SqsQueueRedrivePolicy","description":"#### Configures a redrive policy for automatically moving messages that fail processing to a dead-letter queue.\n\n---\n\nMessages are sent to the dead-letter queue after they have been retried `maxReceiveCount` times.","_MdxDesc":{"sd":"<p> Configures a redrive policy for automatically moving messages that fail processing to a dead-letter queue.</p>\n","ld":"<p>Messages are sent to the dead-letter queue after they have been retried <code>maxReceiveCount</code> times.</p>\n"}},"alarms":{"description":"#### Additional alarms associated with this resource.\n\n---\n\nThese alarms will be merged with any alarms configured globally in the [console](https://console.stacktape.com/alarms).","type":"array","items":{"$ref":"#/definitions/SqsQueueAlarm"},"_MdxDesc":{"sd":"<p> Additional alarms associated with this resource.</p>\n","ld":"<p>These alarms will be merged with any alarms configured globally in the <a href=\"https://console.stacktape.com/alarms\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">console</a>.</p>\n"}},"disabledGlobalAlarms":{"description":"#### Disables globally configured alarms for this resource.\n\n---\n\nProvide a list of alarm names as configured in the [console](https://console.stacktape.com/alarms).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Disables globally configured alarms for this resource.</p>\n","ld":"<p>Provide a list of alarm names as configured in the <a href=\"https://console.stacktape.com/alarms\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">console</a>.</p>\n"}},"policyStatements":{"description":"#### Adds policy statements to the SQS queue policy.\n\n---\n\nThese statements are added on top of the policy statements automatically inferred by Stacktape.","type":"array","items":{"$ref":"#/definitions/SqsQueuePolicyStatement"},"_MdxDesc":{"sd":"<p> Adds policy statements to the SQS queue policy.</p>\n","ld":"<p>These statements are added on top of the policy statements automatically inferred by Stacktape.</p>\n"}},"events":{"description":"#### A list of event sources that trigger message delivery to this queue.\n\n---\n\nCurrently supports EventBridge event bus integration for delivering events directly to the queue.","type":"array","items":{"$ref":"#/definitions/SqsQueueEventBusIntegration"},"_MdxDesc":{"sd":"<p> A list of event sources that trigger message delivery to this queue.</p>\n","ld":"<p>Currently supports EventBridge event bus integration for delivering events directly to the queue.</p>\n"}}},"additionalProperties":false},"SqsQueueRedrivePolicy":{"type":"object","properties":{"targetSqsQueueName":{"description":"#### The name of the SQS queue in your Stacktape configuration where failed messages will be sent.","type":"string","_MdxDesc":{"sd":"<p> The name of the SQS queue in your Stacktape configuration where failed messages will be sent.</p>\n"}},"targetSqsQueueArn":{"description":"#### The ARN of the SQS queue where failed messages will be sent.","type":"string","_MdxDesc":{"sd":"<p> The ARN of the SQS queue where failed messages will be sent.</p>\n"}},"maxReceiveCount":{"description":"#### The number of times a message is delivered to the source queue before being moved to the dead-letter queue.\n\n---\n\nWhen the `ReceiveCount` for a message exceeds this value, Amazon SQS moves the message to the target queue.","type":"number","_MdxDesc":{"sd":"<p> The number of times a message is delivered to the source queue before being moved to the dead-letter queue.</p>\n","ld":"<p>When the <code>ReceiveCount</code> for a message exceeds this value, Amazon SQS moves the message to the target queue.</p>\n"}}},"additionalProperties":false,"required":["maxReceiveCount"]},"SqsQueueAlarm":{"type":"object","properties":{"trigger":{"$ref":"#/definitions/SqsQueueAlarmTrigger"},"evaluation":{"$ref":"#/definitions/AlarmEvaluation","description":"#### Specifies the time window for evaluating the metric to determine if the alarm should be triggered.\n\n---\n\nDefines the duration and frequency of metric evaluation.","_MdxDesc":{"sd":"<p> Specifies the time window for evaluating the metric to determine if the alarm should be triggered.</p>\n","ld":"<p>Defines the duration and frequency of metric evaluation.</p>\n"}},"notificationTargets":{"description":"#### Defines where to send notifications when the alarm is triggered.\n\n---\n\nYou can specify a list of integrations, such as Slack, MS Teams, or email.","type":"array","items":{"$ref":"#/definitions/AlarmUserIntegration"},"_MdxDesc":{"sd":"<p> Defines where to send notifications when the alarm is triggered.</p>\n","ld":"<p>You can specify a list of integrations, such as Slack, MS Teams, or email.</p>\n"}},"description":{"description":"#### Custom description for the alarm\n---\n- If custom description is specified, it is used in the alarm notification message\n- Custom description is also used in the alarm description in the AWS console (If not provided, Stacktape generates default description.)","type":"string","_MdxDesc":{"sd":"<p> Custom description for the alarm</p>\n","ld":"<ul>\n<li>If custom description is specified, it is used in the alarm notification message</li>\n<li>Custom description is also used in the alarm description in the AWS console (If not provided, Stacktape generates default description.)</li>\n</ul>\n"}}},"additionalProperties":false,"required":["trigger"]},"SqsQueueAlarmTrigger":{"anyOf":[{"$ref":"#/definitions/SqsQueueReceivedMessagesCountTrigger"},{"$ref":"#/definitions/SqsQueueNotEmptyTrigger"}]},"SqsQueueReceivedMessagesCountTrigger":{"type":"object","properties":{"type":{"type":"string","const":"sqs-queue-received-messages-count"},"properties":{"$ref":"#/definitions/SqsQueueReceivedMessagesCountTriggerProps"}},"additionalProperties":false,"required":["properties","type"]},"SqsQueueReceivedMessagesCountTriggerProps":{"type":"object","properties":{"thresholdCount":{"description":"#### The threshold for the number of messages received.\n\n---\n\nTriggers an alarm when the number of messages received from an SQS queue crosses the defined threshold.\nBy default, it's triggered if the **average** number of received messages (based on the `NumberOfMessagesReceived` metric) over the evaluation period is **greater than** the `thresholdCount`.\nYou can customize the behavior using the `statistic` and `comparisonOperator` properties.","type":"number","_MdxDesc":{"sd":"<p> The threshold for the number of messages received.</p>\n","ld":"<p>Triggers an alarm when the number of messages received from an SQS queue crosses the defined threshold.\nBy default, it&#39;s triggered if the <strong>average</strong> number of received messages (based on the <code>NumberOfMessagesReceived</code> metric) over the evaluation period is <strong>greater than</strong> the <code>thresholdCount</code>.\nYou can customize the behavior using the <code>statistic</code> and <code>comparisonOperator</code> properties.</p>\n"}},"comparisonOperator":{"$ref":"#/definitions/ComparisonOperator","description":"#### The arithmetic operation to use when comparing the specified statistic and threshold.\n\n---\n\nSupported operators:\n- `GreaterThanThreshold`\n- `GreaterThanOrEqualToThreshold`\n- `LessThanThreshold`\n- `LessThanOrEqualToThreshold`","_MdxDesc":{"sd":"<p> The arithmetic operation to use when comparing the specified statistic and threshold.</p>\n","ld":"<p>Supported operators:</p>\n<ul>\n<li><code>GreaterThanThreshold</code></li>\n<li><code>GreaterThanOrEqualToThreshold</code></li>\n<li><code>LessThanThreshold</code></li>\n<li><code>LessThanOrEqualToThreshold</code></li>\n</ul>\n"}},"statistic":{"$ref":"#/definitions/StatisticFunction","description":"#### The statistic to apply to the metric data points.\n\n---\n\nSupported statistics:\n- **avg**: The average of the metric values.\n- **sum**: The sum of the metric values.\n- **p90**: The 90th percentile. 90% of the data points are lower than this value.\n- **p95**: The 95th percentile. 95% of the data points are lower than this value.\n- **p99**: The 99th percentile. 99% of the data points are lower than this value.\n- **min**: The lowest value from the data points.\n- **max**: The highest value from the data points.","default":"avg","_MdxDesc":{"sd":"<p> The statistic to apply to the metric data points.</p>\n","ld":"<p>Supported statistics:</p>\n<ul>\n<li><strong>avg</strong>: The average of the metric values.</li>\n<li><strong>sum</strong>: The sum of the metric values.</li>\n<li><strong>p90</strong>: The 90th percentile. 90% of the data points are lower than this value.</li>\n<li><strong>p95</strong>: The 95th percentile. 95% of the data points are lower than this value.</li>\n<li><strong>p99</strong>: The 99th percentile. 99% of the data points are lower than this value.</li>\n<li><strong>min</strong>: The lowest value from the data points.</li>\n<li><strong>max</strong>: The highest value from the data points.</li>\n</ul>\n"}}},"additionalProperties":false,"required":["thresholdCount"]},"SqsQueueNotEmptyTrigger":{"type":"object","properties":{"type":{"description":"#### Type of the trigger.\n\n---\n\nTriggers an alarm if the SQS queue is not empty.\nA queue is considered empty if all of the following metrics are 0 for the evaluation period:\n  - `ApproximateNumberOfMessagesVisible`\n  - `ApproximateNumberOfMessagesNotVisible`\n  - `NumberOfMessagesReceived`\n  - `NumberOfMessagesSent`","type":"string","const":"sqs-queue-not-empty","_MdxDesc":{"sd":"<p> Type of the trigger.</p>\n","ld":"<p>Triggers an alarm if the SQS queue is not empty.\nA queue is considered empty if all of the following metrics are 0 for the evaluation period:</p>\n<ul>\n<li><code>ApproximateNumberOfMessagesVisible</code></li>\n<li><code>ApproximateNumberOfMessagesNotVisible</code></li>\n<li><code>NumberOfMessagesReceived</code></li>\n<li><code>NumberOfMessagesSent</code></li>\n</ul>\n"}}},"additionalProperties":false,"required":["type"]},"SqsQueuePolicyStatement":{"type":"object","properties":{"Effect":{"description":"#### The effect of the statement.\n\n---\n\nFor more details, see the [AWS documentation](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-basic-examples-of-sqs-policies.html).","type":"string","_MdxDesc":{"sd":"<p> The effect of the statement.</p>\n","ld":"<p>For more details, see the <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-basic-examples-of-sqs-policies.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"Action":{"description":"#### A list of actions allowed or denied by the statement.\n\n---\n\nActions must start with `sqs:`.\nFor a list of available actions, see the [AWS documentation](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-api-permissions-reference.html).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of actions allowed or denied by the statement.</p>\n","ld":"<p>Actions must start with <code>sqs:</code>.\nFor a list of available actions, see the <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-api-permissions-reference.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"Condition":{"description":"#### The circumstances under which the statement grants permissions.\n\n---\n\nFor more details, see the [AWS documentation](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-basic-examples-of-sqs-policies.html)."},"Principal":{"description":"#### The principal (user, role, or service) to which you are allowing or denying access.\n\n---\n\nFor more details, see the [AWS documentation](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-basic-examples-of-sqs-policies.html)."}},"additionalProperties":false,"required":["Action","Effect","Principal"]},"SqsQueueEventBusIntegration":{"description":"#### Delivers messages to an SQS queue when an event matching a specified pattern is received by an event bus.","type":"object","properties":{"type":{"type":"string","const":"event-bus"},"properties":{"$ref":"#/definitions/SqsQueueEventBusIntegrationProps","description":"#### Properties of the integration","_MdxDesc":{"sd":"<p> Properties of the integration</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Delivers messages to an SQS queue when an event matching a specified pattern is received by an event bus.</p>\n"}},"SqsQueueEventBusIntegrationProps":{"type":"object","properties":{"messageGroupId":{"description":"#### The message group ID to use for FIFO queues.\n\n---\n\nThis parameter is required for FIFO queues and is used to group messages together.\nMessages with the same message group ID are processed in order within that group.\nFor more information, see the [AWS documentation on FIFO queues](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/FIFO-queues.html).","type":"string","_MdxDesc":{"sd":"<p> The message group ID to use for FIFO queues.</p>\n","ld":"<p>This parameter is required for FIFO queues and is used to group messages together.\nMessages with the same message group ID are processed in order within that group.\nFor more information, see the <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/FIFO-queues.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on FIFO queues</a>.</p>\n"}},"eventBusArn":{"description":"#### The ARN of an existing event bus.\n\n---\n\nUse this to subscribe to an event bus that is not managed by your stack.\nYou must specify only one of `eventBusArn`, `eventBusName`, or `useDefaultBus`.","type":"string","_MdxDesc":{"sd":"<p> The ARN of an existing event bus.</p>\n","ld":"<p>Use this to subscribe to an event bus that is not managed by your stack.\nYou must specify only one of <code>eventBusArn</code>, <code>eventBusName</code>, or <code>useDefaultBus</code>.</p>\n"}},"eventBusName":{"description":"#### The name of an event bus defined in your stack's resources.\n\n---\n\nYou must specify only one of `eventBusArn`, `eventBusName`, or `useDefaultBus`.","type":"string","_MdxDesc":{"sd":"<p> The name of an event bus defined in your stack&#39;s resources.</p>\n","ld":"<p>You must specify only one of <code>eventBusArn</code>, <code>eventBusName</code>, or <code>useDefaultBus</code>.</p>\n"}},"useDefaultBus":{"description":"#### Uses the default AWS event bus.\n\n---\n\nYou must specify only one of `eventBusArn`, `eventBusName`, or `useDefaultBus`.","type":"boolean","_MdxDesc":{"sd":"<p> Uses the default AWS event bus.</p>\n","ld":"<p>You must specify only one of <code>eventBusArn</code>, <code>eventBusName</code>, or <code>useDefaultBus</code>.</p>\n"}},"eventPattern":{"$ref":"#/definitions/EventBusIntegrationPattern","description":"#### A pattern to filter events from the event bus.\n\n---\n\nOnly events that match this pattern will trigger the target.\nFor details on the syntax, see the [AWS EventBridge documentation on event patterns](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-patterns.html).","_MdxDesc":{"sd":"<p> A pattern to filter events from the event bus.</p>\n","ld":"<p>Only events that match this pattern will trigger the target.\nFor details on the syntax, see the <a href=\"https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-patterns.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS EventBridge documentation on event patterns</a>.</p>\n"}},"onDeliveryFailure":{"$ref":"#/definitions/EventBusOnDeliveryFailure","description":"#### A destination for events that fail to be delivered to the target.\n\n---\n\nIn rare cases, an event might fail to be delivered. This property specifies an SQS queue where failed events will be sent.","_MdxDesc":{"sd":"<p> A destination for events that fail to be delivered to the target.</p>\n","ld":"<p>In rare cases, an event might fail to be delivered. This property specifies an SQS queue where failed events will be sent.</p>\n"}},"input":{"description":"#### A fixed JSON object to be passed as the event payload.\n\n---\n\nIf you need to customize the payload based on the event, use `inputTransformer` instead.\nYou can only use one of `input`, `inputPath`, or `inputTransformer`.\n\nExample:\n\n```yaml\ninput:\n  source: 'my-custom-event'\n```"},"inputPath":{"description":"#### A JSONPath expression to extract a portion of the event to pass to the target.\n\n---\n\nThis is useful for forwarding only a specific part of the event payload.\nYou can only use one of `input`, `inputPath`, or `inputTransformer`.\n\nExample:\n\n```yaml\ninputPath: '$.detail'\n```","type":"string","_MdxDesc":{"sd":"<p> A JSONPath expression to extract a portion of the event to pass to the target.</p>\n","ld":"<p>This is useful for forwarding only a specific part of the event payload.\nYou can only use one of <code>input</code>, <code>inputPath</code>, or <code>inputTransformer</code>.</p>\n<p>Example:</p>\n<pre><code class=\"language-yaml\">inputPath: &#39;$.detail&#39;\n</code></pre>\n"}},"inputTransformer":{"$ref":"#/definitions/EventInputTransformer","description":"#### Customizes the event payload sent to the target.\n\n---\n\nThis allows you to extract values from the original event and use them to construct a new payload.\nYou can only use one of `input`, `inputPath`, or `inputTransformer`.\n\nExample:\n\n```yaml\ninputTransformer:\n  inputPathsMap:\n    instanceId: '$.detail.instance-id'\n    instanceState: '$.detail.state'\n  inputTemplate:\n    message: 'Instance <instanceId> is now in state <instanceState>.'\n```","_MdxDesc":{"sd":"<p> Customizes the event payload sent to the target.</p>\n","ld":"<p>This allows you to extract values from the original event and use them to construct a new payload.\nYou can only use one of <code>input</code>, <code>inputPath</code>, or <code>inputTransformer</code>.</p>\n<p>Example:</p>\n<pre><code class=\"language-yaml\">inputTransformer:\n  inputPathsMap:\n    instanceId: &#39;$.detail.instance-id&#39;\n    instanceState: &#39;$.detail.state&#39;\n  inputTemplate:\n    message: &#39;Instance &lt;instanceId&gt; is now in state &lt;instanceState&gt;.&#39;\n</code></pre>\n"}}},"additionalProperties":false,"required":["eventPattern"]},"SnsTopic":{"description":"#### Simple Notification Service (SNS) Topic\n\n---\n\nA managed messaging service for application-to-application (A2A) and application-to-person (A2P) communication. It allows you to send messages (notifications) to a large number of subscribers, including other services, applications, and end-users.","type":"object","properties":{"type":{"type":"string","const":"sns-topic"},"properties":{"$ref":"#/definitions/SnsTopicProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["type"],"_MdxDesc":{"sd":"<p> Simple Notification Service (SNS) Topic</p>\n","ld":"<p>A managed messaging service for application-to-application (A2A) and application-to-person (A2P) communication. It allows you to send messages (notifications) to a large number of subscribers, including other services, applications, and end-users.</p>\n"}},"SnsTopicProps":{"type":"object","properties":{"smsDisplayName":{"description":"#### SMS Display Name\n\n---\n\nThe name that appears as the sender when you send SMS messages to subscribers.","type":"string","_MdxDesc":{"sd":"<p> SMS Display Name</p>\n","ld":"<p>The name that appears as the sender when you send SMS messages to subscribers.</p>\n"}},"fifoEnabled":{"description":"#### Enable FIFO (First-In-First-Out)\n\n---\n\nEnables FIFO (First-In-First-Out) for this topic.\n\nFIFO topics ensure that messages are processed in the exact order they are sent and that no duplicate messages are delivered. This is useful for applications where order and uniqueness are critical, such as financial transactions or inventory updates.\n\nWhen `fifoEnabled` is `true`, either `contentBasedDeduplication` must be enabled, or every message must include a unique `MessageDeduplicationId`.\n\nFor more details, refer to the [AWS documentation on FIFO topics](https://docs.aws.amazon.com/sns/latest/dg/sns-fifo-topics.html).","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enable FIFO (First-In-First-Out)</p>\n","ld":"<p>Enables FIFO (First-In-First-Out) for this topic.</p>\n<p>FIFO topics ensure that messages are processed in the exact order they are sent and that no duplicate messages are delivered. This is useful for applications where order and uniqueness are critical, such as financial transactions or inventory updates.</p>\n<p>When <code>fifoEnabled</code> is <code>true</code>, either <code>contentBasedDeduplication</code> must be enabled, or every message must include a unique <code>MessageDeduplicationId</code>.</p>\n<p>For more details, refer to the <a href=\"https://docs.aws.amazon.com/sns/latest/dg/sns-fifo-topics.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on FIFO topics</a>.</p>\n"}},"contentBasedDeduplication":{"description":"#### Enable Content-Based Deduplication\n\n---\n\nEnables content-based deduplication. This helps prevent sending duplicate messages.\n\nSNS will automatically generate a unique ID based on the message content and use it to detect and discard duplicate messages sent within a 5-minute interval.\n\nThis property can only be used when `fifoEnabled` is `true`.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enable Content-Based Deduplication</p>\n","ld":"<p>Enables content-based deduplication. This helps prevent sending duplicate messages.</p>\n<p>SNS will automatically generate a unique ID based on the message content and use it to detect and discard duplicate messages sent within a 5-minute interval.</p>\n<p>This property can only be used when <code>fifoEnabled</code> is <code>true</code>.</p>\n"}}},"additionalProperties":false},"HostingBucket":{"description":"#### Hosting Bucket\n\n---\n\nA resource designed to host your static website or other static content.\nIt combines the power of an S3 Bucket (for storing data) and a CloudFront CDN (for distributing it globally).","type":"object","properties":{"type":{"type":"string","const":"hosting-bucket"},"properties":{"$ref":"#/definitions/HostingBucketProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Hosting Bucket</p>\n","ld":"<p>A resource designed to host your static website or other static content.\nIt combines the power of an S3 Bucket (for storing data) and a CloudFront CDN (for distributing it globally).</p>\n"}},"HostingBucketProps":{"type":"object","properties":{"uploadDirectoryPath":{"description":"#### The path to the directory to upload.\n\n---\n\nThis should be the path to the directory containing the content you want to host, such as the output directory of your website's build process.\n\nThe contents of this folder will be uploaded to the bucket during the `deploy`, `codebuild:deploy`, or `bucket:sync` commands.","type":"string","_MdxDesc":{"sd":"<p> The path to the directory to upload.</p>\n","ld":"<p>This should be the path to the directory containing the content you want to host, such as the output directory of your website&#39;s build process.</p>\n<p>The contents of this folder will be uploaded to the bucket during the <code>deploy</code>, <code>codebuild:deploy</code>, or <code>bucket:sync</code> commands.</p>\n"}},"excludeFilesPatterns":{"description":"#### Glob patterns for files to be excluded from the upload.\n\n---\n\nThese patterns are relative to the `uploadDirectoryPath`.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Glob patterns for files to be excluded from the upload.</p>\n","ld":"<p>These patterns are relative to the <code>uploadDirectoryPath</code>.</p>\n"}},"hostingContentType":{"$ref":"#/definitions/SupportedHeaderPreset","description":"#### Configures HTTP headers of uploaded files and CDN behavior based on the content type.\n\n---\n\nSupported content types:\n\n- **`static-website`**:\n  - Sets the `Cache-Control` header to `public, max-age=0, s-maxage=31536000, must-revalidate` for all uploaded files.\n  - This setup caches all content on the CDN but never in the browser.\n\n- **`gatsby-static-website`**:\n  - Optimizes headers for static websites built with [Gatsby](https://www.gatsbyjs.com/), following their [caching recommendations](https://www.gatsbyjs.com/docs/caching/).\n\n- **`single-page-app`**:\n  - Optimizes headers for [Single-Page Applications](https://en.wikipedia.org/wiki/Single-page_application).\n  - `html` files are never cached to ensure users always get the latest content after a deployment.\n  - All other assets (e.g., `.js`, `.css`) are cached indefinitely. You should **always** add a content hash to your filenames to ensure users receive new versions after updates. For more details, see the documentation for your bundler (e.g., [webpack](https://webpack.js.org/guides/caching/)).\n  - Sets up the necessary CDN redirects for a single-page app.","default":"static-website","_MdxDesc":{"sd":"<p> Configures HTTP headers of uploaded files and CDN behavior based on the content type.</p>\n","ld":"<p>Supported content types:</p>\n<ul>\n<li><p><strong><code>static-website</code></strong>:</p>\n<ul>\n<li>Sets the <code>Cache-Control</code> header to <code>public, max-age=0, s-maxage=31536000, must-revalidate</code> for all uploaded files.</li>\n<li>This setup caches all content on the CDN but never in the browser.</li>\n</ul>\n</li>\n<li><p><strong><code>gatsby-static-website</code></strong>:</p>\n<ul>\n<li>Optimizes headers for static websites built with <a href=\"https://www.gatsbyjs.com/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Gatsby</a>, following their <a href=\"https://www.gatsbyjs.com/docs/caching/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">caching recommendations</a>.</li>\n</ul>\n</li>\n<li><p><strong><code>single-page-app</code></strong>:</p>\n<ul>\n<li>Optimizes headers for <a href=\"https://en.wikipedia.org/wiki/Single-page_application\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Single-Page Applications</a>.</li>\n<li><code>html</code> files are never cached to ensure users always get the latest content after a deployment.</li>\n<li>All other assets (e.g., <code>.js</code>, <code>.css</code>) are cached indefinitely. You should <strong>always</strong> add a content hash to your filenames to ensure users receive new versions after updates. For more details, see the documentation for your bundler (e.g., <a href=\"https://webpack.js.org/guides/caching/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">webpack</a>).</li>\n<li>Sets up the necessary CDN redirects for a single-page app.</li>\n</ul>\n</li>\n</ul>\n"}},"customDomains":{"description":"#### Attaches custom domains to this hosting bucket.\n\n---\n\nWhen you connect a custom domain, Stacktape automatically:\n\n- **Creates DNS records:** A DNS record is created to point your domain name to the resource.\n- **Adds TLS certificates:** Stacktape issues and attaches a free, AWS-managed TLS certificate to handle HTTPS.\n\n> To manage a custom domain, it must first be added to your AWS account as a [hosted zone](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html), and your domain registrar's name servers must point to it.\n> For more details, see the [Adding a domain guide](https://docs.stacktape.com/other-resources/domains-and-certificates/#adding-domain).","type":"array","items":{"$ref":"#/definitions/DomainConfiguration"},"_MdxDesc":{"sd":"<p> Attaches custom domains to this hosting bucket.</p>\n","ld":"<p>When you connect a custom domain, Stacktape automatically:</p>\n<ul>\n<li><strong>Creates DNS records:</strong> A DNS record is created to point your domain name to the resource.</li>\n<li><strong>Adds TLS certificates:</strong> Stacktape issues and attaches a free, AWS-managed TLS certificate to handle HTTPS.</li>\n</ul>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>To manage a custom domain, it must first be added to your AWS account as a <a href=\"https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">hosted zone</a>, and your domain registrar&#39;s name servers must point to it.\nFor more details, see the <a href=\"/other-resources/domains-and-certificates/#adding-domain\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Adding a domain guide</a>.</p>\n</div>\n</div>"}},"disableUrlNormalization":{"description":"#### Disables URL normalization.\n\n---\n\nURL normalization is enabled by default and is useful for serving HTML files from a bucket with clean URLs (without the `.html` extension).","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disables URL normalization.</p>\n","ld":"<p>URL normalization is enabled by default and is useful for serving HTML files from a bucket with clean URLs (without the <code>.html</code> extension).</p>\n"}},"edgeFunctions":{"$ref":"#/definitions/EdgeFunctionsConfig","description":"#### Configures Edge function triggers.\n\n---\n\nYou can associate an `edge-lambda-function` with this hosting bucket to be executed at different stages:\n\n- `onRequest`: Executed when the CDN receives a request from a client, before checking the cache and before the request is forwarded to the hosting bucket.\n- `onResponse`: Executed before returning a response to the client.\n\n**Potential Use Cases:**\n- Generating an immediate HTTP response without checking the cache or forwarding to the bucket.\n- Modifying the request (e.g., rewriting the URL or headers) before forwarding to the bucket.","_MdxDesc":{"sd":"<p> Configures Edge function triggers.</p>\n","ld":"<p>You can associate an <code>edge-lambda-function</code> with this hosting bucket to be executed at different stages:</p>\n<ul>\n<li><code>onRequest</code>: Executed when the CDN receives a request from a client, before checking the cache and before the request is forwarded to the hosting bucket.</li>\n<li><code>onResponse</code>: Executed before returning a response to the client.</li>\n</ul>\n<p><strong>Potential Use Cases:</strong></p>\n<ul>\n<li>Generating an immediate HTTP response without checking the cache or forwarding to the bucket.</li>\n<li>Modifying the request (e.g., rewriting the URL or headers) before forwarding to the bucket.</li>\n</ul>\n"}},"errorDocument":{"description":"#### The custom error document URL.\n\n---\n\nThis document is requested if the original request to the origin returns a `404` error code.\n\nExample: `/error.html`","type":"string","_MdxDesc":{"sd":"<p> The custom error document URL.</p>\n","ld":"<p>This document is requested if the original request to the origin returns a <code>404</code> error code.</p>\n<p>Example: <code>/error.html</code></p>\n"}},"indexDocument":{"description":"#### The custom index document served for requests to the root path (`/`).\n\n---","default":"/index.html","type":"string","_MdxDesc":{"sd":"<p> The custom index document served for requests to the root path (<code>/</code>).</p>\n"}},"injectEnvironment":{"description":"#### Injects referenced parameters into all HTML files in the `uploadDirectoryPath`.\n\n---\n\nThese parameters can be accessed by any JavaScript script using `window.STP_INJECTED_ENV.VARIABLE_NAME`.\nThis is useful for automatically referencing parameters that are only known after deployment, such as the URL of an API Gateway or the ID of a User Pool.","type":"array","items":{"$ref":"#/definitions/EnvironmentVar"},"_MdxDesc":{"sd":"<p> Injects referenced parameters into all HTML files in the <code>uploadDirectoryPath</code>.</p>\n","ld":"<p>These parameters can be accessed by any JavaScript script using <code>window.STP_INJECTED_ENV.VARIABLE_NAME</code>.\nThis is useful for automatically referencing parameters that are only known after deployment, such as the URL of an API Gateway or the ID of a User Pool.</p>\n"}},"writeDotenvFilesTo":{"description":"#### Injects referenced parameters into `.env` files within the specified directory.\n\n---\n\nWrites the injected environment variables to a file named `.env`.\nIf the file already exists, the new variables will be merged with the existing ones.","type":"string","_MdxDesc":{"sd":"<p> Injects referenced parameters into <code>.env</code> files within the specified directory.</p>\n","ld":"<p>Writes the injected environment variables to a file named <code>.env</code>.\nIf the file already exists, the new variables will be merged with the existing ones.</p>\n"}},"useFirewall":{"description":"#### The name of the `web-app-firewall` resource to use to protect this hosting bucket.\n\n---\n\nA `web-app-firewall` can protect your resources from common web exploits that could affect availability, compromise security, or consume excessive resources.\n\nFor more information, see the [firewall documentation](https://docs.stacktape.com/security-resources/web-app-firewalls/).\n\n> **Note:** Because this resource uses a CDN, the `scope` of the `web-app-firewall` must be set to `cdn`.","type":"string","_MdxDesc":{"sd":"<p> The name of the <code>web-app-firewall</code> resource to use to protect this hosting bucket.</p>\n","ld":"<p>A <code>web-app-firewall</code> can protect your resources from common web exploits that could affect availability, compromise security, or consume excessive resources.</p>\n<p>For more information, see the <a href=\"/security-resources/web-app-firewalls/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">firewall documentation</a>.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> Because this resource uses a CDN, the <code>scope</code> of the <code>web-app-firewall</code> must be set to <code>cdn</code>.</p>\n</div>\n</div>"}},"fileOptions":{"description":"#### Allows you to manually set headers (e.g., `Cache-Control`, `Content-Type`) for files that match a filter pattern.","type":"array","items":{"$ref":"#/definitions/DirectoryUploadFilter"},"_MdxDesc":{"sd":"<p> Allows you to manually set headers (e.g., <code>Cache-Control</code>, <code>Content-Type</code>) for files that match a filter pattern.</p>\n"}},"routeRewrites":{"description":"#### Redirects specific requests to a different origin.\n\n---\n\nEach incoming request to the CDN is evaluated against a list of route rewrites. If the request path matches a rewrite's path pattern, it is sent to the configured route.\nRoute rewrites are evaluated in order, and the first match determines where the request will be sent.\n\nIf no match is found, the request is sent to the default origin (the hosting bucket).\n\n**Example Use Cases:**\n- Serving static content from the bucket while routing dynamic paths to a Lambda function.\n- Caching `.jpg` files for a longer duration than other file types.","type":"array","items":{"$ref":"#/definitions/CdnRouteRewrite"},"_MdxDesc":{"sd":"<p> Redirects specific requests to a different origin.</p>\n","ld":"<p>Each incoming request to the CDN is evaluated against a list of route rewrites. If the request path matches a rewrite&#39;s path pattern, it is sent to the configured route.\nRoute rewrites are evaluated in order, and the first match determines where the request will be sent.</p>\n<p>If no match is found, the request is sent to the default origin (the hosting bucket).</p>\n<p><strong>Example Use Cases:</strong></p>\n<ul>\n<li>Serving static content from the bucket while routing dynamic paths to a Lambda function.</li>\n<li>Caching <code>.jpg</code> files for a longer duration than other file types.</li>\n</ul>\n"}}},"additionalProperties":false,"required":["uploadDirectoryPath"]},"WebAppFirewall":{"description":"#### Web Application Firewall\n\n---\n\nA firewall that helps protect your resources from common web exploits that could affect application availability, compromise security, or consume excessive resources.","type":"object","properties":{"type":{"type":"string","const":"web-app-firewall"},"properties":{"$ref":"#/definitions/WebAppFirewallProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["type"],"_MdxDesc":{"sd":"<p> Web Application Firewall</p>\n","ld":"<p>A firewall that helps protect your resources from common web exploits that could affect application availability, compromise security, or consume excessive resources.</p>\n"}},"WebAppFirewallProps":{"type":"object","properties":{"scope":{"description":"#### Specifies whether this firewall is to be used with a CDN or with regional resources.\n\n---\n\n- Use `cdn` if you are using the firewall with a CDN-enabled resource (e.g., HTTP API Gateway, Bucket, Application Load Balancer, or Web Service).\n- Use `regional` if you are using the firewall directly with a regional resource (e.g., Application Load Balancer, User Pool, or Web Service).","enum":["cdn","regional"],"type":"string","_MdxDesc":{"sd":"<p> Specifies whether this firewall is to be used with a CDN or with regional resources.</p>\n","ld":"<ul>\n<li>Use <code>cdn</code> if you are using the firewall with a CDN-enabled resource (e.g., HTTP API Gateway, Bucket, Application Load Balancer, or Web Service).</li>\n<li>Use <code>regional</code> if you are using the firewall directly with a regional resource (e.g., Application Load Balancer, User Pool, or Web Service).</li>\n</ul>\n"}},"defaultAction":{"description":"#### The default action for the firewall if no rule matches.\n\n---\n\n- **`Allow`**: Allows most users to access your website but blocks attackers whose requests match specific rules (e.g., originate from certain IP addresses or contain malicious SQL code).\n- **`Block`**: Prevents most users from accessing your website but allows users whose requests match specific rules. By default, the `Block` action responds with an HTTP `403 (Forbidden)` status code.","default":"Allow","enum":["Allow","Block"],"type":"string","_MdxDesc":{"sd":"<p> The default action for the firewall if no rule matches.</p>\n","ld":"<ul>\n<li><strong><code>Allow</code></strong>: Allows most users to access your website but blocks attackers whose requests match specific rules (e.g., originate from certain IP addresses or contain malicious SQL code).</li>\n<li><strong><code>Block</code></strong>: Prevents most users from accessing your website but allows users whose requests match specific rules. By default, the <code>Block</code> action responds with an HTTP <code>403 (Forbidden)</code> status code.</li>\n</ul>\n"}},"rules":{"description":"#### A list of rules to be used by the firewall.\n\n---\n\nA rule can be a reference to a `managed-rule-group`, a user-defined `custom-rule-group`, or a `rate-based-rule`.\n\n- **`managed-rule-group`**: A pre-configured rule group created by AWS or other vendors for specific use cases. For more details, see the [AWS documentation](https://docs.aws.amazon.com/waf/latest/developerguide/aws-managed-rule-groups-list.html).\n- **`custom-rule-group`**: A custom rule group that you have created.\n- **`rate-based-rule`**: Tracks the rate of requests for each originating IP address and triggers an action when the rate exceeds a specified limit within a five-minute period.\n\nIf you do not specify any rules, Stacktape will use the `AWSManagedRulesCommonRuleSet` and `AWSManagedRulesKnownBadInputsRuleSet` managed rule groups to protect your application.","type":"array","items":{"anyOf":[{"$ref":"#/definitions/ManagedRuleGroup"},{"$ref":"#/definitions/CustomRuleGroup"},{"$ref":"#/definitions/RateBasedStatement"}]},"_MdxDesc":{"sd":"<p> A list of rules to be used by the firewall.</p>\n","ld":"<p>A rule can be a reference to a <code>managed-rule-group</code>, a user-defined <code>custom-rule-group</code>, or a <code>rate-based-rule</code>.</p>\n<ul>\n<li><strong><code>managed-rule-group</code></strong>: A pre-configured rule group created by AWS or other vendors for specific use cases. For more details, see the <a href=\"https://docs.aws.amazon.com/waf/latest/developerguide/aws-managed-rule-groups-list.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</li>\n<li><strong><code>custom-rule-group</code></strong>: A custom rule group that you have created.</li>\n<li><strong><code>rate-based-rule</code></strong>: Tracks the rate of requests for each originating IP address and triggers an action when the rate exceeds a specified limit within a five-minute period.</li>\n</ul>\n<p>If you do not specify any rules, Stacktape will use the <code>AWSManagedRulesCommonRuleSet</code> and <code>AWSManagedRulesKnownBadInputsRuleSet</code> managed rule groups to protect your application.</p>\n"}},"customResponseBodies":{"$ref":"#/definitions/CustomResponseBodies","description":"#### A map of custom response keys and content bodies.\n\n---\n\nWhen you create a rule with a `Block` action, you can send a custom response to the web request.","_MdxDesc":{"sd":"<p> A map of custom response keys and content bodies.</p>\n","ld":"<p>When you create a rule with a <code>Block</code> action, you can send a custom response to the web request.</p>\n"}},"captchaImmunityTime":{"description":"#### Determines how long (in seconds) a solved CAPTCHA challenge remains valid.\n\n---\n\nFor more details, see the [AWS documentation](https://docs.aws.amazon.com/waf/latest/developerguide/waf-tokens-immunity-times.html).","default":300,"type":"number","_MdxDesc":{"sd":"<p> Determines how long (in seconds) a solved CAPTCHA challenge remains valid.</p>\n","ld":"<p>For more details, see the <a href=\"https://docs.aws.amazon.com/waf/latest/developerguide/waf-tokens-immunity-times.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"challengeImmunityTime":{"description":"#### Determines how long (in seconds) a solved challenge remains valid.\n\n---\n\nFor more details, see the [AWS documentation](https://docs.aws.amazon.com/waf/latest/developerguide/waf-tokens-immunity-times.html).","default":300,"type":"number","_MdxDesc":{"sd":"<p> Determines how long (in seconds) a solved challenge remains valid.</p>\n","ld":"<p>For more details, see the <a href=\"https://docs.aws.amazon.com/waf/latest/developerguide/waf-tokens-immunity-times.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"tokenDomains":{"description":"#### Specifies the domains that the firewall should accept in a web request token.\n\n---\n\nThis enables the use of tokens across multiple protected websites.\nFor more details, see the [AWS documentation](https://docs.aws.amazon.com/waf/latest/developerguide/waf-tokens-domains.html#waf-tokens-domain-lists).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Specifies the domains that the firewall should accept in a web request token.</p>\n","ld":"<p>This enables the use of tokens across multiple protected websites.\nFor more details, see the <a href=\"https://docs.aws.amazon.com/waf/latest/developerguide/waf-tokens-domains.html#waf-tokens-domain-lists\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"disableMetrics":{"description":"#### When `true`, disables the collection of metrics for the firewall.\n\n---\n\nBy default, total metrics for the firewall are enabled and can be monitored using AWS CloudWatch or the AWS WAF console.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> When <code>true</code>, disables the collection of metrics for the firewall.</p>\n","ld":"<p>By default, total metrics for the firewall are enabled and can be monitored using AWS CloudWatch or the AWS WAF console.</p>\n"}},"sampledRequestsEnabled":{"description":"#### When `true`, requests matching the rule are saved for further analysis.\n\n---\n\nBy default, sampled requests are not saved.\nIf you set this to `true`, requests that match the rule will be stored and can be viewed in the AWS WAF console.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> When <code>true</code>, requests matching the rule are saved for further analysis.</p>\n","ld":"<p>By default, sampled requests are not saved.\nIf you set this to <code>true</code>, requests that match the rule will be stored and can be viewed in the AWS WAF console.</p>\n"}}},"additionalProperties":false,"required":["scope"]},"ManagedRuleGroup":{"type":"object","properties":{"type":{"type":"string","const":"managed-rule-group"},"properties":{"$ref":"#/definitions/ManagedRuleGroupProps"}},"additionalProperties":false,"required":["properties","type"]},"ManagedRuleGroupProps":{"type":"object","properties":{"vendorName":{"description":"#### The name of the rule group's vendor.","type":"string","_MdxDesc":{"sd":"<p> The name of the rule group&#39;s vendor.</p>\n"}},"excludedRules":{"description":"#### A list of rules to be excluded from the specified rule group.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of rules to be excluded from the specified rule group.</p>\n"}},"overrideAction":{"description":"#### An action to override the result of the rule group evaluation.\n\n---\n\nSet this to `None` to leave the result of the rule group unchanged, or set it to `Count` to override the result to count only.","enum":["Count","None"],"type":"string","_MdxDesc":{"sd":"<p> An action to override the result of the rule group evaluation.</p>\n","ld":"<p>Set this to <code>None</code> to leave the result of the rule group unchanged, or set it to <code>Count</code> to override the result to count only.</p>\n"}},"priority":{"description":"#### The priority of the rule.\n\n---\n\nRules are evaluated in order of priority, with lower values being evaluated first.\nPriorities do not need to be consecutive, but they must be unique.","type":"number","_MdxDesc":{"sd":"<p> The priority of the rule.</p>\n","ld":"<p>Rules are evaluated in order of priority, with lower values being evaluated first.\nPriorities do not need to be consecutive, but they must be unique.</p>\n"}},"name":{"type":"string"},"disableMetrics":{"description":"#### When `true`, disables metrics for the rule.\n\n---","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> When <code>true</code>, disables metrics for the rule.</p>\n"}},"sampledRequestsEnabled":{"description":"#### When `true`, requests matching the rule are saved for further analysis.\n\n---\n\nBy default, sampled requests are not saved.\nYou can view sampled requests in the AWS WAF console.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> When <code>true</code>, requests matching the rule are saved for further analysis.</p>\n","ld":"<p>By default, sampled requests are not saved.\nYou can view sampled requests in the AWS WAF console.</p>\n"}}},"additionalProperties":false,"required":["name","priority","vendorName"]},"CustomRuleGroup":{"type":"object","properties":{"type":{"type":"string","const":"custom-rule-group"},"properties":{"$ref":"#/definitions/CustomRuleGroupProps"}},"additionalProperties":false,"required":["properties","type"]},"CustomRuleGroupProps":{"type":"object","properties":{"arn":{"description":"#### The Amazon Resource Name (ARN) of the rule group.\n\n---\n\nFor more information on how to create a custom rule group, see the [AWS documentation](https://docs.aws.amazon.com/waf/latest/developerguide/working-with-rule-groups.html).","type":"string","_MdxDesc":{"sd":"<p> The Amazon Resource Name (ARN) of the rule group.</p>\n","ld":"<p>For more information on how to create a custom rule group, see the <a href=\"https://docs.aws.amazon.com/waf/latest/developerguide/working-with-rule-groups.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"overrideAction":{"description":"#### An action to override the result of the rule group evaluation.\n\n---\n\nSet this to `None` to leave the result of the rule group unchanged, or set it to `Count` to override the result to count only.","enum":["Count","None"],"type":"string","_MdxDesc":{"sd":"<p> An action to override the result of the rule group evaluation.</p>\n","ld":"<p>Set this to <code>None</code> to leave the result of the rule group unchanged, or set it to <code>Count</code> to override the result to count only.</p>\n"}},"priority":{"description":"#### The priority of the rule.\n\n---\n\nRules are evaluated in order of priority, with lower values being evaluated first.\nPriorities do not need to be consecutive, but they must be unique.","type":"number","_MdxDesc":{"sd":"<p> The priority of the rule.</p>\n","ld":"<p>Rules are evaluated in order of priority, with lower values being evaluated first.\nPriorities do not need to be consecutive, but they must be unique.</p>\n"}},"name":{"type":"string"},"disableMetrics":{"description":"#### When `true`, disables metrics for the rule.\n\n---","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> When <code>true</code>, disables metrics for the rule.</p>\n"}},"sampledRequestsEnabled":{"description":"#### When `true`, requests matching the rule are saved for further analysis.\n\n---\n\nBy default, sampled requests are not saved.\nYou can view sampled requests in the AWS WAF console.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> When <code>true</code>, requests matching the rule are saved for further analysis.</p>\n","ld":"<p>By default, sampled requests are not saved.\nYou can view sampled requests in the AWS WAF console.</p>\n"}}},"additionalProperties":false,"required":["arn","name","priority"]},"RateBasedStatement":{"type":"object","properties":{"type":{"type":"string","const":"rate-based-rule"},"properties":{"$ref":"#/definitions/RateBasedStatementProps"}},"additionalProperties":false,"required":["properties","type"]},"RateBasedStatementProps":{"type":"object","properties":{"limit":{"description":"#### The maximum number of requests from a single IP address allowed in a five-minute period.\n\n---\n\nThe limit must be between 100 and 20,000,000.","type":"number","_MdxDesc":{"sd":"<p> The maximum number of requests from a single IP address allowed in a five-minute period.</p>\n","ld":"<p>The limit must be between 100 and 20,000,000.</p>\n"}},"aggregateBasedOn":{"description":"#### The type of aggregation to use for this rule.\n\n---\n\n- `IP`: Aggregates request counts based on the IP addresses of the requests.\n- `FORWARDED_IP`: Aggregates request counts based on the IP addresses in a specified header.\n\nIf you choose `FORWARDED_IP`, you can also specify the `headerName` and `fallbackBehavior` in the `forwardedIPConfig` property.\nBy default, these are `X-Forwarded-For` and `NO_MATCH`, respectively.\n\nFor more details on rate-based rules, see the [AWS documentation](https://docs.aws.amazon.com/waf/latest/APIReference/API_RateBasedStatement.html).","enum":["FORWARDED_IP","IP"],"type":"string","_MdxDesc":{"sd":"<p> The type of aggregation to use for this rule.</p>\n","ld":"<ul>\n<li><code>IP</code>: Aggregates request counts based on the IP addresses of the requests.</li>\n<li><code>FORWARDED_IP</code>: Aggregates request counts based on the IP addresses in a specified header.</li>\n</ul>\n<p>If you choose <code>FORWARDED_IP</code>, you can also specify the <code>headerName</code> and <code>fallbackBehavior</code> in the <code>forwardedIPConfig</code> property.\nBy default, these are <code>X-Forwarded-For</code> and <code>NO_MATCH</code>, respectively.</p>\n<p>For more details on rate-based rules, see the <a href=\"https://docs.aws.amazon.com/waf/latest/APIReference/API_RateBasedStatement.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"forwardedIPConfig":{"$ref":"#/definitions/ForwardedIPConfig","description":"#### The configuration for inspecting IP addresses in a specified HTTP header.\n\n---\n\n- `fallbackBehavior`: Specifies what to do when a web request does not include the specified header.\n  - `MATCH`: Treats the web request as matching the statement.\n  - `NO_MATCH`: Treats the web request as not matching the statement.\n- `headerName`: The name of the HTTP header to use for the IP address.\n\nFor more details, see the [AWS documentation](https://docs.aws.amazon.com/waf/latest/APIReference/API_ForwardedIPConfig.html).","_MdxDesc":{"sd":"<p> The configuration for inspecting IP addresses in a specified HTTP header.</p>\n","ld":"<ul>\n<li><code>fallbackBehavior</code>: Specifies what to do when a web request does not include the specified header.<ul>\n<li><code>MATCH</code>: Treats the web request as matching the statement.</li>\n<li><code>NO_MATCH</code>: Treats the web request as not matching the statement.</li>\n</ul>\n</li>\n<li><code>headerName</code>: The name of the HTTP header to use for the IP address.</li>\n</ul>\n<p>For more details, see the <a href=\"https://docs.aws.amazon.com/waf/latest/APIReference/API_ForwardedIPConfig.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"action":{"description":"#### The action that the firewall should take when a web request matches the rule's statement.\n\n---\n\n- `Allow`: Allows the web request.\n- `Block`: Blocks the web request.\n- `Count`: Counts the web request and allows it.\n- `Captcha`: Returns a CAPTCHA challenge to the client.\n- `Challenge`: Returns a challenge to the client.\n\nFor more details, see the [AWS documentation](https://docs.aws.amazon.com/waf/latest/APIReference/API_RuleAction.html).","default":"Block","enum":["Allow","Block","Captcha","Challenge","Count"],"type":"string","_MdxDesc":{"sd":"<p> The action that the firewall should take when a web request matches the rule&#39;s statement.</p>\n","ld":"<ul>\n<li><code>Allow</code>: Allows the web request.</li>\n<li><code>Block</code>: Blocks the web request.</li>\n<li><code>Count</code>: Counts the web request and allows it.</li>\n<li><code>Captcha</code>: Returns a CAPTCHA challenge to the client.</li>\n<li><code>Challenge</code>: Returns a challenge to the client.</li>\n</ul>\n<p>For more details, see the <a href=\"https://docs.aws.amazon.com/waf/latest/APIReference/API_RuleAction.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"priority":{"description":"#### The priority of the rule.\n\n---\n\nRules are evaluated in order of priority, with lower values being evaluated first.\nPriorities do not need to be consecutive, but they must be unique.","type":"number","_MdxDesc":{"sd":"<p> The priority of the rule.</p>\n","ld":"<p>Rules are evaluated in order of priority, with lower values being evaluated first.\nPriorities do not need to be consecutive, but they must be unique.</p>\n"}},"name":{"type":"string"},"disableMetrics":{"description":"#### When `true`, disables metrics for the rule.\n\n---","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> When <code>true</code>, disables metrics for the rule.</p>\n"}},"sampledRequestsEnabled":{"description":"#### When `true`, requests matching the rule are saved for further analysis.\n\n---\n\nBy default, sampled requests are not saved.\nYou can view sampled requests in the AWS WAF console.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> When <code>true</code>, requests matching the rule are saved for further analysis.</p>\n","ld":"<p>By default, sampled requests are not saved.\nYou can view sampled requests in the AWS WAF console.</p>\n"}}},"additionalProperties":false,"required":["limit","name","priority"]},"ForwardedIPConfig":{"type":"object","properties":{"fallbackBehavior":{"description":"#### The fallback behavior to use when the specified header is not present.\n\n---\n\n- `MATCH`: Treats the web request as matching the rule statement, and the firewall applies the rule's action.\n- `NO_MATCH`: Treats the web request as not matching the rule statement.","enum":["MATCH","NO_MATCH"],"type":"string","_MdxDesc":{"sd":"<p> The fallback behavior to use when the specified header is not present.</p>\n","ld":"<ul>\n<li><code>MATCH</code>: Treats the web request as matching the rule statement, and the firewall applies the rule&#39;s action.</li>\n<li><code>NO_MATCH</code>: Treats the web request as not matching the rule statement.</li>\n</ul>\n"}},"headerName":{"description":"#### The name of the HTTP header to use for the IP address.\n\n---\n\nFor example, if you specify `X-Forwarded-For`, the firewall will inspect the `X-Forwarded-For` header in the web request.","type":"string","_MdxDesc":{"sd":"<p> The name of the HTTP header to use for the IP address.</p>\n","ld":"<p>For example, if you specify <code>X-Forwarded-For</code>, the firewall will inspect the <code>X-Forwarded-For</code> header in the web request.</p>\n"}}},"additionalProperties":false,"required":["fallbackBehavior","headerName"]},"CustomResponseBodies":{"type":"object","additionalProperties":{"type":"object","properties":{"contentType":{"description":"#### The content type of the custom response.\n\n---\n\n- `application/json`: The custom response is a JSON string.\n- `text/plain`: The custom response is a plain text string.\n- `text/html`: The custom response is a block of HTML code.","type":"string","_MdxDesc":{"sd":"<p> The content type of the custom response.</p>\n","ld":"<ul>\n<li><code>application/json</code>: The custom response is a JSON string.</li>\n<li><code>text/plain</code>: The custom response is a plain text string.</li>\n<li><code>text/html</code>: The custom response is a block of HTML code.</li>\n</ul>\n"}},"content":{"description":"#### The body of the custom response.","type":"string","_MdxDesc":{"sd":"<p> The body of the custom response.</p>\n"}}},"additionalProperties":false,"required":["content","contentType"]}},"NextjsWeb":{"description":"#### A resource for deploying and hosting Next.js applications.\n\n---\n\nThis resource is purpose-built for Next.js and runs your application's server-side logic in AWS Lambda or Lambda@Edge.\nIt seamlessly integrates your Next.js application with other resources in your infrastructure.","type":"object","properties":{"type":{"type":"string","const":"nextjs-web"},"properties":{"$ref":"#/definitions/NextjsWebProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> A resource for deploying and hosting Next.js applications.</p>\n","ld":"<p>This resource is purpose-built for Next.js and runs your application&#39;s server-side logic in AWS Lambda or Lambda@Edge.\nIt seamlessly integrates your Next.js application with other resources in your infrastructure.</p>\n"}},"NextjsWebProps":{"type":"object","properties":{"appDirectory":{"description":"#### The root directory of your Next.js application.\n\n---\n\nThis should be the path to the directory containing your `next.config.js` file.\nIf you are using a monorepo, this will be the path to your Next.js workspace. Otherwise, it's typically `./`.","type":"string","_MdxDesc":{"sd":"<p> The root directory of your Next.js application.</p>\n","ld":"<p>This should be the path to the directory containing your <code>next.config.js</code> file.\nIf you are using a monorepo, this will be the path to your Next.js workspace. Otherwise, it&#39;s typically <code>./</code>.</p>\n"}},"serverLambda":{"$ref":"#/definitions/NextjsServerLambdaProperties","description":"#### Overrides for the server-side Lambda function.\n\n---\n\nUse this to customize the memory, timeout, or other properties of the Lambda function that handles server-side rendering.","_MdxDesc":{"sd":"<p> Overrides for the server-side Lambda function.</p>\n","ld":"<p>Use this to customize the memory, timeout, or other properties of the Lambda function that handles server-side rendering.</p>\n"}},"warmServerInstances":{"description":"#### The number of server-side Lambda instances to keep warm.\n\n---\n\nTo mitigate cold starts and improve response times, you can keep a specified number of Lambda instances \"warm\" (pre-initialized).\nThis is done by a separate \"warmer\" function that periodically invokes the server-side function.\n\n> **Note:** This feature is not available when using Lambda@Edge (`useEdgeLambda: true`).","default":0,"type":"number","_MdxDesc":{"sd":"<p> The number of server-side Lambda instances to keep warm.</p>\n","ld":"<p>To mitigate cold starts and improve response times, you can keep a specified number of Lambda instances &quot;warm&quot; (pre-initialized).\nThis is done by a separate &quot;warmer&quot; function that periodically invokes the server-side function.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> This feature is not available when using Lambda@Edge (<code>useEdgeLambda: true</code>).</p>\n</div>\n</div>"}},"useEdgeLambda":{"description":"#### Deploys the server-side function to Lambda@Edge.\n\n---\n\nWhen enabled, your server-side rendering logic will run at AWS edge locations, closer to your users, which can significantly reduce latency.\n\n**Trade-offs:**\n- Slower deployment times compared to a standard regional Lambda.\n- The \"warming\" feature (`warmServerInstances`) is not supported.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Deploys the server-side function to Lambda@Edge.</p>\n","ld":"<p>When enabled, your server-side rendering logic will run at AWS edge locations, closer to your users, which can significantly reduce latency.</p>\n<p><strong>Trade-offs:</strong></p>\n<ul>\n<li>Slower deployment times compared to a standard regional Lambda.</li>\n<li>The &quot;warming&quot; feature (<code>warmServerInstances</code>) is not supported.</li>\n</ul>\n"}},"buildCommand":{"description":"#### A custom build command for your Next.js application.\n\n---\n\nIf you have a custom build process, you can specify the command here.","type":"string","_MdxDesc":{"sd":"<p> A custom build command for your Next.js application.</p>\n","ld":"<p>If you have a custom build process, you can specify the command here.</p>\n"}},"fileOptions":{"description":"#### Sets custom headers for static files.\n\n---\n\nThis allows you to define headers, such as `Cache-Control` or `Content-Type`, for files that match a specified pattern.","type":"array","items":{"$ref":"#/definitions/DirectoryUploadFilter"},"_MdxDesc":{"sd":"<p> Sets custom headers for static files.</p>\n","ld":"<p>This allows you to define headers, such as <code>Cache-Control</code> or <code>Content-Type</code>, for files that match a specified pattern.</p>\n"}},"environment":{"description":"#### A list of environment variables to inject into the server-side function.\n\n---\n\nThis is useful for providing configuration details, such as API keys or database connection strings, to your server-side rendering logic.","type":"array","items":{"$ref":"#/definitions/EnvironmentVar"},"_MdxDesc":{"sd":"<p> A list of environment variables to inject into the server-side function.</p>\n","ld":"<p>This is useful for providing configuration details, such as API keys or database connection strings, to your server-side rendering logic.</p>\n"}},"customDomains":{"description":"#### Attaches custom domains to your Next.js application.\n\n---\n\nStacktape can automatically manage DNS records and TLS certificates for your custom domains.\n\nWhen you attach a custom domain, Stacktape will:\n- Create the necessary DNS records in Route 53 to point your domain to the application.\n- Provision and manage a free, auto-renewing AWS Certificate Manager (ACM) TLS certificate for HTTPS.\n\n> **Prerequisite:** You must have a hosted zone for your domain in your AWS account.\n> For more details, see the [Stacktape documentation on domains](https://docs.stacktape.com/other-resources/domains-and-certificates/#adding-domain).","type":"array","items":{"$ref":"#/definitions/DomainConfiguration"},"_MdxDesc":{"sd":"<p> Attaches custom domains to your Next.js application.</p>\n","ld":"<p>Stacktape can automatically manage DNS records and TLS certificates for your custom domains.</p>\n<p>When you attach a custom domain, Stacktape will:</p>\n<ul>\n<li>Create the necessary DNS records in Route 53 to point your domain to the application.</li>\n<li>Provision and manage a free, auto-renewing AWS Certificate Manager (ACM) TLS certificate for HTTPS.</li>\n</ul>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Prerequisite:</strong> You must have a hosted zone for your domain in your AWS account.\nFor more details, see the <a href=\"/other-resources/domains-and-certificates/#adding-domain\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape documentation on domains</a>.</p>\n</div>\n</div>"}},"useFirewall":{"description":"#### The name of a `web-app-firewall` to protect your application.\n\n---\n\nA web application firewall (WAF) can help protect your application from common web-based attacks.\nFor more information, see the [Stacktape documentation on web application firewalls](https://docs.stacktape.com/security-resources/web-app-firewalls/).","type":"string","_MdxDesc":{"sd":"<p> The name of a <code>web-app-firewall</code> to protect your application.</p>\n","ld":"<p>A web application firewall (WAF) can help protect your application from common web-based attacks.\nFor more information, see the <a href=\"/security-resources/web-app-firewalls/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape documentation on web application firewalls</a>.</p>\n"}},"streamingEnabled":{"description":"#### Enables response streaming for the server-side function.\n\n---\n\n**Benefits:**\n- Improves Time to First Byte (TTFB) for faster page loads.\n- Increases the maximum response size to 20MB (from the standard 6MB).\n\n> **Note:** This is an experimental feature and is not compatible with Lambda@Edge (`useEdgeLambda: true`).","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enables response streaming for the server-side function.</p>\n","ld":"<p><strong>Benefits:</strong></p>\n<ul>\n<li>Improves Time to First Byte (TTFB) for faster page loads.</li>\n<li>Increases the maximum response size to 20MB (from the standard 6MB).</li>\n</ul>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> This is an experimental feature and is not compatible with Lambda@Edge (<code>useEdgeLambda: true</code>).</p>\n</div>\n</div>"}},"connectTo":{"description":"#### Connect To\n\n---\n\nConfigures access to other resources in your stack and AWS services. By specifying resources here, Stacktape automatically:\n- Configures IAM role permissions.\n- Sets up security group rules to allow network traffic.\n- Injects environment variables with connection details into the compute resource.\n\nEnvironment variables are named `STP_[RESOURCE_NAME]_[VARIABLE_NAME]` (e.g., `STP_MY_DATABASE_CONNECTION_STRING`).\n\n---\n\n#### Granted Permissions and Injected Variables:\n\n**`Bucket`**\n- **Permissions:** List, create, get, delete, and tag objects.\n- **Variables:** `NAME`, `ARN`\n\n**`DynamoDbTable`**\n- **Permissions:** Get, put, update, delete, scan, and query items; describe table stream.\n- **Variables:** `NAME`, `ARN`, `STREAM_ARN`\n\n**`MongoDbAtlasCluster`**\n- **Permissions:** Allows connection to clusters with `accessibilityMode` set to `scoping-workloads-in-vpc`. Creates a temporary user for secure, credential-less access.\n- **Variables:** `CONNECTION_STRING`\n\n**`RelationalDatabase`**\n- **Permissions:** Allows connection to databases with `accessibilityMode` set to `scoping-workloads-in-vpc`.\n- **Variables:** `CONNECTION_STRING`, `JDBC_CONNECTION_STRING`, `HOST`, `PORT`. For Aurora clusters, `READER_CONNECTION_STRING`, `READER_JDBC_CONNECTION_STRING`, and `READER_HOST` are also included.\n\n**`RedisCluster`**\n- **Permissions:** Allows connection to clusters with `accessibilityMode` set to `scoping-workloads-in-vpc`.\n- **Variables:** `HOST`, `READER_HOST`, `PORT`\n\n**`EventBus`**\n- **Permissions:** Publish events.\n- **Variables:** `ARN`\n\n**`Function`**\n- **Permissions:** Invoke the function, including via its URL if enabled.\n- **Variables:** `ARN`\n\n**`BatchJob`**\n- **Permissions:** Submit, list, describe, and terminate jobs; manage state machine executions.\n- **Variables:** `JOB_DEFINITION_ARN`, `STATE_MACHINE_ARN`\n\n**`UserAuthPool`**\n- **Permissions:** Full control over the user pool (`cognito-idp:*`).\n- **Variables:** `ID`, `CLIENT_ID`, `ARN`\n\n**`SnsTopic`**\n- **Permissions:** Confirm, list, publish, and manage subscriptions.\n- **Variables:** `ARN`, `NAME`\n\n**`SqsQueue`**\n- **Permissions:** Send, receive, delete, and purge messages.\n- **Variables:** `ARN`, `NAME`, `URL`\n\n**`UpstashKafkaTopic`**\n- **Variables:** `TOPIC_NAME`, `TOPIC_ID`, `USERNAME`, `PASSWORD`, `TCP_ENDPOINT`, `REST_URL`\n\n**`UpstashRedis`**\n- **Variables:** `HOST`, `PORT`, `PASSWORD`, `REST_TOKEN`, `REST_URL`, `REDIS_URL`\n\n**`PrivateService`**\n- **Variables:** `ADDRESS`\n\n**`aws:ses` (Macro)**\n- **Permissions:** Full permissions for AWS SES (`ses:*`).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Connect To</p>\n","ld":"<p>Configures access to other resources in your stack and AWS services. By specifying resources here, Stacktape automatically:</p>\n<ul>\n<li>Configures IAM role permissions.</li>\n<li>Sets up security group rules to allow network traffic.</li>\n<li>Injects environment variables with connection details into the compute resource.</li>\n</ul>\n<p>Environment variables are named <code>STP_[RESOURCE_NAME]_[VARIABLE_NAME]</code> (e.g., <code>STP_MY_DATABASE_CONNECTION_STRING</code>).</p>\n"}},"iamRoleStatements":{"description":"#### Custom IAM Role Statements\n\n---\n\nA list of raw AWS IAM role statements to append to the resource's role, allowing for fine-grained permission control.","type":"array","items":{"$ref":"#/definitions/StpIamRoleStatement"},"_MdxDesc":{"sd":"<p> Custom IAM Role Statements</p>\n","ld":"<p>A list of raw AWS IAM role statements to append to the resource&#39;s role, allowing for fine-grained permission control.</p>\n"}}},"additionalProperties":false,"required":["appDirectory"]},"NextjsServerLambdaProperties":{"type":"object","properties":{"memory":{"description":"#### The amount of memory (in MB) allocated to the server-side function.\n\n---\n\nThis setting also influences the amount of CPU power your function receives.\nThe value must be between 128 MB and 10,240 MB.","default":1024,"type":"number","_MdxDesc":{"sd":"<p> The amount of memory (in MB) allocated to the server-side function.</p>\n","ld":"<p>This setting also influences the amount of CPU power your function receives.\nThe value must be between 128 MB and 10,240 MB.</p>\n"}},"timeout":{"description":"#### The maximum execution time for the server-side function, in seconds.\n\n---\n\nThe maximum allowed timeout is 30 seconds.","default":30,"type":"number","_MdxDesc":{"sd":"<p> The maximum execution time for the server-side function, in seconds.</p>\n","ld":"<p>The maximum allowed timeout is 30 seconds.</p>\n"}},"logging":{"$ref":"#/definitions/LambdaFunctionLogging","description":"#### Configures the logging behavior for the server-side function.\n\n---\n\nFunction logs (`stdout` and `stderr`) are automatically sent to a CloudWatch log group.\n\nYou can view logs in two ways:\n  - Through the AWS CloudWatch console. Use the `stacktape stack-info` command to get a direct link.\n  - Using the `stacktape logs` command to stream logs directly to your terminal.","_MdxDesc":{"sd":"<p> Configures the logging behavior for the server-side function.</p>\n","ld":"<p>Function logs (<code>stdout</code> and <code>stderr</code>) are automatically sent to a CloudWatch log group.</p>\n<p>You can view logs in two ways:</p>\n<ul>\n<li>Through the AWS CloudWatch console. Use the <code>stacktape stack-info</code> command to get a direct link.</li>\n<li>Using the <code>stacktape logs</code> command to stream logs directly to your terminal.</li>\n</ul>\n"}},"joinDefaultVpc":{"description":"#### Connects the server-side function to your stack's default Virtual Private Cloud (VPC).\n\n---\n\nConnecting to a VPC is necessary to access resources within that VPC, such as relational databases or Redis clusters.\n\n> **Important:** When a function joins a VPC, it loses direct internet access.\n\nIf your function needs to access S3 or DynamoDB, Stacktape automatically creates VPC endpoints to ensure connectivity.\nFor more details, see the [Stacktape VPCs documentation](https://docs.stacktape.com/user-guides/vpcs).","type":"boolean","_MdxDesc":{"sd":"<p> Connects the server-side function to your stack&#39;s default Virtual Private Cloud (VPC).</p>\n","ld":"<p>Connecting to a VPC is necessary to access resources within that VPC, such as relational databases or Redis clusters.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Important:</strong> When a function joins a VPC, it loses direct internet access.</p>\n</div>\n</div><p>If your function needs to access S3 or DynamoDB, Stacktape automatically creates VPC endpoints to ensure connectivity.\nFor more details, see the <a href=\"/user-guides/vpcs/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape VPCs documentation</a>.</p>\n"}}},"additionalProperties":false},"LambdaFunctionLogging":{"type":"object","properties":{"disabled":{"description":"#### Disables application logging to CloudWatch.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disables application logging to CloudWatch.</p>\n"}},"retentionDays":{"description":"#### The number of days to retain logs in CloudWatch.","default":180,"enum":[1,120,14,150,180,1827,3,30,365,3653,400,5,545,60,7,731,90],"type":"number","_MdxDesc":{"sd":"<p> The number of days to retain logs in CloudWatch.</p>\n"}},"logForwarding":{"description":"#### Log Forwarding\n\n---\n\nForwards logs to a specified destination for monitoring, analysis, or long-term storage.\n\nLog forwarding is handled by an [Amazon Kinesis Data Firehose](https://aws.amazon.com/kinesis/data-firehose/) delivery stream. You will incur costs based on the volume of data transferred (approximately $0.03 per GB). For detailed pricing, see the [AWS Kinesis Firehose Pricing](https://aws.amazon.com/kinesis/data-firehose/pricing/) page.\n\nSupported destinations:\n- `http-endpoint`: Delivers logs to any HTTP endpoint that complies with [Firehose request and response specifications](https://docs.aws.amazon.com/firehose/latest/dev/httpdeliveryrequestresponse.html). Many third-party logging services are compatible out-of-the-box.\n- `datadog`: Delivers logs to [Datadog](https://www.datadoghq.com/).\n- `highlight`: Delivers logs to a [Highlight.io](https://www.highlight.io/) project.\n\nFor more information, refer to the [Stacktape documentation on log forwarding](https://docs.stacktape.com/configuration/log-forwarding/).\n\n> If logs fail to be delivered after multiple retries, they are stored in a backup S3 bucket named `{stackName}-{resourceName}-logs-{generatedHash}`. The retry duration can be configured.","anyOf":[{"$ref":"#/definitions/HttpEndpointLogForwarding"},{"$ref":"#/definitions/HighlightLogForwarding"},{"$ref":"#/definitions/DatadogLogForwarding"}],"_MdxDesc":{"sd":"<p> Log Forwarding</p>\n","ld":"<p>Forwards logs to a specified destination for monitoring, analysis, or long-term storage.</p>\n<p>Log forwarding is handled by an <a href=\"https://aws.amazon.com/kinesis/data-firehose/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Amazon Kinesis Data Firehose</a> delivery stream. You will incur costs based on the volume of data transferred (approximately $0.03 per GB). For detailed pricing, see the <a href=\"https://aws.amazon.com/kinesis/data-firehose/pricing/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS Kinesis Firehose Pricing</a> page.</p>\n<p>Supported destinations:</p>\n<ul>\n<li><code>http-endpoint</code>: Delivers logs to any HTTP endpoint that complies with <a href=\"https://docs.aws.amazon.com/firehose/latest/dev/httpdeliveryrequestresponse.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Firehose request and response specifications</a>. Many third-party logging services are compatible out-of-the-box.</li>\n<li><code>datadog</code>: Delivers logs to <a href=\"https://www.datadoghq.com/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Datadog</a>.</li>\n<li><code>highlight</code>: Delivers logs to a <a href=\"https://www.highlight.io/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Highlight.io</a> project.</li>\n</ul>\n<p>For more information, refer to the <a href=\"/configuration/log-forwarding/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape documentation on log forwarding</a>.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p>If logs fail to be delivered after multiple retries, they are stored in a backup S3 bucket named <code>{stackName}-{resourceName}-logs-{generatedHash}</code>. The retry duration can be configured.</p>\n</div>\n</div>"}}},"additionalProperties":false},"OpenSearchDomain":{"description":"#### OpenSearch Domain\n\n---\n\nA fully managed OpenSearch (or Elasticsearch) cluster.","type":"object","properties":{"type":{"type":"string","const":"open-search-domain"},"properties":{"$ref":"#/definitions/OpenSearchDomainProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["type"],"_MdxDesc":{"sd":"<p> OpenSearch Domain</p>\n","ld":"<p>A fully managed OpenSearch (or Elasticsearch) cluster.</p>\n"}},"OpenSearchDomainProps":{"type":"object","properties":{"version":{"description":"#### The OpenSearch version to use.\n\n---\n\nIt is recommended to explicitly specify the version to prevent potential issues when the default version changes.\nThe current default is `2.17`, but this may change in future Stacktape releases.","enum":["1.0","1.1","1.2","1.3","2.11","2.13","2.15","2.17","2.3","2.5","2.7","2.9"],"type":"string","_MdxDesc":{"sd":"<p> The OpenSearch version to use.</p>\n","ld":"<p>It is recommended to explicitly specify the version to prevent potential issues when the default version changes.\nThe current default is <code>2.17</code>, but this may change in future Stacktape releases.</p>\n"}},"clusterConfig":{"$ref":"#/definitions/OpenSearchClusterConfig","description":"#### The configuration of the cluster instances.\n\n---\n\nThis property determines the size, number, and type of instances used in your OpenSearch domain cluster.\nIf you do not specify a `clusterConfig`, the cluster will consist of a single `m4.large.search` node.","_MdxDesc":{"sd":"<p> The configuration of the cluster instances.</p>\n","ld":"<p>This property determines the size, number, and type of instances used in your OpenSearch domain cluster.\nIf you do not specify a <code>clusterConfig</code>, the cluster will consist of a single <code>m4.large.search</code> node.</p>\n"}},"storage":{"$ref":"#/definitions/OpenSearchStorage","description":"#### The storage configuration for the cluster.\n\n---\n\nThis is only supported for instances that use EBS storage.\nSetting `iops` and `throughput` is only allowed for instances with the `gp3` storage type.","_MdxDesc":{"sd":"<p> The storage configuration for the cluster.</p>\n","ld":"<p>This is only supported for instances that use EBS storage.\nSetting <code>iops</code> and <code>throughput</code> is only allowed for instances with the <code>gp3</code> storage type.</p>\n"}},"userPool":{"description":"#### The name of the Cognito User Pool resource to use for OpenSearch Dashboards authentication.","type":"string","_MdxDesc":{"sd":"<p> The name of the Cognito User Pool resource to use for OpenSearch Dashboards authentication.</p>\n"}},"logging":{"$ref":"#/definitions/OpenSearchLogConfiguration","description":"#### The log collection configuration.\n\n---\n\nStacktape will automatically create the required log groups and policies for you.\nYou can set a custom retention period for individual log types or disable log collection entirely.\n\nFor more details on log collection, see the [AWS documentation](https://docs.aws.amazon.com/opensearch-service/latest/developerguide/createdomain-configure-slow-logs.html).","_MdxDesc":{"sd":"<p> The log collection configuration.</p>\n","ld":"<p>Stacktape will automatically create the required log groups and policies for you.\nYou can set a custom retention period for individual log types or disable log collection entirely.</p>\n<p>For more details on log collection, see the <a href=\"https://docs.aws.amazon.com/opensearch-service/latest/developerguide/createdomain-configure-slow-logs.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"accessibility":{"$ref":"#/definitions/OpenSearchAccessibility","description":"#### Configures the accessibility of the domain.\n\n---\n\nBy default, the domain is accessible from anywhere on the internet but is still protected by IAM.\nYou can restrict access by making the domain available only to resources within your stack's VPC.","_MdxDesc":{"sd":"<p> Configures the accessibility of the domain.</p>\n","ld":"<p>By default, the domain is accessible from anywhere on the internet but is still protected by IAM.\nYou can restrict access by making the domain available only to resources within your stack&#39;s VPC.</p>\n"}}},"additionalProperties":false},"OpenSearchClusterConfig":{"type":"object","properties":{"instanceType":{"description":"#### The instance type for the data nodes.\n\n---\n\nData nodes handle data storage, indexing, and query processing.\nFor production setups, it is recommended to pair data nodes with dedicated master nodes to improve cluster stability.\n\nFor a list of supported instance types, see the [AWS documentation](https://docs.aws.amazon.com/opensearch-service/latest/developerguide/supported-instance-types.html).","type":"string","_MdxDesc":{"sd":"<p> The instance type for the data nodes.</p>\n","ld":"<p>Data nodes handle data storage, indexing, and query processing.\nFor production setups, it is recommended to pair data nodes with dedicated master nodes to improve cluster stability.</p>\n<p>For a list of supported instance types, see the <a href=\"https://docs.aws.amazon.com/opensearch-service/latest/developerguide/supported-instance-types.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"instanceCount":{"description":"#### The number of data nodes in the cluster.\n\n---\n\nData nodes handle data storage, indexing, and query processing.\nFor production setups, it is recommended to pair data nodes with dedicated master nodes to improve cluster stability.","type":"number","_MdxDesc":{"sd":"<p> The number of data nodes in the cluster.</p>\n","ld":"<p>Data nodes handle data storage, indexing, and query processing.\nFor production setups, it is recommended to pair data nodes with dedicated master nodes to improve cluster stability.</p>\n"}},"dedicatedMasterType":{"description":"#### The instance type for the dedicated master nodes.\n\n---\n\nDedicated master nodes manage the cluster state and coordinate node activities but do not store data or serve queries.\nThey are recommended for clusters with three or more nodes to improve stability and prevent split-brain scenarios.\nThe master instance type should be appropriately sized based on the number of nodes and shards in the cluster.\n\nThe number of master nodes should always be odd (3, 5, or 7) for quorum-based fault tolerance.\n\nFor more details, see the [AWS documentation on dedicated master nodes](https://docs.aws.amazon.com/opensearch-service/latest/developerguide/managedomains-dedicatedmasternodes.html).","type":"string","_MdxDesc":{"sd":"<p> The instance type for the dedicated master nodes.</p>\n","ld":"<p>Dedicated master nodes manage the cluster state and coordinate node activities but do not store data or serve queries.\nThey are recommended for clusters with three or more nodes to improve stability and prevent split-brain scenarios.\nThe master instance type should be appropriately sized based on the number of nodes and shards in the cluster.</p>\n<p>The number of master nodes should always be odd (3, 5, or 7) for quorum-based fault tolerance.</p>\n<p>For more details, see the <a href=\"https://docs.aws.amazon.com/opensearch-service/latest/developerguide/managedomains-dedicatedmasternodes.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on dedicated master nodes</a>.</p>\n"}},"dedicatedMasterCount":{"description":"#### The number of dedicated master nodes.\n\n---\n\nDedicated master nodes manage the cluster state and coordinate node activities but do not store data or serve queries.\nThey are recommended for clusters with three or more nodes to improve stability and prevent split-brain scenarios.\nThe number of master nodes should always be odd (3, 5, or 7) for quorum-based fault tolerance.\n\nFor more details, see the [AWS documentation on dedicated master nodes](https://docs.aws.amazon.com/opensearch-service/latest/developerguide/managedomains-dedicatedmasternodes.html).","type":"number","_MdxDesc":{"sd":"<p> The number of dedicated master nodes.</p>\n","ld":"<p>Dedicated master nodes manage the cluster state and coordinate node activities but do not store data or serve queries.\nThey are recommended for clusters with three or more nodes to improve stability and prevent split-brain scenarios.\nThe number of master nodes should always be odd (3, 5, or 7) for quorum-based fault tolerance.</p>\n<p>For more details, see the <a href=\"https://docs.aws.amazon.com/opensearch-service/latest/developerguide/managedomains-dedicatedmasternodes.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on dedicated master nodes</a>.</p>\n"}},"warmType":{"description":"#### The instance type for the warm nodes.\n\n---\n\nWarm nodes use UltraWarm storage to store infrequently accessed or older data, optimizing costs for time-series or log data.\nData on warm nodes remains searchable but with higher query latency compared to hot nodes.\nThis is ideal for retaining historical data without impacting the performance of frequently accessed data.\n\nFor more details, see the [AWS documentation on UltraWarm storage](https://docs.aws.amazon.com/opensearch-service/latest/developerguide/ultrawarm.html).","type":"string","_MdxDesc":{"sd":"<p> The instance type for the warm nodes.</p>\n","ld":"<p>Warm nodes use UltraWarm storage to store infrequently accessed or older data, optimizing costs for time-series or log data.\nData on warm nodes remains searchable but with higher query latency compared to hot nodes.\nThis is ideal for retaining historical data without impacting the performance of frequently accessed data.</p>\n<p>For more details, see the <a href=\"https://docs.aws.amazon.com/opensearch-service/latest/developerguide/ultrawarm.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on UltraWarm storage</a>.</p>\n"}},"warmCount":{"description":"#### The number of warm nodes.\n\n---\n\nWarm nodes use UltraWarm storage to store infrequently accessed or older data, optimizing costs for time-series or log data.\nData on warm nodes remains searchable but with higher query latency compared to hot nodes.\nThis is ideal for retaining historical data without impacting the performance of frequently accessed data.\n\nFor more details, see the [AWS documentation on UltraWarm storage](https://docs.aws.amazon.com/opensearch-service/latest/developerguide/ultrawarm.html).","type":"number","_MdxDesc":{"sd":"<p> The number of warm nodes.</p>\n","ld":"<p>Warm nodes use UltraWarm storage to store infrequently accessed or older data, optimizing costs for time-series or log data.\nData on warm nodes remains searchable but with higher query latency compared to hot nodes.\nThis is ideal for retaining historical data without impacting the performance of frequently accessed data.</p>\n<p>For more details, see the <a href=\"https://docs.aws.amazon.com/opensearch-service/latest/developerguide/ultrawarm.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on UltraWarm storage</a>.</p>\n"}},"multiAzDisabled":{"description":"#### Disables Multi-Availability Zone (AZ) awareness for the cluster.\n\n---\n\nBy default, Multi-AZ awareness is enabled for any cluster with more than one node.\nThis means OpenSearch Service allocates nodes and replica index shards across multiple AZs to prevent data loss and minimize downtime.\n\nDisabling zone awareness is not recommended.\n\nFor more details, see the [AWS documentation on Multi-AZ clusters](https://docs.aws.amazon.com/opensearch-service/latest/developerguide/managedomains-multiaz.html).","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disables Multi-Availability Zone (AZ) awareness for the cluster.</p>\n","ld":"<p>By default, Multi-AZ awareness is enabled for any cluster with more than one node.\nThis means OpenSearch Service allocates nodes and replica index shards across multiple AZs to prevent data loss and minimize downtime.</p>\n<p>Disabling zone awareness is not recommended.</p>\n<p>For more details, see the <a href=\"https://docs.aws.amazon.com/opensearch-service/latest/developerguide/managedomains-multiaz.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on Multi-AZ clusters</a>.</p>\n"}},"standbyEnabled":{"description":"#### Enables a Multi-AZ cluster with a standby AZ.\n\n---\n\nWhen enabled, this option ensures high availability and consistent performance by distributing nodes and data copies across three AZs, with one serving as a standby.\nThis allows the standby AZ to take over during a failure without causing re-balancing or availability issues.\n\nThis feature enforces several best practices, including:\n- OpenSearch version 1.3 or higher.\n- Auto-Tune enabled on the domain.\n- Three dedicated master nodes and data nodes.\n- Only GP3 or SSD-backed instances from a subset of supported instance types.\n\nFor more details, see the [AWS documentation on Multi-AZ with Standby](https://docs.aws.amazon.com/opensearch-service/latest/developerguide/managedomains-multiaz.html).","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enables a Multi-AZ cluster with a standby AZ.</p>\n","ld":"<p>When enabled, this option ensures high availability and consistent performance by distributing nodes and data copies across three AZs, with one serving as a standby.\nThis allows the standby AZ to take over during a failure without causing re-balancing or availability issues.</p>\n<p>This feature enforces several best practices, including:</p>\n<ul>\n<li>OpenSearch version 1.3 or higher.</li>\n<li>Auto-Tune enabled on the domain.</li>\n<li>Three dedicated master nodes and data nodes.</li>\n<li>Only GP3 or SSD-backed instances from a subset of supported instance types.</li>\n</ul>\n<p>For more details, see the <a href=\"https://docs.aws.amazon.com/opensearch-service/latest/developerguide/managedomains-multiaz.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on Multi-AZ with Standby</a>.</p>\n"}}},"additionalProperties":false,"required":["instanceCount","instanceType"]},"OpenSearchStorage":{"type":"object","properties":{"size":{"description":"#### The size of the EBS volume for each data node, in GiB.\n\n---\n\nThe minimum and maximum size of an EBS volume depends on the volume type and the instance type it is attached to.\nFor more information, see the [EBS volume size limits](https://docs.aws.amazon.com/opensearch-service/latest/developerguide/limits.html#ebsresource) in the Amazon OpenSearch Service Developer Guide.","type":"number","_MdxDesc":{"sd":"<p> The size of the EBS volume for each data node, in GiB.</p>\n","ld":"<p>The minimum and maximum size of an EBS volume depends on the volume type and the instance type it is attached to.\nFor more information, see the <a href=\"https://docs.aws.amazon.com/opensearch-service/latest/developerguide/limits.html#ebsresource\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">EBS volume size limits</a> in the Amazon OpenSearch Service Developer Guide.</p>\n"}},"iops":{"description":"#### The provisioned IOPS per data node.\n\n---\n\nThe number of I/O operations per second (IOPS) that the volume supports.\nThis applies only to instances with the **GP3** volume type.","default":3000,"type":"number","_MdxDesc":{"sd":"<p> The provisioned IOPS per data node.</p>\n","ld":"<p>The number of I/O operations per second (IOPS) that the volume supports.\nThis applies only to instances with the <strong>GP3</strong> volume type.</p>\n"}},"throughput":{"description":"#### The provisioned throughput per data node, in MiB/s.\n\n---\n\nThe throughput of the EBS volumes attached to data nodes.\nThis applies only to instances with the **GP3** volume type.","default":125,"type":"number","_MdxDesc":{"sd":"<p> The provisioned throughput per data node, in MiB/s.</p>\n","ld":"<p>The throughput of the EBS volumes attached to data nodes.\nThis applies only to instances with the <strong>GP3</strong> volume type.</p>\n"}}},"additionalProperties":false,"required":["size"]},"OpenSearchLogConfiguration":{"type":"object","properties":{"errorLogs":{"$ref":"#/definitions/OpenSearchLogRetentionSettings","description":"#### Error logs.\n\n---\n\nError logs can help with troubleshooting issues such as:\n- Script compilation errors\n- Invalid queries\n- Indexing issues\n- Snapshot failures\n- Index State Management migration failures\n\nIf you enable error logs, OpenSearch Service will publish log lines of `WARN`, `ERROR`, and `FATAL` to CloudWatch, along with several exceptions from the `DEBUG` level.\n\nFor more details, see the [AWS documentation](https://docs.aws.amazon.com/opensearch-service/latest/developerguide/createdomain-configure-slow-logs.html).","_MdxDesc":{"sd":"<p> Error logs.</p>\n","ld":"<p>Error logs can help with troubleshooting issues such as:</p>\n<ul>\n<li>Script compilation errors</li>\n<li>Invalid queries</li>\n<li>Indexing issues</li>\n<li>Snapshot failures</li>\n<li>Index State Management migration failures</li>\n</ul>\n<p>If you enable error logs, OpenSearch Service will publish log lines of <code>WARN</code>, <code>ERROR</code>, and <code>FATAL</code> to CloudWatch, along with several exceptions from the <code>DEBUG</code> level.</p>\n<p>For more details, see the <a href=\"https://docs.aws.amazon.com/opensearch-service/latest/developerguide/createdomain-configure-slow-logs.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation</a>.</p>\n"}},"searchSlowLogs":{"$ref":"#/definitions/OpenSearchLogRetentionSettings","description":"#### Search slow logs.\n\n---\n\nSearch slow logs rely on thresholds that you define to determine what qualifies as a \"slow\" search.\nFor example, you might decide that a query is slow if it takes more than 15 seconds to complete.\n\nFor more information on slow logs and how to configure thresholds, see the [OpenSearch documentation](https://opensearch.org/docs/latest/monitoring-your-cluster/logs/#slow-logs).","_MdxDesc":{"sd":"<p> Search slow logs.</p>\n","ld":"<p>Search slow logs rely on thresholds that you define to determine what qualifies as a &quot;slow&quot; search.\nFor example, you might decide that a query is slow if it takes more than 15 seconds to complete.</p>\n<p>For more information on slow logs and how to configure thresholds, see the <a href=\"https://opensearch.org/docs/latest/monitoring-your-cluster/logs/#slow-logs\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">OpenSearch documentation</a>.</p>\n"}},"indexSlowLogs":{"$ref":"#/definitions/OpenSearchLogRetentionSettings","description":"#### Indexing slow logs.\n\n---\n\nThese logs rely on thresholds to define what qualifies as a \"slow\" indexing operation.\nFor example, you might decide that an indexing operation is slow if it takes more than 15 seconds to complete.\n\nFor more information on slow logs and how to configure thresholds, see the [OpenSearch documentation](https://opensearch.org/docs/latest/monitoring-your-cluster/logs/#slow-logs).","_MdxDesc":{"sd":"<p> Indexing slow logs.</p>\n","ld":"<p>These logs rely on thresholds to define what qualifies as a &quot;slow&quot; indexing operation.\nFor example, you might decide that an indexing operation is slow if it takes more than 15 seconds to complete.</p>\n<p>For more information on slow logs and how to configure thresholds, see the <a href=\"https://opensearch.org/docs/latest/monitoring-your-cluster/logs/#slow-logs\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">OpenSearch documentation</a>.</p>\n"}}},"additionalProperties":false},"OpenSearchLogRetentionSettings":{"type":"object","properties":{"disabled":{"description":"#### Disables log collection.\n\n---\n\nLog collection is enabled by default.","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Disables log collection.</p>\n","ld":"<p>Log collection is enabled by default.</p>\n"}},"retentionDays":{"description":"#### The number of days to retain logs in the CloudWatch log group.\n\n---","default":14,"enum":[1,120,14,150,180,1827,3,30,365,3653,400,5,545,60,7,731,90],"type":"number","_MdxDesc":{"sd":"<p> The number of days to retain logs in the CloudWatch log group.</p>\n"}}},"additionalProperties":false},"OpenSearchAccessibility":{"type":"object","properties":{"accessibilityMode":{"description":"#### Configures the accessibility mode for this domain.\n\n---\n\nThe following modes are supported:\n\n- **`internet`**: The least restrictive mode. The domain can be accessed from anywhere on the internet.\n- **`vpc`**: The domain can only be accessed from resources within your VPC. This includes any [function](https://docs.stacktape.com/compute-resources/lambda-functions) (with `joinDefaultVpc: true`), [batch job](https://docs.stacktape.com/compute-resources/batch-jobs), or [container workload](https://docs.stacktape.com/compute-resources/multi-container-workloads) in your stack, provided they have the required credentials.\n- **`scoping-workloads-in-vpc`**: Similar to `vpc` mode, but more restrictive. In addition to being in the same VPC, resources must have the necessary security group permissions to access the cluster. For functions, batch jobs, and container services, these permissions can be granted using the `connectTo` property in their respective configurations.\n\n> **Note:** If you launch a domain with `vpc` or `scoping-workloads-in-vpc` accessibility, you cannot later switch it to `internet` mode, and vice versa. You must create a new domain and migrate your data.\n\nTo learn more about VPCs, see the [VPC documentation](https://docs.stacktape.com/user-guides/vpcs/).","default":"internet","enum":["internet","scoping-workloads-in-vpc","vpc"],"type":"string","_MdxDesc":{"sd":"<p> Configures the accessibility mode for this domain.</p>\n","ld":"<p>The following modes are supported:</p>\n<ul>\n<li><strong><code>internet</code></strong>: The least restrictive mode. The domain can be accessed from anywhere on the internet.</li>\n<li><strong><code>vpc</code></strong>: The domain can only be accessed from resources within your VPC. This includes any <a href=\"/compute-resources/lambda-functions/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">function</a> (with <code>joinDefaultVpc: true</code>), <a href=\"/compute-resources/batch-jobs/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">batch job</a>, or <a href=\"/compute-resources/multi-container-workloads/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">container workload</a> in your stack, provided they have the required credentials.</li>\n<li><strong><code>scoping-workloads-in-vpc</code></strong>: Similar to <code>vpc</code> mode, but more restrictive. In addition to being in the same VPC, resources must have the necessary security group permissions to access the cluster. For functions, batch jobs, and container services, these permissions can be granted using the <code>connectTo</code> property in their respective configurations.</li>\n</ul>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> If you launch a domain with <code>vpc</code> or <code>scoping-workloads-in-vpc</code> accessibility, you cannot later switch it to <code>internet</code> mode, and vice versa. You must create a new domain and migrate your data.</p>\n</div>\n</div><p>To learn more about VPCs, see the <a href=\"/user-guides/vpcs/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">VPC documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["accessibilityMode"]},"EfsFilesystem":{"description":"#### EFS Filesystem\n\n---\n\nA fully managed, elastic, and scalable file storage service for use with AWS cloud services.","type":"object","properties":{"type":{"type":"string","const":"efs-filesystem"},"properties":{"$ref":"#/definitions/EfsFilesystemProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["type"],"_MdxDesc":{"sd":"<p> EFS Filesystem</p>\n","ld":"<p>A fully managed, elastic, and scalable file storage service for use with AWS cloud services.</p>\n"}},"EfsFilesystemProps":{"type":"object","properties":{"backupEnabled":{"description":"#### Enables automatic backups for the EFS filesystem.\n\n---\n\n- Uses AWS Backup with a default daily backup schedule and a 35-day retention period.\n- Backups are incremental, meaning only changed, added, or removed files are copied after the initial backup.\n- Data from all storage classes (Standard, Infrequent Access, and Archive) is backed up without incurring data access charges.\n- Restored data is always placed in the Standard storage class.\n- The default backup plan and vault are automatically created and managed by AWS.","type":"boolean","_MdxDesc":{"sd":"<p> Enables automatic backups for the EFS filesystem.</p>\n","ld":"<ul>\n<li>Uses AWS Backup with a default daily backup schedule and a 35-day retention period.</li>\n<li>Backups are incremental, meaning only changed, added, or removed files are copied after the initial backup.</li>\n<li>Data from all storage classes (Standard, Infrequent Access, and Archive) is backed up without incurring data access charges.</li>\n<li>Restored data is always placed in the Standard storage class.</li>\n<li>The default backup plan and vault are automatically created and managed by AWS.</li>\n</ul>\n"}},"throughputMode":{"description":"#### Determines how throughput is managed for the filesystem.\n\n---\n\n- **`elastic`** (Recommended): Best for unpredictable or spiky workloads, such as web apps or CI/CD pipelines. It is ideal for workloads that use high throughput for 5% of the time or less, and it automatically scales up and down based on demand.\n\n- **`provisioned`**: Best for steady, predictable workloads that require high throughput more than 5% of the time, such as media streaming or production databases. This mode requires setting `provisionedThroughputInMibps`.\n\n- **`bursting`**: Scales with storage size, providing a baseline of 50 KiB/s per GiB of storage. This mode is suitable for small development environments and team file shares, but you may hit performance limits if burst credits are depleted.","default":"elastic","enum":["bursting","elastic","provisioned"],"type":"string","_MdxDesc":{"sd":"<p> Determines how throughput is managed for the filesystem.</p>\n","ld":"<ul>\n<li><p><strong><code>elastic</code></strong> (Recommended): Best for unpredictable or spiky workloads, such as web apps or CI/CD pipelines. It is ideal for workloads that use high throughput for 5% of the time or less, and it automatically scales up and down based on demand.</p>\n</li>\n<li><p><strong><code>provisioned</code></strong>: Best for steady, predictable workloads that require high throughput more than 5% of the time, such as media streaming or production databases. This mode requires setting <code>provisionedThroughputInMibps</code>.</p>\n</li>\n<li><p><strong><code>bursting</code></strong>: Scales with storage size, providing a baseline of 50 KiB/s per GiB of storage. This mode is suitable for small development environments and team file shares, but you may hit performance limits if burst credits are depleted.</p>\n</li>\n</ul>\n"}},"provisionedThroughputInMibps":{"description":"#### The desired throughput in MiB/s when using `provisioned` mode.\n\n---\n\n- Required when `throughputMode` is set to `provisioned`.\n- Must be a value greater than 0.\n- Additional fees are charged based on the provisioned throughput.\n- This value can be modified at any time to adjust performance.\n\nExample: `100` means 100 MiB/s of guaranteed throughput.","type":"number","_MdxDesc":{"sd":"<p> The desired throughput in MiB/s when using <code>provisioned</code> mode.</p>\n","ld":"<ul>\n<li>Required when <code>throughputMode</code> is set to <code>provisioned</code>.</li>\n<li>Must be a value greater than 0.</li>\n<li>Additional fees are charged based on the provisioned throughput.</li>\n<li>This value can be modified at any time to adjust performance.</li>\n</ul>\n<p>Example: <code>100</code> means 100 MiB/s of guaranteed throughput.</p>\n"}}},"additionalProperties":false},"LambdaFunction":{"description":"#### A serverless compute resource that runs your code in response to events.\n\n---\n\nLambda functions are short-lived, stateless, and scale automatically. You only pay for the compute time you consume.","type":"object","properties":{"type":{"type":"string","const":"function"},"properties":{"$ref":"#/definitions/LambdaFunctionProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> A serverless compute resource that runs your code in response to events.</p>\n","ld":"<p>Lambda functions are short-lived, stateless, and scale automatically. You only pay for the compute time you consume.</p>\n"}},"LambdaFunctionProps":{"type":"object","properties":{"packaging":{"$ref":"#/definitions/LambdaPackaging","description":"#### Configures how your code is packaged and deployed.\n\n---\n\nStacktape supports two packaging methods:\n- `stacktape-lambda-buildpack`: Stacktape automatically builds and packages your code from a specified source file. This is the recommended and simplest approach.\n- `custom-artifact`: You provide a path to a pre-built deployment package (e.g., a zip file). Stacktape will handle the upload.\n\nYour deployment packages are stored in an S3 bucket managed by Stacktape.","_MdxDesc":{"sd":"<p> Configures how your code is packaged and deployed.</p>\n","ld":"<p>Stacktape supports two packaging methods:</p>\n<ul>\n<li><code>stacktape-lambda-buildpack</code>: Stacktape automatically builds and packages your code from a specified source file. This is the recommended and simplest approach.</li>\n<li><code>custom-artifact</code>: You provide a path to a pre-built deployment package (e.g., a zip file). Stacktape will handle the upload.</li>\n</ul>\n<p>Your deployment packages are stored in an S3 bucket managed by Stacktape.</p>\n"}},"events":{"description":"#### A list of event sources that trigger this function.\n\n---\n\nFunctions are executed in response to events from various sources, such as:\n- HTTP requests from an API Gateway.\n- File uploads to an S3 bucket.\n- Messages in an SQS queue.\n- Scheduled events (cron jobs).\n\nStacktape automatically configures the necessary permissions for the function to be invoked by these event sources.\nThe data passed to the function (the \"event payload\") varies depending on the trigger.","type":"array","items":{"anyOf":[{"$ref":"#/definitions/ApplicationLoadBalancerIntegration"},{"$ref":"#/definitions/KafkaTopicIntegration"},{"$ref":"#/definitions/SnsIntegration"},{"$ref":"#/definitions/SqsIntegration"},{"$ref":"#/definitions/KinesisIntegration"},{"$ref":"#/definitions/DynamoDbIntegration"},{"$ref":"#/definitions/S3Integration"},{"$ref":"#/definitions/ScheduleIntegration"},{"$ref":"#/definitions/AlarmIntegration"},{"$ref":"#/definitions/CloudwatchLogIntegration"},{"$ref":"#/definitions/HttpApiIntegration"},{"$ref":"#/definitions/EventBusIntegration"}]},"_MdxDesc":{"sd":"<p> A list of event sources that trigger this function.</p>\n","ld":"<p>Functions are executed in response to events from various sources, such as:</p>\n<ul>\n<li>HTTP requests from an API Gateway.</li>\n<li>File uploads to an S3 bucket.</li>\n<li>Messages in an SQS queue.</li>\n<li>Scheduled events (cron jobs).</li>\n</ul>\n<p>Stacktape automatically configures the necessary permissions for the function to be invoked by these event sources.\nThe data passed to the function (the &quot;event payload&quot;) varies depending on the trigger.</p>\n"}},"environment":{"description":"#### A list of environment variables available to the function at runtime.\n\n---\n\nEnvironment variables are ideal for providing configuration details to your function, such as database connection strings, API keys, or other dynamic parameters.","type":"array","items":{"$ref":"#/definitions/EnvironmentVar"},"_MdxDesc":{"sd":"<p> A list of environment variables available to the function at runtime.</p>\n","ld":"<p>Environment variables are ideal for providing configuration details to your function, such as database connection strings, API keys, or other dynamic parameters.</p>\n"}},"runtime":{"$ref":"#/definitions/LambdaRuntime","description":"#### The runtime environment for the function.\n\n---\n\nStacktape automatically detects the programming language and selects the latest appropriate runtime. For example, `.ts` and `.js` files will use a recent Node.js runtime.\nFor a full list of available runtimes, see the [AWS Lambda runtimes documentation](https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html).","_MdxDesc":{"sd":"<p> The runtime environment for the function.</p>\n","ld":"<p>Stacktape automatically detects the programming language and selects the latest appropriate runtime. For example, <code>.ts</code> and <code>.js</code> files will use a recent Node.js runtime.\nFor a full list of available runtimes, see the <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS Lambda runtimes documentation</a>.</p>\n"}},"architecture":{"description":"#### The processor architecture for the function.\n\n---\n\nYou can choose between two architectures:\n- **x86_64**: The traditional 64-bit architecture, offering broad compatibility with libraries and dependencies.\n- **arm64**: A modern ARM-based architecture that can offer better performance and cost-effectiveness for some workloads.\n\nIf you use `stacktape-lambda-buildpack`, Stacktape automatically builds for the selected architecture. If you provide a custom artifact, ensure it's compiled for the target architecture.","default":"x86_64","enum":["arm64","x86_64"],"type":"string","_MdxDesc":{"sd":"<p> The processor architecture for the function.</p>\n","ld":"<p>You can choose between two architectures:</p>\n<ul>\n<li><strong>x86_64</strong>: The traditional 64-bit architecture, offering broad compatibility with libraries and dependencies.</li>\n<li><strong>arm64</strong>: A modern ARM-based architecture that can offer better performance and cost-effectiveness for some workloads.</li>\n</ul>\n<p>If you use <code>stacktape-lambda-buildpack</code>, Stacktape automatically builds for the selected architecture. If you provide a custom artifact, ensure it&#39;s compiled for the target architecture.</p>\n"}},"memory":{"description":"#### The amount of memory (in MB) allocated to the function.\n\n---\n\nThis setting also influences the amount of CPU power your function receives. Higher memory allocation results in more powerful CPU resources.\nThe value must be between 128 MB and 10,240 MB.","type":"number","_MdxDesc":{"sd":"<p> The amount of memory (in MB) allocated to the function.</p>\n","ld":"<p>This setting also influences the amount of CPU power your function receives. Higher memory allocation results in more powerful CPU resources.\nThe value must be between 128 MB and 10,240 MB.</p>\n"}},"timeout":{"description":"#### The maximum execution time for the function, in seconds.\n\n---\n\nIf the function runs longer than this, it will be terminated. The maximum allowed timeout is 900 seconds (15 minutes).","default":10,"type":"number","_MdxDesc":{"sd":"<p> The maximum execution time for the function, in seconds.</p>\n","ld":"<p>If the function runs longer than this, it will be terminated. The maximum allowed timeout is 900 seconds (15 minutes).</p>\n"}},"joinDefaultVpc":{"description":"#### Connects the function to your stack's default Virtual Private Cloud (VPC).\n\n---\n\nBy default, functions are not connected to a VPC. Connecting to a VPC is necessary to access resources within that VPC, such as relational databases or Redis clusters.\n\n> **Important:** When a function joins a VPC, it loses direct internet access.\n\nIf your function needs to access S3 or DynamoDB, Stacktape automatically creates VPC endpoints to ensure connectivity.\nTo learn more, see the [Stacktape VPCs documentation](https://docs.stacktape.com/user-guides/vpcs).","type":"boolean","_MdxDesc":{"sd":"<p> Connects the function to your stack&#39;s default Virtual Private Cloud (VPC).</p>\n","ld":"<p>By default, functions are not connected to a VPC. Connecting to a VPC is necessary to access resources within that VPC, such as relational databases or Redis clusters.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Important:</strong> When a function joins a VPC, it loses direct internet access.</p>\n</div>\n</div><p>If your function needs to access S3 or DynamoDB, Stacktape automatically creates VPC endpoints to ensure connectivity.\nTo learn more, see the <a href=\"/user-guides/vpcs/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape VPCs documentation</a>.</p>\n"}},"tags":{"description":"#### A list of tags to apply to the function.\n\n---\n\nTags are key-value pairs that help you organize, identify, and manage your AWS resources. You can specify up to 50 tags.","type":"array","items":{"$ref":"#/definitions/CloudformationTag"},"_MdxDesc":{"sd":"<p> A list of tags to apply to the function.</p>\n","ld":"<p>Tags are key-value pairs that help you organize, identify, and manage your AWS resources. You can specify up to 50 tags.</p>\n"}},"destinations":{"$ref":"#/definitions/LambdaFunctionDestinations","description":"#### Configures destinations for asynchronous invocations.\n\n---\n\nThis feature allows you to route the results of a function's execution (success or failure) to another service for further processing. This is useful for building simple, event-driven workflows.\nSupported destinations include SQS queues, SNS topics, EventBridge event buses, and other Lambda functions.\n\nFor more information, see the [AWS Lambda Destinations documentation](https://aws.amazon.com/blogs/compute/introducing-aws-lambda-destinations/).","_MdxDesc":{"sd":"<p> Configures destinations for asynchronous invocations.</p>\n","ld":"<p>This feature allows you to route the results of a function&#39;s execution (success or failure) to another service for further processing. This is useful for building simple, event-driven workflows.\nSupported destinations include SQS queues, SNS topics, EventBridge event buses, and other Lambda functions.</p>\n<p>For more information, see the <a href=\"https://aws.amazon.com/blogs/compute/introducing-aws-lambda-destinations/\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS Lambda Destinations documentation</a>.</p>\n"}},"logging":{"$ref":"#/definitions/LambdaFunctionLogging","description":"#### Configures the logging behavior for the function.\n\n---\n\nFunction logs, including `stdout` and `stderr`, are automatically sent to a CloudWatch log group.\nBy default, logs are retained for 180 days.\n\nYou can view logs in two ways:\n  - Through the AWS CloudWatch console. Use the `stacktape stack-info` command to get a direct link.\n  - Using the `stacktape logs` command to stream logs directly to your terminal.","_MdxDesc":{"sd":"<p> Configures the logging behavior for the function.</p>\n","ld":"<p>Function logs, including <code>stdout</code> and <code>stderr</code>, are automatically sent to a CloudWatch log group.\nBy default, logs are retained for 180 days.</p>\n<p>You can view logs in two ways:</p>\n<ul>\n<li>Through the AWS CloudWatch console. Use the <code>stacktape stack-info</code> command to get a direct link.</li>\n<li>Using the <code>stacktape logs</code> command to stream logs directly to your terminal.</li>\n</ul>\n"}},"provisionedConcurrency":{"description":"#### Configures the provisioned concurrency for the function.\n\n---\n\nThis is the number of pre-initialized execution environments allocated to your function.\nThese execution environments are ready to respond immediately to incoming function requests.\nProvisioned concurrency is useful for reducing cold start latencies for functions and designed to make functions available with double-digit millisecond response times.\nGenerally, interactive workloads benefit the most from the feature.\nThose are applications with users initiating requests, such as web and mobile applications, and are the most sensitive to latency.\nAsynchronous workloads, such as data processing pipelines, are often less latency sensitive and so do not usually need provisioned concurrency.\nConfiguring provisioned concurrency incurs additional charges to your AWS account.","type":"number","_MdxDesc":{"sd":"<p> Configures the provisioned concurrency for the function.</p>\n","ld":"<p>This is the number of pre-initialized execution environments allocated to your function.\nThese execution environments are ready to respond immediately to incoming function requests.\nProvisioned concurrency is useful for reducing cold start latencies for functions and designed to make functions available with double-digit millisecond response times.\nGenerally, interactive workloads benefit the most from the feature.\nThose are applications with users initiating requests, such as web and mobile applications, and are the most sensitive to latency.\nAsynchronous workloads, such as data processing pipelines, are often less latency sensitive and so do not usually need provisioned concurrency.\nConfiguring provisioned concurrency incurs additional charges to your AWS account.</p>\n"}},"reservedConcurrency":{"description":"#### Configures the reserved concurrency for the function.\n\n---\n\nThis sets both the maximum and minimum number of concurrent instances allocated to your function.\nWhen a function has reserved concurrency, no other function can use that concurrency.\nReserved concurrency is useful for ensuring that your most critical functions always have enough concurrency to handle incoming requests.\nAdditionally, reserved concurrency can be used for limiting concurrency to prevent overwhelming downstream resources, like database connections.\nReserved concurrency acts as both a lower and upper bound - it reserves the specified capacity exclusively for your function while also preventing it from scaling beyond that limit.\nConfiguring reserved concurrency for a function incurs no additional charges.","type":"number","_MdxDesc":{"sd":"<p> Configures the reserved concurrency for the function.</p>\n","ld":"<p>This sets both the maximum and minimum number of concurrent instances allocated to your function.\nWhen a function has reserved concurrency, no other function can use that concurrency.\nReserved concurrency is useful for ensuring that your most critical functions always have enough concurrency to handle incoming requests.\nAdditionally, reserved concurrency can be used for limiting concurrency to prevent overwhelming downstream resources, like database connections.\nReserved concurrency acts as both a lower and upper bound - it reserves the specified capacity exclusively for your function while also preventing it from scaling beyond that limit.\nConfiguring reserved concurrency for a function incurs no additional charges.</p>\n"}},"layers":{"description":"#### A list of layers to add to the function.\n\n---\n\nA Lambda layer is a .zip file archive that contains supplementary code or data.\nLayers usually contain library dependencies, a custom runtime, or configuration files.\n\nUsing layers:\n1. Package your layer content. This means creating a .zip file archive. For more information, see [Packaging your layer content](https://docs.aws.amazon.com/lambda/latest/dg/packaging-layers.html).\n2. Create the layer in Lambda. For more information, see [Creating and deleting layers in Lambda](https://docs.aws.amazon.com/lambda/latest/dg/creating-deleting-layers.html)\n3. Get the layer ARN and put it in the `layers` property of the function.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of layers to add to the function.</p>\n","ld":"<p>A Lambda layer is a .zip file archive that contains supplementary code or data.\nLayers usually contain library dependencies, a custom runtime, or configuration files.</p>\n<p>Using layers:</p>\n<ol>\n<li>Package your layer content. This means creating a .zip file archive. For more information, see <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/packaging-layers.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Packaging your layer content</a>.</li>\n<li>Create the layer in Lambda. For more information, see <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/creating-deleting-layers.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Creating and deleting layers in Lambda</a></li>\n<li>Get the layer ARN and put it in the <code>layers</code> property of the function.</li>\n</ol>\n"}},"deployment":{"$ref":"#/definitions/LambdaDeploymentConfig","description":"#### Configures the deployment strategy for updating the function.\n\n---\n\nThis allows for safe, gradual deployments. Instead of instantly replacing the old version, traffic is shifted to the new version over time. This provides an opportunity to monitor for issues and roll back if necessary.\n\nSupported strategies include:\n  - **Canary**: A percentage of traffic is shifted to the new version for a specified time before routing all traffic.\n  - **Linear**: Traffic is shifted in equal increments over a specified period.\n  - **AllAtOnce**: All traffic is shifted to the new version immediately.","_MdxDesc":{"sd":"<p> Configures the deployment strategy for updating the function.</p>\n","ld":"<p>This allows for safe, gradual deployments. Instead of instantly replacing the old version, traffic is shifted to the new version over time. This provides an opportunity to monitor for issues and roll back if necessary.</p>\n<p>Supported strategies include:</p>\n<ul>\n<li><strong>Canary</strong>: A percentage of traffic is shifted to the new version for a specified time before routing all traffic.</li>\n<li><strong>Linear</strong>: Traffic is shifted in equal increments over a specified period.</li>\n<li><strong>AllAtOnce</strong>: All traffic is shifted to the new version immediately.</li>\n</ul>\n"}},"alarms":{"description":"#### A list of additional alarms to associate with this function.\n\n---\n\nThese alarms are merged with any globally configured alarms from the Stacktape console.","type":"array","items":{"$ref":"#/definitions/LambdaAlarm"},"_MdxDesc":{"sd":"<p> A list of additional alarms to associate with this function.</p>\n","ld":"<p>These alarms are merged with any globally configured alarms from the Stacktape console.</p>\n"}},"disabledGlobalAlarms":{"description":"#### A list of global alarm names to disable for this function.\n\n---\n\nUse this to prevent specific globally-defined alarms from applying to this function.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of global alarm names to disable for this function.</p>\n","ld":"<p>Use this to prevent specific globally-defined alarms from applying to this function.</p>\n"}},"url":{"$ref":"#/definitions/LambdaUrlConfig","description":"#### Configures a dedicated HTTPS endpoint (URL) for the function.\n\n---\n\nThis provides a simple way to invoke your function over HTTPS without needing an API Gateway. The URL is automatically generated.","_MdxDesc":{"sd":"<p> Configures a dedicated HTTPS endpoint (URL) for the function.</p>\n","ld":"<p>This provides a simple way to invoke your function over HTTPS without needing an API Gateway. The URL is automatically generated.</p>\n"}},"cdn":{"$ref":"#/definitions/CdnConfiguration","description":"#### Places an AWS CloudFront Content Delivery Network (CDN) in front of the function.\n\n---\n\nA CDN can significantly improve performance and reduce latency by caching the function's responses at edge locations closer to your users.\nThis is useful for reducing load on your function, lowering bandwidth costs, and improving security.","_MdxDesc":{"sd":"<p> Places an AWS CloudFront Content Delivery Network (CDN) in front of the function.</p>\n","ld":"<p>A CDN can significantly improve performance and reduce latency by caching the function&#39;s responses at edge locations closer to your users.\nThis is useful for reducing load on your function, lowering bandwidth costs, and improving security.</p>\n"}},"storage":{"description":"#### The size (in MB) of the function's `/tmp` directory.\n\n---\n\nThis provides ephemeral storage for your function. The size can be between 512 MB and 10,240 MB.","default":512,"type":"number","_MdxDesc":{"sd":"<p> The size (in MB) of the function&#39;s <code>/tmp</code> directory.</p>\n","ld":"<p>This provides ephemeral storage for your function. The size can be between 512 MB and 10,240 MB.</p>\n"}},"volumeMounts":{"description":"#### A list of file system volumes to mount to the function.\n\n---\n\nVolumes provide persistent storage that can be shared across multiple function invocations and even multiple functions.\nThis is useful for workloads that require access to a shared file system.\nCurrently, only EFS (Elastic File System) volumes are supported.\n\n> **Note:** The function must be connected to a VPC to use this feature (`joinDefaultVpc: true`).","type":"array","items":{"$ref":"#/definitions/LambdaEfsMount"},"_MdxDesc":{"sd":"<p> A list of file system volumes to mount to the function.</p>\n","ld":"<p>Volumes provide persistent storage that can be shared across multiple function invocations and even multiple functions.\nThis is useful for workloads that require access to a shared file system.\nCurrently, only EFS (Elastic File System) volumes are supported.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> The function must be connected to a VPC to use this feature (<code>joinDefaultVpc: true</code>).</p>\n</div>\n</div>"}},"connectTo":{"description":"#### Connect To\n\n---\n\nConfigures access to other resources in your stack and AWS services. By specifying resources here, Stacktape automatically:\n- Configures IAM role permissions.\n- Sets up security group rules to allow network traffic.\n- Injects environment variables with connection details into the compute resource.\n\nEnvironment variables are named `STP_[RESOURCE_NAME]_[VARIABLE_NAME]` (e.g., `STP_MY_DATABASE_CONNECTION_STRING`).\n\n---\n\n#### Granted Permissions and Injected Variables:\n\n**`Bucket`**\n- **Permissions:** List, create, get, delete, and tag objects.\n- **Variables:** `NAME`, `ARN`\n\n**`DynamoDbTable`**\n- **Permissions:** Get, put, update, delete, scan, and query items; describe table stream.\n- **Variables:** `NAME`, `ARN`, `STREAM_ARN`\n\n**`MongoDbAtlasCluster`**\n- **Permissions:** Allows connection to clusters with `accessibilityMode` set to `scoping-workloads-in-vpc`. Creates a temporary user for secure, credential-less access.\n- **Variables:** `CONNECTION_STRING`\n\n**`RelationalDatabase`**\n- **Permissions:** Allows connection to databases with `accessibilityMode` set to `scoping-workloads-in-vpc`.\n- **Variables:** `CONNECTION_STRING`, `JDBC_CONNECTION_STRING`, `HOST`, `PORT`. For Aurora clusters, `READER_CONNECTION_STRING`, `READER_JDBC_CONNECTION_STRING`, and `READER_HOST` are also included.\n\n**`RedisCluster`**\n- **Permissions:** Allows connection to clusters with `accessibilityMode` set to `scoping-workloads-in-vpc`.\n- **Variables:** `HOST`, `READER_HOST`, `PORT`\n\n**`EventBus`**\n- **Permissions:** Publish events.\n- **Variables:** `ARN`\n\n**`Function`**\n- **Permissions:** Invoke the function, including via its URL if enabled.\n- **Variables:** `ARN`\n\n**`BatchJob`**\n- **Permissions:** Submit, list, describe, and terminate jobs; manage state machine executions.\n- **Variables:** `JOB_DEFINITION_ARN`, `STATE_MACHINE_ARN`\n\n**`UserAuthPool`**\n- **Permissions:** Full control over the user pool (`cognito-idp:*`).\n- **Variables:** `ID`, `CLIENT_ID`, `ARN`\n\n**`SnsTopic`**\n- **Permissions:** Confirm, list, publish, and manage subscriptions.\n- **Variables:** `ARN`, `NAME`\n\n**`SqsQueue`**\n- **Permissions:** Send, receive, delete, and purge messages.\n- **Variables:** `ARN`, `NAME`, `URL`\n\n**`UpstashKafkaTopic`**\n- **Variables:** `TOPIC_NAME`, `TOPIC_ID`, `USERNAME`, `PASSWORD`, `TCP_ENDPOINT`, `REST_URL`\n\n**`UpstashRedis`**\n- **Variables:** `HOST`, `PORT`, `PASSWORD`, `REST_TOKEN`, `REST_URL`, `REDIS_URL`\n\n**`PrivateService`**\n- **Variables:** `ADDRESS`\n\n**`aws:ses` (Macro)**\n- **Permissions:** Full permissions for AWS SES (`ses:*`).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Connect To</p>\n","ld":"<p>Configures access to other resources in your stack and AWS services. By specifying resources here, Stacktape automatically:</p>\n<ul>\n<li>Configures IAM role permissions.</li>\n<li>Sets up security group rules to allow network traffic.</li>\n<li>Injects environment variables with connection details into the compute resource.</li>\n</ul>\n<p>Environment variables are named <code>STP_[RESOURCE_NAME]_[VARIABLE_NAME]</code> (e.g., <code>STP_MY_DATABASE_CONNECTION_STRING</code>).</p>\n"}},"iamRoleStatements":{"description":"#### Custom IAM Role Statements\n\n---\n\nA list of raw AWS IAM role statements to append to the resource's role, allowing for fine-grained permission control.","type":"array","items":{"$ref":"#/definitions/StpIamRoleStatement"},"_MdxDesc":{"sd":"<p> Custom IAM Role Statements</p>\n","ld":"<p>A list of raw AWS IAM role statements to append to the resource&#39;s role, allowing for fine-grained permission control.</p>\n"}}},"additionalProperties":false,"required":["packaging"]},"KafkaTopicIntegration":{"description":"#### Triggers a function when new messages are available in a Kafka topic.","type":"object","properties":{"type":{"type":"string","const":"kafka-topic"},"properties":{"$ref":"#/definitions/KafkaTopicIntegrationProps","description":"#### Properties of the integration","_MdxDesc":{"sd":"<p> Properties of the integration</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> Triggers a function when new messages are available in a Kafka topic.</p>\n"}},"KafkaTopicIntegrationProps":{"type":"object","properties":{"customKafkaConfiguration":{"$ref":"#/definitions/CustomKafkaEventSource","description":"#### The details of your Kafka cluster.\n\n---\n\nSpecifies the bootstrap servers and topic name.","_MdxDesc":{"sd":"<p> The details of your Kafka cluster.</p>\n","ld":"<p>Specifies the bootstrap servers and topic name.</p>\n"}},"batchSize":{"description":"#### The maximum number of records to process in a single batch.\n\n---\n\nThe function will be invoked with up to this many records. Maximum is 10,000.","default":100,"type":"number","_MdxDesc":{"sd":"<p> The maximum number of records to process in a single batch.</p>\n","ld":"<p>The function will be invoked with up to this many records. Maximum is 10,000.</p>\n"}},"maxBatchWindowSeconds":{"description":"#### The maximum time (in seconds) to wait before invoking the function with a batch of records.\n\n---\n\nThe function will be triggered when either the `batchSize` is reached or this time window expires.\nMaximum is 300 seconds.","default":0.5,"type":"number","_MdxDesc":{"sd":"<p> The maximum time (in seconds) to wait before invoking the function with a batch of records.</p>\n","ld":"<p>The function will be triggered when either the <code>batchSize</code> is reached or this time window expires.\nMaximum is 300 seconds.</p>\n"}}},"additionalProperties":false},"CustomKafkaEventSource":{"type":"object","properties":{"bootstrapServers":{"description":"#### A list of `host:port` addresses for your Kafka brokers.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of <code>host:port</code> addresses for your Kafka brokers.</p>\n"}},"topicName":{"description":"#### The name of the Kafka topic to consume messages from.","type":"string","_MdxDesc":{"sd":"<p> The name of the Kafka topic to consume messages from.</p>\n"}},"authentication":{"description":"#### The authentication method for connecting to the Kafka cluster.\n\n---\n\n- `SASL`: Authenticate using a username and password (PLAIN or SCRAM).\n- `MTLS`: Authenticate using a client-side TLS certificate.","anyOf":[{"$ref":"#/definitions/KafkaSASLAuth"},{"$ref":"#/definitions/KafkaMTLSAuth"}],"_MdxDesc":{"sd":"<p> The authentication method for connecting to the Kafka cluster.</p>\n","ld":"<ul>\n<li><code>SASL</code>: Authenticate using a username and password (PLAIN or SCRAM).</li>\n<li><code>MTLS</code>: Authenticate using a client-side TLS certificate.</li>\n</ul>\n"}}},"additionalProperties":false,"required":["authentication","bootstrapServers","topicName"]},"KafkaSASLAuth":{"type":"object","properties":{"type":{"description":"#### The SASL authentication protocol.\n\n---\n\n- `BASIC_AUTH`: SASL/PLAIN\n- `SASL_SCRAM_256_AUTH`: SASL SCRAM-256\n- `SASL_SCRAM_512_AUTH`: SASL SCRAM-512","enum":["BASIC_AUTH","SASL_SCRAM_256_AUTH","SASL_SCRAM_512_AUTH"],"type":"string","_MdxDesc":{"sd":"<p> The SASL authentication protocol.</p>\n","ld":"<ul>\n<li><code>BASIC_AUTH</code>: SASL/PLAIN</li>\n<li><code>SASL_SCRAM_256_AUTH</code>: SASL SCRAM-256</li>\n<li><code>SASL_SCRAM_512_AUTH</code>: SASL SCRAM-512</li>\n</ul>\n"}},"properties":{"$ref":"#/definitions/KafkaSASLAuthProps","description":"#### Properties of authentication method","_MdxDesc":{"sd":"<p> Properties of authentication method</p>\n"}}},"additionalProperties":false,"required":["properties","type"]},"KafkaSASLAuthProps":{"type":"object","properties":{"authenticationSecretArn":{"description":"#### The ARN of a secret containing the Kafka credentials.\n\n---\n\nThe secret must be a JSON object with `username` and `password` keys.\nYou can create secrets using the `stacktape secret:create` command.","type":"string","_MdxDesc":{"sd":"<p> The ARN of a secret containing the Kafka credentials.</p>\n","ld":"<p>The secret must be a JSON object with <code>username</code> and <code>password</code> keys.\nYou can create secrets using the <code>stacktape secret:create</code> command.</p>\n"}}},"additionalProperties":false,"required":["authenticationSecretArn"]},"KafkaMTLSAuth":{"type":"object","properties":{"type":{"description":"#### The authentication protocol.\n\n---\n\n`MTLS`: Mutual TLS authentication.","type":"string","const":"MTLS","_MdxDesc":{"sd":"<p> The authentication protocol.</p>\n","ld":"<p><code>MTLS</code>: Mutual TLS authentication.</p>\n"}},"properties":{"$ref":"#/definitions/KafkaMTLSAuthProps","description":"#### Properties of authentication method","_MdxDesc":{"sd":"<p> Properties of authentication method</p>\n"}}},"additionalProperties":false,"required":["properties","type"]},"KafkaMTLSAuthProps":{"type":"object","properties":{"clientCertificate":{"description":"#### The ARN of a secret containing the client certificate.\n\n---\n\nThis secret should contain the certificate chain (X.509 PEM), private key (PKCS#8 PEM), and an optional private key password.\nYou can create secrets using the `stacktape secret:create` command.","type":"string","_MdxDesc":{"sd":"<p> The ARN of a secret containing the client certificate.</p>\n","ld":"<p>This secret should contain the certificate chain (X.509 PEM), private key (PKCS#8 PEM), and an optional private key password.\nYou can create secrets using the <code>stacktape secret:create</code> command.</p>\n"}},"serverRootCaCertificate":{"description":"#### The ARN of a secret containing the server's root CA certificate.\n\n---\n\nYou can create secrets using the `stacktape secret:create` command.","type":"string","_MdxDesc":{"sd":"<p> The ARN of a secret containing the server&#39;s root CA certificate.</p>\n","ld":"<p>You can create secrets using the <code>stacktape secret:create</code> command.</p>\n"}}},"additionalProperties":false,"required":["clientCertificate"]},"AlarmIntegration":{"type":"object","properties":{"type":{"type":"string","const":"cloudwatch-alarm"},"properties":{"$ref":"#/definitions/AlarmIntegrationProps","description":"#### Properties of the integration","_MdxDesc":{"sd":"<p> Properties of the integration</p>\n"}}},"additionalProperties":false,"required":["properties","type"]},"AlarmIntegrationProps":{"type":"object","properties":{"alarmName":{"description":"#### The name of the alarm (defined in the `alarms` section) that will trigger the function.","type":"string","_MdxDesc":{"sd":"<p> The name of the alarm (defined in the <code>alarms</code> section) that will trigger the function.</p>\n"}}},"additionalProperties":false,"required":["alarmName"]},"LambdaFunctionDestinations":{"type":"object","properties":{"onSuccess":{"description":"#### The ARN of the destination for successful invocations.\n\n---\n\nWhen the function executes successfully, a JSON object with the execution result is sent to this destination (e.g., an SQS queue, SNS topic, or another Lambda).\nThis can be used to chain Lambda functions together or to trigger other processes.\nFor details on the payload format, refer to the [Stacktape documentation](https://docs.stacktape.com/compute-resources/lambda-functions#event-bus-event).","type":"string","_MdxDesc":{"sd":"<p> The ARN of the destination for successful invocations.</p>\n","ld":"<p>When the function executes successfully, a JSON object with the execution result is sent to this destination (e.g., an SQS queue, SNS topic, or another Lambda).\nThis can be used to chain Lambda functions together or to trigger other processes.\nFor details on the payload format, refer to the <a href=\"/compute-resources/lambda-functions/#event-bus-event\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape documentation</a>.</p>\n"}},"onFailure":{"description":"#### The ARN of the destination for failed invocations.\n\n---\n\nWhen the function execution fails, a JSON object containing details about the error is sent to this destination.\nThis is useful for error handling, retries, or sending notifications.\nFor details on the payload format, refer to the [Stacktape documentation](https://docs.stacktape.com/compute-resources/lambda-functions#event-bus-event).","type":"string","_MdxDesc":{"sd":"<p> The ARN of the destination for failed invocations.</p>\n","ld":"<p>When the function execution fails, a JSON object containing details about the error is sent to this destination.\nThis is useful for error handling, retries, or sending notifications.\nFor details on the payload format, refer to the <a href=\"/compute-resources/lambda-functions/#event-bus-event\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">Stacktape documentation</a>.</p>\n"}}},"additionalProperties":false},"LambdaDeploymentConfig":{"type":"object","properties":{"strategy":{"description":"#### The strategy to use for deploying updates to the function.\n\n---\n\nSupported strategies:\n- **Canary10Percent5Minutes**: Shifts 10% of traffic, then the rest after 5 minutes.\n- **Canary10Percent10Minutes**: Shifts 10% of traffic, then the rest after 10 minutes.\n- **Canary10Percent15Minutes**: Shifts 10% of traffic, then the rest after 15 minutes.\n- **Canary10Percent30Minutes**: Shifts 10% of traffic, then the rest after 30 minutes.\n- **Linear10PercentEvery1Minute**: Shifts 10% of traffic every minute.\n- **Linear10PercentEvery2Minutes**: Shifts 10% of traffic every 2 minutes.\n- **Linear10PercentEvery3Minutes**: Shifts 10% of traffic every 3 minutes.\n- **Linear10PercentEvery10Minutes**: Shifts 10% of traffic every 10 minutes.\n- **AllAtOnce**: Shifts all traffic at once.","enum":["AllAtOnce","Canary10Percent10Minutes","Canary10Percent15Minutes","Canary10Percent30Minutes","Canary10Percent5Minutes","Linear10PercentEvery10Minutes","Linear10PercentEvery1Minute","Linear10PercentEvery2Minutes","Linear10PercentEvery3Minutes"],"type":"string","_MdxDesc":{"sd":"<p> The strategy to use for deploying updates to the function.</p>\n","ld":"<p>Supported strategies:</p>\n<ul>\n<li><strong>Canary10Percent5Minutes</strong>: Shifts 10% of traffic, then the rest after 5 minutes.</li>\n<li><strong>Canary10Percent10Minutes</strong>: Shifts 10% of traffic, then the rest after 10 minutes.</li>\n<li><strong>Canary10Percent15Minutes</strong>: Shifts 10% of traffic, then the rest after 15 minutes.</li>\n<li><strong>Canary10Percent30Minutes</strong>: Shifts 10% of traffic, then the rest after 30 minutes.</li>\n<li><strong>Linear10PercentEvery1Minute</strong>: Shifts 10% of traffic every minute.</li>\n<li><strong>Linear10PercentEvery2Minutes</strong>: Shifts 10% of traffic every 2 minutes.</li>\n<li><strong>Linear10PercentEvery3Minutes</strong>: Shifts 10% of traffic every 3 minutes.</li>\n<li><strong>Linear10PercentEvery10Minutes</strong>: Shifts 10% of traffic every 10 minutes.</li>\n<li><strong>AllAtOnce</strong>: Shifts all traffic at once.</li>\n</ul>\n"}},"beforeAllowTrafficFunction":{"description":"#### The name of a Lambda function to run before traffic shifting begins.\n\n---\n\nThis \"hook\" function is typically used to run validation checks before the new version receives production traffic.\nThe function must signal success or failure to CodeDeploy. See an example in the [documentation](/compute-resources/lambda-functions/#hook-functions).","type":"string","_MdxDesc":{"sd":"<p> The name of a Lambda function to run before traffic shifting begins.</p>\n","ld":"<p>This &quot;hook&quot; function is typically used to run validation checks before the new version receives production traffic.\nThe function must signal success or failure to CodeDeploy. See an example in the <a href=\"/compute-resources/lambda-functions/#hook-functions\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">documentation</a>.</p>\n"}},"afterTrafficShiftFunction":{"description":"#### The name of a Lambda function to run after all traffic has been shifted.\n\n---\n\nThis \"hook\" function is typically used for post-deployment validation.\nThe function must signal success or failure to CodeDeploy. See an example in the [documentation](/compute-resources/lambda-functions/#hook-functions).","type":"string","_MdxDesc":{"sd":"<p> The name of a Lambda function to run after all traffic has been shifted.</p>\n","ld":"<p>This &quot;hook&quot; function is typically used for post-deployment validation.\nThe function must signal success or failure to CodeDeploy. See an example in the <a href=\"/compute-resources/lambda-functions/#hook-functions\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["strategy"]},"LambdaAlarm":{"type":"object","properties":{"trigger":{"$ref":"#/definitions/LambdaAlarmTrigger"},"evaluation":{"$ref":"#/definitions/AlarmEvaluation","description":"#### Specifies the time window for evaluating the metric to determine if the alarm should be triggered.\n\n---\n\nDefines the duration and frequency of metric evaluation.","_MdxDesc":{"sd":"<p> Specifies the time window for evaluating the metric to determine if the alarm should be triggered.</p>\n","ld":"<p>Defines the duration and frequency of metric evaluation.</p>\n"}},"notificationTargets":{"description":"#### Defines where to send notifications when the alarm is triggered.\n\n---\n\nYou can specify a list of integrations, such as Slack, MS Teams, or email.","type":"array","items":{"$ref":"#/definitions/AlarmUserIntegration"},"_MdxDesc":{"sd":"<p> Defines where to send notifications when the alarm is triggered.</p>\n","ld":"<p>You can specify a list of integrations, such as Slack, MS Teams, or email.</p>\n"}},"description":{"description":"#### Custom description for the alarm\n---\n- If custom description is specified, it is used in the alarm notification message\n- Custom description is also used in the alarm description in the AWS console (If not provided, Stacktape generates default description.)","type":"string","_MdxDesc":{"sd":"<p> Custom description for the alarm</p>\n","ld":"<ul>\n<li>If custom description is specified, it is used in the alarm notification message</li>\n<li>Custom description is also used in the alarm description in the AWS console (If not provided, Stacktape generates default description.)</li>\n</ul>\n"}}},"additionalProperties":false,"required":["trigger"]},"LambdaAlarmTrigger":{"anyOf":[{"$ref":"#/definitions/LambdaErrorRateTrigger"},{"$ref":"#/definitions/LambdaDurationTrigger"}]},"LambdaErrorRateTrigger":{"type":"object","properties":{"type":{"type":"string","const":"lambda-error-rate"},"properties":{"$ref":"#/definitions/LambdaErrorRateTriggerProps"}},"additionalProperties":false,"required":["properties","type"]},"LambdaErrorRateTriggerProps":{"type":"object","properties":{"thresholdPercent":{"description":"#### The error rate percentage that triggers the alarm.\n\n---\n\nThe error rate is the percentage of Lambda invocations that result in an error.\nFor example, a value of 1 means the alarm will trigger if more than 1% of invocations fail.","type":"number","_MdxDesc":{"sd":"<p> The error rate percentage that triggers the alarm.</p>\n","ld":"<p>The error rate is the percentage of Lambda invocations that result in an error.\nFor example, a value of 1 means the alarm will trigger if more than 1% of invocations fail.</p>\n"}},"comparisonOperator":{"$ref":"#/definitions/ComparisonOperator","description":"#### The arithmetic operation to use when comparing the specified statistic and threshold.\n\n---\n\nSupported operators:\n- `GreaterThanThreshold`\n- `GreaterThanOrEqualToThreshold`\n- `LessThanThreshold`\n- `LessThanOrEqualToThreshold`","_MdxDesc":{"sd":"<p> The arithmetic operation to use when comparing the specified statistic and threshold.</p>\n","ld":"<p>Supported operators:</p>\n<ul>\n<li><code>GreaterThanThreshold</code></li>\n<li><code>GreaterThanOrEqualToThreshold</code></li>\n<li><code>LessThanThreshold</code></li>\n<li><code>LessThanOrEqualToThreshold</code></li>\n</ul>\n"}}},"additionalProperties":false,"required":["thresholdPercent"]},"LambdaDurationTrigger":{"type":"object","properties":{"type":{"type":"string","const":"lambda-duration"},"properties":{"$ref":"#/definitions/LambdaDurationTriggerProps"}},"additionalProperties":false,"required":["properties","type"]},"LambdaDurationTriggerProps":{"type":"object","properties":{"thresholdMilliseconds":{"description":"#### The execution duration in milliseconds that triggers the alarm.\n\n---\n\nBy default, the alarm triggers if the **average** execution time over the evaluation period is **greater than** the `thresholdMilliseconds`.\nYou can customize the behavior using the `statistic` and `comparisonOperator` properties.","type":"number","_MdxDesc":{"sd":"<p> The execution duration in milliseconds that triggers the alarm.</p>\n","ld":"<p>By default, the alarm triggers if the <strong>average</strong> execution time over the evaluation period is <strong>greater than</strong> the <code>thresholdMilliseconds</code>.\nYou can customize the behavior using the <code>statistic</code> and <code>comparisonOperator</code> properties.</p>\n"}},"comparisonOperator":{"$ref":"#/definitions/ComparisonOperator","description":"#### The arithmetic operation to use when comparing the specified statistic and threshold.\n\n---\n\nSupported operators:\n- `GreaterThanThreshold`\n- `GreaterThanOrEqualToThreshold`\n- `LessThanThreshold`\n- `LessThanOrEqualToThreshold`","_MdxDesc":{"sd":"<p> The arithmetic operation to use when comparing the specified statistic and threshold.</p>\n","ld":"<p>Supported operators:</p>\n<ul>\n<li><code>GreaterThanThreshold</code></li>\n<li><code>GreaterThanOrEqualToThreshold</code></li>\n<li><code>LessThanThreshold</code></li>\n<li><code>LessThanOrEqualToThreshold</code></li>\n</ul>\n"}},"statistic":{"$ref":"#/definitions/StatisticFunction","description":"#### The statistic to apply to the metric data points.\n\n---\n\nSupported statistics:\n- **avg**: The average of the metric values.\n- **sum**: The sum of the metric values.\n- **p90**: The 90th percentile. 90% of the data points are lower than this value.\n- **p95**: The 95th percentile. 95% of the data points are lower than this value.\n- **p99**: The 99th percentile. 99% of the data points are lower than this value.\n- **min**: The lowest value from the data points.\n- **max**: The highest value from the data points.","default":"avg","_MdxDesc":{"sd":"<p> The statistic to apply to the metric data points.</p>\n","ld":"<p>Supported statistics:</p>\n<ul>\n<li><strong>avg</strong>: The average of the metric values.</li>\n<li><strong>sum</strong>: The sum of the metric values.</li>\n<li><strong>p90</strong>: The 90th percentile. 90% of the data points are lower than this value.</li>\n<li><strong>p95</strong>: The 95th percentile. 95% of the data points are lower than this value.</li>\n<li><strong>p99</strong>: The 99th percentile. 99% of the data points are lower than this value.</li>\n<li><strong>min</strong>: The lowest value from the data points.</li>\n<li><strong>max</strong>: The highest value from the data points.</li>\n</ul>\n"}}},"additionalProperties":false,"required":["thresholdMilliseconds"]},"LambdaUrlConfig":{"type":"object","properties":{"enabled":{"description":"#### Enables the Lambda function URL.\n\n---\n\nWhen enabled, your function gets a dedicated HTTPS endpoint. The URL format is `https://{url-id}.lambda-url.{region}.on.aws`.","type":"boolean","_MdxDesc":{"sd":"<p> Enables the Lambda function URL.</p>\n","ld":"<p>When enabled, your function gets a dedicated HTTPS endpoint. The URL format is <code>https://{url-id}.lambda-url.{region}.on.aws</code>.</p>\n"}},"cors":{"$ref":"#/definitions/LambdaUrlCorsConfig","description":"#### Configures Cross-Origin Resource Sharing (CORS) for the function URL.\n\n---\n\nIf configured, these settings will override any CORS headers returned by the function itself.","_MdxDesc":{"sd":"<p> Configures Cross-Origin Resource Sharing (CORS) for the function URL.</p>\n","ld":"<p>If configured, these settings will override any CORS headers returned by the function itself.</p>\n"}},"authMode":{"description":"#### The authentication mode for the function URL.\n\n---\n\n- `AWS_IAM`: Only authenticated AWS users and roles with the necessary permissions can invoke the URL.\n- `NONE`: The URL is public and can be invoked by anyone.","default":"NONE","enum":["AWS_IAM","NONE"],"type":"string","_MdxDesc":{"sd":"<p> The authentication mode for the function URL.</p>\n","ld":"<ul>\n<li><code>AWS_IAM</code>: Only authenticated AWS users and roles with the necessary permissions can invoke the URL.</li>\n<li><code>NONE</code>: The URL is public and can be invoked by anyone.</li>\n</ul>\n"}},"responseStreamEnabled":{"description":"#### Enables response streaming.\n\n---\n\nWith streaming, the function can start sending parts of the response as they become available, which can improve Time to First Byte (TTFB).\nIt also increases the maximum response size to 20MB (from the standard 6MB).\nTo use this, you need to use a specific handler provided by AWS. See the [AWS documentation on response streaming](https://docs.aws.amazon.com/lambda/latest/dg/configuration-response-streaming.html#config-rs-write-functions-handler).","type":"boolean","_MdxDesc":{"sd":"<p> Enables response streaming.</p>\n","ld":"<p>With streaming, the function can start sending parts of the response as they become available, which can improve Time to First Byte (TTFB).\nIt also increases the maximum response size to 20MB (from the standard 6MB).\nTo use this, you need to use a specific handler provided by AWS. See the <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/configuration-response-streaming.html#config-rs-write-functions-handler\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS documentation on response streaming</a>.</p>\n"}}},"additionalProperties":false,"required":["enabled"]},"LambdaUrlCorsConfig":{"type":"object","properties":{"enabled":{"description":"#### Enables Cross-Origin Resource Sharing (CORS).\n\n---\n\nIf enabled without other properties, a permissive default CORS configuration is used:\n- `AllowedMethods`: `*`\n- `AllowedOrigins`: `*`\n- `AllowedHeaders`: `Content-Type`, `X-Amz-Date`, `Authorization`, `X-Api-Key`, `X-Amz-Security-Token`, `X-Amz-User-Agent`","default":false,"type":"boolean","_MdxDesc":{"sd":"<p> Enables Cross-Origin Resource Sharing (CORS).</p>\n","ld":"<p>If enabled without other properties, a permissive default CORS configuration is used:</p>\n<ul>\n<li><code>AllowedMethods</code>: <code>*</code></li>\n<li><code>AllowedOrigins</code>: <code>*</code></li>\n<li><code>AllowedHeaders</code>: <code>Content-Type</code>, <code>X-Amz-Date</code>, <code>Authorization</code>, <code>X-Api-Key</code>, <code>X-Amz-Security-Token</code>, <code>X-Amz-User-Agent</code></li>\n</ul>\n"}},"allowedOrigins":{"description":"#### A list of origins that are allowed to make cross-domain requests.\n\n---\n\nAn origin is the combination of the protocol, domain, and port. For example: `https://example.com`.","default":"*","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of origins that are allowed to make cross-domain requests.</p>\n","ld":"<p>An origin is the combination of the protocol, domain, and port. For example: <code>https://example.com</code>.</p>\n"}},"allowedHeaders":{"description":"#### A list of allowed HTTP headers in a cross-origin request.\n\n---\n\nThis is used in response to a preflight `Access-Control-Request-Headers` header.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of allowed HTTP headers in a cross-origin request.</p>\n","ld":"<p>This is used in response to a preflight <code>Access-Control-Request-Headers</code> header.</p>\n"}},"allowedMethods":{"description":"#### A list of allowed HTTP methods for cross-origin requests.\n\n---\n\nBy default, Stacktape determines the allowed methods based on the event integrations configured for the function.","type":"array","items":{"$ref":"#/definitions/HttpMethod"},"_MdxDesc":{"sd":"<p> A list of allowed HTTP methods for cross-origin requests.</p>\n","ld":"<p>By default, Stacktape determines the allowed methods based on the event integrations configured for the function.</p>\n"}},"allowCredentials":{"description":"#### Specifies whether the browser should include credentials (such as cookies) in the CORS request.","type":"boolean","_MdxDesc":{"sd":"<p> Specifies whether the browser should include credentials (such as cookies) in the CORS request.</p>\n"}},"exposedResponseHeaders":{"description":"#### A list of response headers that should be accessible to scripts running in the browser.","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> A list of response headers that should be accessible to scripts running in the browser.</p>\n"}},"maxAge":{"description":"#### The maximum time (in seconds) that a browser can cache the response to a preflight request.","type":"number","_MdxDesc":{"sd":"<p> The maximum time (in seconds) that a browser can cache the response to a preflight request.</p>\n"}}},"additionalProperties":false,"required":["enabled"]},"LambdaEfsMount":{"type":"object","properties":{"type":{"description":"#### The type of the volume mount.","type":"string","const":"efs","_MdxDesc":{"sd":"<p> The type of the volume mount.</p>\n"}},"properties":{"$ref":"#/definitions/LambdaEfsMountProps","description":"#### Properties for the EFS volume mount.","_MdxDesc":{"sd":"<p> Properties for the EFS volume mount.</p>\n"}}},"additionalProperties":false,"required":["properties","type"]},"LambdaEfsMountProps":{"type":"object","properties":{"efsFilesystemName":{"description":"#### The name of the EFS filesystem to mount.\n\n---\n\nThis must match the name of an EFS filesystem defined in your Stacktape configuration.","type":"string","_MdxDesc":{"sd":"<p> The name of the EFS filesystem to mount.</p>\n","ld":"<p>This must match the name of an EFS filesystem defined in your Stacktape configuration.</p>\n"}},"rootDirectory":{"description":"#### The root directory within the EFS filesystem to mount.\n\n---\n\nThis restricts the function's access to a specific directory within the filesystem. If not specified, the function can access the entire filesystem.","default":"/","type":"string","_MdxDesc":{"sd":"<p> The root directory within the EFS filesystem to mount.</p>\n","ld":"<p>This restricts the function&#39;s access to a specific directory within the filesystem. If not specified, the function can access the entire filesystem.</p>\n"}},"mountPath":{"description":"#### The path where the EFS volume will be mounted inside the function.\n\n---\n\nThis must be an absolute path starting with `/mnt/`. For example: `/mnt/data`.","type":"string","_MdxDesc":{"sd":"<p> The path where the EFS volume will be mounted inside the function.</p>\n","ld":"<p>This must be an absolute path starting with <code>/mnt/</code>. For example: <code>/mnt/data</code>.</p>\n"}}},"additionalProperties":false,"required":["efsFilesystemName","mountPath"]},"EdgeLambdaFunction":{"description":"#### A specialized Lambda function that runs at AWS edge locations, close to your users.\n\n---\n\nEdge Lambda functions are designed to be executed by a Content Delivery Network (CDN) in response to CDN events.\nThey allow you to customize the content delivered through the CDN, enabling things like header manipulation, URL rewrites, and A/B testing.","type":"object","properties":{"type":{"type":"string","const":"edge-lambda-function"},"properties":{"$ref":"#/definitions/EdgeLambdaFunctionProps"},"overrides":{"description":"#### Resource Overrides\n\n---\n\nOverrides properties of the underlying CloudFormation resources that Stacktape creates.\n\nChild resources are identified by their CloudFormation logical ID (e.g., `MyBucketBucket`). You can find these IDs by running `stacktape stack:info --detailed`.\n\nFor a list of properties that can be overridden, refer to the [AWS CloudFormation documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html).","type":"object","additionalProperties":{"type":"object","additionalProperties":{}},"_MdxDesc":{"sd":"<p> Resource Overrides</p>\n","ld":"<p>Overrides properties of the underlying CloudFormation resources that Stacktape creates.</p>\n<p>Child resources are identified by their CloudFormation logical ID (e.g., <code>MyBucketBucket</code>). You can find these IDs by running <code>stacktape stack:info --detailed</code>.</p>\n<p>For a list of properties that can be overridden, refer to the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">AWS CloudFormation documentation</a>.</p>\n"}}},"additionalProperties":false,"required":["properties","type"],"_MdxDesc":{"sd":"<p> A specialized Lambda function that runs at AWS edge locations, close to your users.</p>\n","ld":"<p>Edge Lambda functions are designed to be executed by a Content Delivery Network (CDN) in response to CDN events.\nThey allow you to customize the content delivered through the CDN, enabling things like header manipulation, URL rewrites, and A/B testing.</p>\n"}},"EdgeLambdaFunctionProps":{"type":"object","properties":{"packaging":{"$ref":"#/definitions/LambdaPackaging","description":"#### Configures how your code is packaged and deployed.\n\n---\n\nStacktape supports two packaging methods:\n- `stacktape-lambda-buildpack`: Stacktape automatically builds and packages your code from a specified source file. This is the recommended and simplest approach.\n- `custom-artifact`: You provide a path to a pre-built deployment package (e.g., a zip file). Stacktape will handle the upload.\n\nYour deployment packages are stored in an S3 bucket managed by Stacktape.","_MdxDesc":{"sd":"<p> Configures how your code is packaged and deployed.</p>\n","ld":"<p>Stacktape supports two packaging methods:</p>\n<ul>\n<li><code>stacktape-lambda-buildpack</code>: Stacktape automatically builds and packages your code from a specified source file. This is the recommended and simplest approach.</li>\n<li><code>custom-artifact</code>: You provide a path to a pre-built deployment package (e.g., a zip file). Stacktape will handle the upload.</li>\n</ul>\n<p>Your deployment packages are stored in an S3 bucket managed by Stacktape.</p>\n"}},"runtime":{"description":"#### The runtime environment for the function.\n\n---\n\nStacktape automatically detects the programming language and selects an appropriate runtime.\nEdge Lambda functions support a specific set of runtimes.","enum":["nodejs18.x","nodejs20.x","nodejs22.x","nodejs24.x","python3.10","python3.11","python3.12","python3.13","python3.8","python3.9"],"type":"string","_MdxDesc":{"sd":"<p> The runtime environment for the function.</p>\n","ld":"<p>Stacktape automatically detects the programming language and selects an appropriate runtime.\nEdge Lambda functions support a specific set of runtimes.</p>\n"}},"memory":{"description":"#### The amount of memory (in MB) allocated to the function.\n\n---\n\nThe maximum memory depends on when the function is triggered in the CDN lifecycle:\n- `onRequest` or `onResponse` (viewer-facing events): 128 MB\n- `onOriginRequest` or `onOriginResponse` (origin-facing events): 10,240 MB\n\nFor more details, see the [CDN documentation](https://docs.stacktape.com/other-resources/cdns/#edge-lambda-functions).","default":128,"type":"number","_MdxDesc":{"sd":"<p> The amount of memory (in MB) allocated to the function.</p>\n","ld":"<p>The maximum memory depends on when the function is triggered in the CDN lifecycle:</p>\n<ul>\n<li><code>onRequest</code> or <code>onResponse</code> (viewer-facing events): 128 MB</li>\n<li><code>onOriginRequest</code> or <code>onOriginResponse</code> (origin-facing events): 10,240 MB</li>\n</ul>\n<p>For more details, see the <a href=\"/other-resources/cdns/#edge-lambda-functions\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">CDN documentation</a>.</p>\n"}},"timeout":{"description":"#### The maximum execution time for the function, in seconds.\n\n---\n\nThe maximum timeout depends on when the function is triggered in the CDN lifecycle:\n- `onRequest` or `onResponse` (viewer-facing events): 5 seconds\n- `onOriginRequest` or `onOriginResponse` (origin-facing events): 30 seconds\n\nFor more details, see the [CDN documentation](https://docs.stacktape.com/other-resources/cdns/#edge-lambda-functions).","default":3,"type":"number","_MdxDesc":{"sd":"<p> The maximum execution time for the function, in seconds.</p>\n","ld":"<p>The maximum timeout depends on when the function is triggered in the CDN lifecycle:</p>\n<ul>\n<li><code>onRequest</code> or <code>onResponse</code> (viewer-facing events): 5 seconds</li>\n<li><code>onOriginRequest</code> or <code>onOriginResponse</code> (origin-facing events): 30 seconds</li>\n</ul>\n<p>For more details, see the <a href=\"/other-resources/cdns/#edge-lambda-functions\" style=\"font-weight: bold;\" target=\"_blank\" rel=\"noreferrer\" onclick=\"event.stopPropagation();\">CDN documentation</a>.</p>\n"}},"connectTo":{"description":"#### Grants the function access to other resources in your stack.\n\n---\n\nBy listing resources here, Stacktape automatically configures the necessary IAM permissions and security group rules.\nIt also injects environment variables with connection details into the function's runtime.\n\n> **Note:** Environment variable injection is not supported for Edge Lambda functions.\n> Also, Edge Lambda functions cannot connect to resources within a VPC.\n\n**Supported Resources:**\n\n- **Bucket**: Grants permissions to list, create, get, and delete objects.\n- **DynamoDB table**: Grants permissions for item manipulation and table scanning/querying.\n- **MongoDB Atlas cluster**: Allows secure, credential-less access to the cluster.\n- **Relational database**: Allows connections to the database.\n- **Redis cluster**: Allows connections to the Redis cluster.\n- **Event bus**: Grants permission to publish events.\n- **Function**: Grants permission to invoke another function.\n- **Batch job**: Grants permissions to manage batch jobs.\n- **User auth pool**: Grants full control over a Cognito User Pool.\n- **Upstash Kafka topic**: Provides connection details.\n- **Upstash Redis**: Provides connection details.\n- **aws:ses**: Grants full permissions to Amazon Simple Email Service (SES).","type":"array","items":{"type":"string"},"_MdxDesc":{"sd":"<p> Grants the function access to other resources in your stack.</p>\n","ld":"<p>By listing resources here, Stacktape automatically configures the necessary IAM permissions and security group rules.\nIt also injects environment variables with connection details into the function&#39;s runtime.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Note:</strong> Environment variable injection is not supported for Edge Lambda functions.\nAlso, Edge Lambda functions cannot connect to resources within a VPC.</p>\n</div>\n</div><p><strong>Supported Resources:</strong></p>\n<ul>\n<li><strong>Bucket</strong>: Grants permissions to list, create, get, and delete objects.</li>\n<li><strong>DynamoDB table</strong>: Grants permissions for item manipulation and table scanning/querying.</li>\n<li><strong>MongoDB Atlas cluster</strong>: Allows secure, credential-less access to the cluster.</li>\n<li><strong>Relational database</strong>: Allows connections to the database.</li>\n<li><strong>Redis cluster</strong>: Allows connections to the Redis cluster.</li>\n<li><strong>Event bus</strong>: Grants permission to publish events.</li>\n<li><strong>Function</strong>: Grants permission to invoke another function.</li>\n<li><strong>Batch job</strong>: Grants permissions to manage batch jobs.</li>\n<li><strong>User auth pool</strong>: Grants full control over a Cognito User Pool.</li>\n<li><strong>Upstash Kafka topic</strong>: Provides connection details.</li>\n<li><strong>Upstash Redis</strong>: Provides connection details.</li>\n<li><strong>aws:ses</strong>: Grants full permissions to Amazon Simple Email Service (SES).</li>\n</ul>\n"}},"iamRoleStatements":{"description":"#### A list of raw AWS IAM role statements to add to the function's execution role.\n\n---\n\nUse this for fine-grained control over the function's permissions.","type":"array","items":{"$ref":"#/definitions/StpIamRoleStatement"},"_MdxDesc":{"sd":"<p> A list of raw AWS IAM role statements to add to the function&#39;s execution role.</p>\n","ld":"<p>Use this for fine-grained control over the function&#39;s permissions.</p>\n"}},"logging":{"$ref":"#/definitions/LambdaFunctionLogging","description":"#### Configures the logging behavior for the function.\n\n---\n\nFunction logs (`stdout` and `stderr`) are sent to CloudWatch log groups.\n\n> **Important:** Since Edge Lambda functions run in multiple AWS regions, logs are delivered to a log group in the region where the function was executed.\n> You can use the `stacktape stack-info` command to get links to the log groups in each region.","_MdxDesc":{"sd":"<p> Configures the logging behavior for the function.</p>\n","ld":"<p>Function logs (<code>stdout</code> and <code>stderr</code>) are sent to CloudWatch log groups.</p>\n<div class=\"highlight-wrapper\">\n  <div style=\"margin-right: 16px;line-height: 0px;\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ED8B00\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n  </svg>\n  </div>\n  <div><p><strong>Important:</strong> Since Edge Lambda functions run in multiple AWS regions, logs are delivered to a log group in the region where the function was executed.\nYou can use the <code>stacktape stack-info</code> command to get links to the log groups in each region.</p>\n</div>\n</div>"}}},"additionalProperties":false,"required":["packaging"]},"default":{"type":"object","properties":{"Type":{"type":"string"},"DependsOn":{"anyOf":[{"type":"array","items":{"type":"string"}},{"$ref":"#/definitions/IntrinsicFunction"},{"type":"string"}]},"Properties":{"type":"object","additionalProperties":{}},"Metadata":{"type":"object","additionalProperties":{}},"CreationPolicy":{"$ref":"#/definitions/CreationPolicy"},"DeletionPolicy":{"$ref":"#/definitions/DeletionPolicy"},"UpdatePolicy":{"$ref":"#/definitions/UpdatePolicy"},"Condition":{"$ref":"#/definitions/Value<string>"}},"additionalProperties":false,"required":["Type"]},"IntrinsicFunction":{"type":"object","properties":{"name":{"type":"string"},"payload":{}},"additionalProperties":false,"required":["name","payload"]},"CreationPolicy":{"type":"object","properties":{"AutoScalingCreationPolicy":{"type":"object","properties":{"MinSuccessfulInstancesPercent":{"$ref":"#/definitions/Value<number>"}},"additionalProperties":false},"ResourceSignal":{"type":"object","properties":{"Count":{"$ref":"#/definitions/Value<number>"},"Timeout":{"$ref":"#/definitions/Value<string>"}},"additionalProperties":false}},"additionalProperties":false},"Value<number>":{"anyOf":[{"$ref":"#/definitions/IntrinsicFunction"},{"type":"number"}]},"Value<string>":{"anyOf":[{"$ref":"#/definitions/IntrinsicFunction"},{"type":"string"}]},"DeletionPolicy":{"enum":["Delete","Retain","Snapshot"],"type":"string"},"UpdatePolicy":{"type":"object","properties":{"AutoScalingReplacingUpdate":{"type":"object","properties":{"WillReplace":{"$ref":"#/definitions/Value<boolean>"}},"additionalProperties":false},"AutoScalingRollingUpdate":{"type":"object","properties":{"MaxBatchSize":{"$ref":"#/definitions/Value<number>"},"MinInstancesInService":{"$ref":"#/definitions/Value<number>"},"MinSuccessfulInstancesPercent":{"$ref":"#/definitions/Value<number>"},"PauseTime":{"$ref":"#/definitions/Value<string>"},"SuspendProcesses":{"$ref":"#/definitions/List<string>"},"WaitOnResourceSignals":{"$ref":"#/definitions/Value<boolean>"}},"additionalProperties":false},"AutoScalingScheduledAction":{"type":"object","properties":{"IgnoreUnmodifiedGroupSizeProperties":{"$ref":"#/definitions/Value<boolean>"}},"additionalProperties":false},"CodeDeployLambdaAliasUpdate":{"type":"object","properties":{"AfterAllowTrafficHook":{"$ref":"#/definitions/Value<string>"},"ApplicationName":{"$ref":"#/definitions/Value<string>"},"BeforeAllowTrafficHook":{"$ref":"#/definitions/Value<string>"},"DeploymentGroupName":{"$ref":"#/definitions/Value<string>"}},"additionalProperties":false,"required":["AfterAllowTrafficHook","ApplicationName","BeforeAllowTrafficHook","DeploymentGroupName"]}},"additionalProperties":false},"Value<boolean>":{"anyOf":[{"$ref":"#/definitions/IntrinsicFunction"},{"type":"boolean"}]},"List<string>":{"anyOf":[{"type":"array","items":{"type":"string"}},{"$ref":"#/definitions/IntrinsicFunction"}]}},"$schema":"http://json-schema.org/draft-07/schema#"}
